<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Mario R. Melchiori">
        <link rel="canonical" href="https://mrmelchi.github.io/Python_Practico/04_Classes_objects/01_Class/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>01_Class - Python Practico</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atelier-forest-light.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Python Practico</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#41-clases" class="nav-link">4.1 Clases</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#programacion-orientada-a-objetos-oo" class="nav-link">Programación Orientada a Objetos (OO)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#la-declaracion-class" class="nav-link">La declaración class</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#instancias" class="nav-link">Instancias</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#datos-de-instancia" class="nav-link">Datos de instancia</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#metodos-de-instancia" class="nav-link">Métodos de instancia</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#alcance-de-la-clase" class="nav-link">Alcance de la clase</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#ejercicios" class="nav-link">Ejercicios</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p><a href="../../Contents/">Contenido</a> | <a href="../../03_Program_organization/06_Design_discussion/">Anterior (3.6 Discusión sobre el diseño)</a> | <a href="../02_Inheritance/">Próximo (4.2 Herencia)</a></p>
<h1 id="41-clases">4.1 Clases</h1>
<p>Esta sección presenta la declaración de clase y la idea de crear nuevos objetos.</p>
<h2 id="programacion-orientada-a-objetos-oo">Programación Orientada a Objetos (OO)</h2>
<p>Una técnica de programación en la que el código se organiza como una colección de <em>objetos</em>.</p>
<p>Un <em>objeto</em> consta de:</p>
<ul>
<li>Datos. Atributos</li>
<li>Comportamiento. Métodos que son funciones aplicadas al objeto.</li>
</ul>
<p>Ya ha estado utilizando algo de OO durante este curso.</p>
<p>Por ejemplo, manipular una lista.</p>
<pre><code class="language-python">&gt;&gt;&gt; nums = [1, 2, 3]
&gt;&gt;&gt; nums.append(4) # Método
&gt;&gt;&gt; nums.insert(1,10) # Método
&gt;&gt;&gt; nums
[1, 10, 2, 3, 4] # Datos
&gt;&gt;&gt;
</code></pre>
<p><code>nums</code> es una <em>instancia</em> de una lista.</p>
<p>Los métodos (<code>append()</code> y <code>insert()</code>) se adjuntan a la instancia (<code>nums</code>).</p>
<h2 id="la-declaracion-class">La declaración <code>class</code></h2>
<p>Use la declaración <code>class</code> para definir un nuevo objeto.</p>
<pre><code class="language-python">class Player:
    def __init__(self, x, y):
        self.x = x
        self.y = y
        self.health = 100

    def move(self, dx, dy):
        self.x += dx
        self.y += dy

    def damage(self, pts):
        self.health -= pts
</code></pre>
<p>En pocas palabras, una clase es un conjunto de funciones que realizan varias operaciones en las llamadas <em>instancias</em>.</p>
<h2 id="instancias">Instancias</h2>
<p>Las instancias son los <em>objetos</em> reales que manipulas en tu programa.</p>
<p>Se crean llamando a la clase como una función.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = Player(2, 3)
&gt;&gt;&gt; b = Player(10, 20)
&gt;&gt;&gt;
</code></pre>
<p><code>a</code> y <code>b</code> son instancias de <code>Player</code>.</p>
<p><em>Enfatizar: La declaración de clase es solo la definición (no hace nada por sí misma). Similar a una definición de función.</em></p>
<h2 id="datos-de-instancia">Datos de instancia</h2>
<p>Cada instancia tiene sus propios datos locales.</p>
<pre><code class="language-python">&gt;&gt;&gt; a.x
2
&gt;&gt;&gt; b.x
10
</code></pre>
<p>Estos datos se inicializan mediante <code>__init__()</code>.</p>
<pre><code class="language-python">class Player:
    def __init__(self, x, y):
    # Cualquier valor almacenado en `self` son datos de instancia
        self.x = x
        self.y = y
        self.health = 100
</code></pre>
<p>No hay restricciones sobre la cantidad total o el tipo de atributos almacenados.</p>
<h2 id="metodos-de-instancia">Métodos de instancia</h2>
<p>Los métodos de instancia son funciones que se aplican a instancias de un objeto.</p>
<pre><code class="language-python">class Player:
    ...
    # `move` es un método
    def move(self, dx, dy):
        self.x += dx
        self.y += dy
</code></pre>
<p>El objeto en sí siempre se pasa como primer argumento.</p>
<pre><code class="language-python">&gt;&gt;&gt; a.move(1, 2)

# hace coincidir `a` con `self`
# hace coincidir `1` con `dx`
# hace coincidir `2` con `dy`
def move(self, dx, dy):
</code></pre>
<p>Por convención, la instancia se llama <code>self</code>. Sin embargo, el nombre real utilizado no es importante. El objeto siempre se pasa como primer argumento. Es simplemente el estilo de programación de Python llamar a este argumento <code>self</code>.</p>
<h2 id="alcance-de-la-clase">Alcance de la clase</h2>
<p>Las clases no definen un alcance de nombres.</p>
<pre><code class="language-python">class Player:
    ...
    def move(self, dx, dy):
        self.x += dx
        self.y += dy

    def left(self, amt):
        move(-amt, 0) # NO. Llama a una función `move` global
        self.move(-amt, 0) # SÍ. Llama al método `move` de arriba.
</code></pre>
<p>Si desea operar en una instancia, siempre debe hacer referencia a ella explícitamente (por ejemplo, <code>self</code>).</p>
<h2 id="ejercicios">Ejercicios</h2>
<p>A partir de este conjunto de ejercicios, comenzaremos a realizar una serie de cambios en el código existente de las secciones anteriores. Es fundamental que tenga una versión funcional del Ejercicio 3.18 para comenzar. Si no la tiene, trabaje a partir del código de solución que se encuentra en el directorio <code>Solutions/3_18</code>. Está bien copiarlo.</p>
<h3 id="ejercicio-41-objetos-como-estructuras-de-datos">Ejercicio 4.1: Objetos como estructuras de datos</h3>
<p>En las secciones 2 y 3, trabajamos con datos representados como tuplas y diccionarios. Por ejemplo, una cartera de acciones se podría representar como una tupla como esta:</p>
<pre><code class="language-python">s = ('GOOG',100,490.10)
</code></pre>
<p>o como un diccionario como este:</p>
<pre><code class="language-python">s = { 'name' : 'GOOG',
      'shares' : 100,
      'price' : 490.10
}
</code></pre>
<p>Incluso puede escribir funciones para manipular dichos datos. Por ejemplo:</p>
<pre><code class="language-python">def cost(s):
    return s['shares'] * s['price']
</code></pre>
<p>Sin embargo, a medida que su programa crezca, es posible que desee crear una mejor sensación de organización. Por lo tanto, otro enfoque para representar datos sería definir una clase. Cree un archivo llamado <code>stock.py</code> y defina una clase <code>Stock</code> que represente una única tenencia de acciones. Haga que las instancias de <code>Stock</code> tengan los atributos <code>name</code>, <code>shares</code> y <code>price</code>. Por ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; import stock
&gt;&gt;&gt; a = stock.Stock('GOOG',100,490.10)
&gt;&gt;&gt; a.name
'GOOG'
&gt;&gt;&gt; a.shares
100
&gt;&gt;&gt; a.price
490.1
&gt;&gt;&gt;
</code></pre>
<p>Cree algunos objetos <code>Stock</code> más y manipúlelos. Por ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; b = stock.Stock('AAPL', 50, 122.34)
&gt;&gt;&gt; c = stock.Stock('IBM', 75, 91.75)
&gt;&gt;&gt; b.shares * b.price
6117.0
&gt;&gt;&gt; c.shares * c.price
6881.25
&gt;&gt;&gt; stocks = [a, b, c]
&gt;&gt;&gt; stocks
[&lt;stock.Objeto Stock en 0x37d0b0&gt;, &lt;stock.Objeto Stock en 0x37d110&gt;, &lt;stock.Objeto Stock en 0x37d050&gt;]
&gt;&gt;&gt; for s in stocks:
        print(f'{s.name:&gt;10s} {s.shares:&gt;10d} {s.price:&gt;10.2f}')

... mira el resultado...
&gt;&gt;&gt;
</code></pre>
<p>Una cosa que hay que destacar aquí es que la clase <code>Stock</code> actúa como una fábrica para crear instancias de objetos. Básicamente, la llamas como una función y crea un nuevo objeto para ti. Además, hay que destacar que cada objeto es distinto: cada uno tiene sus propios datos que están separados de otros objetos que se han creado.</p>
<p>Un objeto definido por una clase es algo similar a un diccionario, solo que con una sintaxis ligeramente diferente. Por ejemplo, en lugar de escribir <code>s['nombre']</code> o <code>s['precio']</code>, ahora escribes <code>s.nombre</code> y <code>s.precio</code>.</p>
<h3 id="ejercicio-42-agregar-algunos-metodos">Ejercicio 4.2: Agregar algunos métodos</h3>
<p>Con las clases, puedes adjuntar funciones a tus objetos. Estas se conocen como métodos y son funciones que operan sobre los datos almacenados dentro de un objeto. Agrega un método <code>cost()</code> y <code>sell()</code> a tu objeto <code>Stock</code>. Deberían funcionar así:</p>
<pre><code class="language-python">&gt;&gt;&gt; import stock
&gt;&gt;&gt; s = stock.Stock('GOOG', 100, 490.10)
&gt;&gt;&gt; s.cost()
49010.0
&gt;&gt;&gt; s.shares
100
&gt;&gt;&gt; s.sell(25)
&gt;&gt;&gt; s.shares
75
&gt;&gt;&gt; s.cost()
36757.5
&gt;&gt;&gt;
</code></pre>
<h3 id="ejercicio-43-creacion-de-una-lista-de-instancias">Ejercicio 4.3: Creación de una lista de instancias</h3>
<p>Pruebe estos pasos para crear una lista de instancias de <code>Stock</code> a partir de una lista de diccionarios. Luego, calcula el costo total:</p>
<pre><code class="language-python">&gt;&gt;&gt; import fileparse
&gt;&gt;&gt; with open('Data/portfolio.csv') as lines:
...     portdicts = fileparse.parse_csv(lines, select=['name','shares','price'], types=[str,int,float])
...
&gt;&gt;&gt; portfolio = [ stock.Stock(d['name'], d['shares'], d['price']) for d in portdicts]
&gt;&gt;&gt; portfolio
[&lt;stock.Objeto Stock en 0x10c9e2128&gt;, &lt;stock.Objeto Stock en 0x10c9e2048&gt;, &lt;stock.Objeto Stock en 0x10c9e2080&gt;,
&lt;stock.Objeto Stock en 0x10c9e25f8&gt;, &lt;stock.Objeto Stock en 0x10c9e2630&gt;, &lt;stock.Stock object at 0x10ca6f748&gt;,
&lt;stock.Stock object at 0x10ca6f7b8&gt;]
&gt;&gt;&gt; sum([s.cost() for s in portfolio])
44671.15
&gt;&gt;&gt;
</code></pre>
<h3 id="ejercicio-44-utilizando-tu-clase">Ejercicio 4.4: Utilizando tu clase</h3>
<p>Modifique la función <code>read_portfolio()</code> en el programa <code>report.py</code> para que lea un portfolio en una lista de instancias de <code>Stock</code> como se muestra en el Ejercicio 4.3. Una vez que haya hecho eso, corrija todo el código en <code>report.py</code> y <code>pcost.py</code> para que funcione con instancias <code>Stock</code> en lugar de diccionarios.</p>
<p>Sugerencia: No debería tener que hacer cambios importantes en el código. Principalmente cambiará el acceso al diccionario como <code>s['shares']</code> a <code>s.shares</code>.</p>
<p>Deberías poder ejecutar tus funciones de la misma manera que antes:</p>
<pre><code class="language-python">&gt;&gt;&gt; import pcost
&gt;&gt;&gt; pcost.portfolio_cost('Data/portfolio.csv')
44671.15
&gt;&gt;&gt; import report
&gt;&gt;&gt; report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')
      Name     Shares      Price     Change
---------- ---------- ---------- ----------
        AA        100       9.22     -22.98
       IBM         50     106.28      15.18
       CAT        150      35.46     -47.98
      MSFT        200      20.89     -30.34
        GE         95      13.48     -26.89
      MSFT         50      20.89     -44.21
       IBM        100     106.28      35.84
&gt;&gt;&gt;
</code></pre>
<p><a href="../../Contents/">Contenido</a> | <a href="../../03_Program_organization/06_Design_discussion/">Anterior (3.6 Discusión sobre el diseño)</a> | <a href="../02_Inheritance/">Próximo (4.2 Herencia)</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
