<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Mario R. Melchiori">
        <link rel="canonical" href="https://mrmelchi.github.io/Python_Practico/07_Advanced_Topics/02_Anonymous_function/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>02_Anonymous_function - Python Practico</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Python Practico</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#72-funciones-anonimas-y-lambda" class="nav-link">7.2 Funciones anónimas y Lambda</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#revision-del-ordenamiento-de-listas" class="nav-link">Revisión del ordenamiento de listas</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#funciones-de-devolucion-de-llamada" class="nav-link">Funciones de devolución de llamada</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#lambda-funciones-anonimas" class="nav-link">Lambda: Funciones anónimas</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#uso-de-lambda" class="nav-link">Uso de lambda</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#ejercicios" class="nav-link">Ejercicios</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p><a href="../../Contents/">Contenido</a> | <a href="../01_Variable_arguments/">Anterior (7.1 Funciones con argumentos variables)</a> | <a href="../03_Returning_functions/">Próximo (7.3 Retornando Funciones y clousures)</a></p>
<h1 id="72-funciones-anonimas-y-lambda">7.2 Funciones anónimas y Lambda</h1>
<h2 id="revision-del-ordenamiento-de-listas">Revisión del ordenamiento de listas</h2>
<p>Las listas se pueden ordenar <em>in situ</em>. Utilizando el método <code>sort</code>.</p>
<pre><code class="language-python">s = [10,1,7,3]
s.sort() # s = [1,3,7,10]
</code></pre>
<p>Puede ordenar en orden inverso.</p>
<pre><code class="language-python">s = [10,1,7,3]
s.sort(reverse=True) # s = [10,7,3,1]
</code></pre>
<p>Parece bastante simple. Sin embargo, ¿cómo ordenamos una lista de diccionarios?</p>
<pre><code class="language-python">[{'name': 'AA', 'price': 32,2, 'shares': 100},
{'name': 'IBM', 'price': 91,1, 'shares': 50},
{'name': 'CAT', 'price': 83,44, 'shares': 150},
{'name': 'MSFT', 'price': 51,23, 'shares': 200},
{'name': 'GE', 'price': 40,37, 'shares': 95},
{'name': 'MSFT', 'price': 65,1, 'shares': 50},
{'name': 'IBM', 'price': 70,44, 'shares': 100}]
</code></pre>
<p>¿Con qué criterios?</p>
<p>Puede guiar la clasificación mediante una <em>función clave</em>. La <em>función clave</em> es una función que recibe el diccionario y devuelve el valor de interés para la clasificación.</p>
<pre><code class="language-python">def stock_name(s):
    return s['name']

portfolio.sort(key=stock_name)
</code></pre>
<p>A continuación se muestra el resultado.</p>
<pre><code class="language-python"># Verifica cómo se ordenan los diccionarios por la clave `name`
[
{'name': 'AA', 'price': 32.2, 'shares': 100},
{'name': 'CAT', 'price': 83.44, 'shares': 150},
{'name': 'GE', 'price': 40.37, 'shares': 95},
{'name': 'IBM', 'price': 91.1, 'shares': 50},
{'name': 'IBM', 'price': 70.44, 'shares': 100},
{'name': 'MSFT', 'price': 51.23, 'shares': 200},
{'name': 'MSFT', 'price': 65.1, 'shares': 50}
]
</code></pre>
<h2 id="funciones-de-devolucion-de-llamada">Funciones de devolución de llamada</h2>
<p>En el ejemplo anterior, la función clave es un ejemplo de una función de devolución de llamada. El método <code>sort()</code> "devuelve la llamada" a una función que usted proporciona. Las funciones de devolución de llamada suelen ser funciones cortas de una sola línea que solo se utilizan para esa operación. Los programadores suelen pedir un atajo para especificar este procesamiento adicional.</p>
<h2 id="lambda-funciones-anonimas">Lambda: Funciones anónimas</h2>
<p>Utilice una lambda en lugar de crear la función. En nuestro ejemplo de ordenación anterior.</p>
<pre><code class="language-python">portfolio.sort(key=lambda s: s['name'])
</code></pre>
<p>Esto crea una función <em>sin nombre</em> que evalúa una <em>única</em> expresión. El código anterior es mucho más corto que el código inicial.</p>
<pre><code class="language-python">def stock_name(s):
    return s['name']

portfolio.sort(key=stock_name)

# vs lambda
portfolio.sort(key=lambda s: s['name'])
</code></pre>
<h2 id="uso-de-lambda">Uso de lambda</h2>
<ul>
<li>Lambda está muy restringida.</li>
<li>Solo se permite una única expresión.</li>
<li>No se permiten declaraciones como <code>if</code>, <code>while</code>, etc.</li>
<li>El uso más común es con funciones como <code>sort()</code>.</li>
</ul>
<h2 id="ejercicios">Ejercicios</h2>
<p>Lea algunos datos de una cartera de acciones y conviértalos en una lista:</p>
<pre><code class="language-python">&gt;&gt;&gt; import report
&gt;&gt;&gt; portfolio = list(report.read_portfolio('Data/portfolio.csv'))
&gt;&gt;&gt; for s in portfolio:
        print(s)

Stock('AA', 100, 32.2)
Stock('IBM', 50, 91.1)
Stock('CAT', 150, 83.44)
Stock('MSFT', 200, 51.23)
Stock('GE', 95, 40.37)
Stock('MSFT', 50, 65.1)
Stock('IBM', 100, 70.44)
&gt;&gt;&gt;
</code></pre>
<h3 id="ejercicio-75-ordenar-por-un-campo">Ejercicio 7.5: Ordenar por un campo</h3>
<p>Pruebe las siguientes instrucciones que ordenan la cartera datos ordenados alfabéticamente por nombre de la acción.</p>
<pre><code class="language-python">&gt;&gt;&gt; def stock_name(s):
        return s.name

&gt;&gt;&gt; portfolio.sort(key=stock_name)
&gt;&gt;&gt; for s in portfolio:
        print(s)

... inspeccionar el resultado...
&gt;&gt;&gt;
</code></pre>
<p>En esta parte, la función <code>stock_name()</code> extrae el nombre de una acción de una sola entrada en la lista <code>portfolio</code>. <code>sort()</code> utiliza el resultado de esta función para hacer la comparación.</p>
<h3 id="ejercicio-76-ordenar-por-un-campo-con-lambda">Ejercicio 7.6: Ordenar por un campo con lambda</h3>
<p>Intenta ordenar la cartera según la cantidad de acciones usando una expresión <code>lambda</code>:</p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio.sort(key=lambda s: s.shares)
&gt;&gt;&gt; for s in portfolio:
        print(s)

... inspeccionar el resultado ...
&gt;&gt;&gt;
</code></pre>
<p>Intenta ordenar la cartera según el precio de cada acción</p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio.sort(key=lambda s: s.price)
&gt;&gt;&gt; for s in portfolio:
        print(s)

... inspeccionar el resultado ...
&gt;&gt;&gt;
</code></pre>
<p>Nota: <code>lambda</code> es un atajo útil porque te permite definir una función de procesamiento especial directamente en la llamada a <code>sort()</code> en lugar de tener que definir una función separada primero.</p>
<p><a href="../../Contents/">Contenido</a> | <a href="../01_Variable_arguments/">Anterior (7.1 Funciones con argumentos variables)</a> | <a href="../03_Returning_functions/">Próximo (7.3 Retornando Funciones y clousures)</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
