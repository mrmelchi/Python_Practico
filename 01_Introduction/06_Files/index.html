<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Mario R. Melchiori">
        <link rel="canonical" href="https://mrmelchi.github.io/Python_Practico/01_Introduction/06_Files/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>06_Files - Python Practico</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Python Practico</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#16-gestion-de-archivos" class="nav-link">1.6 Gestión de archivos</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#entrada-y-salida-de-archivos" class="nav-link">Entrada y salida de archivos</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#modismos-comunes-para-leer-datos-de-archivos" class="nav-link">Modismos comunes para leer datos de archivos</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#modismos-comunes-para-escribir-en-un-archivo" class="nav-link">Modismos comunes para escribir en un archivo</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#ejercicios" class="nav-link">Ejercicios</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#comentario-no-deberiamos-usar-pandas-para-esto" class="nav-link">Comentario: ¿No deberíamos usar Pandas para esto?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p><a href="../../Contents/">Contents</a> | <a href="../05_Lists/">Previous (1.5 Lists)</a> | <a href="../07_Functions/">Próximo (1.7 Functions)</a></p>
<h1 id="16-gestion-de-archivos">1.6 Gestión de archivos</h1>
<p>La mayoría de los programas necesitan leer la entrada desde algún lugar. Esta sección analiza el acceso a archivos.</p>
<h2 id="entrada-y-salida-de-archivos">Entrada y salida de archivos</h2>
<p>Abrir un archivo.</p>
<pre><code class="language-python">f = open('foo.txt', 'rt')     # Abrir para lectura (r) (texto) (t)
g = open('bar.txt', 'wt')     # Abrir para escritura (w) (texto) (t)
</code></pre>
<p>Leer todos los datos.</p>
<pre><code class="language-python">data = f.read()

# Leer solo hasta 'maxbytes' bytes
data = f.read([maxbytes])
</code></pre>
<p>Escribe algún texto.</p>
<pre><code class="language-python">g.write('algún texto')
</code></pre>
<p>Ciérralo cuando hayas terminado.</p>
<pre><code class="language-python">f.close()
g.close()
</code></pre>
<p>Los archivos deben estar correctamente cerrados y es un paso fácil de olvidar. Por lo tanto, el enfoque preferido es utilizar la declaración 'with' de esta manera.</p>
<pre><code class="language-python">with open(filename, 'rt') as file:
    # Utilice el archivo `file`
    ...
    # No es necesario cerrar explícitamente
...statements
</code></pre>
<p>Esto cierra automáticamente el archivo cuando el control abandona el bloque de código sangrado.</p>
<h2 id="modismos-comunes-para-leer-datos-de-archivos">Modismos comunes para leer datos de archivos</h2>
<p>Leer un archivo completo de una sola vez como una cadena.</p>
<pre><code class="language-python">with open('foo.txt', 'rt') as file:
    data = file.read()
    # `data` es una cadena con todo el texto en `foo.txt`
</code></pre>
<p>Leer un archivo línea por línea iterando.</p>
<pre><code class="language-python">with open(filename, 'rt') as file:
    for line in file:
        # Procesar la línea
</code></pre>
<h2 id="modismos-comunes-para-escribir-en-un-archivo">Modismos comunes para escribir en un archivo</h2>
<p>Escribe datos de cadena.</p>
<pre><code class="language-python">with open('outfile', 'wt') as out:
    out.write('Hola mundo\n')
    ...
</code></pre>
<p>Redirigir la función de impresión.</p>
<pre><code class="language-python">with open('outfile', 'wt') as out:
    print('Hola mundo', file=out)
    ...
</code></pre>
<h2 id="ejercicios">Ejercicios</h2>
<p>Estos ejercicios dependen del archivo <code>Data/portfolio.csv</code>. El archivo contiene una lista de líneas con información sobre una cartera de acciones. Se supone que está trabajando en el directorio <code>practical-python/Work/</code>. Si no está seguro, puede averiguar dónde cree Python que se está ejecutando haciendo esto:</p>
<pre><code class="language-python">&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getcwd()
'/Users/beazley/practical-python/Work' # La salida varía
&gt;&gt;&gt;
</code></pre>
<h3 id="ejercicio-126-preliminares-del-archivo">Ejercicio 1.26: Preliminares del archivo</h3>
<p>Primero, intente leer el archivo completo de una sola vez como una gran cadena:</p>
<pre><code class="language-python">&gt;&gt;&gt; with open('Data/portfolio.csv', 'rt') as f:
        data = f.read()

&gt;&gt;&gt; data
'name,shares,price\n&quot;AA&quot;,100,32.20\n&quot;IBM&quot;,50,91.10\n&quot;CAT&quot;,150,83.44\n&quot;MSFT&quot;,200,51.23\n&quot;GE&quot;,95,40.37\n&quot;MSFT&quot;,50,65.10\n&quot;IBM&quot;,100,70.44\n'
&gt;&gt;&gt; print(data)
name,shares,price
&quot;AA&quot;,100,32.20
&quot;IBM&quot;,50,91.10
&quot;CAT&quot;,150,83.44
&quot;MSFT&quot;,200,51.23
&quot;GE&quot;,95,40.37
&quot;MSFT&quot;,50,65.10
&quot;IBM&quot;,100,70.44
&gt;&gt;&gt;
</code></pre>
<p>En el ejemplo anterior, debe tenerse en cuenta que Python tiene dos modos de salida. En el primer modo, donde escribe <code>data</code> en modo interactivo, Python le muestra la representación de la cadena sin procesar, incluidas comillas y códigos de escape. Cuando escribe <code>print(data)</code>, obtiene la salida formateada real de la cadena.</p>
<p>Aunque leer un archivo de una sola vez es sencillo, a menudo no es la forma más adecuada de hacerlo, especialmente si el archivo es enorme o si contiene líneas de texto que desea manejar de a una por vez.</p>
<p>Para leer un archivo línea por línea, utilice un bucle for como este:</p>
<pre><code class="language-python">&gt;&gt;&gt; with open('Data/portfolio.csv', 'rt') as f:
        for line in f:
            print(line, end='')

name,shares,price
&quot;AA&quot;,100,32.20
&quot;IBM&quot;,50,91.10
...
&gt;&gt;&gt;
</code></pre>
<p>Cuando se utiliza este código, las líneas se leen hasta llegar al final del archivo, momento en el que el bucle se detiene.</p>
<p>En ciertas ocasiones, es posible que desees leer o omitir manualmente una <em>sola</em> línea de texto (por ejemplo, tal vez desees omitir la primera línea de los encabezados de columna).</p>
<pre><code class="language-python">&gt;&gt;&gt; f = open('Data/portfolio.csv', 'rt')
&gt;&gt;&gt; headers = next(f)
&gt;&gt;&gt; headers
'name,shares,price\n'
&gt;&gt;&gt; for line in f:
    print(line, end='')

&quot;AA&quot;,100,32.20
&quot;IBM&quot;,50,91.10
...
&gt;&gt;&gt; f.close()
&gt;&gt;&gt;
</code></pre>
<p><code>next()</code> devuelve la siguiente línea de texto en el archivo. Si lo llamaras repetidamente obtendrías líneas sucesivas. Sin embargo, para que lo sepas, el bucle for ya utiliza next() para obtener sus datos. Por lo tanto, normalmente no lo llamarías directamente a menos que intentes omitir o leer explícitamente una sola línea como se muestra.</p>
<p>Una vez que esté leyendo líneas de un archivo, puede comenzar a realizar más procesamiento, como dividirlo. Por ejemplo, prueba esto:</p>
<pre><code class="language-python">&gt;&gt;&gt; f = open('Data/portfolio.csv', 'rt')
&gt;&gt;&gt; headers = next(f).split(',')
&gt;&gt;&gt; headers
['name', 'shares', 'price\n']
&gt;&gt;&gt; for line in f:
    row = line.split(',')
    print(row)

['&quot;AA&quot;', '100', '32.20\n']
['&quot;IBM&quot;', '50', '91.10\n']
...
&gt;&gt;&gt; f.close()
</code></pre>
<p><em>Nota: En estos ejemplos, se llama explícitamente a <code>f.close()</code> porque no se está utilizando la declaración <code>with</code>.</em></p>
<h3 id="ejercicio-127-lectura-de-un-archivo-de-datos">Ejercicio 1.27: Lectura de un archivo de datos</h3>
<p>Ahora que sabes cómo leer un archivo, escribamos un programa para realizar un cálculo simple.</p>
<p>Las columnas en <code>portfolio.csv</code> corresponden al nombre de la acción, el número de acciones y el precio de compra de una sola participación en acciones. Escriba un programa llamado <code>pcost.py</code> que abra este archivo, lea todas las líneas y calcule cuánto cuesta comprar todas las acciones de la cartera.</p>
<p><em>Sugerencia: para convertir una cadena en un entero, utilice <code>int(s)</code>. Para convertir una cadena en un punto flotante, utilice <code>float(s)</code>.</em></p>
<p>Su programa debería imprimir una salida como la siguiente:</p>
<pre><code class="language-bash">Total cost 44671.15
</code></pre>
<h3 id="ejercicio-128-otros-tipos-de-archivos">Ejercicio 1.28: Otros tipos de "archivos"</h3>
<p>¿Qué sucede si desea leer un archivo que no es de texto, como un archivo de datos comprimido con gzip? La función incorporada <code>open()</code> no te ayudará aquí, pero Python tiene un módulo de biblioteca <code>gzip</code> que puede leer archivos comprimidos gzip.</p>
<p>Pruébalo:</p>
<pre><code class="language-python">&gt;&gt;&gt; import gzip
&gt;&gt;&gt; with gzip.open('Data/portfolio.csv.gz', 'rt') as f:
    for line in f:
        print(line, end='')

... look at the output ...
&gt;&gt;&gt;
</code></pre>
<p>Nota: Incluir el modo de archivo <code>"rt"</code> es fundamental aquí. Si olvidas esto, obtendrás cadenas de bytes en lugar de cadenas de texto normales.</p>
<h2 id="comentario-no-deberiamos-usar-pandas-para-esto">Comentario: ¿No deberíamos usar Pandas para esto?</h2>
<p>Los científicos de datos se apresuran a señalar que bibliotecas como <a href="https://pandas.pydata.org">Pandas</a> ya tienen una función para leer archivos CSV. Esto es cierto y funciona bastante bien. Sin embargo, este no es un curso para aprender Pandas. La lectura de archivos es un problema más general que los detalles específicos de los archivos CSV. La razón principal por la que trabajamos con un archivo CSV es que es un formato familiar para la mayoría de los codificadores y es relativamente fácil trabajar con él directamente, lo que ilustra muchas características de Python en el proceso. Así que, sin duda, utiliza Pandas cuando vuelvas a trabajar. Sin embargo, durante el resto de este curso nos quedaremos con la funcionalidad estándar de Python.</p>
<p><a href="../../Contents/">Contents</a> | <a href="../05_Lists/">Previous (1.5 Lists)</a> | <a href="../07_Functions/">Próximo (1.7 Functions)</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
