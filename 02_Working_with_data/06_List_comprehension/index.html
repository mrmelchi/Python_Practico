
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Mario R. Melchiori">
      
      
        <link rel="canonical" href="https://mrmelchi.github.io/Python_Practico/02_Working_with_data/06_List_comprehension/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>06_List_comprehension - Python Practico</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#26-listas-por-comprension" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Python Practico" class="md-header__button md-logo" aria-label="Python Practico" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python Practico
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              06_List_comprehension
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Python Practico" class="md-nav__button md-logo" aria-label="Python Practico" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Python Practico
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creando-nuevas-listas" class="md-nav__link">
    <span class="md-ellipsis">
      Creando nuevas listas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtrado" class="md-nav__link">
    <span class="md-ellipsis">
      Filtrado
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#casos-de-uso" class="md-nav__link">
    <span class="md-ellipsis">
      Casos de uso
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sintaxis-general" class="md-nav__link">
    <span class="md-ellipsis">
      Sintaxis general
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#digresion-historica" class="md-nav__link">
    <span class="md-ellipsis">
      Digresión histórica
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicios
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ejercicios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejercicio-219-listas-por-comprension" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 2.19: Listas por Comprensión
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-220-reducciones-de-secuencias" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 2.20: Reducciones de secuencias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-221-consultas-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 2.21: Consultas de datos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-222-extraccion-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 2.22: Extracción de datos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-223-extraccion-de-datos-de-archivos-csv" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 2.23: Extracción de datos de archivos CSV
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comentario" class="md-nav__link">
    <span class="md-ellipsis">
      Comentario
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<p><a href="../../Contents/">Contenido</a> | <a href="../05_Collections/">Anterior (2.5
Collections)</a> | <a href="../07_Objects/">Próximo (2.7
Objetos)</a></p>
<h1 id="26-listas-por-comprension">2.6 Listas por comprensión</h1>
<p>Una tarea común es procesar elementos de una lista. Esta sección
presenta las listas por comprensión, una herramienta poderosa para hacer
precisamente eso.</p>
<h2 id="creando-nuevas-listas">Creando nuevas listas</h2>
<p>Una lista por comprensión crea una nueva lista aplicando una operación a
cada elemento de una secuencia.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = [1, 2, 3, 4, 5]
&gt;&gt;&gt; b = [2*x for x in a ]
&gt;&gt;&gt; b
[2, 4, 6, 8, 10]
&gt;&gt;&gt;
</code></pre>
<p>Otro ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; names = ['Elwood', 'Jake']
&gt;&gt;&gt; a = [name.lower() for name in names]
&gt;&gt;&gt; a
['elwood', 'jake']
&gt;&gt;&gt;
</code></pre>
<p>La sintaxis general es:
<code>[ &lt;expresión&gt; for &lt;nombre_de_variable&gt; in &lt;secuencia&gt; ]</code>.</p>
<h2 id="filtrado">Filtrado</h2>
<p>También puedes filtrar durante la listas por comprensión.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = [1, -5, 4, 2, -2, 10]
&gt;&gt;&gt; b = [2*x for x in a if x &gt; 0 ]
&gt;&gt;&gt; b
[2, 8, 4, 20]
&gt;&gt;&gt;
</code></pre>
<h2 id="casos-de-uso">Casos de uso</h2>
<p>Las listas por comprensión son muy útiles. Por ejemplo, puede recopilar
valores de un diccionario específico:</p>
<pre><code class="language-python">stocknames = [s['name'] for s in stocks]
</code></pre>
<p>Puede realizar consultas similares a bases de datos en secuencias.</p>
<pre><code class="language-python">a = [s for s in stocks if s['price'] &gt; 100 and s['shares'] &gt; 50 ]
</code></pre>
<p>También puedes combinar una lista por comprensión con una reducción de
secuencia:</p>
<pre><code class="language-python">cost = sum([s['shares']*s['price'] for s in stocks])
</code></pre>
<h2 id="sintaxis-general">Sintaxis general</h2>
<pre><code class="language-code">[ &lt;expresión&gt; for &lt;nombre_de_variable&gt; in &lt;secuencia&gt; if &lt;condición&gt;]
</code></pre>
<p>lo que significa:</p>
<pre><code class="language-python">result = []
for nombre_de_variable in secuencia:
    if condición:
        result.append(expresión)
</code></pre>
<h2 id="digresion-historica">Digresión histórica</h2>
<p>Las listas por comprensión provienen de las matemáticas (notación de
construcción de conjuntos).</p>
<pre><code class="language-code">a = [ x * x for x in s if x &gt; 0 ] # Python

a = { x^2 | x ∈ s, x &gt; 0 }         # Matemática
</code></pre>
<p>También está implementado en varios otros lenguajes. Aunque la mayoría
de los programadores probablemente no estén pensando en sus clases de
matemáticas. No obstante, está bien verlo como un interesante atajo para
crear listas.</p>
<h2 id="ejercicios">Ejercicios</h2>
<p>Comience ejecutando su programa <code>report.py</code> para que tenga la Cartera de
acciones cargadas en el modo interactivo.</p>
<pre><code class="language-bash">bash % python -i report.py
</code></pre>
<p>Ahora, en modo interactivo de Python, escriba instrucciones para
realizar la operaciones que se describen a continuación. Estas
operaciones realizan varios tipos de reducciones de datos,
transformaciones y consultas sobre los datos de la cartera.</p>
<h3 id="ejercicio-219-listas-por-comprension">Ejercicio 2.19: Listas por Comprensión</h3>
<p>Pruebe algunas listas por comprensión simples solo para familiarizarse
con la sintaxis.</p>
<pre><code class="language-python">&gt;&gt;&gt; nums = [1,2,3,4]
&gt;&gt;&gt; squares = [ x * x for x in nums ]
&gt;&gt;&gt; squares
[1, 4, 9, 16]
&gt;&gt;&gt; twice = [ 2 * x for x in nums if x &gt; 2 ]
&gt;&gt;&gt; twice
[6, 8]
&gt;&gt;&gt;
</code></pre>
<p>Observe cómo las listas por comprensión crean una nueva lista con los
datos adecuadamente transformados o filtrados.</p>
<h3 id="ejercicio-220-reducciones-de-secuencias">Ejercicio 2.20: Reducciones de secuencias</h3>
<p>Calcule el costo total de la cartera utilizando una única declaración de
Python.</p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')
&gt;&gt;&gt; cost = sum([ s['shares'] * s['price'] for s in portfolio ])
&gt;&gt;&gt; cost
44671.15
&gt;&gt;&gt;
</code></pre>
<p>Después de haber hecho esto, muestra cómo puedes calcular el valor
actual. de la cartera mediante un único enunciado.</p>
<pre><code class="language-python">&gt;&gt;&gt; value = sum([ s['shares'] * prices[s['name']] for s in portfolio ])
&gt;&gt;&gt; value
28686.1
&gt;&gt;&gt;
</code></pre>
<p>Ambas operaciones anteriores son un ejemplo de reducción de mapa. Las
listas por comprensión consisten en mapear una operación a lo largo de
la lista.</p>
<pre><code class="language-python">&gt;&gt;&gt; [ s['shares'] * s['price'] for s in portfolio ]
[3220.0000000000005, 4555.0, 12516.0, 10246.0, 3835.1499999999996, 3254.9999999999995, 7044.0]
&gt;&gt;&gt;
</code></pre>
<p>La función <code>sum()</code> realiza entonces una reducción en el resultado:</p>
<pre><code class="language-python">&gt;&gt;&gt; sum(_)
44671.15
&gt;&gt;&gt;
</code></pre>
<p>Con este conocimiento, ahora estás listo para lanzar una empresa
emergente de big data.</p>
<h3 id="ejercicio-221-consultas-de-datos">Ejercicio 2.21: Consultas de datos</h3>
<p>Pruebe los siguientes ejemplos de varias consultas de datos.</p>
<p>En primer lugar, una lista de todas las tenencias de cartera con más de
100 acciones.</p>
<pre><code class="language-python">&gt;&gt;&gt; more100 = [ s for s in portfolio if s['shares'] &gt; 100 ]
&gt;&gt;&gt; more100
[{'price': 83.44, 'name': 'CAT', 'shares': 150}, {'price': 51.23, 'name': 'MSFT', 'shares': 200}]
&gt;&gt;&gt;
</code></pre>
<p>Todas las tenencias de cartera de acciones de MSFT e IBM.</p>
<pre><code class="language-python">&gt;&gt;&gt; msftibm = [ s for s in portfolio if s['name'] in {'MSFT','IBM'} ]
&gt;&gt;&gt; msftibm
[{'price': 91.1, 'name': 'IBM', 'shares': 50}, {'price': 51.23, 'name': 'MSFT', 'shares': 200},
  {'price': 65.1, 'name': 'MSFT', 'shares': 50}, {'price': 70.44, 'name': 'IBM', 'shares': 100}]
&gt;&gt;&gt;
</code></pre>
<p>Una lista de todas las tenencias de acciones que cuestan más de $10000.</p>
<pre><code class="language-python">&gt;&gt;&gt; cost10k = [ s for s in portfolio if s['shares'] * s['price'] &gt; 10000 ]
&gt;&gt;&gt; cost10k
[{'price': 83.44, 'name': 'CAT', 'shares': 150}, {'price': 51.23, 'name': 'MSFT', 'shares': 200}]
&gt;&gt;&gt;
</code></pre>
<h3 id="ejercicio-222-extraccion-de-datos">Ejercicio 2.22: Extracción de datos</h3>
<p>Muestra cómo podrías construir una lista de tuplas <code>(name, shares)</code>
donde <code>name</code> y <code>shares</code> se toman de <code>portfolio</code>.</p>
<pre><code class="language-python">&gt;&gt;&gt; name_shares =[ (s['name'], s['shares']) for s in portfolio ]
&gt;&gt;&gt; name_shares
[('AA', 100), ('IBM', 50), ('CAT', 150), ('MSFT', 200), ('GE', 95), ('MSFT', 50), ('IBM', 100)]
&gt;&gt;&gt;
</code></pre>
<p>Si cambias los corchetes (<code>[</code>,<code>]</code>) por llaves (<code>{</code>, <code>}</code>), obtienes algo
conocido como comprensión de conjunto. Esto le proporciona valores
únicos o distintos.</p>
<p>Por ejemplo, esto determina el conjunto de nombres de acciones únicos
que aparecen en <code>portafolio</code>:</p>
<pre><code class="language-python">&gt;&gt;&gt; names = { s['name'] for s in portfolio }
&gt;&gt;&gt; names
{ 'AA', 'GE', 'IBM', 'MSFT', 'CAT' }
&gt;&gt;&gt;
</code></pre>
<p>Si especifica pares <code>clave:valor</code>, puede crear un diccionario. Por
ejemplo, crear un diccionario que asigne el nombre de una acción al
número total de acciones que posee.</p>
<pre><code class="language-python">&gt;&gt;&gt; holdings = { name: 0 for name in names }
&gt;&gt;&gt; holdings
{'AA': 0, 'GE': 0, 'IBM': 0, 'MSFT': 0, 'CAT': 0}
&gt;&gt;&gt;
</code></pre>
<p>Esta última característica se conoce como <strong>diccionario por
comprensión</strong>. Vamos a tabular:</p>
<pre><code class="language-python">&gt;&gt;&gt; for s in portfolio:
        holdings[s['name']] += s['shares']

&gt;&gt;&gt; holdings
{ 'AA': 100, 'GE': 95, 'IBM': 150, 'MSFT':250, 'CAT': 150 }
&gt;&gt;&gt;
</code></pre>
<p>Pruebe este ejemplo que filtra el diccionario de <code>prices</code> solo a
aquellos nombres que aparecen en la cartera:</p>
<pre><code class="language-python">&gt;&gt;&gt; names
&gt;&gt;&gt; portfolio_prices = { name: prices[name] for name in names }
&gt;&gt;&gt; portfolio_prices
{'AA': 9.22, 'GE': 13.48, 'IBM': 106.28, 'MSFT': 20.89, 'CAT': 35.46}
&gt;&gt;&gt;
</code></pre>
<h3 id="ejercicio-223-extraccion-de-datos-de-archivos-csv">Ejercicio 2.23: Extracción de datos de archivos CSV</h3>
<p>Saber cómo utilizar diversas combinaciones de listas, conjuntos y
diccionarios puede ser útil en diversas formas de procesamiento de
datos. A continuación se muestra un ejemplo que muestra cómo extraer
columnas seleccionadas de un archivo CSV.</p>
<p>Primero, lea una fila de información de encabezado de un archivo CSV:</p>
<pre><code class="language-python">&gt;&gt;&gt; import csv
&gt;&gt;&gt; f = open('Data/portfoliodate.csv')
&gt;&gt;&gt; rows = csv.reader(f)
&gt;&gt;&gt; headers = next(rows)
&gt;&gt;&gt; headers
['name', 'date', 'time', 'shares', 'price']
&gt;&gt;&gt;
</code></pre>
<p>A continuación, defina una variable que enumere las columnas que
realmente le interesan:</p>
<pre><code class="language-python">&gt;&gt;&gt; select = ['name', 'shares', 'price']
&gt;&gt;&gt;
</code></pre>
<p>Ahora, ubique los índices de las columnas anteriores en el archivo CSV
de origen:</p>
<pre><code class="language-python">&gt;&gt;&gt; indices = [ headers.index(colname) for colname in select ]
&gt;&gt;&gt; indices
[0, 3, 4]
&gt;&gt;&gt;
</code></pre>
<p>Por último, lea una fila de datos y conviértala en un diccionario
utilizando un diccionario por comprensión:</p>
<pre><code class="language-python">&gt;&gt;&gt; row = next(rows)
&gt;&gt;&gt; record = { colname: row[index] for colname, index in zip(select, indices) }   # dict-comprehension
&gt;&gt;&gt; record
{'price': '32.20', 'name': 'AA', 'shares': '100'}
&gt;&gt;&gt;
</code></pre>
<p>Si te sientes cómodo con lo que acaba de pasar, lee el resto del
archivo:</p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio = [ { colname: row[index] for colname, index in zip(select, indices) } for row in rows ]
&gt;&gt;&gt; portfolio
[{'price': '91.10', 'name': 'IBM', 'shares': '50'}, {'price': '83.44', 'name': 'CAT', 'shares': '150'},
  {'price': '51.23', 'name': 'MSFT', 'shares': '200'}, {'price': '40.37', 'name': 'GE', 'shares': '95'},
  {'price': '65.10', 'name': 'MSFT', 'shares': '50'}, {'price': '70.44', 'name': 'IBM', 'shares': '100'}]
&gt;&gt;&gt;
</code></pre>
<p>Vaya, acabas de reducir gran parte de la función <code>read_portfolio()</code> a
una sola declaración.</p>
<h2 id="comentario">Comentario</h2>
<p>Las listas por comprensión se utilizan comúnmente en Python como un
medio eficiente para transformar, filtrar o recopilar datos. Debido a la
sintaxis, no conviene exagerar: intenta que cada lista por comprensión
sea lo más simple posible. Está bien dividir las cosas en varios pasos.
Por ejemplo, no está claro que usted quiera soltar ese último ejemplo
ante sus desprevenidos compañeros de trabajo.</p>
<p>Dicho esto, saber cómo manipular datos rápidamente es una habilidad
increíblemente útil. Existen numerosas situaciones en las que podría ser
necesario resolver algún tipo de problema puntual relacionado con la
importación, exportación, extracción de datos, etc. Convertirse en un
maestro de las listas por comprensión puede reducir sustancialmente el
tiempo empleado en idear una solución. Además, no te olvides del módulo
<code>collections</code>.</p>
<p><a href="../../Contents/">Contenido</a> | <a href="../05_Collections/">Anterior (2.5 Módulo
collections)</a> | <a href="../07_Objects/">Próximo (2.7 Modelo de
objetos)</a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>