
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Mario R. Melchiori">
      
      
        <link rel="canonical" href="https://mrmelchi.github.io/Python_Practico/02_Working_with_data/07_Objects/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>07_Objects - Python Practico</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#27-objetos" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Python Practico" class="md-header__button md-logo" aria-label="Python Practico" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python Practico
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              07_Objects
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Python Practico" class="md-nav__button md-logo" aria-label="Python Practico" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Python Practico
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#asignacion" class="md-nav__link">
    <span class="md-ellipsis">
      Asignaci贸n
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejemplo-de-asignacion" class="md-nav__link">
    <span class="md-ellipsis">
      Ejemplo de asignaci贸n
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reasignacion-de-valores" class="md-nav__link">
    <span class="md-ellipsis">
      Reasignaci贸n de valores
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#algunos-peligros" class="md-nav__link">
    <span class="md-ellipsis">
      Algunos peligros
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#identidad-y-referencias" class="md-nav__link">
    <span class="md-ellipsis">
      Identidad y referencias
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copias-superficiales" class="md-nav__link">
    <span class="md-ellipsis">
      Copias superficiales
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copias-profundas" class="md-nav__link">
    <span class="md-ellipsis">
      Copias profundas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nombres-valores-tipos" class="md-nav__link">
    <span class="md-ellipsis">
      Nombres, valores, tipos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobacion-de-tipos" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobaci贸n de tipos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo-es-un-objeto" class="md-nav__link">
    <span class="md-ellipsis">
      Todo es un objeto
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicios
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ejercicios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejercicio-224-datos-de-primera-clase" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 2.24: Datos de primera clase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-225-creacion-de-diccionarios" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 2.25: Creaci贸n de diccionarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-226-el-panorama-general" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 2.26: El panorama general
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<p><a href="../../Contents/">Contenido</a> | <a href="../06_List_comprehension/">Anterior (2.6 Listas por comprensi贸n)</a> | <a href="../../03_Program_organization/00_Overview/">Pr贸ximo (3. Organizaci贸n del programa)</a></p>
<h1 id="27-objetos">2.7 Objetos</h1>
<p>Esta secci贸n presenta m谩s detalles sobre el modelo de objetos internos de Python y analiza algunos asuntos relacionados con la administraci贸n de memoria, la copia y la verificaci贸n de tipos.</p>
<h2 id="asignacion">Asignaci贸n</h2>
<p>Muchas operaciones en Python est谩n relacionadas con la <em>asignaci贸n</em> o <em>almacenamiento</em> de valores.</p>
<pre><code class="language-python">a = value # Asignaci贸n a una variable
s[n] = value # Asignaci贸n a una lista
s.append(value) # Anexar a una lista
d['key'] = value # Agregar a un diccionario
</code></pre>
<p><em>Precauci贸n: las operaciones de asignaci贸n </em><em>nunca hacen una copia</em><em> del valor que se est谩 asignando.</em> Todas las asignaciones son simplemente copias de referencia (o copias de puntero si lo prefiere).</p>
<h2 id="ejemplo-de-asignacion">Ejemplo de asignaci贸n</h2>
<p>Considere este fragmento de c贸digo.</p>
<pre><code class="language-python">a = [1,2,3]
b = a
c = [a,b]
</code></pre>
<p>Una imagen de las operaciones de memoria subyacentes. En este ejemplo, solo hay un objeto de lista <code>[1,2,3]</code>, pero hay cuatro referencias diferentes a 茅l.</p>
<p><img alt="Referencias" src="../references.png" /></p>
<p>Esto significa que modificar un valor afecta a <em>todas</em> las referencias.</p>
<pre><code class="language-python">&gt;&gt;&gt; a.append(999)
&gt;&gt;&gt; a
[1,2,3,999]
&gt;&gt;&gt; b
[1,2,3,999]
&gt;&gt;&gt; c
[[1,2,3,999], [1,2,3,999]]
&gt;&gt;&gt;
</code></pre>
<p>Observe c贸mo un cambio en la lista original aparece en todos lados (隆vaya!). Esto se debe a que nunca se hicieron copias. Todo apunta a lo mismo.</p>
<h2 id="reasignacion-de-valores">Reasignaci贸n de valores</h2>
<p>Reasignar un valor <em>nunca</em> sobrescribe la memoria utilizada por el valor anterior.</p>
<pre><code class="language-python">a = [1,2,3]
b = a
a = [4,5,6]

print(a) # [4, 5, 6]
print(b) # [1, 2, 3] Contiene el valor original
</code></pre>
<p>Recuerde: <strong>Las variables son nombres, no ubicaciones de memoria.</strong></p>
<h2 id="algunos-peligros">Algunos peligros</h2>
<p>Si no sabe sobre este intercambio, en alg煤n momento se disparar谩 en el pie. Escenario t铆pico. Modifica algunos datos pensando que son su propia copia privada y accidentalmente corrompe algunos datos en alguna otra parte del programa.</p>
<p><em>Comentario: Esta es una de las razones por las que los tipos de datos primitivos (int, float, string) son inmutables (solo lectura).</em></p>
<h2 id="identidad-y-referencias">Identidad y referencias</h2>
<p>Use el operador <code>is</code> para verificar si dos valores son exactamente el mismo objeto.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = [1,2,3]
&gt;&gt;&gt; b = a
&gt;&gt;&gt; a is b
True
&gt;&gt;&gt;
</code></pre>
<p><code>is</code> compara la identidad del objeto (un entero). La identidad se puede obtener usando <code>id()</code>.</p>
<pre><code class="language-python">&gt;&gt;&gt; id(a)
3588944
&gt;&gt;&gt; id(b)
3588944
&gt;&gt;&gt;
</code></pre>
<p>Nota: Casi siempre es mejor usar <code>==</code> para verificar objetos. El comportamiento de <code>is</code> suele ser inesperado:</p>
<pre><code class="language-python">&gt;&gt;&gt; a = [1,2,3]
&gt;&gt;&gt; b = a
&gt;&gt;&gt; c = [1,2,3]
&gt;&gt;&gt; a is b
True
&gt;&gt;&gt; a is c
False
&gt;&gt;&gt; a == c
True
&gt;&gt;&gt;
</code></pre>
<h2 id="copias-superficiales">Copias superficiales</h2>
<p>Las listas y los diccionarios tienen m茅todos para copiar.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = [2,3,[100,101],4]
&gt;&gt;&gt; b = list(a) # Hacer una copia
&gt;&gt;&gt; a is b
False
</code></pre>
<p>Es una lista nueva, pero los elementos de la lista se comparten.</p>
<pre><code class="language-python">&gt;&gt;&gt; a[2].append(102)
&gt;&gt;&gt; b[2]
[100,101,102]
&gt;&gt;&gt;
&gt;&gt;&gt; a[2] is b[2]
True
&gt;&gt;&gt;
</code></pre>
<p>Por ejemplo, se est谩 compartiendo la lista interna <code>[100, 101, 102]</code>. Esto se conoce como copia superficial. Aqu铆 hay una imagen.</p>
<p><img alt="Copia superficial" src="../shallow.png" /></p>
<h2 id="copias-profundas">Copias profundas</h2>
<p>A veces es necesario hacer una copia de un objeto y de todos los objetos que contiene. Puede utilizar el m贸dulo <code>copy</code> para esto:</p>
<pre><code class="language-python">&gt;&gt;&gt; a = [2,3,[100,101],4]
&gt;&gt;&gt; import copy
&gt;&gt;&gt; b = copy.deepcopy(a)
&gt;&gt;&gt; a[2].append(102)
&gt;&gt;&gt; b[2]
[100,101]
&gt;&gt;&gt; a[2] is b[2]
False
&gt;&gt;&gt;
</code></pre>
<h2 id="nombres-valores-tipos">Nombres, valores, tipos</h2>
<p>Los nombres de las variables no tienen un <em>tipo</em>. Son solo un nombre. Sin embargo, los valores <em>s铆</em> tienen un tipo subyacente.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = 42
&gt;&gt;&gt; b = 'Hello World'
&gt;&gt;&gt; type(a)
&lt;type 'int'&gt;
&gt;&gt;&gt; type(b)
&lt;type 'str'&gt;
</code></pre>
<p><code>type()</code> le dir谩 cu谩l es. El nombre del tipo se utiliza generalmente como una funci贸n que crea o convierte un valor a ese tipo.</p>
<h2 id="comprobacion-de-tipos">Comprobaci贸n de tipos</h2>
<p>C贸mo saber si un objeto es de un tipo espec铆fico.</p>
<pre><code class="language-python">if isinstance(a, list):
  print('a is a list')
</code></pre>
<p>Comprobaci贸n de uno de los muchos tipos posibles.</p>
<pre><code class="language-python">if isinstance(a, (list,tuple)):
  print('a is a list or tuple')
</code></pre>
<p><em>Precauci贸n: No se exceda con la comprobaci贸n de tipos. Puede generar una complejidad excesiva en el c贸digo. Por lo general, solo lo har铆a si al hacerlo evitara errores comunes que cometen otras personas al usar su c贸digo.</em></p>
<h2 id="todo-es-un-objeto">Todo es un objeto</h2>
<p>N煤meros, cadenas, listas, funciones, excepciones, clases, instancias, etc. son todos objetos. Esto significa que todos los objetos que se pueden nombrar se pueden pasar como datos, colocar en contenedores, etc., sin ninguna restricci贸n. No hay tipos <em>especiales</em> de objetos. A veces se dice que todos los objetos son "de primera clase".</p>
<p>Un ejemplo simple:</p>
<pre><code class="language-python">&gt;&gt;&gt; import math
&gt;&gt;&gt; items = [abs, math, ValueError ]
&gt;&gt;&gt; items
[&lt;built-in function abs&gt;,
  &lt;module 'math' (builtin)&gt;,
  &lt;type 'exceptions.ValueError'&gt;]
&gt;&gt;&gt; items[0](-45)
45
&gt;&gt;&gt; items[1].sqrt(2)
1.4142135623730951
&gt;&gt;&gt; try:
        x = int('not a number')
    except items[2]:
        print('Fall贸!')
Fall贸!
&gt;&gt;&gt;
</code></pre>
<p>Aqu铆, <code>items</code> es una lista que contiene una funci贸n, un m贸dulo y una excepci贸n. Puedes usar directamente los elementos de la lista en lugar de los nombres originales:</p>
<pre><code class="language-python">items[0](-45) # abs
items[1].sqrt(2) # math
except items[2]: # ValueError
</code></pre>
<p>Un gran poder conlleva una responsabilidad. El hecho de que puedas hacer eso no significa que debas hacerlo.</p>
<h2 id="ejercicios">Ejercicios</h2>
<p>En este conjunto de ejercicios, observamos parte del poder que proviene de los objetos de primera clase.</p>
<h3 id="ejercicio-224-datos-de-primera-clase">Ejercicio 2.24: Datos de primera clase</h3>
<p>En el archivo <code>Data/portfolio.csv</code>, leemos datos organizados en columnas que se ven as铆:</p>
<pre><code class="language-csv">name,shares,price
&quot;AA&quot;,100,32.20
&quot;IBM&quot;,50,91.10
...
</code></pre>
<p>En el c贸digo anterior, usamos el m贸dulo <code>csv</code> para leer el archivo, pero a煤n as铆 tuvimos que realizar conversiones de tipo manuales. Por ejemplo:</p>
<pre><code class="language-python">```python
for row in rows:
    name   = row[0]
    shares = int(row[1])
    price  = float(row[2])
```
</code></pre>
<p>Este tipo de conversi贸n tambi茅n se puede realizar de una manera m谩s inteligente utilizando algunas operaciones b谩sicas de lista.</p>
<p>Haz una lista de Python que contenga los nombres de las funciones de conversi贸n que usar铆as para convertir cada columna al tipo apropiado:</p>
<pre><code class="language-python">&gt;&gt;&gt; types = [str, int, float]
&gt;&gt;&gt;
</code></pre>
<p>La raz贸n por la que puedes crear esta lista es que todo en Python es <em>de primera clase</em>. Por lo tanto, si quieres tener una lista de funciones, est谩 bien. Los elementos de la lista que creaste son funciones para convertir un valor <code>x</code> en un tipo determinado (por ejemplo, <code>str(x)</code>, <code>int(x)</code>, <code>float(x)</code>).</p>
<p>Ahora, lee una fila de datos del archivo anterior:</p>
<pre><code class="language-python">&gt;&gt;&gt; import csv
&gt;&gt;&gt; f = open('Data/portfolio.csv')
&gt;&gt;&gt; rows = csv.reader(f)
&gt;&gt;&gt; headers = next(rows)
&gt;&gt;&gt; row = next(rows)
&gt;&gt;&gt; row
['AA', '100', '32.20']
&gt;&gt;&gt;
</code></pre>
<p>Como se se帽al贸, esta fila no es suficiente para realizar los c谩lculos porque los tipos son incorrectos. Por ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; row[1] * row[2]
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: can't multiplicar sequence by non-int of type 'str'
&gt;&gt;&gt;
</code></pre>
<p>Sin embargo, tal vez los datos se puedan emparejar con los tipos que especificaste en <code>types</code>. Por ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; types[1]
&lt;type 'int'&gt;
&gt;&gt;&gt; row[1]
'100'
&gt;&gt;&gt;
</code></pre>
<p>Intenta convertir uno de los valores:</p>
<pre><code class="language-python">&gt;&gt;&gt; types[1](row[1]) # Igual que int(row[1])
100
&gt;&gt;&gt;
</code></pre>
<p>Intenta convertir un valor diferente:</p>
<pre><code class="language-python">&gt;&gt;&gt; types[2](row[2]) # Igual que float(row[2])
32.2
&gt;&gt;&gt;
</code></pre>
<p>Intenta el c谩lculo con valores convertidos:</p>
<pre><code class="language-python">&gt;&gt;&gt; types[1](row[1])*types[2](row[2])
3220.0000000000005
&gt;&gt;&gt;
</code></pre>
<p>Comprime los tipos de columna con los campos y mira el resultado:</p>
<pre><code class="language-python">&gt;&gt;&gt; r = list(zip(types, row))
&gt;&gt;&gt; r
[(&lt;type 'str'&gt;, 'AA'), (&lt;type 'int'&gt;, '100'), (&lt;type 'float'&gt;,'32.20')]
&gt;&gt;&gt;
</code></pre>
<p>Notar谩s que esto ha emparejado una conversi贸n de tipo con un valor. Por ejemplo, <code>int</code> est谩 emparejado con el valor <code>'100'</code>.</p>
<p>La lista comprimida es 煤til si quieres realizar conversiones en todos los valores, uno despu茅s del otro. Prueba esto:</p>
<pre><code class="language-python">&gt;&gt;&gt; converted = []
&gt;&gt;&gt; for func, val in zip(types, row):
          converted.append(func(val))
...
&gt;&gt;&gt; converted
['AA', 100, 32.2]
&gt;&gt;&gt; converted[1] * converted[2]
3220.0000000000005
&gt;&gt;&gt;
</code></pre>
<p>Aseg煤rate de entender lo que est谩 sucediendo en el c贸digo anterior. En el bucle, la variable <code>func</code> es una de las funciones de conversi贸n de tipo (p. ej., <code>str</code>, <code>int</code>, etc.) y la variable <code>val</code> es uno de los valores como <code>'AA'</code>, <code>'100'</code>. La expresi贸n <code>func(val)</code> convierte un valor (algo as铆 como una conversi贸n de tipo).</p>
<p>El c贸digo anterior se puede comprimir en una 煤nica lista por comprensi贸n.</p>
<pre><code class="language-python">&gt;&gt;&gt; converted = [func(val) for func, val in zip(types, row)]
&gt;&gt;&gt; converted
['AA', 100, 32.2]
&gt;&gt;&gt;
</code></pre>
<h3 id="ejercicio-225-creacion-de-diccionarios">Ejercicio 2.25: Creaci贸n de diccionarios</h3>
<p>驴Recuerdas c贸mo la funci贸n <code>dict()</code> puede crear f谩cilmente un diccionario si tienes una secuencia de nombres y valores de claves? Hagamos un diccionario a partir de los encabezados de las columnas:</p>
<pre><code class="language-python">&gt;&gt;&gt; headers
['name', 'shares', 'price']
&gt;&gt;&gt; convert
['AA', 100, 32.2]
&gt;&gt;&gt; dict(zip(headers, convert))
{'price': 32.2, 'name': 'AA', 'shares': 100}
&gt;&gt;&gt;
</code></pre>
<p>Por supuesto, si ya tienes experiencia con las listas por comprensi贸n, puedes hacer toda la conversi贸n en un solo paso usando una comprensi贸n de diccionarios:</p>
<pre><code class="language-python">&gt;&gt;&gt; { name: func(val) for name, func, val in zip(headers, types, row) }
{'price': 32.2, 'name': 'AA', 'shares': 100}
&gt;&gt;&gt;
</code></pre>
<h3 id="ejercicio-226-el-panorama-general">Ejercicio 2.26: El panorama general</h3>
<p>Si utiliza las t茅cnicas de este ejercicio, podr谩 escribir instrucciones que conviertan f谩cilmente los campos de casi cualquier archivo de datos orientado a columnas en un diccionario de Python.</p>
<p>Solo para ilustrar, supongamos que lees datos de un archivo de datos diferente como este:</p>
<pre><code class="language-python">&gt;&gt;&gt; f = open('Data/dowstocks.csv')
&gt;&gt;&gt; rows = csv.reader(f)
&gt;&gt;&gt; headers = next(rows)
&gt;&gt;&gt; row = next(rows)
&gt;&gt;&gt; headers
['name', 'price', 'date', 'time', 'change', 'open', 'high', 'low', 'volume']
&gt;&gt;&gt; row
['AA', '39.48', '6/11/2007', '9:36am', '-0.18', '39.67', '39.69', '39.45', '181800']
&gt;&gt;&gt;
</code></pre>
<p>Convirtamos los campos usando un truco similar:</p>
<pre><code class="language-python">&gt;&gt;&gt; types = [str, float, str, str, float, float, float, float, int]
&gt;&gt;&gt; converted = [func(val) for func, val in zip(types, row)]
&gt;&gt;&gt; record = dict(zip(headers, converted))
&gt;&gt;&gt; record
{'volume': 181800, 'name': 'AA', 'price': 39.48, 'high': 39.69,
'low': 39.45, 'time': '9:36am', 'date': '6/11/2007', 'open': 39.67,
'change': -0.18}
&gt;&gt;&gt; record['name']
'AA'
&gt;&gt;&gt; record['price']
39.48
&gt;&gt;&gt;
</code></pre>
<p>Bonificaci贸n: 驴C贸mo modificar铆as este ejemplo para que sea adicional? 驴C贸mo analizar la entrada <code>date</code> en una tupla como <code>(6, 11, 2007)</code>?</p>
<p>Dedica un tiempo a reflexionar sobre lo que has hecho en este ejercicio. Volveremos a tratar estas ideas un poco m谩s adelante.</p>
<p><a href="../../Contents/">Contenido</a> | <a href="../06_List_comprehension/">Anterior (2.6 Listas por comprensi贸n)</a> | <a href="../../03_Program_organization/00_Overview/">Pr贸ximo (3. Organizaci贸n del programa)</a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>