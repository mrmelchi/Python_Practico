{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u00a1Bienvenidos!","text":"<p>Esta es una versi\u00f3n en Espa\u00f1ol del curso Practical Python Programming</p> <p>GitHub Pages | GitHub Repo.</p> <p>A partir de ahora todo es obra de --David Beazley (https://dabeaz.com), @dabeaz.</p> <p>Cuando aprend\u00ed Python por primera vez hace casi 27 a\u00f1os, me sorprendi\u00f3 de inmediato c\u00f3mo pod\u00eda aplicarlo de manera productiva a todo tipo de proyectos laborales complicados. Una d\u00e9cada despu\u00e9s, me encontr\u00e9 ense\u00f1\u00e1ndoles a otros la misma diversi\u00f3n. El resultado de esa ense\u00f1anza es este curso: un curso de Python que se ha ense\u00f1ado activamente a m\u00e1s de 400 grupos en persona desde 2007. Traders, administradores de sistemas, astr\u00f3nomos, pensadores e incluso unos cientos de cient\u00edficos espaciales que usaron Python para ayudar a aterrizar un rover en Marte, todos han tomado este curso. Ahora, me complace ponerlo a disposici\u00f3n bajo una licencia Creative Commons, completamente libre de spam, registros y otras tonter\u00edas. \u00a1Disfr\u00fatelo!</p> <p>(P.D.: Este curso trata sobre Python. Si quieres un curso de Python que trate sobre programaci\u00f3n, podr\u00edas considerar Programaci\u00f3n avanzada con Python)</p>"},{"location":"#que-es-esto","title":"\u00bfQu\u00e9 es esto?","text":"<p>El material que ves aqu\u00ed es el n\u00facleo de un curso de capacitaci\u00f3n de Python dirigido por un instructor que se utiliza para la capacitaci\u00f3n corporativa y el desarrollo profesional. Estuvo en desarrollo continuo desde 2007 hasta 2019 y se prob\u00f3 en clases del mundo real. Por lo general, se ense\u00f1a en persona durante un per\u00edodo de tres o cuatro d\u00edas, lo que requiere aproximadamente entre 25 y 35 horas de trabajo intenso. Esto incluye la realizaci\u00f3n de aproximadamente 130 ejercicios pr\u00e1cticos de codificaci\u00f3n.</p>"},{"location":"#publico-objetivo","title":"P\u00fablico objetivo","text":"<p>Los estudiantes de este curso suelen ser cient\u00edficos, ingenieros y programadores profesionales que ya tienen experiencia en al menos otro lenguaje de programaci\u00f3n. No se requieren conocimientos previos de Python, pero se supone que se tienen conocimientos de temas de programaci\u00f3n comunes. La mayor\u00eda de los participantes encuentran el curso desafiante, incluso si ya han estado haciendo un poco de programaci\u00f3n en Python.</p>"},{"location":"#objetivos-del-curso","title":"Objetivos del curso","text":"<p>El objetivo de este curso es cubrir los aspectos fundamentales de la programaci\u00f3n en Python con \u00e9nfasis en la escritura de scripts, la manipulaci\u00f3n b\u00e1sica de datos y la organizaci\u00f3n de programas. Al final de este curso, los estudiantes deber\u00edan ser capaces de comenzar a escribir programas \u00fatiles en Python por su cuenta o poder comprender y modificar el c\u00f3digo Python escrito por sus compa\u00f1eros de trabajo.</p>"},{"location":"#requisitos","title":"Requisitos","text":"<p>Para completar este curso, no necesita nada m\u00e1s que una instalaci\u00f3n b\u00e1sica de Python 3.6 o una versi\u00f3n m\u00e1s reciente y tiempo para trabajar en ella.</p>"},{"location":"#que-no-es-este-curso","title":"Qu\u00e9 no es este curso","text":"<p>Este no es un curso para principiantes absolutos sobre c\u00f3mo programar una computadora. Se supone que ya tienes experiencia en programaci\u00f3n en alg\u00fan otro lenguaje de programaci\u00f3n o en Python.</p> <p>Este no es un curso sobre desarrollo web. Ese es un circo diferente. Sin embargo, si te quedas para este circo, ver\u00e1s algunos actos interesantes, pero nada que involucre animales.</p> <p>Este no es un curso sobre el uso de herramientas que est\u00e1n escritas en Python. Se trata de aprender el lenguaje Python central.</p> <p>Este no es un curso para ingenieros de software sobre c\u00f3mo escribir o mantener una aplicaci\u00f3n Python de un mill\u00f3n de l\u00edneas. No escribo programas de ese tipo, ni tampoco lo hacen la mayor\u00eda de las empresas que usan Python, y t\u00fa tampoco deber\u00edas hacerlo. \u00a1Elimina algo de una vez!</p>"},{"location":"#llevame-al-curso-ya","title":"\u00a1Ll\u00e9vame al curso ya!","text":"<p>Ok, ok. \u00a1Apunta tu navegador AQU\u00cd!</p>"},{"location":"#discusion-de-la-comunidad","title":"Discusi\u00f3n de la comunidad","text":"<p>\u00bfQuieres debatir sobre el curso? Puedes unirte a la conversaci\u00f3n en Gitter. No puedo prometer una respuesta individual, pero quiz\u00e1s otros puedan sumarse para ayudar.</p>"},{"location":"#agradecimientos","title":"Agradecimientos","text":"<p>Lloren\u00e7 Muntaner fue fundamental en la conversi\u00f3n del contenido del curso de Apple Keynote a la estructura en l\u00ednea que ves aqu\u00ed.</p> <p>Varios instructores han presentado este curso en un momento u otro durante los \u00faltimos 12 a\u00f1os. Esto incluye (en orden alfab\u00e9tico): Ned Batchelder, Juan Pablo Claude, Mark Fenner, Michael Foord, Matt Harrison, Raymond Hettinger, Daniel Klein, Travis Oliphant, James Powell, Michael Selik, Hugo Shi, Ian Stokes-Rees, Yarko Tymciurak, Bryan Van de ven, Peter Wang y Mark Wiebe.</p> <p>Tambi\u00e9n me gustar\u00eda agradecer a los miles de estudiantes que han realizado este curso y han contribuido a su \u00e9xito con sus comentarios y discusiones.</p>"},{"location":"#preguntas-y-respuestas","title":"Preguntas y respuestas","text":""},{"location":"#p-hay-videos-del-curso-que-pueda-ver","title":"P: \u00bfHay videos del curso que pueda ver?","text":"<p>No. Este curso se trata de que usted escriba c\u00f3digo Python, no de ver a otra persona.</p>"},{"location":"#p-como-se-licencia-este-curso","title":"P: \u00bfC\u00f3mo se licencia este curso?","text":"<p>Practical Python Programming tiene licencia Creative Commons Attribution ShareAlike 4.0 International License.</p>"},{"location":"#p-puedo-usar-este-material-para-ensenar-mi-propio-curso-de-python","title":"P: \u00bfPuedo usar este material para ense\u00f1ar mi propio curso de Python?","text":"<p>S\u00ed, siempre que se indique la atribuci\u00f3n correspondiente.</p>"},{"location":"#p-puedo-hacer-trabajos-derivados","title":"P: \u00bfPuedo hacer trabajos derivados?","text":"<p>S\u00ed, siempre que dichos trabajos tengan los mismos t\u00e9rminos de licencia y proporcionen la atribuci\u00f3n.</p>"},{"location":"#p-puedo-traducir-esto-a-otro-idioma","title":"P: \u00bfPuedo traducir esto a otro idioma?","text":"<p>S\u00ed, eso ser\u00eda genial. Env\u00edeme un enlace cuando haya terminado.</p>"},{"location":"#p-puedo-transmitir-en-vivo-el-curso-o-hacer-un-video","title":"P: \u00bfPuedo transmitir en vivo el curso o hacer un video?","text":"<p>\u00a1S\u00ed, adelante! Probablemente aprender\u00e1s mucho de Python haciendo eso.</p>"},{"location":"#p-por-que-no-se-cubrio-el-tema-x","title":"P: \u00bfPor qu\u00e9 no se cubri\u00f3 el tema X?","text":"<p>Hay una cantidad limitada de material que se puede cubrir en 3 o 4 d\u00edas. Si no se cubri\u00f3, probablemente fue porque se cubri\u00f3 una vez y hizo que a todos les explotara la cabeza o nunca hubo tiempo suficiente para cubrirlo en primer lugar. Adem\u00e1s, este es un curso, no un manual de referencia de Python.</p>"},{"location":"#p-por-que-no-se-cubre-el-increible-command-en-el-increible-tool","title":"P: \u00bfPor qu\u00e9 no se cubre el incre\u00edble <code>{command}</code> en el incre\u00edble <code>{tool}</code>?","text":"<p>El enfoque de este curso es aprender el lenguaje Python central, no aprender los nombres de los comandos en las herramientas.</p>"},{"location":"#p-este-curso-se-mantiene-o-se-actualiza","title":"P: \u00bfEste curso se mantiene o se actualiza?","text":"<p>Este curso representa un \"producto terminado\" que se ense\u00f1\u00f3 y desarroll\u00f3 durante m\u00e1s de una d\u00e9cada. No tengo planes de revisar significativamente el material en este momento, pero ocasionalmente corregir\u00e9 errores y agregar\u00e9 aclaraciones.</p>"},{"location":"#p-aceptan-solicitudes-de-incorporacion-de-cambios","title":"P: \u00bfAceptan solicitudes de incorporaci\u00f3n de cambios?","text":"<p>Se agradecen los informes de errores y pueden enviarse a trav\u00e9s del seguimiento de problemas. No se aceptan solicitudes de incorporaci\u00f3n de cambios, excepto por invitaci\u00f3n. Primero, env\u00ede un informe de problemas.</p>"},{"location":"00_Setup/","title":"0. Configuraci\u00f3n y descripci\u00f3n general del curso","text":"<p>\u00a1Bienvenido a Programaci\u00f3n Practica de Python! Esta p\u00e1gina contiene informaci\u00f3n importante sobre la configuraci\u00f3n y la log\u00edstica del curso.</p>"},{"location":"00_Setup/#duracion-del-curso-y-requisitos-de-tiempo","title":"Duraci\u00f3n del curso y requisitos de tiempo","text":"<p>Este curso se imparti\u00f3 originalmente como una capacitaci\u00f3n presencial dirigida por un instructor que dur\u00f3 de 3 a 4 d\u00edas. Para completar el curso en su totalidad, debe planificar un m\u00ednimo de 25 a 35 horas de trabajo. La mayor\u00eda de los participantes encuentran que el material es bastante desafiante sin echar un vistazo al c\u00f3digo de la soluci\u00f3n (ver a continuaci\u00f3n).</p>"},{"location":"00_Setup/#configuracion-e-instalacion-de-python","title":"Configuraci\u00f3n e instalaci\u00f3n de Python","text":"<p>No necesita nada m\u00e1s que una instalaci\u00f3n b\u00e1sica de Python 3.6 o posterior. No hay dependencia de ning\u00fan sistema operativo, editor, IDE o herramientas adicionales relacionadas con Python en particular. No hay dependencias de terceros.</p> <p>Dicho esto, la mayor parte de este curso implica aprender a escribir scripts y peque\u00f1os programas que involucran la lectura de datos de archivos. Por lo tanto, debe asegurarse de estar en un entorno en el que pueda trabajar f\u00e1cilmente con archivos. Esto incluye el uso de un editor para crear programas Python y poder ejecutar esos programas desde el cmd/shell/terminal/bash.</p> <ul> <li>IMPORTANTE: En adelante los t\u00e9rminos <code>cmd</code>,<code>shell</code>,<code>terminal</code>,     <code>bash</code> se utilizaran indistintamente con el mismo significado.</li> </ul> <p>Es posible que te sientas inclinado a trabajar en este curso utilizando un entorno m\u00e1s interactivo, como Jupyter Notebooks. \u00a1NO LO RECOMIENDO! Aunque los cuadernos son excelentes para la experimentaci\u00f3n, muchos de los ejercicios de este curso ense\u00f1an conceptos relacionados con la organizaci\u00f3n de programas. Esto incluye trabajar con funciones, m\u00f3dulos, declaraciones de importaci\u00f3n y refactorizaci\u00f3n de programas cuyo c\u00f3digo fuente abarca varios archivos. En mi experiencia, es dif\u00edcil replicar este tipo de entorno de trabajo en Jupyter Notebooks.</p>"},{"location":"00_Setup/#bifurcacionclonacion-del-repositorio-del-curso","title":"Bifurcaci\u00f3n/clonaci\u00f3n del repositorio del curso","text":"<p>Para preparar tu entorno para el curso, te recomiendo crear tu propia bifurcaci\u00f3n del repositorio de GitHub del curso en https://github.com/dabeaz-course/practical-python. Una vez que hayas terminado, puedes clonarlo en tu m\u00e1quina local:</p> <pre><code>bash % git clone https://github.com/yourname/practical-python\nbash % cd practical-python\nbash %\n</code></pre> <p>Haz todo tu trabajo dentro del directorio <code>practical-python/</code>. Si env\u00edas el c\u00f3digo de tu soluci\u00f3n a tu bifurcaci\u00f3n del repositorio, esto mantendr\u00e1 todo tu c\u00f3digo junto en un solo lugar y tendr\u00e1s un buen registro hist\u00f3rico de tu trabajo cuando hayas terminado.</p> <p>Si no quieres crear una bifurcaci\u00f3n personal o no tienes una cuenta de GitHub, a\u00fan puedes clonar el directorio del curso en tu m\u00e1quina:</p> <pre><code>bash % git clone https://github.com/dabeaz-course/practical-python```\nbash % cd practical-python```\nbash %\n</code></pre> <p>En Windows, <code>bash %</code> deber\u00eda ser reemplazado por <code>C:\\Users\\tu_nombre</code>.</p> <p>Con esta opci\u00f3n, no podr\u00e1s confirmar cambios en el c\u00f3digo excepto en la copia local en tu m\u00e1quina.</p>"},{"location":"00_Setup/#diseno-del-trabajo-del-curso","title":"Dise\u00f1o del trabajo del curso","text":"<p>Realiza todo tu trabajo de codificaci\u00f3n en el directorio <code>Work/</code>. Dentro de ese directorio, hay un directorio <code>Data/</code>. El directorio <code>Data/</code> contiene una variedad de archivos de datos y otros scripts utilizados durante el curso. Con frecuencia tendr\u00e1s que acceder a archivos ubicados en <code>Data/</code>. Los ejercicios del curso se escriben asumiendo que est\u00e1s creando programas en el directorio <code>Work/</code>.</p>"},{"location":"00_Setup/#orden-del-curso","title":"Orden del curso","text":"<p>El material del curso debe completarse en el orden de las secciones, comenzando con la secci\u00f3n 1. Los ejercicios del curso en las secciones posteriores se basan en el c\u00f3digo escrito en las secciones anteriores. Muchos de los ejercicios posteriores implican una refactorizaci\u00f3n menor del c\u00f3digo existente.</p>"},{"location":"00_Setup/#codigo-de-la-solucion","title":"C\u00f3digo de la soluci\u00f3n","text":"<p>El directorio <code>Solutions/</code> contiene el c\u00f3digo de la soluci\u00f3n completa para los ejercicios seleccionados. No dude en consultarlo si necesita una pista. Sin embargo, para aprovechar al m\u00e1ximo el curso, debe intentar crear sus propias soluciones primero.</p> <p>Contenido | Pr\u00f3ximo (1 Introducci\u00f3n a Python)</p>"},{"location":"Contents/","title":"Programaci\u00f3n pr\u00e1ctica en Python","text":""},{"location":"Contents/#tabla-de-contenido","title":"Tabla de contenido","text":"<ul> <li>0. Configuraci\u00f3n del curso (\u00a1LEA PRIMERO!)</li> <li>1. Introducci\u00f3n a Python</li> <li>2. Trabajar con datos</li> <li>3. Organizaci\u00f3n del programa</li> <li>4. Classes y Objetos</li> <li>5. Funcionamiento interno de los objetos de Python</li> <li>6. Generadores</li> <li>7. Algunos temas avanzados</li> <li>8. Pruebas, registro y depuraci\u00f3n</li> <li>9. Paquetes</li> </ul> <p>Consulte las Notas del instructor si planea impartiendo el curso.</p> <p>Inicio</p>"},{"location":"InstructorNotes/","title":"Programaci\u00f3n pr\u00e1ctica con Python - Notas para el instructor","text":"<p>Autor: David Beazley</p>"},{"location":"InstructorNotes/#descripcion-general","title":"Descripci\u00f3n general","text":"<p>Este documento proporciona algunas notas generales y consejos sobre la ense\u00f1anza del contenido de mi curso \u201cPractical Python\u201d, incluidos los objetivos, el p\u00fablico objetivo, las partes complicadas, etc.</p> <p>Estas instrucciones se les dieron a las personas que imparten el curso en un entorno t\u00edpico de capacitaci\u00f3n corporativa de tres d\u00edas. Es posible que le brinden una idea sobre c\u00f3mo ense\u00f1ar su propio curso.</p>"},{"location":"InstructorNotes/#publico-objetivo-y-enfoque-general","title":"P\u00fablico objetivo y enfoque general","text":"<p>Este curso est\u00e1 destinado a ser un curso de \u201cIntroducci\u00f3n a Python\u201d para personas que ya tienen algo de experiencia en programaci\u00f3n. Este definitivamente no es un curso dise\u00f1ado para ense\u00f1ar a las personas \u201cprogramaci\u00f3n 101\u201d.</p> <p>Habiendo dicho eso, he observado que el estudiante t\u00edpico en un curso de Python tampoco es probable que sea un ingeniero de software o programador de n\u00facleo duro. En cambio, probablemente obtendr\u00e1 una mezcla de ingenieros, cient\u00edficos, programadores web y desarrolladores m\u00e1s inexpertos. La formaci\u00f3n de los estudiantes var\u00eda ampliamente. Es posible que tengas algunos estudiantes con mucha experiencia en C, C++ y Java, otros pueden saber PHP y HTML, otros pueden venir de herramientas como MATLAB y otros pueden no tener casi ninguna experiencia en \"programaci\u00f3n\" tradicional a pesar de mis mejores intentos por aclarar los requisitos previos.</p> <p>Con esto en mente, el curso apunta a ense\u00f1ar Python a trav\u00e9s del problema general de manipulaci\u00f3n de datos (datos del mercado de valores en particular). Este dominio ha sido elegido porque es simple y algo que todos deber\u00edan saber al respecto independientemente de su experiencia. Solo como ejemplo, es probable que los estudiantes con habilidades de programaci\u00f3n d\u00e9biles a\u00fan sepan sobre cosas comunes como usar una hoja de c\u00e1lculo (por ejemplo, Excel). Entonces, si est\u00e1n realmente estancados, puedes decirles cosas como \"bueno, esta lista de tuplas es como filas de datos en una hoja de c\u00e1lculo\" o \"una comprensi\u00f3n de listas es la misma idea que aplicar una operaci\u00f3n a una columna de la hoja de c\u00e1lculo y colocar el resultado en una columna diferente\". La idea clave es permanecer centrado en un entorno del mundo real en lugar de desviarse hacia problemas esot\u00e9ricos de \"ciencia inform\u00e1tica\" (por ejemplo, \"vamos a calcular los n\u00fameros de Fibonacci\").</p> <p>Este dominio de problemas tambi\u00e9n funciona bien para introducir otros temas de programaci\u00f3n. Por ejemplo, los cient\u00edficos o ingenieros pueden querer saber sobre an\u00e1lisis de datos o gr\u00e1ficos. Por lo tanto, puede mostrarles c\u00f3mo hacer un gr\u00e1fico usando matplotlib. Los programadores web pueden querer saber c\u00f3mo presentar datos del mercado de valores en una p\u00e1gina web. Por lo tanto, puede hablar sobre motores de plantillas. Los administradores de sistemas pueden querer hacer algo con archivos de registro. Por lo tanto, puede indicarles un archivo de registro de datos burs\u00e1tiles en tiempo real. Los ingenieros de software pueden querer saber sobre dise\u00f1o. Por lo tanto, puede pedirles que busquen formas de encapsular datos burs\u00e1tiles dentro de un objeto o hacer que un programa sea extensible (por ejemplo, c\u00f3mo hacer que este programa produzca resultados en 10 formatos de tabla diferentes). Ya entiende la idea.</p>"},{"location":"InstructorNotes/#pautas-de-presentacion","title":"Pautas de presentaci\u00f3n","text":"<p>Las diapositivas de la presentaci\u00f3n (notas) est\u00e1n ah\u00ed para brindar una estructura narrativa al curso y para que los estudiantes las utilicen como referencia cuando trabajan en ejercicios. No repase laboriosamente cada punto de cada diapositiva; suponga que los estudiantes pueden leer y que tendr\u00e1n tiempo para volver a leer cuando est\u00e9n codificando. Suelo repasar las diapositivas a un ritmo bastante r\u00e1pido, mostrando ejemplos breves de manera interactiva a medida que avanzo. A menudo me salto diapositivas por completo a favor de demostraciones en vivo. Por ejemplo, no es necesario hacer un mont\u00f3n de diapositivas con listas. Simplemente vaya al int\u00e9rprete y haga algunos ejemplos de listas en vivo. Regla general: no m\u00e1s de 1 minuto por diapositiva, a menos que sea algo inusualmente complicado. Honestamente, probablemente podr\u00eda omitir la mayor\u00eda de las diapositivas y simplemente dar una clase con demostraciones en vivo si siente que funciona para usted. A menudo lo hago.</p>"},{"location":"InstructorNotes/#ejercicios-del-curso","title":"Ejercicios del curso","text":"<p>El curso tiene alrededor de 130 ejercicios pr\u00e1cticos. Si haces cada uno de los ejercicios y les das tiempo a los estudiantes para pensar y codificar, probablemente les llevar\u00e1 entre 10 y 12 horas. En la pr\u00e1ctica, probablemente encontrar\u00e1s que los estudiantes necesitan m\u00e1s tiempo en ciertos ejercicios. Tengo algunas notas sobre esto a continuaci\u00f3n.</p> <p>Debes enfatizar repetidamente a los estudiantes que el c\u00f3digo de la soluci\u00f3n est\u00e1 disponible y que est\u00e1 bien mirarlo y copiarlo, especialmente debido a los requisitos de tiempo.</p> <p>Antes de ense\u00f1ar el curso, te recomiendo encarecidamente que revises y trabajes en cada uno de los ejercicios del curso para que no haya sorpresas.</p> <p>Durante la impartici\u00f3n del curso, generalmente trabajo en cada uno de los ejercicios desde cero, sin mirar la soluci\u00f3n, en mi computadora mientras los estudiantes tambi\u00e9n trabajan. Para esto, te recomiendo encarecidamente que tengas una copia impresa de los ejercicios a mano que puedas mirar sin tener que abrirla en la pantalla de la computadora (que se est\u00e1 proyectando). Cerca del final del per\u00edodo de tiempo del ejercicio, comenzar\u00e9 a analizar mi c\u00f3digo de soluci\u00f3n, enfatizar\u00e9 diferentes partes en la pantalla y hablar\u00e9 sobre ellas. Si hay alg\u00fan problema potencial con la soluci\u00f3n (incluidas consideraciones de dise\u00f1o), tambi\u00e9n hablar\u00e9 de ello.</p> <p>Enfatice a los estudiantes que tal vez quieran ver o copiar el c\u00f3digo de la soluci\u00f3n antes de continuar.</p>"},{"location":"InstructorNotes/#contenido","title":"Contenido","text":""},{"location":"InstructorNotes/#seccion-1-introduccion","title":"Secci\u00f3n 1: Introducci\u00f3n","text":"<p>El objetivo principal de esta secci\u00f3n es que las personas se familiaricen con el entorno. Esto incluye el uso del shell interactivo y la edici\u00f3n/ejecuci\u00f3n de programas cortos. Al final de la secci\u00f3n, los estudiantes deber\u00edan poder escribir scripts cortos que lean archivos de datos y realicen peque\u00f1os c\u00e1lculos. Conocer\u00e1n los n\u00fameros, las cadenas, las listas y los archivos. Tambi\u00e9n habr\u00e1n tenido algo de exposici\u00f3n a funciones, excepciones y m\u00f3dulos, pero faltar\u00e1n muchos detalles.</p> <p>La primera parte de este curso suele ser la m\u00e1s larga porque los estudiantes son nuevos en las herramientas y pueden tener varios problemas para hacer que las cosas funcionen. Es absolutamente fundamental que recorra el sal\u00f3n y se asegure de que todos puedan editar, ejecutar y depurar programas simples. Aseg\u00farese de que Python est\u00e9 instalado correctamente. Aseg\u00farese de que hayan descargado los ejercicios del curso. Aseg\u00farese de que Internet funcione. Arregle cualquier otra cosa que surja.</p> <p>Tiempo: Mi objetivo es terminar la secci\u00f3n 1 alrededor del almuerzo del primer d\u00eda.</p>"},{"location":"InstructorNotes/#seccion-2-trabajar-con-datos","title":"Secci\u00f3n 2: Trabajar con datos","text":"<p>Esta secci\u00f3n es probablemente la m\u00e1s importante del curso. Abarca los conceptos b\u00e1sicos de la representaci\u00f3n y manipulaci\u00f3n de datos, incluidas tuplas, listas, diccionarios y conjuntos.</p> <p>La secci\u00f3n 2.2 es la m\u00e1s importante. D\u00e9 a los estudiantes todo el tiempo que necesiten para que los ejercicios funcionen dentro de lo razonable. Seg\u00fan la audiencia, los ejercicios pueden durar 45 minutos. En la mitad de este ejercicio, a menudo avanzo a la Secci\u00f3n 2.3 (impresi\u00f3n formateada) y les doy a los estudiantes m\u00e1s tiempo para seguir trabajando. Juntas, las Secciones 2.2/2.3 pueden llevar una hora o m\u00e1s.</p> <p>La Secci\u00f3n 2.4 hace que las personas exploren el uso de enumerate() y zip(). Considero que estas funciones son esenciales, as\u00ed que no escatime en ella.</p> <p>La Secci\u00f3n 2.5 presenta el m\u00f3dulo de colecciones. Hay MUCHO que podr\u00eda decirse sobre las colecciones, pero los estudiantes no lo entender\u00e1n por completo en este momento. Aborde esto m\u00e1s desde el punto de vista de \"aqu\u00ed est\u00e1 este m\u00f3dulo interesante que deber\u00eda ver m\u00e1s adelante. Aqu\u00ed hay algunos ejemplos interesantes\".</p> <p>La Secci\u00f3n 2.6 presenta las comprensiones de listas, que son una caracter\u00edstica importante para procesar datos de listas. Enfatice a los estudiantes que las comprensiones de listas son muy similares a cosas como las consultas de bases de datos SQL. Al final de este ejercicio, a menudo hago una demostraci\u00f3n interactiva que involucra algo m\u00e1s avanzado. Tal vez haga una comprensi\u00f3n de listas y trace algunos datos con matplotlib. Tambi\u00e9n es una oportunidad para presentar Jupyter si as\u00ed lo desea.</p> <p>La Secci\u00f3n 2.7 es el ejercicio m\u00e1s sofisticado. Se relaciona con el uso de datos de primera clase en Python y el hecho de que las estructuras de datos como las listas pueden contener cualquier tipo de objeto que desee. Los ejercicios est\u00e1n relacionados con el an\u00e1lisis de columnas de datos en archivos CSV y los conceptos se reutilizan posteriormente en la Secci\u00f3n 3.2.</p> <p>Tiempo: lo ideal es terminar con la Secci\u00f3n 2 el primer d\u00eda. Sin embargo, es com\u00fan terminar con la Secci\u00f3n 2.5 o 2.6. Por lo tanto, no se asuste si siente que est\u00e1 un poco atrasado.</p>"},{"location":"InstructorNotes/#seccion-3-organizacion-del-programa","title":"Secci\u00f3n 3: Organizaci\u00f3n del programa","text":"<p>El objetivo principal de esta secci\u00f3n es presentar m\u00e1s detalles sobre las funciones y alentar a los estudiantes a usarlas. La secci\u00f3n se construye a partir de funciones en m\u00f3dulos y escritura de scripts.</p> <p>La Secci\u00f3n 3.1 trata sobre pasar de la simple \"creaci\u00f3n de scripts\" a las funciones. Se debe disuadir a los estudiantes de escribir \"scripts\" desorganizados. En cambio, el c\u00f3digo debe al menos modularizarse en funciones. Hace que el c\u00f3digo sea m\u00e1s f\u00e1cil de entender, facilita la realizaci\u00f3n de cambios posteriormente y, de hecho, se ejecuta un poco m\u00e1s r\u00e1pido. Las funciones son buenas.</p> <p>La Secci\u00f3n 3.2 es probablemente el conjunto de ejercicios m\u00e1s avanzado de todo el curso. Hace que los estudiantes escriban una funci\u00f3n de utilidad de prop\u00f3sito general para analizar datos orientados a columnas. Sin embargo, hace un uso intensivo de listas por comprensi\u00f3n, as\u00ed como de listas de funciones (por ejemplo, funciones como objetos de primera clase). Probablemente necesitar\u00e1 guiar a las personas a trav\u00e9s de cada paso de este c\u00f3digo, mostrando c\u00f3mo funciona con gran detalle. Sin embargo, la recompensa es enorme: puede mostrar a las personas una funci\u00f3n de prop\u00f3sito general corta que hace algo incre\u00edblemente poderoso y que ser\u00eda pr\u00e1cticamente imposible de escribir en C, C++ o Java sin tener MUCHO c\u00f3digo muy complicado. Hay muchas posibles v\u00edas de dise\u00f1o/discusi\u00f3n para este c\u00f3digo. Use su imaginaci\u00f3n.</p> <p>La Secci\u00f3n 3.3 agrega el manejo de errores a la funci\u00f3n creada en la Secci\u00f3n 3.2. Este es un buen momento para hablar sobre el manejo de excepciones en general. Definitivamente, hable sobre los peligros de capturar todas las excepciones. Este podr\u00eda ser un buen momento para hablar sobre el elemento \u201cLos errores nunca deben pasar silenciosamente\u201d en el \u201cZen de Python\u201d.</p> <p>Nota: Antes del Ejercicio 3.4, aseg\u00farese de que los estudiantes obtengan versiones completamente funcionales de report.py, pcost.py y fileparse.py. C\u00f3pielas de la carpeta Soluciones si es necesario</p> <p>La Secci\u00f3n 3.4 presenta las importaciones de m\u00f3dulos. El archivo escrito en la Secci\u00f3n 3.2-3.3 se utiliza para simplificar el c\u00f3digo en la Secci\u00f3n 3.1. Tenga en cuenta que es posible que deba ayudar a los estudiantes a solucionar problemas con IDLE, sys.path y otras configuraciones variadas relacionadas con la importaci\u00f3n.</p> <p>La secci\u00f3n 3.5 habla sobre argumentos lineales. Puede que te sientas inclinado a hablar de un m\u00f3dulo como argparse. Sin embargo, ten en cuenta que hacerlo abre un atolladero. Por lo general, es mejor simplemente mencionarlo y seguir adelante.</p> <p>La secci\u00f3n 3.6 abre una discusi\u00f3n sobre el dise\u00f1o en general en Python. \u00bfEs mejor escribir c\u00f3digo que sea m\u00e1s flexible en lugar de c\u00f3digo que est\u00e9 programado para trabajar solo con nombres de archivo? Este es el primer lugar en el que se realiza un cambio de c\u00f3digo y se debe refactorizar el c\u00f3digo existente.</p> <p>A partir de aqu\u00ed, la mayor\u00eda de los ejercicios realizan peque\u00f1os cambios en el c\u00f3digo que ya se ha escrito.</p>"},{"location":"InstructorNotes/#seccion-4-clases-y-objetos","title":"Secci\u00f3n 4: Clases y objetos","text":"<p>Esta secci\u00f3n trata sobre programaci\u00f3n orientada a objetos muy b\u00e1sica. En general, no es seguro asumir que las personas tienen muchos conocimientos de OO. Por lo tanto, antes de comenzar, suelo describir en general el \u201cestilo\u201d de OO y c\u00f3mo se agrupan sus datos y m\u00e9todos. Realice algunos ejemplos con cadenas y listas para ilustrar que son \"objetos\" y que los m\u00e9todos (invocados mediante .) hacen cosas con el objeto. Enfatice c\u00f3mo los m\u00e9todos est\u00e1n asociados al objeto en s\u00ed. Por ejemplo, usted hace items.append(x), no llama a una funci\u00f3n separada append(items, x).</p> <p>La Secci\u00f3n 4.1 presenta la declaraci\u00f3n de clase y muestra a las personas c\u00f3mo crear un objeto b\u00e1sico. En realidad, esto solo presenta las clases como otra forma de definir una estructura de datos simple, en relaci\u00f3n con el uso de tuplas y diccionarios para este prop\u00f3sito en la Secci\u00f3n 2.</p> <p>La Secci\u00f3n 4.2 trata sobre la herencia y c\u00f3mo se usa para crear programas extensibles. Este conjunto de ejercicios es probablemente el m\u00e1s significativo en t\u00e9rminos de programaci\u00f3n orientada a objetos y dise\u00f1o orientado a objetos. D\u00e9 a los estudiantes mucho tiempo para trabajar en \u00e9l (30-45 minutos). Dependiendo del inter\u00e9s, puede pasar MUCHO tiempo discutiendo aspectos de la orientaci\u00f3n a objetos. Por ejemplo, diferentes patrones de dise\u00f1o, jerarqu\u00edas de herencia, clases base abstractas, etc.</p> <p>La Secci\u00f3n 4.3 realiza algunos experimentos con m\u00e9todos especiales. No dedicar\u00eda demasiado tiempo a perder el tiempo con esto. Los m\u00e9todos especiales aparecen un poco m\u00e1s adelante en el Ejercicio 6.1 y en otras partes.</p> <p>Tiempo: Esto suele ser al final del segundo d\u00eda.</p>"},{"location":"InstructorNotes/#seccion-5-dentro-de-los-objetos","title":"Secci\u00f3n 5: Dentro de los objetos","text":"<p>Esta secci\u00f3n lleva a los estudiantes detr\u00e1s de escena del sistema de objetos y c\u00f3mo se construye utilizando diccionarios, c\u00f3mo se vinculan las instancias y las clases y c\u00f3mo funciona la herencia. Sin embargo, la parte m\u00e1s importante de esta secci\u00f3n es probablemente el material sobre encapsulaci\u00f3n (atributos privados, propiedades, ranuras, etc.)</p> <p>La Secci\u00f3n 5.1 simplemente quita las cubiertas y hace que los estudiantes observen y jueguen con los diccionarios subyacentes de instancias y clases.</p> <p>La Secci\u00f3n 5.2 trata sobre ocultar atributos detr\u00e1s de funciones get/set y el uso de propiedades. Normalmente hago hincapi\u00e9 en que estas t\u00e9cnicas se utilizan com\u00fanmente en bibliotecas y marcos de trabajo, especialmente en situaciones en las que se desea un mayor control sobre lo que se le permite hacer a un usuario.</p> <p>Un experto en Python notar\u00e1 que no hablo en absoluto sobre temas avanzados como descriptores o m\u00e9todos de acceso a atributos (<code>__getattr__</code>, <code>__setattr__</code>). He descubierto, a trav\u00e9s de la experiencia, que esto es demasiada sobrecarga mental para los estudiantes que toman el curso de introducci\u00f3n. La cabeza de todos ya est\u00e1 al borde de explotar en este punto y si hablas sobre c\u00f3mo funcionan algo como los descriptores, los perder\u00e1s por el resto del d\u00eda, si no por el resto del curso. Gu\u00e1rdalo para un curso de \"Python avanzado\".</p> <p>Si est\u00e1s mirando el reloj pensando \"No hay manera de que vaya a terminar este curso\", puedes saltarte la secci\u00f3n 5 por completo.</p>"},{"location":"InstructorNotes/#seccion-6-generadores","title":"Secci\u00f3n 6: Generadores","text":"<p>El objetivo principal de esta secci\u00f3n es presentar los generadores como una forma de definir iteraciones personalizadas y utilizarlos para diversos problemas relacionados con el manejo de datos. Los ejercicios del curso hacen que los estudiantes analicen transmisiones de datos en forma de actualizaciones de stock que se escriben en un archivo de registro.</p> <p>Hay dos grandes ideas que destacar. Primero, los generadores se pueden utilizar para escribir c\u00f3digo basado en el procesamiento incremental. Esto puede ser muy \u00fatil para cosas como la transmisi\u00f3n de datos o conjuntos de datos enormes que son demasiado grandes para quepa en la memoria de una sola vez. La segunda idea es que se pueden encadenar generadores/iteradores para crear canales de procesamiento (algo as\u00ed como las tuber\u00edas de Unix). Nuevamente, esta puede ser una forma realmente poderosa de procesar y pensar en transmisiones, conjuntos de datos grandes, etc.</p> <p>Algunas omisiones: aunque se describe el protocolo de iteraci\u00f3n, las notas no detallan la creaci\u00f3n de objetos iterables (es decir, clases con <code>__iter__()</code> y <code>next()</code>). En la pr\u00e1ctica, he descubierto que no es necesario hacer esto tan a menudo (los generadores suelen ser mejores/m\u00e1s f\u00e1ciles). Por lo tanto, en aras del tiempo, he tomado la decisi\u00f3n consciente de omitirlo. Tampoco se incluyen los generadores extendidos (corrutinas) ni los usos de los generadores para la concurrencia (tasklets, etc.). Eso es mejor que se trate en cursos avanzados.</p>"},{"location":"InstructorNotes/#seccion-7-temas-avanzados","title":"Secci\u00f3n 7: Temas avanzados","text":"<p>B\u00e1sicamente, esta secci\u00f3n es una variedad de temas m\u00e1s avanzados que podr\u00edan haberse tratado antes, pero no se hicieron por varias razones relacionadas con el flujo del curso y el contenido de los ejercicios del curso. Si quieres saber, sol\u00eda presentar este material antes en el curso, pero ya estaba sobrecargado con suficiente informaci\u00f3n. Volver a \u00e9l m\u00e1s tarde parece funcionar mejor, especialmente porque a esta altura, todos est\u00e1n mucho m\u00e1s familiarizados con el trabajo en Python y comienzan a entenderlo.</p> <p>Los temas incluyen argumentos de funciones vari\u00e1dicas (*args, **kwargs), lambda, cierres y decoradores. La discusi\u00f3n de decoradores es solo una peque\u00f1a pista de lo que es posible con la metaprogramaci\u00f3n. Si\u00e9ntete libre de decir m\u00e1s sobre lo que es posible, \u00a1pero probablemente me mantendr\u00eda alejado de las metaclases! \u00daltimamente, he estado demostrando \"numba\" como un ejemplo de un decorador m\u00e1s interesante.</p> <p>Si tiene poco tiempo, puede omitir la mayor parte de la secci\u00f3n 7 o comprimirla en gran medida (por ejemplo, puede omitir ejercicios).</p>"},{"location":"InstructorNotes/#seccion-8-pruebas-y-depuracion","title":"Secci\u00f3n 8: Pruebas y depuraci\u00f3n","text":"<p>El objetivo principal de esta secci\u00f3n es simplemente presentar varias herramientas y t\u00e9cnicas relacionadas con las pruebas, la depuraci\u00f3n y el desarrollo de software. Muestre a todos el m\u00f3dulo unittest. Presente el m\u00f3dulo de registro. Discuta las afirmaciones y la idea de los \"contratos\". Muestre a las personas el depurador y el generador de perfiles. La mayor parte de esto se explica por s\u00ed solo.</p>"},{"location":"InstructorNotes/#seccion-9-paquetes","title":"Secci\u00f3n 9: Paquetes","text":"<p>En este punto, los estudiantes han escrito una variedad de archivos (pcost.py, report.py, fileparse.py, tableformat.py, stock.py, portfolio.py, follow.py, etc.). Dos objetivos principales en esta secci\u00f3n. Primero, poner todo el c\u00f3digo en una estructura de paquete Python. Esta es solo una introducci\u00f3n suave a eso, pero mover\u00e1n los archivos a un directorio y todo se romper\u00e1. Tendr\u00e1n que corregir sus declaraciones de importaci\u00f3n (importaciones relativas a paquetes) y tal vez modificar un archivo <code>__init__.py</code>. Segundo objetivo: escribir un archivo setup.py simple que puedan usar para empaquetar el c\u00f3digo y d\u00e1rselo a alguien. Eso es todo. Fin del curso.</p> <p>Contenido</p>"},{"location":"LICENSE/","title":"LICENSE","text":""},{"location":"LICENSE/#creative-commons","title":"creative commons","text":""},{"location":"LICENSE/#attribution-sharealike-40-international","title":"Attribution-ShareAlike 4.0 International","text":"<p>Creative Commons Corporation (\u201cCreative Commons\u201d) no es un bufete de abogados y no proporciona servicios legales ni asesoramiento legal. La distribuci\u00f3n de licencias p\u00fablicas de Creative Commons no crea una relaci\u00f3n abogado-cliente ni de ning\u00fan otro tipo. Creative Commons pone a disposici\u00f3n sus licencias e informaci\u00f3n relacionada \u201ctal cual\u201d. Creative Commons no ofrece garant\u00edas con respecto a sus licencias, ning\u00fan material licenciado bajo sus t\u00e9rminos y condiciones, ni ninguna informaci\u00f3n relacionada. Creative Commons renuncia a toda responsabilidad por da\u00f1os resultantes de su uso en la mayor medida posible.</p>"},{"location":"LICENSE/#uso-de-licencias-publicas-de-creative-commons","title":"Uso de licencias p\u00fablicas de Creative Commons","text":"<p>Las licencias p\u00fablicas de Creative Commons proporcionan un conjunto est\u00e1ndar de t\u00e9rminos y condiciones que los creadores y otros titulares de derechos pueden utilizar para compartir obras originales de autor\u00eda y otro material sujeto a derechos de autor y otros derechos especificados en la licencia p\u00fablica a continuaci\u00f3n. Las siguientes consideraciones son solo para fines informativos, no son exhaustivas y no forman parte de nuestras licencias.</p> <ul> <li> <p>Consideraciones para los licenciantes: Nuestras licencias p\u00fablicas est\u00e1n destinadas a ser utilizadas por aquellos autorizados a dar al p\u00fablico permiso para usar material en formas que de otro modo estar\u00edan restringidas por los derechos de autor y otros derechos determinados. Nuestras licencias son irrevocables. Los licenciantes deben leer y comprender los t\u00e9rminos y condiciones de la licencia que elijan antes de aplicarla. Los licenciantes tambi\u00e9n deben asegurar todos los derechos necesarios antes de aplicar nuestras licencias para que el p\u00fablico pueda reutilizar el material como se espera. Los licenciantes deben marcar claramente cualquier material que no est\u00e9 sujeto a la licencia. Esto incluye otro material con licencia CC o material utilizado bajo una excepci\u00f3n o limitaci\u00f3n a los derechos de autor. M\u00e1s consideraciones para los licenciantes.</p> </li> <li> <p>Consideraciones para el p\u00fablico: Al utilizar una de nuestras licencias p\u00fablicas, un licenciante otorga al p\u00fablico permiso para usar el material con licencia bajo t\u00e9rminos y condiciones espec\u00edficos. Si el permiso del licenciante no es necesario por alg\u00fan motivo (por ejemplo, debido a alguna excepci\u00f3n o limitaci\u00f3n aplicable a los derechos de autor), entonces ese uso no est\u00e1 regulado por la licencia. Nuestras licencias otorgan \u00fanicamente permisos en virtud de los derechos de autor y otros derechos que el licenciante tiene autoridad para otorgar. El uso del material licenciado puede estar restringido por otros motivos, incluso porque otros tengan derechos de autor u otros derechos sobre el material. El licenciante puede hacer solicitudes especiales, como pedir que se marquen o describan todos los cambios. Aunque nuestras licencias no lo exigen, se recomienda que respete esas solicitudes cuando sea razonable. M\u00e1s consideraciones para el p\u00fablico.</p> </li> </ul>"},{"location":"LICENSE/#licencia-publica-internacional-creative-commons-attribution-sharealike-40","title":"Licencia p\u00fablica internacional Creative Commons Attribution-ShareAlike 4.0","text":"<p>Al ejercer los derechos licenciados (definidos a continuaci\u00f3n), acepta y se compromete a cumplir los t\u00e9rminos y condiciones de esta licencia p\u00fablica internacional Creative Commons Attribution-ShareAlike 4.0 (\"Licencia p\u00fablica\"). En la medida en que esta Licencia P\u00fablica pueda interpretarse como un contrato, se le otorgan los Derechos Licenciados a cambio de su aceptaci\u00f3n de estos t\u00e9rminos y condiciones, y el Licenciante le otorga dichos derechos a cambio de los beneficios que recibe al poner a disposici\u00f3n el Material Licenciado de conformidad con estos t\u00e9rminos y condiciones.</p>"},{"location":"LICENSE/#seccion-1-definiciones","title":"Secci\u00f3n 1 \u2013 Definiciones.","text":"<p>a.  Material Adaptado significa material sujeto a Derechos de Autor y Derechos Similares que se deriva de o se basa en el Material Licenciado y en el que el Material Licenciado se traduce, altera, arregla, transforma o modifica de otra manera de una manera que requiere permiso de conformidad con los Derechos de Autor y Derechos Similares que posee el Licenciante. Para los fines de esta Licencia P\u00fablica, cuando el Material Licenciado es una obra musical, una interpretaci\u00f3n o una grabaci\u00f3n de sonido, el Material Adaptado siempre se produce cuando el Material Licenciado est\u00e1 sincronizado en relaci\u00f3n temporal con una imagen en movimiento.</p> <p>b.  Licencia del Adaptador significa la licencia que Usted aplica a sus Derechos de Autor y Derechos Similares en sus contribuciones al Material Adaptado de conformidad con los t\u00e9rminos y condiciones de esta Licencia P\u00fablica.</p> <p>c.  Licencia compatible con BY-SA significa una licencia incluida en creativecommons.org/compatiblelicenses, aprobada por Creative Commons como esencialmente equivalente a esta Licencia p\u00fablica.</p> <p>d.  Copyright y derechos similares significa copyright y/o derechos similares estrechamente relacionados con el copyright, incluidos, sin limitaci\u00f3n, derechos de ejecuci\u00f3n, transmisi\u00f3n, grabaci\u00f3n de sonido y derechos de base de datos sui generis, sin importar c\u00f3mo se etiqueten o categoricen los derechos. Para los fines de esta Licencia p\u00fablica, los derechos especificados en la Secci\u00f3n 2(b)(1)-(2) no son derechos de autor y derechos similares.</p> <p>e.  Medidas tecnol\u00f3gicas efectivas significa aquellas medidas que, en ausencia de una autoridad adecuada, no pueden eludirse en virtud de leyes que cumplan con las obligaciones establecidas en el Art\u00edculo 11 del Tratado de la OMPI sobre Derecho de Autor adoptado el 20 de diciembre de 1996 y/o acuerdos internacionales similares.</p> <p>f.  Excepciones y limitaciones significa uso justo, trato justo y/o cualquier otra excepci\u00f3n o limitaci\u00f3n a los derechos de autor y derechos similares que se aplique a Su uso del Material con licencia.</p> <p>g.  Elementos de la licencia significa los atributos de la licencia enumerados en el nombre de una Licencia p\u00fablica de Creative Commons. Los elementos de la licencia de esta Licencia p\u00fablica son Atribuci\u00f3n y Compartir por igual.</p> <p>h.  Material con licencia significa la obra art\u00edstica o literaria, base de datos u otro material al que el Licenciante aplic\u00f3 esta Licencia p\u00fablica.</p> <p>i.  Derechos Licenciados significa los derechos que se le otorgan a Usted sujetos a los t\u00e9rminos y condiciones de esta Licencia P\u00fablica, que se limitan a todos los Derechos de Autor y Derechos Similares que se aplican a Su uso del Material Licenciado y que el Licenciante tiene autoridad para licenciar.</p> <p>j.  Licenciante significa la(s) persona(s) o entidad(es) que otorgan derechos bajo esta Licencia P\u00fablica.</p> <p>k.  Compartir significa proporcionar material al p\u00fablico por cualquier medio o proceso que requiera permiso bajo los Derechos Licenciados, como reproducci\u00f3n, exhibici\u00f3n p\u00fablica, presentaci\u00f3n p\u00fablica, distribuci\u00f3n, difusi\u00f3n, comunicaci\u00f3n o importaci\u00f3n, y poner material a disposici\u00f3n del p\u00fablico, incluso de maneras en que los miembros del p\u00fablico puedan acceder al material desde un lugar y en un momento elegidos individualmente por ellos.</p> <p>l.  Derechos Sui Generis de Bases de Datos significa derechos distintos de los derechos de autor resultantes de la Directiva 96/9/CE del Parlamento Europeo y del Consejo del 11 de marzo de 1996 sobre la protecci\u00f3n jur\u00eddica de las bases de datos, en su forma enmendada y/o sucedida, as\u00ed como otros derechos esencialmente equivalentes en cualquier parte del mundo.</p> <p>m.  Usted significa la persona o entidad que ejerce los Derechos Licenciados bajo esta Licencia P\u00fablica. Su tiene un significado correspondiente.</p>"},{"location":"LICENSE/#seccion-2-alcance","title":"Secci\u00f3n 2 \u2013 Alcance.","text":"<p>a.  Concesi\u00f3n de la licencia.</p> <ol> <li>Sujeto a los t\u00e9rminos y condiciones de esta Licencia P\u00fablica, el Licenciante le otorga por la presente una licencia mundial, libre de regal\u00edas, no sublicenciable, no exclusiva e irrevocable para ejercer los Derechos Licenciados en el Material Licenciado para:</li> </ol> <p>A. reproducir y Compartir el Material Licenciado, en su totalidad o en parte; y</p> <p>B. producir, reproducir y Compartir Material Adaptado.</p> <ol> <li> <p>Excepciones y Limitaciones. Para evitar dudas, cuando las Excepciones y Limitaciones se aplican a Su uso, esta Licencia P\u00fablica no se aplica y Usted no necesita cumplir con sus t\u00e9rminos y condiciones.</p> </li> <li> <p>Plazo. El plazo de esta Licencia P\u00fablica se especifica en la Secci\u00f3n 6(a).</p> </li> <li> <p>Medios y formatos; modificaciones t\u00e9cnicas permitidas. El Licenciante lo autoriza a ejercer los Derechos Licenciados en todos los medios y formatos ya sean conocidos o creados en el futuro, y a realizar las modificaciones t\u00e9cnicas necesarias para ello. El Licenciante renuncia y/o acepta no hacer valer ning\u00fan derecho o autoridad para prohibirle realizar las modificaciones t\u00e9cnicas necesarias para ejercer los Derechos Licenciados, incluidas las modificaciones t\u00e9cnicas necesarias para eludir las Medidas Tecnol\u00f3gicas Efectivas. Para los fines de esta Licencia P\u00fablica, la simple realizaci\u00f3n de modificaciones autorizadas por esta Secci\u00f3n 2(a)(4) nunca produce Material Adaptado.</p> </li> <li> <p>Destinatarios posteriores.</p> </li> </ol> <p>A. Oferta del Licenciante: Material Licenciado. Todo destinatario del Material Licenciado recibe autom\u00e1ticamente una oferta del Licenciante para ejercer los Derechos Licenciados seg\u00fan los t\u00e9rminos y condiciones de esta Licencia P\u00fablica.</p> <p>B. __Oferta adicional del Licenciante: Material Adaptado. Cada receptor de Material Adaptado de Usted recibe autom\u00e1ticamente una oferta del Licenciante para ejercer los Derechos Licenciados en el Material Adaptado bajo las condiciones de la Licencia del Adaptador que Usted aplique.</p> <p>C. Sin restricciones posteriores. Usted no puede ofrecer ni imponer t\u00e9rminos o condiciones adicionales o diferentes, ni aplicar Medidas Tecnol\u00f3gicas Efectivas al Material Licenciado si al hacerlo restringe el ejercicio de los Derechos Licenciados por cualquier receptor del Material Licenciado.</p> <ol> <li>Sin respaldo. Nada en esta Licencia P\u00fablica constituye ni puede interpretarse como un permiso para afirmar o implicar que Usted est\u00e1, o que Su uso del Material Licenciado est\u00e1, relacionado con, o patrocinado, respaldado o concedido estatus oficial por, el Licenciante u otros designados para recibir atribuci\u00f3n seg\u00fan lo dispuesto en la Secci\u00f3n 3(a)(1)(A)(i).</li> </ol> <p>b.  Otros derechos.</p> <ol> <li> <p>Los derechos morales, como el derecho a la integridad, no est\u00e1n licenciados bajo esta Licencia P\u00fablica, ni tampoco lo est\u00e1n los derechos de publicidad, privacidad y/u otros derechos de personalidad similares; Sin embargo, en la medida de lo posible, el Licenciante renuncia y/o acepta no hacer valer dichos derechos que posee en la medida limitada necesaria para permitirle ejercer los Derechos Licenciados, pero no de otra manera.</p> </li> <li> <p>Patente y cesi\u00f3n de derechos a cobrarle regal\u00edas por el ejercicio de los Derechos Licenciados, ya sea directamente o a trav\u00e9s de una sociedad de recaudaci\u00f3n en virtud de cualquier esquema de licencia obligatoria o estatutaria voluntaria o renunciable. En todos los dem\u00e1s casos, el Licenciante se reserva expresamente cualquier derecho a cobrar dichas regal\u00edas.</p> </li> </ol>"},{"location":"LICENSE/#seccion-3-condiciones-de-la-licencia","title":"Secci\u00f3n 3 \u2013 Condiciones de la Licencia.","text":"<p>Su ejercicio de los Derechos Licenciados est\u00e1 expresamente sujeto a las siguientes condiciones.</p> <p>a.  Atribuci\u00f3n.</p> <ol> <li>Si comparte el Material Licenciado (incluso en forma modificada), debe:</li> </ol> <p>A. conservar lo siguiente si el Licenciante lo proporciona con el Material Licenciado:</p> <p>i.  identificaci\u00f3n del(los) creador(es) del Material Licenciado y cualquier otra persona designada para recibir atribuci\u00f3n, de cualquier manera razonable solicitada por el Licenciante (incluso mediante seud\u00f3nimo si se designa);</p> <p>ii. un aviso de derechos de autor;</p> <p>iii. un aviso que haga referencia a esta Licencia P\u00fablica;</p> <p>iv. un aviso que haga referencia a la exenci\u00f3n de garant\u00edas;</p> <p>v.  un URI o hiperv\u00ednculo al Material Licenciado en la medida en que sea razonablemente posible;</p> <p>B. indicar si modific\u00f3 el Material Licenciado y conservar una indicaci\u00f3n de cualquier modificaci\u00f3n anterior; y</p> <p>C. indicar que el Material Licenciado est\u00e1 licenciado bajo esta Licencia P\u00fablica e incluir el texto de, o el URI o hiperv\u00ednculo a, esta Licencia P\u00fablica.</p> <ol> <li> <p>Puede cumplir con las condiciones de la Secci\u00f3n 3(a)(1) de cualquier manera razonable seg\u00fan el medio, los medios y el contexto en los que comparta el Material Licenciado. Por ejemplo, puede ser razonable cumplir con las condiciones proporcionando un URI o hiperv\u00ednculo a un recurso que incluya la informaci\u00f3n requerida.</p> </li> <li> <p>Si el Licenciante lo solicita, debe eliminar cualquier informaci\u00f3n requerida por la Secci\u00f3n 3(a)(1)(A) en la medida en que sea razonablemente posible.</p> </li> </ol> <p>b.  ShareAlike.</p> <p>Adem\u00e1s de las condiciones de la Secci\u00f3n 3(a), si comparte material adaptado que produce, tambi\u00e9n se aplican las siguientes condiciones.</p> <ol> <li> <p>La Licencia del Adaptador que usted aplica debe ser una licencia Creative Commons con los mismos Elementos de Licencia, esta versi\u00f3n o posterior, o una Licencia Compatible con BY-SA.</p> </li> <li> <p>Usted debe incluir el texto, el URI o el hiperv\u00ednculo a la Licencia del Adaptador que usted aplica. Usted puede satisfacer esta condici\u00f3n de cualquier manera razonable en funci\u00f3n del medio, los medios y el contexto en el que Usted Comparte el Material Adaptado.</p> </li> <li> <p>Usted no puede ofrecer ni imponer t\u00e9rminos o condiciones adicionales o diferentes, ni aplicar Medidas Tecnol\u00f3gicas Efectivas al Material Adaptado que restrinjan el ejercicio de los derechos otorgados bajo la Licencia del Adaptador que usted aplica.</p> </li> </ol>"},{"location":"LICENSE/#seccion-4-derechos-de-base-de-datos-sui-generis","title":"Secci\u00f3n 4 \u2013 Derechos de Base de Datos Sui Generis.","text":"<p>Cuando los Derechos Licenciados incluyen Derechos de Base de Datos Sui Generis que se aplican a Su uso del Material Licenciado:</p> <p>a.  para evitar dudas, la Secci\u00f3n 2(a)(1) le otorga el derecho a extraer, reutilizar, reproducir y Compartir todo o una parte sustancial de los contenidos de la base de datos;</p> <p>b.  Si incluye la totalidad o una parte sustancial del contenido de la base de datos en una base de datos en la que tiene derechos sui generis sobre la base de datos, entonces la base de datos en la que tiene derechos sui generis sobre la base de datos (pero no su contenido individual) es material adaptado, incluso a los efectos de la Secci\u00f3n 3(b); y</p> <p>c.  Debe cumplir con las condiciones de la Secci\u00f3n 3(a) si comparte la totalidad o una parte sustancial del contenido de la base de datos.</p> <p>Para evitar dudas, esta Secci\u00f3n 4 complementa y no reemplaza sus obligaciones bajo esta Licencia P\u00fablica cuando los Derechos Licenciados incluyen otros Derechos de Autor y Derechos Similares.</p>"},{"location":"LICENSE/#seccion-5-renuncia-de-garantias-y-limitacion-de-responsabilidad","title":"Secci\u00f3n 5 \u2013 Renuncia de garant\u00edas y limitaci\u00f3n de responsabilidad.","text":"<p>a.  A menos que el Licenciante acuerde lo contrario por separado, en la medida de lo posible, el Licenciante ofrece el Material Licenciado tal como est\u00e1 y tal como est\u00e1 disponible, y no realiza declaraciones ni garant\u00edas de ning\u00fan tipo con respecto al Material Licenciado, ya sean expresas, impl\u00edcitas, legales u otras. Esto incluye, sin limitaci\u00f3n, garant\u00edas de t\u00edtulo, comerciabilidad, idoneidad para un fin determinado, no infracci\u00f3n, ausencia de defectos latentes o de otro tipo, precisi\u00f3n o presencia o ausencia de errores, sean o no conocidos o detectables. Cuando no se permitan descargos de responsabilidad de garant\u00edas en su totalidad o en parte, es posible que este descargo de responsabilidad no se aplique en su caso.</p> <p>b.  En la medida de lo posible, en ning\u00fan caso el Licenciante ser\u00e1 responsable ante Usted en virtud de ninguna teor\u00eda legal (incluida, sin limitaci\u00f3n, la negligencia) o de otro modo por p\u00e9rdidas, costos, gastos o da\u00f1os directos, especiales, indirectos, incidentales, consecuentes, punitivos, ejemplares u otros que surjan de esta Licencia P\u00fablica o del uso del Material Licenciado, incluso si se le ha advertido al Licenciante de la posibilidad de dichas p\u00e9rdidas, costos, gastos o da\u00f1os. Cuando no se permita una limitaci\u00f3n de responsabilidad en su totalidad o en parte, es posible que esta limitaci\u00f3n no se aplique en su caso.</p> <p>c.  La exenci\u00f3n de garant\u00edas y la limitaci\u00f3n de responsabilidad que se proporcionan anteriormente se interpretar\u00e1n de manera que, en la medida de lo posible, se respete la exenci\u00f3n de responsabilidad y la renuncia a toda responsabilidad.</p>"},{"location":"LICENSE/#seccion-6-plazo-y-terminacion","title":"Secci\u00f3n 6: - Plazo y terminaci\u00f3n.","text":"<p>a.  Esta Licencia P\u00fablica se aplica durante el plazo de los derechos de autor y derechos similares aqu\u00ed licenciados. Sin embargo, si no cumple con esta Licencia P\u00fablica, sus derechos bajo esta Licencia P\u00fablica terminar\u00e1n autom\u00e1ticamente.</p> <p>b.  Cuando su derecho a usar el Material Licenciado haya terminado seg\u00fan la Secci\u00f3n 6(a), se restablecer\u00e1:</p> <ol> <li> <p>autom\u00e1ticamente a partir de la fecha en que se corrija la infracci\u00f3n, siempre que se corrija dentro de los 30 d\u00edas posteriores a que usted descubra la infracci\u00f3n; o</p> </li> <li> <p>tras el restablecimiento expreso por parte del Licenciante.</p> </li> </ol> <p>Para evitar dudas, esta Secci\u00f3n 6(b) no afecta ning\u00fan derecho que el Licenciante pueda tener para buscar remedios por sus infracciones de esta Licencia P\u00fablica.</p> <p>c.  Para evitar dudas, el Licenciante tambi\u00e9n puede ofrecer el Material Licenciado bajo t\u00e9rminos o condiciones separados o dejar de distribuir el Material Licenciado en cualquier momento; sin embargo, hacerlo no terminar\u00e1 esta Licencia P\u00fablica.</p> <p>d.  Las Secciones 1, 5, 6, 7 y 8 sobreviven a la terminaci\u00f3n de esta Licencia P\u00fablica.</p>"},{"location":"LICENSE/#seccion-7-otros-terminos-y-condiciones","title":"Secci\u00f3n 7 \u2013 Otros T\u00e9rminos y Condiciones.","text":"<p>a.  El Licenciante no estar\u00e1 obligado por ning\u00fan t\u00e9rmino o condici\u00f3n adicional o diferente comunicado por Usted a menos que se acuerde expresamente.</p> <p>b.  Todos los arreglos, entendimientos o acuerdos con respecto al Material Licenciado que no se indiquen en este documento son separados e independientes de los t\u00e9rminos y condiciones de esta Licencia P\u00fablica.</p>"},{"location":"LICENSE/#seccion-8-interpretacion","title":"Secci\u00f3n 8 \u2013 Interpretaci\u00f3n.","text":"<p>a.  Para evitar dudas, esta Licencia P\u00fablica no reduce, limita, restringe ni impone condiciones sobre ning\u00fan uso del Material Licenciado que pudiera realizarse legalmente sin permiso bajo esta Licencia P\u00fablica, y no se interpretar\u00e1 que lo hace.</p> <p>b.  En la medida de lo posible, si alguna disposici\u00f3n de esta Licencia P\u00fablica se considera inaplicable, se reformar\u00e1 autom\u00e1ticamente en la medida m\u00ednima necesaria para que sea aplicable. Si la disposici\u00f3n no se puede reformar, se separar\u00e1 de esta Licencia P\u00fablica sin afectar la aplicabilidad de los t\u00e9rminos y condiciones restantes.</p> <p>c.  No se eximir\u00e1 ning\u00fan t\u00e9rmino o condici\u00f3n de esta Licencia P\u00fablica ni se consentir\u00e1 ning\u00fan incumplimiento a menos que el Licenciante lo acepte expresamente.</p> <p>d.  Nada de lo dispuesto en esta Licencia P\u00fablica constituye ni puede interpretarse como una limitaci\u00f3n o renuncia a los privilegios e inmunidades que se aplican al Licenciante o a Usted, incluidos los de los procesos legales de cualquier jurisdicci\u00f3n o autoridad.</p> <pre><code>Creative Commons no es parte de sus licencias p\u00fablicas. No obstante, Creative Commons puede optar por aplicar una de sus licencias p\u00fablicas al material que publica y, en esos casos, se considerar\u00e1 el \"Licenciante\". Excepto con el prop\u00f3sito limitado de indicar que el material se comparte bajo una licencia p\u00fablica de Creative Commons o seg\u00fan lo permitan las pol\u00edticas de Creative Commons publicadas en [creativecommons.org/policies](http://creativecommons.org/policies), Creative Commons no autoriza el uso de la marca registrada \u201cCreative Commons\u201d ni de ninguna otra marca registrada o logotipo de Creative Commons sin su consentimiento previo por escrito, incluyendo, sin limitaci\u00f3n, en relaci\u00f3n con cualquier modificaci\u00f3n no autorizada de cualquiera de sus licencias p\u00fablicas o cualquier otro acuerdo, entendimiento o convenio relativo al uso de material con licencia. Para evitar dudas, este p\u00e1rrafo no forma parte de las licencias p\u00fablicas.\n\nPuede ponerse en contacto con Creative Commons en creativecommons.org\n</code></pre>"},{"location":"about/","title":"Acerca de","text":"<p>Esta es una versi\u00f3n en Espa\u00f1ol del curso Practical Python Programming</p>"},{"location":"about/#licencia","title":"Licencia","text":"<p>Licencia de Uso</p>"},{"location":"01_Introduction/00_Overview/","title":"00 Overview","text":"<p>Contenido | Pr\u00f3ximo (2. Trabajar con datos)</p>"},{"location":"01_Introduction/00_Overview/#1-introduccion-a-python","title":"1. Introducci\u00f3n a Python","text":"<p>El objetivo de esta primera secci\u00f3n es presentar algunos conceptos b\u00e1sicos de Python desde cero. Comenzando desde cero, aprender\u00e1 a editar, ejecutar y depurar programas peque\u00f1os. Finalmente, escribir\u00e1 un script breve que lea un archivo de datos CSV y realice un c\u00e1lculo simple.</p> <ul> <li>1.1 Introducci\u00f3n a Python</li> <li>1.2 Un primer programa</li> <li>1.3 N\u00fameros</li> <li>1.4 Strings</li> <li>1.5 Listas</li> <li>1.6 Archivos</li> <li>1.7 Funciones</li> </ul> <p>Contenido | Pr\u00f3ximo (2. Trabajar con datos)</p>"},{"location":"01_Introduction/01_Python/","title":"01_Python","text":"<p>Contenido | Pr\u00f3ximo (1.2 Un primer programa)</p>"},{"location":"01_Introduction/01_Python/#11-python","title":"1.1 Python","text":"<p>Python es un lenguaje de programaci\u00f3n de alto nivel interpretado. A menudo se clasifica como un \"lenguaje de scripting\" y se considera similar a lenguajes como Perl, Tcl o Ruby. La sintaxis de Python est\u00e1 inspirada vagamente en elementos de la programaci\u00f3n en C.</p> <p>Python fue creado por Guido van Rossum alrededor de 1990, quien lo nombr\u00f3 en honor a Monty Python.</p>"},{"location":"01_Introduction/01_Python/#donde-conseguir-python","title":"\u00bfD\u00f3nde conseguir Python?","text":"<p>Python.org es donde puedes obtener Python. Para los prop\u00f3sitos de este curso, usted s\u00f3lo necesita una instalaci\u00f3n b\u00e1sica. Recomiendo instalar Python 3.6 o m\u00e1s reciente. En las notas se utiliza Python 3.6 y soluciones.</p>"},{"location":"01_Introduction/01_Python/#por-que-se-creo-python","title":"\u00bfPor qu\u00e9 se cre\u00f3 Python?","text":"<p>En palabras del creador de Python:</p> <p>Mi motivaci\u00f3n original para crear Python fue la necesidad percibida de un lenguaje de nivel superior en el proyecto Amoeba [Sistemas Operativos]. Me di cuenta de que el desarrollo de utilidades de administraci\u00f3n de sistemas en C estaba tomando demasiado tiempo. Adem\u00e1s, hacer estas cosas en el shell no funcionar\u00eda por diversas razones. ... Entonces, hab\u00eda una necesidad de un lenguaje que pudiera cerrar la brecha entre C y el shell.</p> <ul> <li>Guido van Rossum</li> </ul>"},{"location":"01_Introduction/01_Python/#donde-esta-python-en-mi-maquina","title":"\u00bfD\u00f3nde est\u00e1 Python en mi m\u00e1quina?","text":"<p>Aunque existen muchos entornos en los que puedes ejecutar Python, Python normalmente se instala en su m\u00e1quina como un programa que se ejecuta desde el cmd, la terminal o shell de comandos. Desde la terminal, deber\u00edas ser capaz de escribir 'python' de esta manera:</p> <pre><code>bash % python3\nPython 3.11.7 | packaged by Anaconda, Inc. | (main, Dec 15 2023, 18:05:47) [MSC v.1916 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt;\n&gt;&gt;&gt; print(\"Hola Mundo\")\nHola Mundo\n&gt;&gt;&gt;\n</code></pre> <p>En Windows <code>bash % python3</code> deberia ser reemplazado por <code>C:\\Users\\tu_nombre\\practical-python\\Work&gt; python</code> (sin el 3). Si no tienes experiencia en el uso del cmd, el shell o una terminal, probablemente deber\u00edas detenerte aqu\u00ed, examina un breve tutorial sobre CMD, shell o terminal y luego regresa.</p> <p>Aunque existen muchos entornos que no son de shell donde puedes codificar Python, ser\u00e1s un programador de Python m\u00e1s fuerte si eres capaz de ejecutar, depurar e interact\u00faar con Python en la terminal. Este es el entorno nativo de Python. Si puedes usar Python aqu\u00ed, podr\u00e1s usarlo en cualquier otro lugar.</p>"},{"location":"01_Introduction/01_Python/#ejercicios","title":"Ejercicios","text":""},{"location":"01_Introduction/01_Python/#ejercicio-11-uso-de-python-como-calculadora","title":"Ejercicio 1.1: Uso de Python como calculadora","text":"<p>En su m\u00e1quina, inicie Python y \u00faselo como calculadora para resolver el problema. siguiente problema.</p> <p>Lucky Larry compr\u00f3 75 acciones de Google a un precio de 235,14 d\u00f3lares por acci\u00f3n. Hoy, las acciones de Google cotizan a 711,25 d\u00f3lares. Usando Python Modo interactivo como calculadora, averig\u00fce cu\u00e1nta ganancia obtendr\u00eda Larry. \u00bfQu\u00e9 har\u00eda si vendiera todas sus acciones?</p> <pre><code>&gt;&gt;&gt; (711,25 - 235,14) * 75\n35708.25\n&gt;&gt;&gt;\n</code></pre> <p>Consejo profesional: utilice la variable de gui\u00f3n bajo <code>_</code> para utilizar el resultado del \u00faltimo c\u00e1lculo. Por ejemplo, &gt;\u00bfcu\u00e1nto beneficio obtiene Larry despu\u00e9s que su malvado corredor se lleva \u00f9na comisi\u00f3n del 20%?</p> <pre><code>&gt;&gt;&gt; _ * 0,80\n28566.600000000002\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/01_Python/#ejercicio-12-obtener-ayuda","title":"Ejercicio 1.2: Obtener ayuda","text":"<p>Utilice el comando <code>help()</code> para obtener ayuda sobre la funci\u00f3n <code>abs()</code>. Luego usa <code>help()</code> para obtener ayuda sobre la funci\u00f3n <code>round()</code>. Escriba <code>help()</code> simplemente, sin ning\u00fan valor para ingresar al visor de ayuda interactivo.</p> <p>Una advertencia con <code>help()</code>: no funciona para Python b\u00e1sico. Declaraciones como <code>for</code> <code>if</code>, <code>while</code>, etc. (es decir, si escribe <code>help(for)</code> obtendr\u00e1 un error de sintaxis). Puedes intentar poner el tema del que requiere ayuda entre comillas como <code>help('for')</code> en su lugar. Si eso no funciona, tendr\u00e1s que recurrir a una b\u00fasqueda en Internet.</p> <p>Seguimiento: Vaya a (http://docs.python.org) y busque la documentaci\u00f3n para la funci\u00f3n <code>abs()</code> (pista: se encuentra en la referencia de la biblioteca relacionada con funciones integradas).</p>"},{"location":"01_Introduction/01_Python/#ejercicio-13-cortar-y-pegar","title":"Ejercicio 1.3: Cortar y pegar","text":"<p>Este libro est\u00e1 estructurado como una serie de p\u00e1ginas donde se le recomienda probar ejemplos de c\u00f3digo Python interactiv: escribiendo. Si est\u00e1s aprendiendo Python por primera vez, se aconseja este \"enfoque lento\". Tendr\u00e1s una mejor idea del lenguaje disminuyendo la velocidad, escribiendo cosas y pensando \u00bfQu\u00e9 est\u00e1s haciendo?</p> <p>Si debe \"cortar y pegar\" ejemplos de c\u00f3digo, seleccione el c\u00f3digo comenzando despu\u00e9s del indicador <code>&gt;&gt;&gt;</code> y llegando hasta, pero no m\u00e1s all\u00e1 que la primera l\u00ednea en blanco o el siguiente mensaje <code>&gt;&gt;&gt;</code> (el que aparezca primero), seleccione <code>copiar</code> desde el navegador, vaya a la ventana de Python y seleccione <code>pegar</code> para copiarlo en el shell de Python. Para conseguir que el c\u00f3digo se ejecute, es posible que tengas que presionar \"Intro\" una vez que lo hayas pegado.</p> <p>Utilice cortar y pegar para ejecutar las declaraciones de Python en esta sesi\u00f3n:</p> <pre><code>&gt;&gt;&gt; 12 + 20\n32\n&gt;&gt;&gt; (3 + 4 + 5 + 6)\n18\n&gt;&gt;&gt; for i in range(5):\n        print(i)\n\n0\n1\n2\n3\n4\n&gt;&gt;&gt;\n</code></pre> <p>Advertencia: nunca es posible pegar m\u00e1s de un comando de Python (declaraciones que aparecen despu\u00e9s de <code>&gt;&gt;&gt;</code>) al shell b\u00e1sico de Python . Tienes que pegar cada comando uno a la vez.</p> <p>Ahora que ya has hecho esto, recuerda que obtendr\u00e1s m\u00e1s provecho del libro escribiendo el c\u00f3digo lentamente y pensando en \u00e9l, no cortando y pegando.</p> <p>Contenido | Pr\u00f3ximo (1.2 Un primer programa)</p>"},{"location":"01_Introduction/02_Hello_world/","title":"02_Hello_world","text":"<p>Contenido | Anterior (1.1 Introducci\u00f3n a Python) | Pr\u00f3ximo (1.3 N\u00fameros)</p>"},{"location":"01_Introduction/02_Hello_world/#12-un-primer-programa","title":"1.2 Un primer programa","text":"<p>En esta secci\u00f3n se analiza la creaci\u00f3n de su primer programa y su ejecuci\u00f3n, int\u00e9rprete y algo de depuraci\u00f3n b\u00e1sica.</p>"},{"location":"01_Introduction/02_Hello_world/#ejecucion-de-python","title":"Ejecuci\u00f3n de Python","text":"<p>Los programas de Python siempre se ejecutan dentro de un int\u00e9rprete.</p> <p>El int\u00e9rprete es una aplicaci\u00f3n \"basada en consola\" que normalmente se ejecuta desde un shell de comandos.</p> <pre><code>bash % python3\nPython 3.11.7 | packaged by Anaconda, Inc. | (main, Dec 15 2023, 18:05:47) [MSC v.1916 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt;\n</code></pre> <p>Los programadores expertos generalmente no tienen problemas para utilizar el int\u00e9rprete de esta manera, pero no es tan f\u00e1cil de usar para principiantes. Es posible que est\u00e9s usando un entorno que proporciona una interfaz diferente a Python. Est\u00e1 bien, pero aprender a ejecutar la terminal Python sigue siendo una habilidad \u00fatil.</p>"},{"location":"01_Introduction/02_Hello_world/#modo-interactivo","title":"Modo interactivo","text":"<p>Cuando inicias Python, obtienes un modo interactivo donde puedes experimentar.</p> <p>Si comienza a escribir declaraciones, se ejecutar\u00e1n inmediatamente. No hay ciclo de edici\u00f3n/compilaci\u00f3n/ejecuci\u00f3n/depuraci\u00f3n.</p> <pre><code>&gt;&gt;&gt; print('Hola Mundo')\nHola Mundo\n&gt;&gt;&gt; 37*42\n1554\n&gt;&gt;&gt; for i in range(5):\n...print(i)\n...\n0\n1\n2\n3\n4\n&gt;&gt;&gt;\n</code></pre> <p>Este llamado bucle de lectura-evaluaci\u00f3n-impresi\u00f3n (o REPL) es muy \u00fatil para la depuraci\u00f3n y la exploraci\u00f3n.</p> <p>DETENTE: Si no puede entender c\u00f3mo interactuar con Python, detenga lo que est\u00e9 haciendo y descubra c\u00f3mo hacerlo. Si est\u00e1 utilizando un Entorno de Desarrollo Integrado (o IDE), es posible que est\u00e9 oculto detr\u00e1s de una Opci\u00f3n de men\u00fa u otra ventana. Muchas partes de este curso asumen que puedes Interactuar con el int\u00e9rprete.</p> <p>Echemos un vistazo m\u00e1s de cerca a los elementos del REPL:</p> <ul> <li><code>&gt;&gt;&gt;</code> es el indicador del int\u00e9rprete para iniciar una nueva     declaraci\u00f3n.</li> <li><code>...</code> es el mensaje del int\u00e9rprete para continuar una declaraci\u00f3n.     Ingrese una l\u00ednea en blanco para terminar de escribir y ejecutar lo     que ha ingresado.</li> </ul> <p>El mensaje <code>...</code> puede aparecer o no seg\u00fan su entorno. Para este curso, se muestra en blanco para facilitar cortar y pegar ejemplos de c\u00f3digo.</p> <p>El gui\u00f3n bajo <code>_</code> contiene el \u00faltimo resultado.</p> <pre><code>&gt;&gt;&gt; 37 * 42\n1554\n&gt;&gt;&gt; _ * 2\n3108\n&gt;&gt;&gt; _ + 50\n3158\n&gt;&gt;&gt;\n</code></pre> <p>Esto s\u00f3lo es cierto en el modo interactivo. Nunca uses <code>_</code> en un programa.</p>"},{"location":"01_Introduction/02_Hello_world/#creando-programas","title":"Creando programas","text":"<p>Los programas se colocan en archivos <code>.py</code>.</p> <pre><code># hola.py\nprint('Hola Mundo')\n</code></pre> <p>Puedes crear estos archivos con tu editor de texto favorito.</p>"},{"location":"01_Introduction/02_Hello_world/#programas-en-ejecucion","title":"Programas en ejecuci\u00f3n","text":"<p>Para ejecutar un programa, ejec\u00fatelo en la terminal con el comando <code>python</code>. Por ejemplo, en la l\u00ednea de comandos de Unix:</p> <pre><code>bash % python3 hola.py\nHola Mundo\nbash %\n</code></pre> <p>O desde el shell de Windows:</p> <pre><code>C:\\Users\\tu_nombre\\practical-python\\Work&gt; hola.py\nHola Mundo\n\nC:\\Users\\tu_nombre\\practical-python\\Work&gt; c:\\python313\\python hola.py\nHola Mundo\n</code></pre> <p>Nota: En Windows, es posible que deba especificar una ruta completa al int\u00e9rprete de Python, como <code>c:\\python36\\python</code>. Sin embargo, si Python est\u00e1 instalado de su forma habitual, es posible que puedas simplemente escribir el nombre del programa. como por ejemplo <code>hola.py</code>. Para conocer el directorio de instalaci\u00f3n de python, ejecute:</p> <pre><code>C:\\Users\\tu_nombre\\practical-python\\Work&gt; python\n&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.executable\n'C:\\\\Users\\\\Mario\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python313\\\\python.exe'\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/02_Hello_world/#un-programa-de-muestra","title":"Un programa de muestra","text":"<p>Resolvamos el siguiente problema:</p> <p>Una ma\u00f1ana, sales y colocas un billete de un d\u00f3lar en la acera junto a la Torre Sears en Chicago. Cada d\u00eda siguiente, colocas el doble de billetes. \u00bfCu\u00e1nto tiempo tarda la pila de billetes en superar la altura de la torre?</p> <p>Aqu\u00ed hay una soluci\u00f3n:</p> <pre><code>#sears.py\nespesor_de_billete = 0.11 * 0.001 # Metros (0,11 mm)\naltura_torre = 442 # Altura (metros)\nnum_billetes = 1\ndia= 1\n\nwhile num_billetes * espesor_de_billete &lt; altura_torre:\n    print(dia, num_billetes, num_billetes * espesor_de_billete)\n    dia = dia + 1\n    num_billetes = num_billetes * 2\n\nprint('N\u00famero de d\u00edas', dia)\nprint('N\u00famero de billetes', num_billetes)\nprint('Altura final', num_billetes * espesor_de_billete)\n</code></pre> <p>Cuando lo ejecutas, obtienes el siguiente resultado:</p> <pre><code>bash % python3 sears.py\n1 1 0,00011\n2 2 0,00022\n3 4 0,00044\n4 8 0,00088\n5 16 0,00176\n6 32 0,00352\n...\n21 1048576 115.34336\n22 2097152 230.68672\nN\u00famero de d\u00edas 23\nN\u00famero de billetes 4194304\nAltura final 461.37344\n</code></pre> <p>Usando este programa como gu\u00eda, podr\u00e1s aprender una serie de conceptos b\u00e1sicos importantes sobre Python.</p>"},{"location":"01_Introduction/02_Hello_world/#declaraciones","title":"Declaraciones","text":"<p>Un programa Python es una secuencia de declaraciones:</p> <pre><code>a = 3 + 4\nb = a * 2\nprint(b)\n</code></pre> <p>Cada declaraci\u00f3n termina con una nueva l\u00ednea. Las declaraciones se ejecutan una tras otra hasta que el control llega al final del archivo.</p> <p>IMPORTANTE: A trav\u00e9s del curso los vocablos declaraci\u00f3n, sentencia e instrucci\u00f3n se utilizar\u00e1n con el mismo significado.</p>"},{"location":"01_Introduction/02_Hello_world/#comentarios","title":"Comentarios","text":"<p>Los comentarios son texto que no se ejecutar\u00e1.</p> <pre><code>a = 3 + 4\n#Esto es un comentario\nb = a * 2\nprint(b)\n</code></pre> <p>Los comentarios se indican con <code>#</code> y se extienden hasta el final de la l\u00ednea.</p>"},{"location":"01_Introduction/02_Hello_world/#variables","title":"Variables","text":"<p>Una variable es un nombre para un valor. Puedes utilizar letras (min\u00fasculas y, min\u00fasculas y may\u00fasculas) de la a a la z. Adem\u00e1s del car\u00e1cter de subrayado <code>_</code>, los n\u00fameros tambi\u00e9n pueden ser parte del nombre de una variable, excepto que se trate del primer caracter.</p> <pre><code>altura = 442 # v\u00e1lido\n_altura = 442 # v\u00e1lido\naltura2 = 442 # v\u00e1lido\n2altura = 442 # no v\u00e1lido\n</code></pre>"},{"location":"01_Introduction/02_Hello_world/#tipos","title":"Tipos","text":"<p>No es necesario declarar las variables con el tipo del valor. El tipo est\u00e1 asociado con el valor del lado derecho, no con el nombre de la variable.</p> <pre><code>altura = 442 # Un entero `int`\naltura = 442.0 # Punto flotante `float`\naltura = 'Muy alto' # Una cadena o string `str`\n</code></pre> <p>Python est\u00e1 tipado din\u00e1micamente. El \"tipo\" percibido de una variable podr\u00eda cambiar a medida que se ejecuta un programa dependiendo del valor actual asignado a ella.</p>"},{"location":"01_Introduction/02_Hello_world/#sensibilidad-a-mayusculas-y-minusculas","title":"Sensibilidad a may\u00fasculas y min\u00fasculas","text":"<p>Python distingue entre may\u00fasculas y min\u00fasculas. Las letras may\u00fasculas y min\u00fasculas se consideran letras diferentes. Todas estas son variables diferentes:</p> <pre><code>nombre = 'Jake'\nNombre = 'Elwood'\nNOMBRE = 'Guido'\n</code></pre> <p>Las declaraciones del lenguaje siempre est\u00e1n en min\u00fasculas.</p> <pre><code>while x &lt; 0: # OK\nWHILE x &lt; 0: # ERROR\n</code></pre>"},{"location":"01_Introduction/02_Hello_world/#bucle","title":"Bucle","text":"<p>La instrucci\u00f3n <code>while</code> ejecuta un bucle.</p> <pre><code>while num_billetes * espesor_de_billete &lt; altura_torre:\n    print(dia, num_billetes, num_billetes * espesor_de_billete)\n    dia = dia + 1\n    num_billetes = num_billetes * 2\n\nprint('Numero de d\u00edas', d\u00eda)\n</code></pre> <p>Las declaraciones sangradas debajo del <code>while</code> se ejecutar\u00e1n siempre que la expresi\u00f3n despu\u00e9s del <code>while</code> sea <code>true</code>.</p>"},{"location":"01_Introduction/02_Hello_world/#sangria","title":"Sangr\u00eda","text":"<p>La sangr\u00eda se utiliza para indicar grupos de declaraciones que van juntas. Consideremos el ejemplo anterior:</p> <pre><code>\nwhile num_billetes * espesor_de_billete &lt; altura_torre:\n    print(dia, num_billetes, num_billetes * espesor_de_billete)\n    dia = dia + 1\n    num_billetes = num_billetes * 2\n\nprint('Numero de d\u00edas', d\u00eda)\n</code></pre> <p>La sangr\u00eda agrupa las siguientes declaraciones como operaciones que se repiten:</p> <pre><code>    print(dia, num_billetes, num_billetes * espesor_de_billete)\n    dia = dia + 1\n    num_billetes = num_billetes * 2\n</code></pre> <p>Debido a que la declaraci\u00f3n <code>print()</code> al final no est\u00e1 sangrada, no pertenece al bucle. La l\u00ednea vac\u00eda es solo para legibilidad. No afecta la ejecuci\u00f3n.</p>"},{"location":"01_Introduction/02_Hello_world/#practicas-recomendadas-de-sangria","title":"Pr\u00e1cticas recomendadas de sangr\u00eda","text":"<ul> <li>Utilice espacios en lugar de tabulaciones.</li> <li>Utilice 4 espacios por nivel.</li> <li>Utilice un editor compatible con Python.</li> </ul> <p>El \u00fanico requisito de Python es que la sangr\u00eda est\u00e9 dentro del mismo bloque. Se consistente. Por ejemplo, esto es un error:</p> <pre><code>while num_billetes * espesor_de_billete &lt; altura_torre:\n    print(dia, num_billetes, num_billetes * espesor_de_billete)\n        dia = dia + 1 # ERROR\n    num_billetes = num_billetes * 2\n</code></pre>"},{"location":"01_Introduction/02_Hello_world/#condicionales","title":"Condicionales","text":"<p>La declaraci\u00f3n <code>if</code> se utiliza para ejecutar una condici\u00f3n:</p> <pre><code>if a &gt; b:\n    print('La computadora dice que no')\nelse:\n    print('La computadora dice que si')\n</code></pre> <p>Puede comprobar m\u00faltiples condiciones agregando comprobaciones adicionales mediante <code>elif</code>.</p> <pre><code>if a &gt; b:\n    print('La computadora dice que no')\nelif a == b:\n    print('La computadora dice que s\u00ed')\nelse:\n    print('La computadora dice tal vez')\n</code></pre>"},{"location":"01_Introduction/02_Hello_world/#impresion","title":"Impresi\u00f3n","text":"<p>La funci\u00f3n <code>print</code> produce una sola l\u00ednea de texto con los valores pasados.</p> <pre><code>print('\u00a1Hola mundo!') # Imprime el texto \u00a1Hola mundo!\n</code></pre> <p>Puedes utilizar variables. El texto impreso ser\u00e1 el valor de la variable, no el nombre.</p> <pre><code>x = 100\nprint(x) # Imprime el texto 100\n</code></pre> <p>Si pasa m\u00e1s de un valor a <code>print</code>, los mismos se separan con espacios.</p> <pre><code>nombre = 'Jake'\nprint('Mi nombre es', nombre) # Imprime el texto 'Mi nombre es Jake'\n</code></pre> <p><code>print()</code> siempre pone una nueva l\u00ednea al final.</p> <pre><code>print('Hola')\nprint('Mi nombre es', 'Jake')\n</code></pre> <p>Esto imprime:</p> <pre><code>Hola\nMi nombre es Jake\n</code></pre> <p>El car\u00e1cter de nueva l\u00ednea adicional se puede suprimir:</p> <pre><code>print('Hola', end=' ')\nprint('mi nombre es', 'Jake')\n</code></pre> <p>Este c\u00f3digo ahora imprimir\u00e1:</p> <pre><code>Hola mi nombre es Jake\n</code></pre>"},{"location":"01_Introduction/02_Hello_world/#entrada-del-usuario","title":"Entrada del usuario","text":"<p>Para leer una l\u00ednea de entrada escrita por el usuario, utilice la funci\u00f3n <code>input()</code>:</p> <pre><code>nombre = input('Ingrese su nombre: ')\nprint('Tu nombre es', nombre)\n</code></pre> <p><code>input</code> imprime un mensaje para el usuario y devuelve su respuesta. Esto es \u00fatil para programas peque\u00f1os, ejercicios de aprendizaje o depuraci\u00f3n simple. No se utiliza mucho para programas reales.</p>"},{"location":"01_Introduction/02_Hello_world/#declaracion-pass","title":"Declaraci\u00f3n <code>pass</code>","text":"<p>A veces es necesario especificar un bloque de c\u00f3digo vac\u00edo. Para ello se utiliza la palabra clave <code>pass</code>.</p> <pre><code>if a &gt; b:\n    pass\nelse:\n    print('La computadora dice falso')\n</code></pre> <p>Esto tambi\u00e9n se llama declaraci\u00f3n de \"no operaci\u00f3n\". No hace nada, sirve como marcador de posici\u00f3n para declaraciones que posiblemente se agregar\u00e1n m\u00e1s adelante.</p>"},{"location":"01_Introduction/02_Hello_world/#ejercicios","title":"Ejercicios","text":"<p>Este es el primer conjunto de ejercicios en los que debes crear archivos Python y ejecutarlos. A partir de este momento, se asume que usted est\u00e1n editando archivos en el directorio <code>practical-python/Work/</code>. Para ayudar a ubicar el lugar adecuado, hay varios archivos de inicio vac\u00edos, que se han creado con los nombres de archivo apropiados. Busque el archivo <code>Work/bounce.py</code> que se utiliza en el primer ejercicio.</p>"},{"location":"01_Introduction/02_Hello_world/#ejercicio-15-la-pelota-que-rebota","title":"Ejercicio 1.5: La pelota que rebota","text":"<p>Se deja caer una pelota de goma desde una altura de 100 metros y cada vez que golpea el suelo, rebota hasta 3/5 de la altura desde la que cay\u00f3. Escribir un programa <code>bounce.py</code> que imprime una tabla que muestra la altura de la primeros 10 rebotes.</p> <p>Su programa deber\u00eda crear una tabla que se parezca a esto:</p> <pre><code>1 60,0\n2 36,0\n3 21.5999999999999998\n4 12.9599999999999999\n5 7.7759999999999999\n6 4.66559999999999995\n7 2.799359999999996\n8 1.6796159999999998\n9 1.0077695999999998\n10 0,6046617599999998\n</code></pre> <p>Nota: Puedes limpiar un poco la salida si usas la funci\u00f3n <code>round()</code>. Intente usarlo para redondear la salida a 4 d\u00edgitos.</p> <pre><code>1 60.0\n2 36.0\n3 21.6\n4 12.96\n5 7.776\n6 4.6656\n7 2.7994\n8 1.6796\n9 1.0078\n10 0.6047\n</code></pre>"},{"location":"01_Introduction/02_Hello_world/#ejercicio-16-depuracion","title":"Ejercicio 1.6: Depuraci\u00f3n","text":"<p>El siguiente fragmento de c\u00f3digo contiene c\u00f3digo del problema de la Torre Sears. Tambi\u00e9n tiene un error.</p> <pre><code>#sears.py\nespesor_de_billete = 0.11 * 0.001 # Metros (0,11 mm)\naltura_torre = 442 # Altura (metros)\nnum_billetes = 1\ndia= 1\n\nwhile num_billetes * espesor_de_billete &lt; altura_torre:\n    print(dia, num_billetes, num_billetes * espesor_de_billete)\n    dia = dias + 1\n    num_billetes = num_billetes * 2\n\nprint('N\u00famero de d\u00edas', dia)\nprint('N\u00famero de billetes', num_billetes)\nprint('Altura final', num_billetes * espesor_de_billete)\n</code></pre> <p>Copie y pegue el c\u00f3digo que aparece arriba en un nuevo programa llamado <code>sears.py</code>. Cuando ejecute el c\u00f3digo, recibir\u00e1 un mensaje de error que se provoca. El programa se bloquea as\u00ed:</p> <pre><code>Traceback (most recent call last):\n  File \"c:\\Users\\Mario\\practical-python\\Exercises\\Ex1_6.py\", line 11, in &lt;module&gt;\n    d\u00eda = d\u00edas + 1\n          ^^^^\nNameError: name 'd\u00edas' is not defined. Did you mean: 'd\u00eda'?\n</code></pre> <p>La lectura de mensajes de error es una parte importante del c\u00f3digo Python. Si su programa se bloquea, la \u00faltima l\u00ednea del mensaje de seguimiento es la verdadera raz\u00f3n por la que el programa fall\u00f3. Encima de eso, deber\u00edas ver un fragmento del c\u00f3digo fuente y luego un nombre de archivo identificativo y un n\u00famero de l\u00ednea.</p> <ul> <li>\u00bfEn qu\u00e9 l\u00ednea est\u00e1 el error?</li> <li>\u00bfCu\u00e1l es el error?</li> <li>Arreglar el error</li> <li>Ejecutar el programa exitosamente</li> </ul> <p>Contenido | Anterior (1.1 Introducci\u00f3n a Python) | Pr\u00f3ximo (1.3 N\u00fameros)</p>"},{"location":"01_Introduction/03_Numbers/","title":"03_Numbers","text":"<p>Contenido | Anterior (1.2 Un primer programa) | Pr\u00f3ximo (1.4 Strings)</p>"},{"location":"01_Introduction/03_Numbers/#13-numeros","title":"1.3 N\u00fameros","text":"<p>En esta secci\u00f3n es acerca de c\u00e1lculos matem\u00e1ticos.</p>"},{"location":"01_Introduction/03_Numbers/#tipos-de-numeros","title":"Tipos de n\u00fameros","text":"<p>Python tiene 4 tipos de n\u00fameros:</p> <ul> <li>Booleanos <code>bool</code></li> <li>N\u00fameros enteros <code>int</code></li> <li>Punto flotante  <code>float</code></li> <li>Complejos (n\u00fameros imaginarios) <code>complex</code></li> </ul>"},{"location":"01_Introduction/03_Numbers/#booleanos-bool","title":"Booleanos <code>bool</code>","text":"<p>Los valores booleanos tienen dos valores: \"Verdadero\" <code>True</code> y \"Falso\" <code>False</code>.</p> <pre><code>a = True\nb = False\n</code></pre> <p>Num\u00e9ricamente, se eval\u00faan como n\u00fameros enteros con valor \u00ab1\u00bb, \u00ab0\u00bb.</p> <pre><code>c = 4 + True # 5\nd = False\nif d == 0:\n    print('d es falso')\n</code></pre> <p>Pero no escribas c\u00f3digo as\u00ed. Ser\u00eda extra\u00f1o.</p>"},{"location":"01_Introduction/03_Numbers/#numeros-enteros-int","title":"N\u00fameros enteros <code>int</code>","text":"<p>Valores con signo, de tama\u00f1o y base arbitrarios:</p> <pre><code>a = 37\nb = -299392993727716627377128481812241231\nc = 0x7fa8 # Hexadecimal\nd = 0o253 # Octal\ne = 0b10001111 # Binario\n</code></pre> <p>Operaciones comunes:</p> <pre><code>x + y Suma\nx - y Resta\nx * y Multiplicaci\u00f3n\nx / y Divici\u00f3n (produce un `float`)\nx // y Divisi\u00f3n de piso (produce un `int`)\nx % y M\u00f3dulo (resto)\nx ** y Potencia\nx &lt;&lt; n Desplazamiento de bit a la izquierda\nx &gt;&gt; n Desplazamiento de bit a la derecha\nx &amp; y AND bit a bit\ny | y OR bit a bit\nx ^ y XOR bit a bit\n~x Bit a bit NO\nabs(x) Valor absoluto\n</code></pre>"},{"location":"01_Introduction/03_Numbers/#punto-flotante-float","title":"Punto flotante <code>float</code>","text":"<p>Utilice una notaci\u00f3n decimal o exponencial para especificar un valor de punto flotante:</p> <pre><code>a = 37.45\nb = 4e5 # 4 x 10**5 o 400.000\nc = -1.345e-10\n</code></pre> <p>Los flotantes se representan como doble precisi\u00f3n utilizando la representaci\u00f3n nativa del CPU IEEE 754. Esto es lo mismo que el tipo <code>double</code> en el lenguaje de programaci\u00f3n C.</p> <ul> <li>17 d\u00edgitos de precisi\u00f3n</li> <li>Exponente de -308 a 308</li> </ul> <p>Tenga en cuenta que los n\u00fameros de punto flotante son inexactos cuando se representan decimales.</p> <pre><code>&gt;&gt;&gt; a = 2.1 + 4.2\n&gt;&gt;&gt; a == 6.3\nFalse\n&gt;&gt;&gt; a\n6.3000000000000001\n&gt;&gt;&gt;\n</code></pre> <p>Este no es un problema de Python, sino del hardware de punto flotante subyacente en la CPU.</p> <p>Operaciones comunes:</p> <pre><code>x + y       Suma\nx - y       Resta\nx * y       Multiplica\nx/y         Divisi\u00f3n\nx // y      Divisi\u00f3n de piso\nx % y       M\u00f3dulo\nx ** y      Potencia\nabs(x)      Valor absoluto\n</code></pre> <p>Estos son los mismos operadores que los n\u00fameros enteros, excepto los operadores bit a bit.</p> <p>Funciones matem\u00e1ticas adicionales se encuentran en el m\u00f3dulo <code>math</code>.</p> <pre><code>import math\na = math.sqrt(x)\nb = math.sin(x)\nc = math.cos(x)\nd = math.tan(x)\ne = math.log(x)\n</code></pre>"},{"location":"01_Introduction/03_Numbers/#comparaciones","title":"Comparaciones","text":"<p>Los siguientes operadores de comparaci\u00f3n o relacionales funcionan con n\u00fameros:</p> <pre><code>x &lt; y       Menor que\nx &lt;= y      Menor o igual que\nx &gt; y       Mayor que\nx &gt;= y      Mayor o igual que\nx == y      Igual a\nx != y      No es igual a\n</code></pre> <p>Puedes formar expresiones booleanas m\u00e1s complejas usando</p> <p><code>and</code>, <code>or</code>, <code>not</code></p> <p>A continuaci\u00f3n se muestran algunos ejemplos:</p> <pre><code>if b &gt;= a and b &lt;= c:\n    print('b est\u00e1 entre a y c')\nif not (b &lt; a or b &gt; c):\n    print('b todav\u00eda est\u00e1 entre a y c')\n</code></pre>"},{"location":"01_Introduction/03_Numbers/#conversion-de-numeros","title":"Conversi\u00f3n de n\u00fameros","text":"<p>El nombre del tipo se puede utilizar para convertir valores:</p> <pre><code>a = int(x) # Convertir x a entero\nb = float(x) # Convertir x a float\n</code></pre> <p>Pru\u00e9balo.</p> <pre><code>&gt;&gt;&gt; a = 3.14159\n&gt;&gt;&gt; int(a)\n3\n&gt;&gt;&gt; b = '3.14159' # Tambi\u00e9n funciona con strings que contienen n\u00fameros\n&gt;&gt;&gt; float(b)\n3.14159\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/03_Numbers/#ejercicios","title":"Ejercicios","text":"<p>Recordatorio: Estos ejercicios suponen que est\u00e1s trabajando en el directorio <code>practical-python/Work</code>. Mira el archivo <code>mortgage.py</code>.</p>"},{"location":"01_Introduction/03_Numbers/#ejercicio-17-la-hipoteca-de-dave","title":"Ejercicio 1.7: La hipoteca de Dave","text":"<p>Dave ha decidido contratar una hipoteca a tasa de interes fija a 30 a\u00f1os por 500.000 d\u00f3lares. con Guido\u2019s Mortgage Stock Investment and Bitcoin trading corporation. La tasa de inter\u00e9s es del 5% anual y el pago mensual es $2684.11.</p> <p>Aqu\u00ed hay un programa que calcula la cantidad total que tendr\u00e1 Dave a pagar durante la vida de la hipoteca:</p> <pre><code># mortgage.py\n\nprincipal = 500000.0\nrate = 0.05\npayment = 2684.11\ntotal_paid = 0.0\n\nwhile principal &gt; 0:\n    principal = principal * (1+rate/12) - payment\n    total_paid = total_paid + payment\n\nprint('Total paid', total_paid)\n</code></pre> <p>Ingrese a este programa y ejec\u00fatelo. Deber\u00eda obtener una respuesta de <code>Total paid 966279.6</code>.</p>"},{"location":"01_Introduction/03_Numbers/#ejercicio-18-pagos-extra","title":"Ejercicio 1.8: Pagos extra","text":"<p>Supongamos que Dave paga $1000 extra al mes durante los primeros 12 meses de la hipoteca.</p> <p>Modifique el programa para incorporar este pago adicional y haga que imprima el monto total pagado junto con el n\u00famero de meses requeridos.</p> <p>Al ejecutar el nuevo programa, deber\u00eda informar pago total de <code>929965.62 en 342 cuotas</code></p>"},{"location":"01_Introduction/03_Numbers/#ejercicio-19-calculadora-para-realizar-un-pago-adicional","title":"Ejercicio 1.9: Calculadora para realizar un pago adicional","text":"<p>Modificar el programa para que la informaci\u00f3n de pago adicional pueda manejarse de forma m\u00e1s general. Haga que el usuario pueda configurar estas variables:</p> <pre><code>extra_payment_start_month = 61\nextra_payment_end_month = 108\nextra_payment = 1000\n</code></pre> <p>Haga que el programa tome estas variables y calcule el total a pagar.</p> <p>\u00bfCu\u00e1nto pagar\u00e1 Dave si paga $1000 adicionales al mes durante 4 a\u00f1os a partir de que ya se hayan pagado los primeros cinco a\u00f1os?</p>"},{"location":"01_Introduction/03_Numbers/#ejercicio-110-hacer-una-tabla","title":"Ejercicio 1.10: Hacer una tabla","text":"<p>Modifique el programa para imprimir una tabla que muestre el mes, el total pagado hasta el momento y el capital restante. El resultado deber\u00eda verse as\u00ed:</p> <pre><code>1 2684.11 499399.22\n2 5368,22 498795,94\n3 8052.33 498190\n4 10736,44 497581,83\n5 13420.55 496970.98\n...\n308 874705.88 3478.83\n309 877389.99 809.21\n310 880074.1 -1871.53\nTotal paid 880074.1\nMonths 310\n</code></pre>"},{"location":"01_Introduction/03_Numbers/#ejercicio-111-bonificacion","title":"Ejercicio 1.11: Bonificaci\u00f3n","text":"<p>Mientras est\u00e9 en ello, arregle el programa para corregir el pago en exceso que ocurri\u00f3 en el \u00faltimo mes.</p>"},{"location":"01_Introduction/03_Numbers/#ejercicio-112-un-misterio","title":"Ejercicio 1.12: Un misterio","text":"<p><code>int()</code> y <code>float()</code> se pueden usar para convertir n\u00fameros. Por ejemplo,</p> <pre><code>&gt;&gt;&gt; int(\"123\")\n123\n&gt;&gt;&gt; float(\"1.23\")\n1.23\n&gt;&gt;&gt;\n</code></pre> <p>Con esto en mente, \u00bfpuedes explicar este comportamiento?</p> <pre><code>&gt;&gt;&gt; bool(\"False\")\nTrue\n&gt;&gt;&gt;\n</code></pre> <p>Contenido | Anterior (1.2 Un primer programa) | Pr\u00f3ximo (1.4 Strings)</p>"},{"location":"01_Introduction/04_Strings/","title":"04_Strings","text":"<p>Contenido | Anterior (1.3 N\u00fameros) | Pr\u00f3ximo (1.5 Listas)</p>"},{"location":"01_Introduction/04_Strings/#14-strings","title":"1.4 Strings","text":"<p>Esta secci\u00f3n presenta formas de trabajar con texto.</p> <ul> <li>IMPORTANTE: Las palabras <code>string</code> y <code>cadena</code> son utilizadas con el     mismo significado</li> </ul>"},{"location":"01_Introduction/04_Strings/#representacion-de-texto-literal","title":"Representaci\u00f3n de texto literal","text":"<p>Los literales de cadena se escriben en programas con comillas.</p> <pre><code># Comillas simples\na = 'S\u00ed, pero no, pero s\u00ed, pero...'\n\n# Comillas dobles\nb = \"la computadora dice que no\"\n\n# Comillas triples\nc = ''' \nM\u00edrame a los ojos, m\u00edrame a los ojos, a los ojos, a los ojos, a los ojos,\nNo alrededor de los ojos, no mires alrededor de los ojos, m\u00edrame a los ojos, est\u00e1s debajo.\n'''\n</code></pre> <p>Normalmente, los strings solo pueden abarcar una \u00fanica l\u00ednea. Las comillas triples capturan todo el texto encerrado en varias l\u00edneas, incluido todo el formato.</p> <p>No hay diferencia entre usar comillas simples <code>'</code> o dobles <code>\"</code>.</p> <p>Sin embargo, se debe usar el mismo tipo de comillas utilizadas para iniciar una cadena para terminarla.</p>"},{"location":"01_Introduction/04_Strings/#codigos-de-escape-de-cadenas","title":"C\u00f3digos de escape de cadenas","text":"<p>Los c\u00f3digos de escape se utilizan para representar caracteres de control y caracteres que no se pueden escribir f\u00e1cilmente directamente en el teclado. A continuaci\u00f3n se muestran algunos c\u00f3digos de escape comunes:</p> <pre><code>'\\n'    Salto de l\u00ednea\n'\\r'    Retorno de carro\n'\\t'    Tabulador\n'\\''    Comilla simple literal\n'\\\"'    Comillas dobles literal\n'\\\\'    Barra invertida literal\n</code></pre>"},{"location":"01_Introduction/04_Strings/#representacion-de-cadena","title":"Representaci\u00f3n de cadena","text":"<p>Cada car\u00e1cter de una cadena se almacena internamente como un denominado punto de c\u00f3digo Unicode, que es un n\u00famero entero. Puede especificar un valor de punto de c\u00f3digo exacto utilizando las siguientes secuencias de escape:</p> <pre><code>a = '\\xf1'          # a = '\u00f1'\nb = '\\u2200'        # b = '\u2200'\nc = '\\U0001D122'    # c = '\ud834\udd22'\nd = '\\N{FOR ALL}'   # d = '\u2200'\n</code></pre> <p>La base de datos de caracteres Unicode es una referencia para todos los c\u00f3digos de caracteres disponibles.</p>"},{"location":"01_Introduction/04_Strings/#indexacion-de-strings","title":"Indexaci\u00f3n de strings","text":"<p>Los strings funcionan como una matriz para acceder a caracteres individuales. Se utiliza un \u00edndice entero, que comienza en 0. Los \u00edndices negativos especifican una posici\u00f3n relativa al final del string.</p> <pre><code>a = 'Hola mundo'\nb = a[0]      # 'H'\nc = a[4]      # ''\nd = a[-1]     # 'o' (fin de la cadena)\n</code></pre> <p>Tambi\u00e9n puedes cortar o seleccionar substrings especificando un rango de \u00edndices con <code>:</code>.</p> <pre><code>d = a[:5]       # 'Hola'\ne = a[6:]       # 'undo'\nf = a[3:8]      # 'a mun'\ng = a[-5:]      # 'mundo'\n</code></pre> <p>El car\u00e1cter del \u00edndice final no est\u00e1 incluido. Los \u00edndices faltantes suponen el principio o el final de la cadena.</p>"},{"location":"01_Introduction/04_Strings/#operaciones-con-cadenas","title":"Operaciones con cadenas","text":"<p>Concatenaci\u00f3n, longitud, membres\u00eda y replicaci\u00f3n.</p> <pre><code># Concatenaci\u00f3n (+)\na = 'Hola' + 'Mundo'    # 'HolaMundo'\nb = 'Decir ' + a        # 'Decir HolaMundo'\n\n# Longitud (len)\ns = 'Hola'\nlen(s) # 4\n\n# Prueba de membres\u00eda (`in`, `not in`)\nt = 'o' in s          # True\nf = 'x' in s          # False\ng = 'hola' not in s   # True\n\n# Replicaci\u00f3n (s * n)\nrep = s * 5           # 'HolaHolaHolaHolaHola'\n</code></pre>"},{"location":"01_Introduction/04_Strings/#metodos-de-cadena","title":"M\u00e9todos de cadena","text":"<p>Los strings tienen m\u00e9todos que realizan varias operaciones con los datos de los mismos.</p> <p>Ejemplo: eliminar cualquier espacio en blanco inicial o final.</p> <pre><code>s = ' Hola '\nt = s.strip()       # 'Hola'\n</code></pre> <p>Ejemplo: Conversi\u00f3n de may\u00fasculas y min\u00fasculas.</p> <pre><code>s = 'Hola'\nl = s.lower()       # 'hola'\nu = s.upper()       # 'HOLA'\n</code></pre> <p>Ejemplo: Reemplazar texto.</p> <pre><code>s = 'Hola mundo'\nt = s.replace('Hola' , 'Hello')     # 'Hello mundo'\n</code></pre> <p>M\u00e1s m\u00e9todos de String:</p> <p>Las cadenas tienen una amplia variedad de otros m\u00e9todos para probar y manipular los datos de texto. Esta es una peque\u00f1a muestra de m\u00e9todos:</p> <pre><code>s.endswith(suffix)            # Verifica si la cadena termina con suffix\ns.find(t)                     # Primera aparici\u00f3n de t en s\ns.index(t)                    # Primera aparici\u00f3n de t en s\ns.isalpha()                   # Comprueba si los caracteres son alfab\u00e9ticos\ns.isdigit()                   # Comprueba si los caracteres son num\u00e9ricos\ns.islower()                   # Verifica si los caracteres est\u00e1n en min\u00fasculas\ns.isupper()                   # Verifica si los caracteres est\u00e1n en may\u00fasculas\ns.join(slist)                 # Une una lista de cadenas usando s como delimitador\ns.lower()                     # Convierte a min\u00fasculas\ns.replace(old,new)            # Reemplaza texto\ns.rfind(t)                    # Busca t desde el final de la cadena\ns.rindex(t)                   # Busca t desde el final de la cadena\ns.split([delim])              # Divide la cadena en una lista de subcadenas\ns.startswith(prefix)          # Verifica si la cadena comienza con prefijo\ns.strip()                     # Elimina los espacios iniciales y finales\ns.upper()                     # Convierte a may\u00fasculas\n</code></pre>"},{"location":"01_Introduction/04_Strings/#mutabilidad-de-los-strings","title":"Mutabilidad de los strings","text":"<p>Los strings son \"inmutables\" o de s\u00f3lo lectura. Una vez creado, el valor no se puede cambiar.</p> <pre><code>&gt;&gt;&gt; s = 'Hola mundo'\n&gt;&gt;&gt; s[1] = 'a'\nTraceback (most recent call last):\n  File \"&lt;python-input-5&gt;\", line 1, in &lt;module&gt;\n    s[1] = 'a'\n    ~^^^\nTypeError: 'str' object does not support item assignment\n&gt;&gt;&gt;\n</code></pre> <p>Todas las operaciones y m\u00e9todos que manipulan datos de strings, siempre crean nuevos strings.</p>"},{"location":"01_Introduction/04_Strings/#conversiones-de-strings","title":"Conversiones de strings","text":"<p>Utilice <code>str()</code> para convertir cualquier valor en un string. El resultado es un string que contiene el mismo texto que habr\u00eda sido producido por la declaraci\u00f3n <code>print()</code>.</p> <pre><code>&gt;&gt;&gt; x = 42\n&gt;&gt;&gt; str(x)\n'42'\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/04_Strings/#cadenas-de-bytes","title":"Cadenas de bytes","text":"<p>Una cadena de bytes de 8 bits, que se encuentra com\u00fanmente en E/S de bajo nivel, se escribe de la siguiente manera:</p> <pre><code>datos = b'Hola mundo\\r\\n'\n</code></pre> <p>Al colocar una b min\u00fascula antes de la primera comilla, especifica que se trata de una cadena de bytes y no de una cadena de texto.</p> <p>La mayor\u00eda de las operaciones de cadena habituales funcionan.</p> <pre><code>len(datos)                        # 12\ndatos[0:4]                        # b'Hola'\ndatos.replace(b'Hola', b'Cruel')  # b'Cruel mundo\\r\\n'\n</code></pre> <p>La indexaci\u00f3n es un poco diferente porque devuelve valores de bytes como n\u00fameros enteros.</p> <pre><code>datos[0] # 72 (c\u00f3digo ASCII para 'H')\n</code></pre> <p>Conversi\u00f3n a/desde cadenas de texto.</p> <pre><code>texto = datos.decode('utf-8')       # bytes -&gt; texto\ndatos = texto.encode('utf-8')       # texto -&gt; bytes\n</code></pre> <p>El argumento \"utf-8\" especifica una codificaci\u00f3n de caracteres. Otros valores comunes incluyen \"ascii\" y \"latin1\".</p>"},{"location":"01_Introduction/04_Strings/#stings-sin-procesar","title":"Stings sin procesar","text":"<p>Los strings sin formato son literales de strings con una barra invertida no interpretada. Ellos se especifican anteponiendo la comilla inicial con una \"r\" min\u00fascula.</p> <pre><code>&gt;&gt;&gt; rs = r'c:\\newdata\\test'       # Sin formato (barra invertida no interpretada)\n&gt;&gt;&gt; rs\n'c:\\\\newdata\\\\prueba'\n</code></pre> <p>Los strings son el texto literal incluido en el interior, exactamente como se escribe. Esto es \u00fatil en situaciones donde la barra invertida tiene un significado especial. Ejemplo: nombre de archivo, expresiones regulares, etc.</p>"},{"location":"01_Introduction/04_Strings/#f-strings","title":"f-strings","text":"<p>Una cadena con sustituci\u00f3n de expresi\u00f3n formateada.</p> <pre><code>&gt;&gt;&gt; nombre = 'IBM'\n&gt;&gt;&gt; acciones = 100\n&gt;&gt;&gt; precio = 91.1\n&gt;&gt;&gt; a = f'{nombre:&gt;10s} {acciones:10d} {precio:10.2f}'\n&gt;&gt;&gt; a\n'IBM 100 91.10'\n&gt;&gt;&gt; b = f'Costo = ${acciones*precio:0.2f}'\n&gt;&gt;&gt;b\n'Costo = $9110.00'\n&gt;&gt;&gt;\n</code></pre> <p>Nota: Esto requiere Python 3.6 o m\u00e1s reciente. El significado de los c\u00f3digos de formato se trata m\u00e1s adelante.</p>"},{"location":"01_Introduction/04_Strings/#ejercicios","title":"Ejercicios","text":"<p>En estos ejercicios, experimentar\u00e1 con operaciones usando el tipo de cadena de Python. Debes hacer esto en el modo interactivo de Python, donde podr\u00e1s ver f\u00e1cilmente los resultados.</p> <p>Nota importante:</p> <p>En ejercicios en los que se supone que debes interactuar con el int\u00e9rprete, <code>&gt;&gt;&gt;</code> es el mensaje de solicitud del int\u00e9rprete que aparece cuando Python desea que escribas una nueva declaraci\u00f3n. Algunas afirmaciones en el ejercicio abarcan varias l\u00edneas: para que se ejecuten estas instrucciones, es posible que tenga que presionar 'Enter' unas cuantas veces. Solo un recordatorio de que NO debes escribir el <code>&gt;&gt;&gt;</code> al trabajar estos ejemplos.</p> <p>Comience por definir una cadena que contenga una serie de s\u00edmbolos burs\u00e1tiles como este:</p> <pre><code>&gt;&gt;&gt;\n&gt;&gt;&gt; symbols = 'AAPL,IBM,MSFT,YHOO,SCO'\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/04_Strings/#ejercicio-113-extraccion-de-caracteres-individuales-y-subcadenas","title":"Ejercicio 1.13: Extracci\u00f3n de caracteres individuales y subcadenas","text":"<p>Las cadenas son matrices de caracteres. Intente extraer algunos caracteres:</p> <pre><code>&gt;&gt;&gt; symbols[0]\n?\n&gt;&gt;&gt; symbols[1]\n?\n&gt;&gt;&gt; symbols[2]\n?\n&gt;&gt;&gt; symbols[-1] # \u00daltimo car\u00e1cter\n?\n&gt;&gt;&gt; symbols[-2] # Los \u00edndices negativos son desde el final de la cadena\n?\n&gt;&gt;&gt;\n</code></pre> <p>En Python, las cadenas son de solo lectura.</p> <p>Verifique esto intentando cambiar el primer car\u00e1cter de 'symbols' a una 'a' min\u00fascula.</p> <pre><code>&gt;&gt;&gt; symbols[0] = 'a'\nTraceback (most recent call last):\n  File \"&lt;python-input-3&gt;\", line 1, in &lt;module&gt;\n    symbols[0] = 'a'\n    ~~~~~~~^^^\nTypeError: 'str' object does not support item assignment\n&gt;&gt;&gt; \n</code></pre>"},{"location":"01_Introduction/04_Strings/#ejercicio-114-concatenacion-de-cadenas","title":"Ejercicio 1.14: Concatenaci\u00f3n de cadenas","text":"<p>Aunque los datos de cadena son de solo lectura, siempre puedes reasignar una variable a una cadena reci\u00e9n creada.</p> <p>Pruebe la siguiente declaraci\u00f3n que concatena un nuevo s\u00edmbolo \"GOOG\" a El final de los `symbols':</p> <pre><code>&gt;&gt;&gt; symbols = symbols + 'GOOG'\n&gt;&gt;&gt; symbols\n'AAPL,IBM,MSFT,YHOO,SCOGOOG'\n&gt;&gt;&gt;\n</code></pre> <p>\u00a1Ups! Eso no es lo que quer\u00edas. Arr\u00e9glelo para que la variable <code>symbols</code> contenga el valor <code>'AAPL,IBM,MSFT,YHOO,SCO,GOOG'</code>.</p> <pre><code>&gt;&gt;&gt; symbols = ?\n&gt;&gt;&gt; symbols\n'AAPL,IBM,MSFT,YHOO,SCO,GOOG'\n&gt;&gt;&gt;\n</code></pre> <p>A\u00f1ade 'HPQ' al principio de la cadena:</p> <pre><code>&gt;&gt;&gt; symbols = ?\n&gt;&gt;&gt; symbols\n'HPQ,AAPL,IBM,MSFT,YHOO,SCO,GOOG'\n&gt;&gt;&gt;\n</code></pre> <p>En estos ejemplos, podr\u00eda parecer que se est\u00e1 modificando la cadena original, en una aparente violaci\u00f3n del principio de que las cadenas son de solo lectura. No es as\u00ed. Las operaciones sobre cadenas crean una cadena completamente nueva cada vez. Cuando se reasigna el nombre de la variable <code>symbols</code>, apunta a la cadena reci\u00e9n creada. Posteriormente la cadena vieja se destruye porque ya no se utiliza.</p>"},{"location":"01_Introduction/04_Strings/#ejercicio-115-prueba-de-pertenencia-prueba-de-subcadenas","title":"Ejercicio 1.15: Prueba de pertenencia (prueba de subcadenas)","text":"<p>Experimente con el operador <code>in</code> para comprobar si hay subcadenas. En modo interactivo: pruebe estas operaciones:</p> <pre><code>&gt;&gt;&gt; 'IBM' in symbols\n?\n&gt;&gt;&gt; 'AA' in symbols\nTrue\n&gt;&gt;&gt; 'CAT' in symbols\n?\n&gt;&gt;&gt;\n</code></pre> <p>\u00bfPor qu\u00e9 la verificaci\u00f3n de <code>'AA'</code> devolvi\u00f3 <code>True</code>?</p>"},{"location":"01_Introduction/04_Strings/#ejercicio-116-metodos-de-cadena","title":"Ejercicio 1.16: M\u00e9todos de cadena","text":"<p>En el modo interactivo de Python, intente experimentar con algunos de los m\u00e9todos de cadena.</p> <pre><code>&gt;&gt;&gt; symbols.lower()\n?\n&gt;&gt;&gt; symbols\n?\n&gt;&gt;&gt;\n</code></pre> <p>Recuerde, las cadenas siempre son de solo lectura. Si desea guardar el resultado de una operaci\u00f3n, debe colocarlo en una variable:</p> <pre><code>&gt;&gt;&gt; lowersyms = symbols.lower()\n&gt;&gt;&gt;\n</code></pre> <p>Pruebe algunas operaciones m\u00e1s:</p> <pre><code>&gt;&gt;&gt; symbols.find('MSFT')\n?\n&gt;&gt;&gt; symbols[13:17]\n?\n&gt;&gt;&gt; symbols = symbols.replace('SCO','DOA')\n&gt;&gt;&gt; symbols\n?\n&gt;&gt;&gt; name = '   IBM   \\n'\n&gt;&gt;&gt; name = name.strip()       # Elimina los espacios en blanco circundantes\n&gt;&gt;&gt; name\n?\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/04_Strings/#ejercicio-117-f-string","title":"Ejercicio 1.17: f-string","text":"<p>A veces quieres crear una cadena e incrustar los valores de variables en ella.</p> <p>Para hacer esto, utiliza una f-string. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; name = 'IBM'\n&gt;&gt;&gt; shares = 100\n&gt;&gt;&gt; price = 91.1\n&gt;&gt;&gt; f'{shares} acciones de {name} a ${price:0.2f}'\n'100 acciones de IBM a $91.10'\n&gt;&gt;&gt;\n</code></pre> <p>Modifique el programa <code>mortgage.py</code> del [Ejercicio 1.1] usando f-strings. Intente hacer que la salida est\u00e9 bien alineada.</p>"},{"location":"01_Introduction/04_Strings/#ejercicio-118-expresiones-regulares","title":"Ejercicio 1.18: Expresiones regulares","text":"<p>Una limitaci\u00f3n de las operaciones de cadenas b\u00e1sicas es que no admiten ning\u00fan tipo de coincidencia de patrones avanzada. Para ello, es necesario recurrir al m\u00f3dulo <code>re</code> de Python y a las expresiones regulares.</p> <p>El manejo de expresiones regulares es un tema amplio, pero aqu\u00ed hay un breve ejemplo:</p> <pre><code>&gt;&gt;&gt; texto = 'Hoy es 27/3/2018. Ma\u00f1ana es 28/03/2018.'\n&gt;&gt;&gt; # Encuentra todas las ocurrencias de una fecha\n&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.findall(r'\\d+/\\d+/\\d+', texto)\n['27/3/2018', '28/3/2018']\n&gt;&gt;&gt; # Reemplaza todas las apariciones de una fecha con el texto de reemplazo\n&gt;&gt;&gt; re.sub(r'(\\d+)/(\\d+)/(\\d+)', r'\\3-\\1-\\2', texto)\n'Hoy es 2018-27-3. Ma\u00f1ana es 2018-28-03.'\n&gt;&gt;&gt;\n</code></pre> <p>Para obtener m\u00e1s informaci\u00f3n sobre el m\u00f3dulo <code>re</code>, consulte la documentaci\u00f3n oficial en https://docs.python.org/library/re.html.</p>"},{"location":"01_Introduction/04_Strings/#comentario","title":"Comentario","text":"<p>A medida que comienza a experimentar con el int\u00e9rprete, a menudo desea saber m\u00e1s sobre las operaciones admitidas por los diferentes objetos. Por ejemplo, \u00bfc\u00f3mo saber qu\u00e9 operaciones est\u00e1n disponibles en una cadena?</p> <p>Dependiendo de su entorno de Python, es posible que pueda ver una lista de m\u00e9todos disponibles mediante la funci\u00f3n de completar tabulaciones. Por ejemplo, intenta escribir esto:</p> <pre><code>&gt;&gt;&gt; s = 'hola mundo'\n&gt;&gt;&gt; s.&lt;tecla de tabulaci\u00f3n&gt;     # Algunas veces tendr\u00e1s que colocar &lt;tecla de tabulaci\u00f3n&gt; dos veces.\n&gt;&gt;&gt;\n</code></pre> <p>Si presionar la tecla <code>tab</code> no hace nada, puedes recurrir a la funci\u00f3n incorporada <code>dir()</code>. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; s = 'hola'\n&gt;&gt;&gt; dir(s)\n['__add__', '__class__', '__contains__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'capitalize', 'casefold', 'center', 'count', 'encode', 'endswith', 'expandtabs', 'find', 'format', 'format_map', 'index', 'isalnum', 'isalpha', 'isascii', 'isdecimal', 'isdigit', 'isidentifier', 'islower', 'isnumeric', 'isprintable', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'maketrans', 'partition', 'removeprefix', 'removesuffix', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title', 'translate', 'upper', 'zfill']\n&gt;&gt;&gt; \n</code></pre> <p><code>dir()</code> produce una lista de todas las operaciones que pueden aparecer despu\u00e9s de <code>(.)</code>. Utilice el comando <code>help()</code> para obtener m\u00e1s informaci\u00f3n sobre una operaci\u00f3n espec\u00edfica:</p> <pre><code>help(s.upper)\nHelp on built-in function upper:\n\nupper() method of builtins.str instance\n    Return a copy of the string converted to uppercase.\n\n&gt;&gt;&gt;\n</code></pre> <p>Devuelve una copia de la cadena <code>s</code> convertida a may\u00fasculas.</p> <p>Contenido | Anterior (1.3 N\u00fameros) | Pr\u00f3ximo (1.5 Listas)</p>"},{"location":"01_Introduction/05_Lists/","title":"05_Lists","text":"<p>Contenido | Anterior (1.4 Strings) | Pr\u00f3ximo (1.6 Archivos)</p>"},{"location":"01_Introduction/05_Lists/#15-listas","title":"1.5 Listas","text":"<p>Esta secci\u00f3n presenta las listas, el tipo principal de Python para almacenar una colecci\u00f3n ordenada de valores.</p>"},{"location":"01_Introduction/05_Lists/#creando-una-lista","title":"Creando una lista","text":"<p>Utilice corchetes para definir una lista literal:</p> <pre><code>names = [ 'Elwood', 'Jake', 'Curtis' ]\nnums = [ 39, 38, 42, 65, 111]\n</code></pre> <p>A veces las listas se crean mediante otros m\u00e9todos. Por ejemplo, una cadena se puede dividir en una lista usando el m\u00e9todo <code>split()</code>:</p> <pre><code>&gt;&gt;&gt; line = 'GOOG,100,490.10'\n&gt;&gt;&gt; row = line.split(',')\n&gt;&gt;&gt; row\n['GOOG', '100', '490.10']\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/05_Lists/#operaciones-de-lista","title":"Operaciones de lista","text":"<p>Las listas pueden contener elementos de cualquier tipo. Agregue un nuevo elemento usando <code>append()</code>:</p> <pre><code>&gt;&gt;&gt; names.append('Murphy')        # Agrega al final\n&gt;&gt;&gt; names.insert(2, 'Aretha')     # Inserta en el medio\n&gt;&gt;&gt; names\n['Elwood', 'Jake', 'Aretha', 'Curtis', 'Murphy']\n</code></pre> <p>Utilice <code>+</code> para concatenar listas:</p> <pre><code>s = [1, 2, 3]\nt = ['a', 'b']\ns + t    # [1, 2, 3, 'a', 'b']\n</code></pre> <p>Las listas se indexan mediante n\u00fameros enteros. Empezando desde 0.</p> <pre><code>names = [ 'Elwood', 'Jake', 'Curtis' ]\n\nnames[0]      # 'Elwood'\nnames[1]      # 'Jake'\nnames[2]      # 'Curtis'\n</code></pre> <p>Los \u00edndices negativos cuentan desde el final.</p> <pre><code>names[-1]     # 'Curtis'\n</code></pre> <p>Puede cambiar cualquier elemento de una lista.</p> <pre><code>names[1] = 'Joliet Jake'\nnames         # [ 'Elwood', 'Joliet Jake', 'Curtis' ]\n</code></pre> <p>Longitud de la lista.</p> <pre><code>names = ['Elwood','Jake','Curtis']\nlen(names)    # 3\n</code></pre> <p>Prueba de membres\u00eda (<code>in</code>, <code>not in</code>).</p> <pre><code>'Elwood' in names           # True\n'Britney' not in names      # True\n</code></pre> <p>Replicaci\u00f3n (<code>s * n</code>).</p> <pre><code>s = [1, 2, 3]\ns * 3         # [1, 2, 3, 1, 2, 3, 1, 2, 3]\n</code></pre>"},{"location":"01_Introduction/05_Lists/#iteracion-y-busqueda-en-listas","title":"Iteraci\u00f3n y b\u00fasqueda en listas","text":"<p>Utilice <code>for</code> para iterar sobre el contenido de la lista.</p> <pre><code>for name in names:\n    # use name\n    # e.g. print(name)\n    ...\n</code></pre> <p>Esto es similar a una declaraci\u00f3n <code>foreach</code> de otros lenguajes de programaci\u00f3n.</p> <p>Para encontrar la posici\u00f3n de algo r\u00e1pidamente, utilice <code>index()</code>.</p> <pre><code>names = ['Elwood','Jake','Curtis']\nnames.index('Curtis')       # 2\n</code></pre> <p>Si el elemento est\u00e1 presente m\u00e1s de una vez, <code>index()</code> devolver\u00e1 el \u00edndice de la primera aparici\u00f3n.</p> <p>Si no se encuentra el elemento, se generar\u00e1 una excepci\u00f3n 'ValueError'.</p>"},{"location":"01_Introduction/05_Lists/#eliminacion-de-lista","title":"Eliminaci\u00f3n de lista","text":"<p>Puede eliminar elementos por valor de elemento o por \u00edndice:</p> <pre><code># Usando el valor\nnames.remove('Curtis')\n\n# Usando el \u00edndice\ndel names[1]\n</code></pre> <p>Quitar un elemento no crea un agujero. Otros elementos se mover\u00e1n hacia abajo para llenar el espacio dejado vacante. Si hay m\u00e1s de una ocurrencia del elemento, <code>remove()</code> eliminar\u00e1 solo la primera ocurrencia.</p>"},{"location":"01_Introduction/05_Lists/#ordenacion-de-listas","title":"Ordenaci\u00f3n de listas","text":"<p>Las listas se pueden ordenar \"en el lugar\" (\"in-place\").</p> <pre><code>s = [10, 1, 7, 3]\ns.sort()               # [1, 3, 7, 10]\n\n# Orden inverso\ns = [10, 1, 7, 3]\ns.sort(reverse=True)   # [10, 7, 3, 1]\n\n# Funciona con cualquier dato ordenado\ns = ['foo', 'bar', 'spam']\ns.sort()               # ['bar', 'foo', 'spam']\n</code></pre> <p>Utilice <code>sorted()</code> si desea crear una nueva lista:</p> <pre><code>t = sorted(s)            # s sin cambios, t contiene valores ordenados\n</code></pre>"},{"location":"01_Introduction/05_Lists/#listas-y-matematicas","title":"Listas y matem\u00e1ticas","text":"<p>Precauci\u00f3n: Las listas no fueron dise\u00f1adas para operaciones matem\u00e1ticas.</p> <pre><code>&gt;&gt;&gt; nums = [1, 2, 3, 4, 5]\n&gt;&gt;&gt; nums * 2\n[1, 2, 3, 4, 5, 1, 2, 3, 4, 5]\n&gt;&gt;&gt; nums + [10, 11, 12, 13, 14]\n[1, 2, 3, 4, 5, 10, 11, 12, 13, 14]\n</code></pre> <p>Espec\u00edficamente, las listas no representan vectores/matrices como en MATLAB, Octave, R, etc. Sin embargo, existen algunos paquetes que pueden ayudarte con eso (por ejemplo, numpy).</p>"},{"location":"01_Introduction/05_Lists/#ejercicios","title":"Ejercicios","text":"<p>En este ejercicio, experimentamos con el tipo de datos de lista de Python. En la \u00faltima secci\u00f3n, trabajaste con cadenas que conten\u00edan s\u00edmbolos burs\u00e1tiles.</p> <pre><code>&gt;&gt;&gt; symbols = 'HPQ,AAPL,IBM,MSFT,YHOO,DOA,GOOG'\n</code></pre> <p>Div\u00eddalo en una lista de nombres utilizando la operaci\u00f3n <code>split()</code> de cadenas:</p> <pre><code>&gt;&gt;&gt; symlist = symbols.split(',')\n</code></pre>"},{"location":"01_Introduction/05_Lists/#ejercicio-119-extraccion-y-reasignacion-de-elementos-de-lista","title":"Ejercicio 1.19: Extracci\u00f3n y reasignaci\u00f3n de elementos de lista","text":"<p>Pruebe algunas b\u00fasquedas:</p> <pre><code>&gt;&gt;&gt; symlist[0]\n'HPQ'\n&gt;&gt;&gt; symlist[1]\n'AAPL'\n&gt;&gt;&gt; symlist[-1]\n'GOOG'\n&gt;&gt;&gt; symlist[-2]\n'DOA'\n&gt;&gt;&gt;\n</code></pre> <p>Intente reasignar un valor:</p> <pre><code>&gt;&gt;&gt; symlist[2] = 'AIG'\n&gt;&gt;&gt; symlist\n['HPQ', 'AAPL', 'AIG', 'MSFT', 'YHOO', 'DOA', 'GOOG']\n&gt;&gt;&gt;\n</code></pre> <p>Tome algunas rebanadas:</p> <pre><code>&gt;&gt;&gt; symlist[0:3]\n['HPQ', 'AAPL', 'AIG']\n&gt;&gt;&gt; symlist[-2:]\n['DOA', 'GOOG']\n&gt;&gt;&gt;\n</code></pre> <p>Crea una lista vac\u00eda y agr\u00e9gale un elemento.</p> <pre><code>&gt;&gt;&gt; mysyms = []\n&gt;&gt;&gt; mysyms.append('GOOG')\n&gt;&gt;&gt; mysyms\n['GOOG']\n</code></pre> <p>Puede reasignar una parte de una lista a otra lista. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; symlist[-2:] = mysyms\n&gt;&gt;&gt; symlist\n['HPQ', 'AAPL', 'AIG', 'MSFT', 'YHOO', 'GOOG']\n&gt;&gt;&gt;\n</code></pre> <p>Al hacer esto, la lista del lado izquierdo (<code>symlist</code>) se redimensionar\u00e1 seg\u00fan corresponda para que encaje en el lado derecho (<code>mysyms</code>). Por ejemplo, en el ejemplo anterior, los dos \u00faltimos elementos de <code>symlist</code> fueron reemplazados por el \u00fanico elemento de la lista <code>mysyms</code>.</p>"},{"location":"01_Introduction/05_Lists/#ejercicio-120-recorrer-los-elementos-de-la-lista","title":"Ejercicio 1.20: Recorrer los elementos de la lista","text":"<p>El bucle <code>for</code> funciona recorriendo los datos de una secuencia, como por ejemplo una lista. Compru\u00e9belo escribiendo el siguiente bucle y observando lo que sucede:</p> <pre><code>&gt;&gt;&gt; for s in symlist:\n        print('s =', s)\n# Mire la salida\n</code></pre>"},{"location":"01_Introduction/05_Lists/#ejercicio-121-pruebas-de-pertenencia","title":"Ejercicio 1.21: Pruebas de pertenencia","text":"<p>Utilice el operador <code>in</code> o <code>not in</code> para comprobar si <code>'AIG'</code>, <code>'AA'</code> y <code>'CAT'</code> est\u00e1n en la lista de s\u00edmbolos.</p> <pre><code>&gt;&gt;&gt; # Est\u00e1 'AIG' en `symlist`?\nTrue\n&gt;&gt;&gt; # Est\u00e1 'AA' en `symlist`?\nFalse\n&gt;&gt;&gt; # NO Est\u00e1 'CAT' en `symlist`?\nTrue\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/05_Lists/#ejercicio-122-anadir-insertar-y-eliminar-elementos","title":"Ejercicio 1.22: A\u00f1adir, insertar y eliminar elementos","text":"<p>Utilice el m\u00e9todo <code>append()</code> para agregar el s\u00edmbolo <code>'RHT'</code> al final de <code>symlist</code>.</p> <pre><code>&gt;&gt;&gt; # append 'RHT'\n&gt;&gt;&gt; symlist\n['HPQ', 'AAPL', 'AIG', 'MSFT', 'YHOO', 'GOOG', 'RHT']\n&gt;&gt;&gt;\n</code></pre> <p>Utilice el m\u00e9todo <code>insert()</code> para insertar el s\u00edmbolo <code>'AA'</code> como el segundo elemento de la lista.</p> <pre><code>&gt;&gt;&gt; # Inserta 'AA' como el segundo elemento de la lista\n&gt;&gt;&gt; symlist\n['HPQ', 'AA', 'AAPL', 'AIG', 'MSFT', 'YHOO', 'GOOG', 'RHT']\n&gt;&gt;&gt;\n</code></pre> <p>Utilice el m\u00e9todo <code>remove()</code> para eliminar <code>'MSFT'</code> de la lista.</p> <pre><code>&gt;&gt;&gt; # Elimina 'MSFT'\n&gt;&gt;&gt; symlist\n['HPQ', 'AA', 'AAPL', 'AIG', 'YHOO', 'GOOG', 'RHT']\n&gt;&gt;&gt;\n</code></pre> <p>A\u00f1ade una entrada duplicada para <code>'YHOO'</code> al final de la lista.</p> <p>Nota: Es perfectamente correcto que una lista tenga elementos duplicados.</p> <pre><code>&gt;&gt;&gt; # A\u00f1ade 'YHOO'\n&gt;&gt;&gt; symlist\n['HPQ', 'AA', 'AAPL', 'AIG', 'YHOO', 'GOOG', 'RHT', 'YHOO']\n&gt;&gt;&gt;\n</code></pre> <p>Utilice el m\u00e9todo <code>index()</code> para encontrar la primera posici\u00f3n de <code>'YHOO'</code> en la lista.</p> <pre><code>&gt;&gt;&gt; # Encuentra el primer \u00edndice de 'YHOO'\n4\n&gt;&gt;&gt; symlist[4]\n'YHOO'\n&gt;&gt;&gt;\n</code></pre> <p>Cuenta cu\u00e1ntas veces aparece <code>'YHOO'</code> en la lista:</p> <pre><code>&gt;&gt;&gt; symlist.count('YHOO')\n2\n&gt;&gt;&gt;\n</code></pre> <p>Elimina la primera aparici\u00f3n de \"YHOO\".</p> <pre><code>&gt;&gt;&gt; # Elimina la primera aparici\u00f3n de 'YHOO'\n&gt;&gt;&gt; symlist\n['HPQ', 'AA', 'AAPL', 'AIG', 'GOOG', 'RHT', 'YHOO']\n&gt;&gt;&gt;\n</code></pre> <p>Para que lo sepas, no existe ning\u00fan m\u00e9todo para encontrar o eliminar todas las apariciones de un elemento. Sin embargo, veremos una forma elegante de hacerlo en la secci\u00f3n 2.</p>"},{"location":"01_Introduction/05_Lists/#ejercicio-123-ordenamiento","title":"Ejercicio 1.23: Ordenamiento","text":"<p>\u00bfQuieres ordenar una lista? Utilice el m\u00e9todo <code>sort()</code>. Pru\u00e9balo:</p> <pre><code>&gt;&gt;&gt; symlist.sort()\n&gt;&gt;&gt; symlist\n['AA', 'AAPL', 'AIG', 'GOOG', 'HPQ', 'RHT', 'YHOO']\n&gt;&gt;&gt;\n</code></pre> <p>\u00bfQuieres ordenar en sentido inverso? Prueba esto:</p> <pre><code>&gt;&gt;&gt; symlist.sort(reverse=True)\n&gt;&gt;&gt; symlist\n['YHOO', 'RHT', 'HPQ', 'GOOG', 'AIG', 'AAPL', 'AA']\n&gt;&gt;&gt;\n</code></pre> <p>Nota: Ordenar una lista modifica su contenido \"en el lugar\". Es decir, los elementos de la lista se ordenan, pero no se crea ninguna lista nueva como resultado.</p>"},{"location":"01_Introduction/05_Lists/#ejercicio-124-poniendolo-todo-junto-de-nuevo","title":"Ejercicio 1.24: Poni\u00e9ndolo todo junto de nuevo","text":"<p>\u00bfQuieres tomar una lista de cadenas y unirlas en una sola cadena? Utilice el m\u00e9todo <code>join()</code> de cadenas como esta (nota: esto parece extra\u00f1o al principio).</p> <pre><code>&gt;&gt;&gt; a = ','.join(symlist)\n&gt;&gt;&gt; a\n'YHOO,RHT,HPQ,GOOG,AIG,AAPL,AA'\n&gt;&gt;&gt; b = ':'.join(symlist)\n&gt;&gt;&gt; b\n'YHOO:RHT:HPQ:GOOG:AIG:AAPL:AA'\n&gt;&gt;&gt; c = ''.join(symlist)\n&gt;&gt;&gt; c\n'YHOORHTHPQGOOGAIGAAPLAA'\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/05_Lists/#ejercicio-125-listas-de-cualquier-cosa","title":"Ejercicio 1.25: Listas de cualquier cosa","text":"<p>Las listas pueden contener cualquier tipo de objeto, incluidas otras listas (por ejemplo, listas anidadas). Prueba esto:</p> <pre><code>&gt;&gt;&gt; nums = [101, 102, 103]\n&gt;&gt;&gt; items = ['spam', symlist, nums]\n&gt;&gt;&gt; items\n['spam', ['YHOO', 'RHT', 'HPQ', 'GOOG', 'AIG', 'AAPL', 'AA'], [101, 102, 103]]\n</code></pre> <p>Preste mucha atenci\u00f3n al resultado anterior. <code>items</code> es una lista con tres elementos. El primer elemento es una cadena, pero los otros dos elementos son listas.</p> <p>Puede acceder a los elementos de las listas anidadas mediante m\u00faltiples operaciones de indexaci\u00f3n.</p> <pre><code>&gt;&gt;&gt; items[0]\n'spam'\n&gt;&gt;&gt; items[0][0]\n's'\n&gt;&gt;&gt; items[1]\n['YHOO', 'RHT', 'HPQ', 'GOOG', 'AIG', 'AAPL', 'AA']\n&gt;&gt;&gt; items[1][1]\n'RHT'\n&gt;&gt;&gt; items[1][1][2]\n'T'\n&gt;&gt;&gt; items[2]\n[101, 102, 103]\n&gt;&gt;&gt; items[2][1]\n102\n&gt;&gt;&gt;\n</code></pre> <p>Si bien es t\u00e9cnicamente posible crear estructuras de listas muy complicadas, como regla general, conviene mantener las cosas simples. Generalmente las listas contienen elementos que tienen todos el mismo tipo de valor. Por ejemplo, una lista que consta enteramente de n\u00fameros o una lista de cadenas de texto. Mezclar distintos tipos de datos en la misma lista suele ser una buena forma de hacer que te explote la cabeza, por lo que es mejor evitarlo.</p> <p>Contenido | Anterior (1.4 Strings) | Pr\u00f3ximo (1.6 Archivos)</p>"},{"location":"01_Introduction/06_Files/","title":"06_Files","text":"<p>Contents | Previous (1.5 Lists) | Pr\u00f3ximo (1.7 Functions)</p>"},{"location":"01_Introduction/06_Files/#16-gestion-de-archivos","title":"1.6 Gesti\u00f3n de archivos","text":"<p>La mayor\u00eda de los programas necesitan leer la entrada desde alg\u00fan lugar. Esta secci\u00f3n analiza el acceso a archivos.</p>"},{"location":"01_Introduction/06_Files/#entrada-y-salida-de-archivos","title":"Entrada y salida de archivos","text":"<p>Abrir un archivo.</p> <pre><code>f = open('foo.txt', 'rt')     # Abrir para lectura (r) (texto) (t)\ng = open('bar.txt', 'wt')     # Abrir para escritura (w) (texto) (t)\n</code></pre> <p>Leer todos los datos.</p> <pre><code>data = f.read()\n\n# Leer solo hasta 'maxbytes' bytes\ndata = f.read([maxbytes])\n</code></pre> <p>Escribe alg\u00fan texto.</p> <pre><code>g.write('alg\u00fan texto')\n</code></pre> <p>Ci\u00e9rralo cuando hayas terminado.</p> <pre><code>f.close()\ng.close()\n</code></pre> <p>Los archivos deben estar correctamente cerrados y es un paso f\u00e1cil de olvidar. Por lo tanto, el enfoque preferido es utilizar la declaraci\u00f3n <code>with</code> de esta manera.</p> <pre><code>with open(filename, 'rt') as file:\n    # Utilice el archivo `file`\n    ...\n    # No es necesario cerrar expl\u00edcitamente\n...declaraciones\n</code></pre> <p>Esto cierra autom\u00e1ticamente el archivo cuando el control abandona el bloque de c\u00f3digo sangrado.</p>"},{"location":"01_Introduction/06_Files/#modismos-comunes-para-leer-datos-de-archivos","title":"Modismos comunes para leer datos de archivos","text":"<p>Leer un archivo completo de una sola vez como una cadena.</p> <pre><code>with open('foo.txt', 'rt') as file:\n    data = file.read()\n    # `data` es una cadena con todo el texto en `foo.txt`\n</code></pre> <p>Leer un archivo l\u00ednea por l\u00ednea iterando.</p> <pre><code>with open(filename, 'rt') as file:\n    for line in file:\n        # Procesar la l\u00ednea\n</code></pre>"},{"location":"01_Introduction/06_Files/#modismos-comunes-para-escribir-en-un-archivo","title":"Modismos comunes para escribir en un archivo","text":"<p>Escribe datos de cadena.</p> <pre><code>with open('outfile', 'wt') as out:\n    out.write('Hola mundo\\n')\n    ...\n</code></pre> <p>Redirigir la funci\u00f3n de impresi\u00f3n.</p> <pre><code>with open('outfile', 'wt') as out:\n    print('Hola mundo', file=out)\n    ...\n</code></pre>"},{"location":"01_Introduction/06_Files/#ejercicios","title":"Ejercicios","text":"<p>Estos ejercicios dependen del archivo <code>Data/portfolio.csv</code>. El archivo contiene una lista de l\u00edneas con informaci\u00f3n sobre una cartera de acciones. Se supone que est\u00e1 trabajando en el directorio <code>practical-python/Work/</code>. Si no est\u00e1 seguro, puede averiguar d\u00f3nde cree Python que se est\u00e1 ejecutando, haciendo esto:</p> <pre><code>&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.getcwd()\n'/Users/beazley/practical-python/Work' # La salida var\u00eda\n&gt;&gt;&gt;\n</code></pre>"},{"location":"01_Introduction/06_Files/#ejercicio-126-preliminares-del-archivo","title":"Ejercicio 1.26: Preliminares del archivo","text":"<p>Primero, intente leer el archivo completo de una sola vez como una gran cadena:</p> <pre><code>&gt;&gt;&gt; with open('Data/portfolio.csv', 'rt') as f:\n        data = f.read()\n\n&gt;&gt;&gt; data\n'name,shares,price\\n\"AA\",100,32.20\\n\"IBM\",50,91.10\\n\"CAT\",150,83.44\\n\"MSFT\",200,51.23\\n\"GE\",95,40.37\\n\"MSFT\",50,65.10\\n\"IBM\",100,70.44\\n'\n&gt;&gt;&gt; print(data)\nname,shares,price\n\"AA\",100,32.20\n\"IBM\",50,91.10\n\"CAT\",150,83.44\n\"MSFT\",200,51.23\n\"GE\",95,40.37\n\"MSFT\",50,65.10\n\"IBM\",100,70.44\n&gt;&gt;&gt;\n</code></pre> <p>En el ejemplo anterior, debe tenerse en cuenta que Python tiene dos modos de salida. En el primer modo, donde escribe <code>data</code> en modo interactivo, Python le muestra la representaci\u00f3n de la cadena sin procesar, incluidas comillas y c\u00f3digos de escape. Cuando escribe <code>print(data)</code>, obtiene la salida formateada real de la cadena.</p> <p>Aunque leer un archivo de una sola vez es sencillo, a menudo no es la forma m\u00e1s adecuada de hacerlo, especialmente si el archivo es enorme o si contiene l\u00edneas de texto que desea manejar de a una por vez.</p> <p>Para leer un archivo l\u00ednea por l\u00ednea, utilice un bucle for como este:</p> <pre><code>&gt;&gt;&gt; with open('Data/portfolio.csv', 'rt') as f:\n        for line in f:\n            print(line, end='')\n\nname,shares,price\n\"AA\",100,32.20\n\"IBM\",50,91.10\n...\n&gt;&gt;&gt;\n</code></pre> <p>Cuando se utiliza este c\u00f3digo, las l\u00edneas se leen hasta llegar al final del archivo, momento en el que el bucle se detiene.</p> <p>En ciertas ocasiones, es posible que desees leer o omitir manualmente una sola l\u00ednea de texto (por ejemplo, tal vez desees omitir la primera l\u00ednea de los encabezados de columna).</p> <pre><code>&gt;&gt;&gt; f = open('Data/portfolio.csv', 'rt')\n&gt;&gt;&gt; headers = next(f)\n&gt;&gt;&gt; headers\n'name,shares,price\\n'\n&gt;&gt;&gt; for line in f:\n        print(line, end='')\n\n\"AA\",100,32.20\n\"IBM\",50,91.10\n...\n&gt;&gt;&gt; f.close()\n&gt;&gt;&gt;\n</code></pre> <p><code>next()</code> devuelve la siguiente l\u00ednea de texto en el archivo. Si lo llamaras repetidamente obtendr\u00edas l\u00edneas sucesivas. Sin embargo, para que lo sepas, el bucle for ya utiliza <code>next()</code> para obtener sus datos. Por lo tanto, normalmente no lo llamar\u00edas directamente a menos que intentes omitir o leer expl\u00edcitamente una sola l\u00ednea como se muestra.</p> <p>Una vez que est\u00e9 leyendo l\u00edneas de un archivo, puede comenzar a realizar m\u00e1s procesamiento, como dividirlo. Por ejemplo, prueba esto:</p> <pre><code>&gt;&gt;&gt; f = open('Data/portfolio.csv', 'rt')\n&gt;&gt;&gt; headers = next(f).split(',')\n&gt;&gt;&gt; headers\n['name', 'shares', 'price\\n']\n&gt;&gt;&gt; for line in f:\n        row = line.split(',')\n        print(row)\n\n['\"AA\"', '100', '32.20\\n']\n['\"IBM\"', '50', '91.10\\n']\n...\n&gt;&gt;&gt; f.close()\n</code></pre> <p>Nota: En estos ejemplos, se llama expl\u00edcitamente a <code>f.close()</code> porque no se est\u00e1 utilizando la declaraci\u00f3n <code>with</code>.</p>"},{"location":"01_Introduction/06_Files/#ejercicio-127-lectura-de-un-archivo-de-datos","title":"Ejercicio 1.27: Lectura de un archivo de datos","text":"<p>Ahora que sabes c\u00f3mo leer un archivo, escribamos un programa para realizar un c\u00e1lculo simple.</p> <p>Las columnas en <code>portfolio.csv</code> corresponden al nombre de la acci\u00f3n, el n\u00famero de acciones y el precio de compra de una sola participaci\u00f3n en acciones. Escriba un programa llamado <code>pcost.py</code> que abra este archivo, lea todas las l\u00edneas y calcule cu\u00e1nto cuesta comprar todas las acciones de la cartera.</p> <p>Sugerencia: para convertir una cadena en un entero, utilice <code>int(s)</code>. Para convertir una cadena en un punto flotante, utilice <code>float(s)</code>.</p> <p>Su programa deber\u00eda imprimir una salida como la siguiente:</p> <pre><code>Total cost 44671.15\n</code></pre>"},{"location":"01_Introduction/06_Files/#ejercicio-128-otro-tipo-de-archivos","title":"Ejercicio 1.28: Otro tipo de \"archivos\"","text":"<p>\u00bfQu\u00e9 sucede si desea leer un archivo que no es de texto, como un archivo de datos comprimido con gzip? La funci\u00f3n incorporada <code>open()</code> no te ayudar\u00e1 aqu\u00ed, pero Python tiene un m\u00f3dulo de biblioteca <code>gzip</code> que puede leer archivos comprimidos gzip.</p> <p>Pru\u00e9balo:</p> <pre><code>&gt;&gt;&gt; import gzip\n&gt;&gt;&gt; with gzip.open('Data/portfolio.csv.gz', 'rt') as f:\n    for line in f:\n        print(line, end='')\n\n... look at the output ...\n&gt;&gt;&gt;\n</code></pre> <p>Nota: Incluir el modo de archivo <code>\"rt\"</code> es fundamental aqu\u00ed. Si olvidas esto, obtendr\u00e1s cadenas de bytes en lugar de cadenas de texto normales.</p>"},{"location":"01_Introduction/06_Files/#comentario-no-deberiamos-usar-pandas-para-esto","title":"Comentario: \u00bfNo deber\u00edamos usar Pandas para esto?","text":"<p>Los cient\u00edficos de datos se apresuran a se\u00f1alar que bibliotecas como Pandas ya tienen una funci\u00f3n para leer archivos CSV. Esto es cierto y funciona bastante bien. Sin embargo, este no es un curso para aprender Pandas. La lectura de archivos es un problema m\u00e1s general que los detalles espec\u00edficos de los archivos CSV. La raz\u00f3n principal por la que trabajamos con un archivo CSV es que es un formato familiar para la mayor\u00eda de los codificadores y es relativamente f\u00e1cil trabajar con \u00e9l directamente, lo que ilustra muchas caracter\u00edsticas de Python en el proceso. As\u00ed que, sin duda, utiliza Pandas cuando vuelvas a trabajar. Sin embargo, durante el resto de este curso nos quedaremos con la funcionalidad est\u00e1ndar de Python.</p> <p>Contents | Previous (1.5 Lists) | Pr\u00f3ximo (1.7 Functions)</p>"},{"location":"01_Introduction/07_Functions/","title":"07_Functions","text":"<p>Contenido | Anterior (1.6 Archivos) | Pr\u00f3ximo (2. Trabajar con datos)</p>"},{"location":"01_Introduction/07_Functions/#17-funciones","title":"1.7 Funciones","text":"<p>A medida que sus programas se hagan m\u00e1s grandes, querr\u00e1 organizarse. Esta secci\u00f3n presenta brevemente las funciones y los m\u00f3dulos de la biblioteca est\u00e1ndar de Python. Tambi\u00e9n se presenta el manejo de errores con excepciones.</p>"},{"location":"01_Introduction/07_Functions/#funciones-personalizadas","title":"Funciones personalizadas","text":"<p>Utilice funciones para el c\u00f3digo que desea reutilizar. Aqu\u00ed hay una definici\u00f3n de funci\u00f3n:</p> <pre><code>def sumcount(n):\n    '''\n    Returns the sum of the first n integers\n    '''\n    total = 0\n    while n &gt; 0:\n        total += n\n        n -= 1\n    return total\n</code></pre> <p>Para llamar a una funci\u00f3n.</p> <pre><code>a = sumcount(100)\n</code></pre> <p>Una funci\u00f3n es una serie de instrucciones que realizan una tarea y devuelven un resultado. La palabra clave <code>return</code> es necesaria para especificar expl\u00edcitamente el valor de retorno de la funci\u00f3n.</p>"},{"location":"01_Introduction/07_Functions/#funciones-de-la-biblioteca","title":"Funciones de la biblioteca","text":"<p>Python viene con una gran biblioteca est\u00e1ndar. Se accede a los m\u00f3dulos de la biblioteca mediante <code>import</code>. Por ejemplo:</p> <pre><code>import math\nx = math.sqrt(10)\n\nimport urllib.request\nu = urllib.request.urlopen('http://www.python.org/')\ndata = u.read()\n</code></pre> <p>Cubriremos bibliotecas y m\u00f3dulos con m\u00e1s detalle m\u00e1s adelante.</p>"},{"location":"01_Introduction/07_Functions/#errores-y-excepciones","title":"Errores y excepciones","text":"<p>Las funciones informan los errores como excepciones. Una excepci\u00f3n provoca la interrupci\u00f3n de una funci\u00f3n y puede provocar que todo el programa se detenga si no se controla.</p> <p>Pruebe esto en su REPL de Python.</p> <pre><code>&gt;&gt;&gt; int('N/A')\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nValueError: invalid literal for int() with base 10: 'N/A'\n&gt;&gt;&gt;\n</code></pre> <p>Para fines de depuraci\u00f3n, el mensaje describe qu\u00e9 sucedi\u00f3, d\u00f3nde ocurri\u00f3 el error y un seguimiento que muestra las otras llamadas de funci\u00f3n que llevaron a la falla.</p>"},{"location":"01_Introduction/07_Functions/#captura-y-manejo-de-excepciones","title":"Captura y manejo de excepciones","text":"<p>Se pueden detectar y gestionar excepciones.</p> <p>Para capturarlo, utilice la instrucci\u00f3n <code>try - except</code>.</p> <pre><code>for line in file:\n    fields = line.split(',')\n    try:\n        shares = int(fields[1])\n    except ValueError:\n        print(\"No puede analizarse\", line)\n    ...\n</code></pre> <p>El nombre <code>ValueError</code> debe coincidir con el tipo de error que est\u00e1s intentando detectar.</p> <p>A menudo es dif\u00edcil saber con antelaci\u00f3n qu\u00e9 tipos de errores podr\u00edan producirse en funci\u00f3n de la operaci\u00f3n que se est\u00e9 realizando. Para bien o para mal, el manejo de excepciones a menudo se agrega despu\u00e9s de que un programa falla inesperadamente (es decir, \"oh, olvidamos detectar ese error. \u00a1Deber\u00edamos manejarlo!\").</p>"},{"location":"01_Introduction/07_Functions/#generar-excepciones","title":"Generar excepciones","text":"<p>Para generar una excepci\u00f3n, utilice la declaraci\u00f3n <code>raise</code>.</p> <pre><code>raise RuntimeError('Que alboroto')\n</code></pre> <p>Esto provocar\u00e1 que el programa se cancele con un seguimiento de excepci\u00f3n. A menos que sea detectado por un bloque <code>try-except</code>.</p> <pre><code>bash % python3 foo.py\nTraceback (most recent call last):\n  File \"foo.py\", line 21, in &lt;module&gt;\n    raise RuntimeError(\"Que alboroto\")\nRuntimeError: Que alboroto\n</code></pre>"},{"location":"01_Introduction/07_Functions/#ejercicios","title":"Ejercicios","text":""},{"location":"01_Introduction/07_Functions/#ejercicio-129-definicion-de-una-funcion","title":"Ejercicio 1.29: Definici\u00f3n de una funci\u00f3n","text":"<p>Intente definir una funci\u00f3n simple:</p> <pre><code>&gt;&gt;&gt; def greeting(name):\n        'Emite un saludo'\n        print('Hola', name)\n\n&gt;&gt;&gt; greeting('Guido')\nHola Guido\n&gt;&gt;&gt; greeting('Paula')\nHola Paula\n&gt;&gt;&gt;\n</code></pre> <p>Si la primera declaraci\u00f3n de una funci\u00f3n es una cadena, sirve como documentaci\u00f3n. Intente escribir un comando como <code>help(greeting)</code> para verlo mostrado.</p>"},{"location":"01_Introduction/07_Functions/#ejercicio-130-convertir-un-script-en-una-funcion","title":"Ejercicio 1.30: Convertir un script en una funci\u00f3n","text":"<p>Tome el c\u00f3digo que escribi\u00f3 para el programa <code>pcost.py</code> en el [Ejercicio 1.27] y convi\u00e9rtalo en una funci\u00f3n <code>portfolio_cost(filename)</code>. Esta funci\u00f3n toma un nombre de archivo como entrada, lee los datos de la cartera en ese archivo y devuelve el costo total de la cartera como un n\u00famero tipo <code>float</code>.</p> <p>Para utilizar su funci\u00f3n, cambie su programa para que se parezca a esto:</p> <pre><code>def portfolio_cost(filename):\n    ...\n    # Su c\u00f3digo aqu\u00ed\n    ...\n\ncost = portfolio_cost('Data/portfolio.csv')\nprint('Costo Total:', cost)\n</code></pre> <p>Cuando ejecute su programa, deber\u00eda ver el mismo resultado que antes. Despu\u00e9s de ejecutar su programa, tambi\u00e9n puede llamar a su funci\u00f3n de forma interactiva escribiendo lo siguiente:</p> <pre><code>bash % python3 -i pcost.py\n</code></pre> <p>Esto le permitir\u00e1 llamar a su funci\u00f3n desde el modo interactivo.</p> <pre><code>&gt;&gt;&gt; portfolio_cost('Data/portfolio.csv')\n44671.15\n&gt;&gt;&gt;\n</code></pre> <p>Poder experimentar con su c\u00f3digo en modo interactivo es \u00fatil para realizar pruebas y depuraciones.</p>"},{"location":"01_Introduction/07_Functions/#ejercicio-131-manejo-de-errores","title":"Ejercicio 1.31: Manejo de errores","text":"<p>\u00bfQu\u00e9 sucede si prueba su funci\u00f3n en un archivo con algunos campos faltantes?</p> <pre><code>&gt;&gt;&gt; portfolio_cost('Data/missing.csv')\nTraceback (most recent call last):\n    File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n    File \"pcost.py\", line 11, in portfolio_cost\n    nshares    = int(fields[1])\nValueError: invalid literal for int() with base 10: ''\n&gt;&gt;&gt;\n</code></pre> <p>En este punto, usted se enfrenta a una decisi\u00f3n. Para que el programa funcione, puede desinfectar el archivo de entrada original eliminando las l\u00edneas defectuosas o puede modificar su c\u00f3digo para manejar las l\u00edneas defectuosas de alguna manera.</p> <p>Modifique el programa <code>pcost.py</code> para capturar la excepci\u00f3n, imprimir un mensaje de advertencia y continuar procesando el resto del archivo.</p>"},{"location":"01_Introduction/07_Functions/#ejercicio-132-uso-de-una-funcion-de-biblioteca","title":"Ejercicio 1.32: Uso de una funci\u00f3n de biblioteca","text":"<p>Python viene con una gran biblioteca est\u00e1ndar de funciones \u00fatiles. Una biblioteca que podr\u00eda ser \u00fatil aqu\u00ed es el m\u00f3dulo <code>csv</code>. Debes usarlo siempre que tengas que trabajar con archivos de datos CSV. He aqu\u00ed un ejemplo de c\u00f3mo funciona:</p> <pre><code>&gt;&gt;&gt; import csv\n&gt;&gt;&gt; f = open('Data/portfolio.csv')\n&gt;&gt;&gt; rows = csv.reader(f)\n&gt;&gt;&gt; headers = next(rows)\n&gt;&gt;&gt; headers\n['name', 'shares', 'price']\n&gt;&gt;&gt; for row in rows:\n        print(row)\n\n['AA', '100', '32.20']\n['IBM', '50', '91.10']\n['CAT', '150', '83.44']\n['MSFT', '200', '51.23']\n['GE', '95', '40.37']\n['MSFT', '50', '65.10']\n['IBM', '100', '70.44']\n&gt;&gt;&gt; f.close()\n&gt;&gt;&gt;\n</code></pre> <p>Una de las ventajas del m\u00f3dulo <code>csv</code> es que se ocupa de una variedad de detalles de bajo nivel, como citas y divisi\u00f3n adecuada de comas. En el resultado anterior, notar\u00e1s que se han eliminado las comillas dobles de los nombres en la primera columna.</p> <p>Modifique su programa <code>pcost.py</code> para que utilice el m\u00f3dulo <code>csv</code> para analizar e intente ejecutar ejemplos anteriores.</p>"},{"location":"01_Introduction/07_Functions/#ejercicio-133-lectura-desde-la-linea-de-comandos","title":"Ejercicio 1.33: Lectura desde la l\u00ednea de comandos","text":"<p>En el programa <code>pcost.py</code>, el nombre del archivo de entrada se ha incorporado al c\u00f3digo:</p> <pre><code># pcost.py\n\ndef portfolio_cost(filename):\n    ...\n    # Tu c\u00f3digo aqu\u00ed\n    ...\n\ncost = portfolio_cost('Data/portfolio.csv')\nprint('Costo Total:', cost)\n</code></pre> <p>Eso est\u00e1 bien para aprender y probar, pero en un programa real probablemente no lo har\u00edas.</p> <p>En lugar de ello, puedes pasar el nombre del archivo como argumento a un script. Intente cambiar la parte inferior del programa de la siguiente manera:</p> <pre><code># pcost.py\nimport sys\n\ndef portfolio_cost(filename):\n    ...\n    # Tu c\u00f3digo aqu\u00ed\n    ...\n\nif len(sys.argv) == 2:\n    filename = sys.argv[1]\nelse:\n    filename = 'Data/portfolio.csv'\n\ncost = portfolio_cost(filename)\nprint('Costo total:', cost)\n</code></pre> <p><code>sys.argv</code> es una lista que contiene los argumentos pasados en la l\u00ednea de comando (si los hay).</p> <p>Para ejecutar su programa, necesitar\u00e1 ejecutar Python desde la terminal.</p> <p>Por ejemplo, desde bash en Unix:</p> <pre><code>bash % python3 pcost.py Data/portfolio.csv\nCosto Total: 44671.15\nbash %\n</code></pre> <p>Contenido | Anterior (1.6 Archivos) | Pr\u00f3ximo (2. Trabajar con datos)</p>"},{"location":"02_Working_with_data/00_Overview/","title":"00_Overview","text":"<p>Contenido | Anterior (1. Introducci\u00f3n a Python) | Pr\u00f3ximo (3. Organizaci\u00f3n del programa)</p>"},{"location":"02_Working_with_data/00_Overview/#2-trabajar-con-datos","title":"2. Trabajar con datos","text":"<p>Para escribir programas \u00fatiles, es necesario saber trabajar con datos. Esta secci\u00f3n presenta las estructuras de datos centrales de Python: tuplas, listas, conjuntos y diccionarios, y analiza los lenguajes comunes de manejo de datos. La \u00faltima parte de esta secci\u00f3n profundiza un poco m\u00e1s en el modelo de objetos subyacente de Python.</p> <ul> <li>2.1 Tipos y estructuras de datos</li> <li>2.2 Contenedores</li> <li>2.3 Salida con formato</li> <li>2.4 Secuencias</li> <li>2.5 M\u00f3dulo Collections</li> <li>2.6 Listas por comprensi\u00f3n</li> <li>2.7 Objetos</li> </ul> <p>Contenido | Anterior (1. Introducci\u00f3n a Python) | Pr\u00f3ximo (3. Organizaci\u00f3n del programa)</p>"},{"location":"02_Working_with_data/01_Datatypes/","title":"01_Datatypes","text":"<p>Contenido | Anterior (1.6 Archivos) | Pr\u00f3ximo (2.2 Contenedores)</p>"},{"location":"02_Working_with_data/01_Datatypes/#21-tipos-y-estructuras-de-datos","title":"2.1 Tipos y estructuras de datos","text":"<p>Esta secci\u00f3n presenta estructuras de datos en forma de tuplas y diccionarios.</p>"},{"location":"02_Working_with_data/01_Datatypes/#tipos-de-datos-primitivos","title":"Tipos de datos primitivos","text":"<p>Python tiene algunos tipos de datos primitivos:</p> <ul> <li>N\u00fameros enteros <code>int</code></li> <li>N\u00fameros de punto flotante <code>float</code></li> <li>Strings (texto) <code>str</code></li> </ul> <p>Aprendimos sobre esto en la introducci\u00f3n.</p>"},{"location":"02_Working_with_data/01_Datatypes/#tipo-none","title":"Tipo <code>None</code>","text":"<pre><code>email_address = None\n</code></pre> <p><code>None</code> se utiliza a menudo como marcador de posici\u00f3n para valores opcionales o faltantes. Se eval\u00faa como <code>False</code> en condicionales.</p> <pre><code>if email_address:\n    send_email(email_address, msg)\n</code></pre>"},{"location":"02_Working_with_data/01_Datatypes/#estructuras-de-datos","title":"Estructuras de datos","text":"<p>Los programas reales tienen datos m\u00e1s complejos. Por ejemplo, informaci\u00f3n sobre una tenencia de acciones:</p> <pre><code>100 shares of GOOG at $490.10\n</code></pre> <p>Este es un \"objeto\" con tres partes:</p> <ul> <li>Nombre o s\u00edmbolo de la acci\u00f3n (\"GOOG\", un string)</li> <li>N\u00famero de acciones (100, un entero)</li> <li>Precio (490.10 por acci\u00f3n, un flotante)</li> </ul>"},{"location":"02_Working_with_data/01_Datatypes/#tuplas","title":"Tuplas","text":"<p>Una tupla es una colecci\u00f3n de valores agrupados.</p> <p>Ejemplo:</p> <pre><code>s = ('GOOG', 100, 490.1)\n</code></pre> <p>A veces se omite el <code>()</code> en la sintaxis.</p> <pre><code>s = 'GOOG', 100, 490.1\n</code></pre> <p>Casos especiales (tupla-0, tupla-1).</p> <pre><code>t = ()         # Una tupla vac\u00eda\nw = ('GOOG', ) # Una tupla de 1 elemento\n</code></pre> <p>Las tuplas se utilizan a menudo para representar registros o estructuras simples. Por lo general, se trata de un \u00fanico objeto formado por m\u00faltiples partes. Una buena analog\u00eda: Una tupla es como una sola fila en una tabla de base de datos.</p> <p>Los contenidos de las tuplas est\u00e1n ordenados (como una matriz).</p> <pre><code>s = ('GOOG', 100, 490.1)\nname = s[0]                 # 'GOOG'\nshares = s[1]               # 100\nprice = s[2]                # 490.1\n</code></pre> <p>Sin embargo, el contenido no se puede modificar.</p> <pre><code>&gt;&gt;&gt; s[1] = 75\nTypeError: 'tuple' object does not support item assignment\n</code></pre> <p>Sin embargo, puedes crear una nueva tupla basada en una tupla actual.</p> <pre><code>\n``` python\ns = (s[0], 75, s[2])\n</code></pre>"},{"location":"02_Working_with_data/01_Datatypes/#empaquetado-de-tuplas","title":"Empaquetado de tuplas","text":"<p>Las tuplas tratan m\u00e1s bien de agrupar elementos relacionados en una sola entidad.</p> <pre><code>s = ('GOOG', 100, 490.1)\n</code></pre> <p>La tupla es luego f\u00e1cil de pasar a otras partes de un programa como un \u00fanico objeto.</p>"},{"location":"02_Working_with_data/01_Datatypes/#desempaquetado-de-tuplas","title":"Desempaquetado de tuplas","text":"<p>Para utilizar la tupla en otro lugar, puedes desempaquetar sus partes en variables.</p> <pre><code>name, shares, price = s\nprint('Cost', shares * price)\n</code></pre> <p>El n\u00famero de variables de la izquierda en principio deber\u00eda coincidir con la estructura de la tupla.</p> <pre><code>name, shares = s     # ERROR\n\nTraceback (most recent call last):\n  File \"&lt;python-input-1&gt;\", line 1, in &lt;module&gt;\n    name, shares = s     # ERROR\n    ^^^^^^^^^^^^\nValueError: too many values to unpack (expected 2)\n</code></pre> <p>Pero podr\u00eda hacer algo como esto tambi\u00e9n:</p> <pre><code>name, *_ = s    \nprint(name) # 'GOOG'\n</code></pre> <p>o incluso esto:</p> <pre><code>*_ , price = s    \nprint(price) # 490.1\n</code></pre> <p>En ambos casos <code>*_</code> completa las variables faltantes. Incluir m\u00e1s asterisco en el lado izquierdo de la asignaci\u00f3n provocar\u00e1 un <code>SyntaxError: multiple starred expressions in assignment</code></p>"},{"location":"02_Working_with_data/01_Datatypes/#tuplas-vs-listas","title":"Tuplas vs. Listas","text":"<p>Las tuplas parecen listas de solo lectura. Sin embargo, las tuplas se utilizan con mayor frecuencia para un \u00fanico elemento que consta de varias partes. Las listas suelen ser una colecci\u00f3n de elementos distintos, normalmente todos del mismo tipo.</p> <pre><code>record = ('GOOG', 100, 490.1)       # Una tupla que representa un registro en un portafolio de inversi\u00f3n\nsymbols = [ 'GOOG', 'AAPL', 'IBM' ]  # Una lista que representa tres s\u00edmbolos burs\u00e1tiles\n</code></pre>"},{"location":"02_Working_with_data/01_Datatypes/#diccionarios","title":"Diccionarios","text":"<p>Un diccionario es una asignaci\u00f3n de claves a valores. A veces tambi\u00e9n se le llama tabla hash o matriz asociativa. Las claves sirven como \u00edndices para acceder a los valores.</p> <pre><code>s = {\n    'name': 'GOOG',\n    'shares': 100,\n    'price': 490.1\n}\n</code></pre>"},{"location":"02_Working_with_data/01_Datatypes/#operaciones-comunes","title":"Operaciones comunes","text":"<p>Para obtener valores de un diccionario utilice los nombres de clave.</p> <pre><code>&gt;&gt;&gt; print(s['name'], s['shares'])\nGOOG 100\n&gt;&gt;&gt; s['price']\n490.10\n&gt;&gt;&gt;\n</code></pre> <p>Para agregar o modificar valores se asignan utilizando los nombres de las teclas.</p> <pre><code>&gt;&gt;&gt; s['shares'] = 75\n&gt;&gt;&gt; s['date'] = '6/6/2007'\n&gt;&gt;&gt;\n</code></pre> <p>Para eliminar un valor utilice la instrucci\u00f3n <code>del</code>.</p> <pre><code>&gt;&gt;&gt; del s['date']\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/01_Datatypes/#por-que-diccionarios","title":"\u00bfPor qu\u00e9 diccionarios?","text":"<p>Los diccionarios son \u00fatiles cuando hay muchos valores diferentes y esos valores pueden modificarse o manipularse. Los diccionarios hacen que su c\u00f3digo sea m\u00e1s legible.</p> <pre><code>s['precio']\n# en lugar de\nes[2]\n</code></pre>"},{"location":"02_Working_with_data/01_Datatypes/#ejercicios","title":"Ejercicios","text":"<p>En los \u00faltimos ejercicios, escribi\u00f3 un programa que lee un archivo de datos <code>Data/portfolio.csv</code>. Usando el m\u00f3dulo <code>csv</code>, es f\u00e1cil leer el archivo fila por fila.</p> <pre><code>&gt;&gt;&gt; import csv\n&gt;&gt;&gt; f = open('Data/portfolio.csv')\n&gt;&gt;&gt; rows = csv.reader(f)\n&gt;&gt;&gt; next(rows)\n['name', 'shares', 'price']\n&gt;&gt;&gt; row = next(rows)\n&gt;&gt;&gt; row\n['AA', '100', '32.20']\nf.close()\n&gt;&gt;&gt;\n</code></pre> <p>Aunque leer el archivo es f\u00e1cil, a menudo deseamos hacer m\u00e1s con los datos que leerlos. Por ejemplo, quiz\u00e1s desee almacenarlos y comenzar a realizar algunos c\u00e1lculos en ellos. Desafortunadamente, una \"fila\" de datos sin procesar no le brinda suficiente informaci\u00f3n con la que trabajar. Por ejemplo, ni siquiera un c\u00e1lculo matem\u00e1tico simple funciona:</p> <pre><code>&gt;&gt;&gt; row = ['AA', '100', '32.20']\n&gt;&gt;&gt; cost = row[1] * row[2]\nTraceback (most recent call last):\n    File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: can't multiply sequence by non-int of type 'str'\n&gt;&gt;&gt;\n</code></pre> <p>Para hacer m\u00e1s, normalmente desear\u00e1s interpretar los datos sin procesar de alguna manera y convertirlos en un tipo de objeto m\u00e1s \u00fatil para poder trabajar con ellos m\u00e1s adelante. Dos opciones simples son tuplas o diccionarios.</p>"},{"location":"02_Working_with_data/01_Datatypes/#ejercicio-21-tuplas","title":"Ejercicio 2.1: Tuplas","text":"<p>En el modo interactivo, cree la siguiente tupla que representa la fila anterior, pero con las columnas num\u00e9ricas convertidas en n\u00fameros adecuados:</p> <pre><code>&gt;&gt;&gt; t = (row[0], int(row[1]), float(row[2]))\n&gt;&gt;&gt; t\n('AA', 100, 32.2)\n&gt;&gt;&gt;\n</code></pre> <p>Con esto, ahora puedes calcular el costo total multiplicando las acciones y el precio:</p> <pre><code>&gt;&gt;&gt; cost = t[1] * t[2]\n&gt;&gt;&gt; cost\n3220.0000000000005\n&gt;&gt;&gt;\n</code></pre> <p>\u00bfLas matem\u00e1ticas est\u00e1n rotas en Python? \u00bfCu\u00e1l es el problema con la respuesta 3220.0000000000005?</p> <p>Esto es un dispositivo del hardware de punto flotante de su computadora que solo puede representar con precisi\u00f3n decimales en base 2, no en base 10. Incluso en c\u00e1lculos sencillos que involucran decimales de base 10 se introducen peque\u00f1os errores. Esto es normal, aunque quiz\u00e1 resulte un poco sorprendente si no lo has visto antes.</p> <p>Esto sucede en todos los lenguajes de programaci\u00f3n que utilizan decimales de punto flotante, pero a menudo queda oculto al imprimir. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; print(f'{cost:0.2f}')\n3220.00\n&gt;&gt;&gt;\n</code></pre> <p>Las tuplas son de solo lectura. Verifique esto intentando cambiar el n\u00famero de acciones a 75.</p> <pre><code>&gt;&gt;&gt; t[1] = 75\nTraceback (most recent call last):\n    File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: 'tuple' object does not support item assignment\n&gt;&gt;&gt;\n</code></pre> <p>Aunque no puedes cambiar el contenido de una tupla, siempre puedes crear una tupla completamente nueva que reemplace a la anterior.</p> <pre><code>&gt;&gt;&gt; t = (t[0], 75, t[2])\n&gt;&gt;&gt; t\n('AA', 75, 32.2)\n&gt;&gt;&gt;\n</code></pre> <p>Cada vez que se reasigna un nombre de variable existente como \u00e9ste, se descarta el valor anterior. Aunque la tarea anterior puede parecer que est\u00e1s modificando la tupla, en realidad est\u00e1s creando una nueva tupla y descartando la anterior.</p> <p>Las tuplas se utilizan a menudo para empaquetar y desempaquetar valores en variables. Pruebe lo siguiente:</p> <pre><code>&gt;&gt;&gt; name, shares, price = t\n&gt;&gt;&gt; name\n'AA'\n&gt;&gt;&gt; shares\n75\n&gt;&gt;&gt; price\n32.2\n&gt;&gt;&gt;\n</code></pre> <p>Tome las variables anteriores y vuelva a empaquetarlas en una tupla</p> <pre><code>&gt;&gt;&gt; t = (name, 2*shares, price)\n&gt;&gt;&gt; t\n('AA', 150, 32.2)\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/01_Datatypes/#ejercicio-22-diccionarios-como-estructura-de-datos","title":"Ejercicio 2.2: Diccionarios como estructura de datos","text":"<p>Una alternativa a una tupla es crear un diccionario.</p> <pre><code>&gt;&gt;&gt; d = {\n        'name' : row[0],\n        'shares' : int(row[1]),\n        'price'  : float(row[2])\n    }\n&gt;&gt;&gt; d\n{'name': 'AA', 'shares': 100, 'price': 32.2 }\n&gt;&gt;&gt;\n</code></pre> <p>Calcular el costo total de esta tenencia:</p> <pre><code>&gt;&gt;&gt; cost = d['shares'] * d['price']\n&gt;&gt;&gt; cost\n3220.0000000000005\n&gt;&gt;&gt;\n</code></pre> <p>Compare este ejemplo con el mismo c\u00e1lculo que involucra tuplas mencionado anteriormente. Cambie el n\u00famero de acciones a 75.</p> <pre><code>&gt;&gt;&gt; d['shares'] = 75\n&gt;&gt;&gt; d\n{'name': 'AA', 'shares': 75, 'price': 32.2 }\n&gt;&gt;&gt;\n</code></pre> <p>A diferencia de las tuplas, los diccionarios se pueden modificar libremente. A\u00f1ade algunos atributos:</p> <pre><code>&gt;&gt;&gt; d['date'] = (6, 11, 2007)\n&gt;&gt;&gt; d['account'] = 12345\n&gt;&gt;&gt; d\n{'name': 'AA', 'shares': 75, 'price':32.2, 'date': (6, 11, 2007), 'account': 12345}\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/01_Datatypes/#ejercicio-23-algunas-operaciones-adicionales-del-diccionario","title":"Ejercicio 2.3: Algunas operaciones adicionales del diccionario","text":"<p>Si conviertes un diccionario en una lista, obtendr\u00e1s todas sus claves:</p> <pre><code>&gt;&gt;&gt; list(d)\n['name', 'shares', 'price', 'date', 'account']\n&gt;&gt;&gt;\n</code></pre> <p>De manera similar, si utiliza la declaraci\u00f3n <code>for</code> para iterar sobre un diccionario, obtendr\u00e1 las claves:</p> <pre><code>&gt;&gt;&gt; for k in d:\n        print('k =', k)\n\nk = name\nk = shares\nk = price\nk = date\nk = account\n&gt;&gt;&gt;\n</code></pre> <p>Pruebe esta variante que realiza una b\u00fasqueda al mismo tiempo:</p> <pre><code>&gt;&gt;&gt; for k in d:\n        print(k, '=', d[k])\n\nname = AA\nshares = 75\nprice = 32.2\ndate = (6, 11, 2007)\naccount = 12345\n&gt;&gt;&gt;\n</code></pre> <p>Tambi\u00e9n puedes obtener todas las claves utilizando el m\u00e9todo <code>keys()</code>:</p> <pre><code>&gt;&gt;&gt; keys = d.keys()\n&gt;&gt;&gt; keys\ndict_keys(['name', 'shares', 'price', 'date', 'account'])\n&gt;&gt;&gt;\n</code></pre> <p><code>keys()</code> es un poco inusual ya que devuelve un objeto <code>dict_keys</code> especial.</p> <p>Esta es una superposici\u00f3n sobre el diccionario original que siempre le brinda las claves actuales, incluso si el diccionario cambia. Por ejemplo, prueba esto:</p> <pre><code>&gt;&gt;&gt; del d['account']\n&gt;&gt;&gt; keys\ndict_keys(['name', 'shares', 'price', 'date'])\n&gt;&gt;&gt;\n</code></pre> <p>Tenga en cuenta cuidadosamente que la <code>'account'</code> desapareci\u00f3 de <code>keys</code> aunque no volvi\u00f3 a llamar a <code>d.keys()</code>.</p> <p>Una forma m\u00e1s elegante de trabajar con claves y valores juntos es utilizar el m\u00e9todo <code>items()</code>. Esto le proporciona tuplas <code>(clave, valor)</code>:</p> <pre><code>&gt;&gt;&gt; items = d.items()\n&gt;&gt;&gt; items\ndict_items([('name', 'AA'), ('shares', 75), ('price', 32.2), ('date', (6, 11, 2007))])\n&gt;&gt;&gt; for k, v in items:\n        print(k, '=', v)\n\nname = AA\nshares = 75\nprice = 32.2\ndate = (6, 11, 2007)\n&gt;&gt;&gt;\n</code></pre> <p>Si tiene tuplas como <code>items</code>, puede crear un diccionario usando la funci\u00f3n <code>dict()</code>. Pru\u00e9balo:</p> <pre><code>&gt;&gt;&gt; items\ndict_items([('name', 'AA'), ('shares', 75), ('price', 32.2), ('date', (6, 11, 2007))])\n&gt;&gt;&gt; d = dict(items)\n&gt;&gt;&gt; d\n{'name': 'AA', 'shares': 75, 'price':32.2, 'date': (6, 11, 2007)}\n&gt;&gt;&gt;\n</code></pre> <p>Contenido | Anterior (1.6 Archivos) | Pr\u00f3ximo (2.2 Contenedores)</p>"},{"location":"02_Working_with_data/02_Containers/","title":"02_Containers","text":"<p>Contenido | Anterior (2.1 Tipos de datos) | Pr\u00f3ximo (2.3 Formato)</p>"},{"location":"02_Working_with_data/02_Containers/#22-contenedores","title":"2.2 Contenedores","text":"<p>En esta secci\u00f3n se tratan listas, diccionarios y sets (conjuntos).</p>"},{"location":"02_Working_with_data/02_Containers/#descripcion-general","title":"Descripci\u00f3n general","text":"<p>Los programas a menudo tienen que trabajar con muchos objetos.</p> <ul> <li>Una cartera de acciones</li> <li>Una tabla de precios de acciones</li> </ul> <p>Hay tres opciones principales para utilizar.</p> <ul> <li>Listas. Datos ordenados.</li> <li>Diccionarios. Datos desordenados.</li> <li>Sets. Colecci\u00f3n desordenada de elementos \u00fanicos.</li> </ul>"},{"location":"02_Working_with_data/02_Containers/#listas-como-contenedor","title":"Listas como contenedor","text":"<p>Utilice una lista cuando el orden de los datos sea importante. Recuerde que las listas pueden contener cualquier tipo de objeto. Por ejemplo, una lista de tuplas.</p> <pre><code>portfolio = [\n    ('GOOG', 100, 490.1),\n    ('IBM', 50, 91.3),\n    ('CAT', 150, 83.44)\n]\n\nportfolio[0]            # ('GOOG', 100, 490.1)\nportfolio[2]            # ('CAT', 150, 83.44)\n</code></pre>"},{"location":"02_Working_with_data/02_Containers/#construccion-de-listas","title":"Construcci\u00f3n de listas","text":"<p>Construyendo una lista desde cero.</p> <pre><code>records = []  # Lista vac\u00eda inicial\n\n# Use .append() para adicionar m\u00e0s elementos\nrecords.append(('GOOG', 100, 490.10))\nrecords.append(('IBM', 50, 91.3))\n...\n</code></pre> <p>Un ejemplo al leer registros de un archivo.</p> <pre><code>records = []  # Initial empty list\n\nwith open('Data/portfolio.csv', 'rt') as f:\n    next(f) # salta los encabezados\n    for line in f:\n        row = line.split(',')\n        records.append((row[0], int(row[1]), float(row[2])))\n</code></pre>"},{"location":"02_Working_with_data/02_Containers/#diccionarios-como-contenedor","title":"Diccionarios como contenedor","text":"<p>Los diccionarios son \u00fatiles si desea realizar b\u00fasquedas aleatorias r\u00e1pidas (por nombre de clave). Por ejemplo, un diccionario de precios de acciones:</p> <pre><code>prices = {\n   'GOOG': 513.25,\n   'CAT': 87.22,\n   'IBM': 93.37,\n   'MSFT': 44.12\n}\n</code></pre> <p>A continuaci\u00f3n se muestran algunas b\u00fasquedas sencillas:</p> <pre><code>&gt;&gt;&gt; prices['IBM']\n93.37\n&gt;&gt;&gt; prices['GOOG']\n513.25\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/02_Containers/#construccion-de-diccionarios","title":"Construcci\u00f3n de diccionarios","text":"<p>Ejemplo de construcci\u00f3n de un diccionario desde cero.</p> <pre><code>prices = {} # Diccionario vac\u00edo inicial\n\n# Insertar nuevos elementos\nprices['GOOG'] = 513.25\nprices['CAT'] = 87.22\nprices['IBM'] = 93.37\n</code></pre> <p>Un ejemplo que completa el dict a partir del contenido de un archivo.</p> <pre><code>prices = {} # Diccionario vac\u00edo inicial\n\nwith open('Data/prices.csv', 'rt') as f:\n    for line in f:\n        row = line.split(',')\n        prices[row[0]] = float(row[1])\n</code></pre> <p>Nota: si prueba esto en el archivo <code>Data/prices.csv</code>, descubrir\u00e1 que casi funciona (hay una l\u00ednea en blanco al final que hace que se bloquee). Necesitar\u00e1s encontrar alguna forma de modificar el c\u00f3digo para tenerlo en cuenta (ver Ejercicio 2.6).</p>"},{"location":"02_Working_with_data/02_Containers/#busquedas-en-el-diccionario","title":"B\u00fasquedas en el diccionario","text":"<p>Puedes probar la existencia de una clave.</p> <pre><code>if key in d:\n    # YES\nelse:\n    # NO\n</code></pre> <p>Puede buscar un valor que podr\u00eda no existir y proporcionar un valor predeterminado en caso de que no exista.</p> <pre><code>name = d.get(key, default)\n</code></pre> <p>Un ejemplo:</p> <pre><code>&gt;&gt;&gt; prices.get('IBM', 0.0)\n93.37\n&gt;&gt;&gt; prices.get('SCOX', 0.0)\n0.0\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/02_Containers/#teclas-compuestas","title":"Teclas compuestas","text":"<p>Casi cualquier tipo de valor se puede utilizar como clave de diccionario en Python. Una clave de diccionario debe ser de un tipo que sea inmutable. Por ejemplo, tuplas:</p> <pre><code>holidays = {\n  (1, 1) : 'New Years',\n  (3, 14) : 'Pi day',\n  (9, 13) : \"Programmer's day\",\n}\n</code></pre> <p>Luego para acceder:</p> <pre><code>&gt;&gt;&gt; holidays[3, 14]\n'Pi day'\n&gt;&gt;&gt;\n</code></pre> <p>Ni una lista, ni un set, ni otro diccionario pueden servir como clave de diccionario, porque las listas y los diccionarios son mutables.</p>"},{"location":"02_Working_with_data/02_Containers/#set-conjunto","title":"Set (Conjunto)","text":"<p>Los conjuntos son colecciones de elementos \u00fanicos no ordenados.</p> <pre><code>tech_stocks = { 'IBM','AAPL','MSFT' }\n# Sintaxis alternativa\ntech_stocks = set(['IBM', 'AAPL', 'MSFT'])\n</code></pre> <p>Los conjuntos son \u00fatiles para las pruebas de pertenencia.</p> <pre><code>&gt;&gt;&gt; tech_stocks\nset(['AAPL', 'IBM', 'MSFT'])\n&gt;&gt;&gt; 'IBM' in tech_stocks\nTrue\n&gt;&gt;&gt; 'FB' in tech_stocks\nFalse\n&gt;&gt;&gt;\n</code></pre> <p>Los conjuntos tambi\u00e9n son \u00fatiles para la eliminaci\u00f3n de duplicados.</p> <pre><code>names = ['IBM', 'AAPL', 'GOOG', 'IBM', 'GOOG', 'YHOO']\n\nunique = set(names)\n# unique = set(['IBM', 'AAPL','GOOG','YHOO'])\n</code></pre> <p>Operaciones de conjunto adicionales:</p> <pre><code>unique.add('CAT')        # Agregar elemento\nunique.remove('YHOO')    # Remover un elemento\n\ns1 = { 'a', 'b', 'c'}\ns2 = { 'c', 'd' }\ns1 | s2                 # Set union { 'a', 'b', 'c', 'd' }\ns1 &amp; s2                 # Set intersecci\u00f3n { 'c' }\ns1 - s2                 # Set diferencia { 'a', 'b' }\n</code></pre>"},{"location":"02_Working_with_data/02_Containers/#ejercicios","title":"Ejercicios","text":"<p>En estos ejercicios, comenzar\u00e1 a construir uno de los programas principales utilizados en el resto de este curso. Realice su trabajo en el archivo <code>Work/report.py</code>.</p>"},{"location":"02_Working_with_data/02_Containers/#ejercicio-24-una-lista-de-tuplas","title":"Ejercicio 2.4: Una lista de tuplas","text":"<p>El archivo <code>Data/portfolio.csv</code> contiene una lista de acciones en una cartera. En el Ejercicio 1.30, escribi\u00f3 una funci\u00f3n <code>portfolio_cost(filename)</code> que ley\u00f3 este archivo y realiz\u00f3 un c\u00e1lculo simple.</p> <p>Tu c\u00f3digo deber\u00eda verse as\u00ed:</p> <pre><code># pcost.py\n\nimport csv\n\ndef portfolio_cost(filename):\n    '''Calcula el costo total (shares*price) de un archivo de cartera de acciones'''\n    total_cost = 0.0\n\n    with open(filename, 'rt') as f:\n        rows = csv.reader(f)\n        headers = next(rows)\n        for row in rows:\n            nshares = int(row[1])\n            price = float(row[2])\n            total_cost += nshares * price\n    return total_cost\n</code></pre> <p>Usando este c\u00f3digo como gu\u00eda aproximada, cree un nuevo archivo <code>report.py</code>. En ese archivo, defina una funci\u00f3n <code>read_portfolio(filename)</code> que abra un archivo de cartera determinado y lo lea en una lista de tuplas. Para hacer esto, vas a realizar algunas modificaciones menores al c\u00f3digo anterior.</p> <p>Primero, en lugar de definir <code>total_cost = 0</code>, crear\u00e1s una variable que inicialmente estar\u00e1 configurada en una lista vac\u00eda. Por ejemplo:</p> <pre><code>portfolio = []\n</code></pre> <p>A continuaci\u00f3n, en lugar de sumar el costo, convertir\u00e1 cada fila en una tupla exactamente como lo hizo en el \u00faltimo ejercicio y la agregar\u00e1 a esta lista. Por ejemplo:</p> <pre><code>for row in rows:\n    holding = (row[0], int(row[1]), float(row[2]))\n    portfolio.append(holding)\n</code></pre> <p>Finalmente, devolver\u00e1 la lista <code>portfolio</code> resultante.</p> <p>Experimente con su funci\u00f3n de forma interactiva (solo un recordatorio de que para hacer esto, primero debe ejecutar el programa <code>report.py</code> en el int\u00e9rprete):</p> <p>Sugerencia: use <code>-i</code> al ejecutar el archivo en la terminal</p> <pre><code>&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')\n&gt;&gt;&gt; portfolio\n[('AA', 100, 32.2), ('IBM', 50, 91.1), ('CAT', 150, 83.44), ('MSFT', 200, 51.23),\n    ('GE', 95, 40.37), ('MSFT', 50, 65.1), ('IBM', 100, 70.44)]\n&gt;&gt;&gt;\n&gt;&gt;&gt; portfolio[0]\n('AA', 100, 32.2)\n&gt;&gt;&gt; portfolio[1]\n('IBM', 50, 91.1)\n&gt;&gt;&gt; portfolio[1][1]\n50\n&gt;&gt;&gt; total = 0.0\n&gt;&gt;&gt; for s in portfolio:\n        total += s[1] * s[2]\n\n&gt;&gt;&gt; print(total)\n44671.15\n&gt;&gt;&gt;\n</code></pre> <p>Esta lista de tuplas que ha creado es muy similar a una matriz 2D. Por ejemplo, puede acceder a una columna y fila espec\u00edficas mediante una b\u00fasqueda como <code>portfolio[fila][columna]</code>, donde <code>fila</code> y <code>columna</code> son n\u00fameros enteros.</p> <p>Dicho esto, tambi\u00e9n puedes reescribir el \u00faltimo bucle <code>for</code> usando una declaraci\u00f3n como esta:</p> <pre><code>&gt;&gt;&gt; total = 0.0\n&gt;&gt;&gt; for name, shares, price in portfolio:\n            total += shares*price\n\n&gt;&gt;&gt; print(total)\n44671.15\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/02_Containers/#ejercicio-25-lista-de-diccionarios","title":"Ejercicio 2.5: Lista de diccionarios","text":"<p>Tome la funci\u00f3n que escribi\u00f3 en el Ejercicio 2.4 y modif\u00edquela para representar cada acci\u00f3n en la cartera con un diccionario en lugar de una tupla. En este diccionario, utilice los nombres de campo <code>name</code>, <code>shares</code> y <code>prices</code>para representar las diferentes columnas en el archivo de entrada.</p> <p>Experimente con esta nueva funci\u00f3n de la misma manera que lo hizo en el Ejercicio 2.4.</p> <pre><code>&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')\n&gt;&gt;&gt; portfolio\n[{'name': 'AA', 'shares': 100, 'price': 32.2}, {'name': 'IBM', 'shares': 50, 'price': 91.1},\n    {'name': 'CAT', 'shares': 150, 'price': 83.44}, {'name': 'MSFT', 'shares': 200, 'price': 51.23},\n    {'name': 'GE', 'shares': 95, 'price': 40.37}, {'name': 'MSFT', 'shares': 50, 'price': 65.1},\n    {'name': 'IBM', 'shares': 100, 'price': 70.44}]\n&gt;&gt;&gt; portfolio[0]\n{'name': 'AA', 'shares': 100, 'price': 32.2}\n&gt;&gt;&gt; portfolio[1]\n{'name': 'IBM', 'shares': 50, 'price': 91.1}\n&gt;&gt;&gt; portfolio[1]['shares']\n50\n&gt;&gt;&gt; total = 0.0\n&gt;&gt;&gt; for s in portfolio:\n        total += s['shares']*s['price']\n\n&gt;&gt;&gt; print(total)\n44671.15\n&gt;&gt;&gt;\n</code></pre> <p>Aqu\u00ed, notar\u00e1s que se accede a los diferentes campos de cada entrada mediante nombres de clave en lugar de n\u00fameros de columna num\u00e9ricos. A menudo se prefiere esto porque el c\u00f3digo resultante es m\u00e1s f\u00e1cil de leer m\u00e1s adelante.</p> <p>Visualizar diccionarios y listas grandes puede resultar complicado. Para limpiar la salida para la depuraci\u00f3n, considere usar la funci\u00f3n <code>pprint</code>.</p> <pre><code>&gt;&gt;&gt; from pprint import pprint\n&gt;&gt;&gt; pprint(portfolio)\n[{'name': 'AA', 'price': 32.2, 'shares': 100},\n    {'name': 'IBM', 'price': 91.1, 'shares': 50},\n    {'name': 'CAT', 'price': 83.44, 'shares': 150},\n    {'name': 'MSFT', 'price': 51.23, 'shares': 200},\n    {'name': 'GE', 'price': 40.37, 'shares': 95},\n    {'name': 'MSFT', 'price': 65.1, 'shares': 50},\n    {'name': 'IBM', 'price': 70.44, 'shares': 100}]\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/02_Containers/#ejercicio-26-diccionarios-como-contenedor","title":"Ejercicio 2.6: Diccionarios como contenedor","text":"<p>Un diccionario es una forma \u00fatil de realizar un seguimiento de los elementos, en los que desea buscar elementos utilizando un \u00edndice que no sea un n\u00famero entero. En el modo interactivo de Python, intenta jugar con un diccionario:</p> <pre><code>&gt;&gt;&gt; prices = { }\n&gt;&gt;&gt; prices['IBM'] = 92.45\n&gt;&gt;&gt; prices['MSFT'] = 45.12\n&gt;&gt;&gt; prices\n... vea el resultado ...\n&gt;&gt;&gt; prices['IBM']\n92.45\n&gt;&gt;&gt; prices['AAPL']\n... vea el resultado ...\n&gt;&gt;&gt; 'AAPL' in prices\nFalse\n&gt;&gt;&gt;\n</code></pre> <p>El archivo <code>Data/prices.csv</code> contiene una serie de l\u00edneas con precios de acciones. El archivo se parece a esto:</p> <pre><code>\"AA\",9.22\n\"AXP\",24.85\n\"BA\",44.85\n\"BAC\",11.27\n\"C\",3.72\n...\n</code></pre> <p>Escriba una funci\u00f3n <code>read_prices(filename)</code> que lea un conjunto de precios como este en un diccionario donde las claves del diccionario son los nombres de las acciones y los valores en el diccionario son los precios de las acciones.</p> <p>Para hacer esto, comience con un diccionario vac\u00edo y comience a insertar valores en \u00e9l tal como lo hizo anteriormente. Sin embargo, ahora est\u00e1s leyendo los valores de un archivo.</p> <p>Utilizaremos esta estructura de datos para buscar r\u00e1pidamente el precio de una acci\u00f3n determinada.</p> <p>Algunos peque\u00f1os consejos que necesitar\u00e1s para esta parte. Primero, aseg\u00farate de utilizar el m\u00f3dulo <code>csv</code> tal como lo hiciste antes; no es necesario reinventar la rueda aqu\u00ed.</p> <pre><code>&gt;&gt;&gt; import csv\n&gt;&gt;&gt; f = open('Data/prices.csv', 'r')\n&gt;&gt;&gt; rows = csv.reader(f)\n&gt;&gt;&gt; for row in rows:\n        print(row)\n\n\n['AA', '9.22']\n['AXP', '24.85']\n...\n[]\n&gt;&gt;&gt;\n</code></pre> <p>La otra peque\u00f1a complicaci\u00f3n es que el archivo <code>Data/prices.csv</code> puede tener algunas l\u00edneas en blanco. Observe c\u00f3mo la \u00faltima fila de datos anterior es una lista vac\u00eda, lo que significa que no hab\u00eda datos presentes en esa l\u00ednea.</p> <p>Existe la posibilidad de que esto provoque que su programa muera con una excepci\u00f3n. Utilice las instrucciones <code>try</code> y <code>except</code> para detectar esto seg\u00fan corresponda. Pensamiento: \u00bfser\u00eda mejor protegerse contra datos err\u00f3neos con una declaraci\u00f3n <code>if</code>?</p> <p>Una vez que haya escrito su funci\u00f3n <code>read_prices()</code>, pru\u00e9bela de forma interactiva para asegurarse de que funciona:</p> <pre><code>&gt;&gt;&gt; prices = read_prices('Data/prices.csv')\n&gt;&gt;&gt; prices['IBM']\n106.28\n&gt;&gt;&gt; prices['MSFT']\n20.89\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/02_Containers/#ejercicio-27-como-saber-si-puedes-jubilarte","title":"Ejercicio 2.7: C\u00f3mo saber si puedes jubilarte","text":"<p>Conecte todo este trabajo agregando algunas declaraciones adicionales a su programa <code>report.py</code> que calcula la ganancia/p\u00e9rdida. Estas afirmaciones deben tomar la lista de acciones del Ejercicio 2.5 y el diccionario de precios del Ejercicio 2.6 y calcular el valor actual de la cartera junto con la ganancia/p\u00e9rdida. Si ejecuta:</p> <pre><code>bash % python3 -i report.py\n</code></pre> <p>La salida deber\u00eda verse as\u00ed:</p> <pre><code>Total cost 44671.15\nCurrent value 28686.1\nGain/Loss -15985.050000000003\n</code></pre> <p>Contenido | Anterior (2.1 Tipos de datos) | Pr\u00f3ximo (2.3 Salida con formato)</p>"},{"location":"02_Working_with_data/03_Formatting/","title":"03_Formatting","text":"<p>Contenido | Anterior (2.2 Contenedores) | Pr\u00f3ximo (2.4 Secuencias)</p>"},{"location":"02_Working_with_data/03_Formatting/#23-salida-con-formato","title":"2.3 Salida con formato","text":"<p>Esta secci\u00f3n es una ligera digresi\u00f3n, pero cuando se trabaja con datos, a menudo se desea producir resultados estructurados (tablas, etc.). Por ejemplo:</p> <pre><code>      Name      Shares        Price\n----------  ----------  -----------\n        AA         100        32.20\n       IBM          50        91.10\n       CAT         150        83.44\n      MSFT         200        51.23\n        GE          95        40.37\n      MSFT          50        65.10\n       IBM         100        70.44\n</code></pre>"},{"location":"02_Working_with_data/03_Formatting/#formato-de-cadena","title":"Formato de cadena","text":"<p>Una forma de formatear cadenas en Python 3.6+ es con <code>f-strings</code>.</p> <pre><code>&gt;&gt;&gt; name = 'IBM'\n&gt;&gt;&gt; shares = 100\n&gt;&gt;&gt; price = 91.1\n&gt;&gt;&gt; f'{name:&gt;10s} {shares:&gt;10d} {price:&gt;10.2f}'\n'       IBM        100      91.10'\n&gt;&gt;&gt;\n</code></pre> <p>Se reemplaza la parte <code>{expresi\u00f3n:formato}</code>.</p> <p>Se utiliza com\u00fanmente con <code>print</code>.</p> <pre><code>print(f'{name:&gt;10s} {shares:&gt;10d} {price:&gt;10.2f}')\n</code></pre>"},{"location":"02_Working_with_data/03_Formatting/#codigos-de-formato","title":"C\u00f3digos de formato","text":"<p>Los c\u00f3digos de formato (despu\u00e9s del <code>:</code> dentro de <code>{}</code>) son similares a <code>printf()</code> de C. Los c\u00f3digos comunes incluyen:</p> <pre><code>d       Decimal entero\nb       Binary entero\nx       Hexadecimal entero\nf       Float como [-]m.dddddd\ne       Float como [-]m.dddddde+-xx\ng       Float, pero selectivo uso de la notaci\u00f3n E\ns       String\nc       Character (desde entero)\n</code></pre> <p>Los modificadores comunes ajustan el ancho del campo y la precisi\u00f3n decimal. Esta es una lista parcial:</p> <pre><code>:&gt;10d   Entero alineado a la derecha en un campo de 10 caracteres\n:&lt;10d   Entero alineado a la izquierda en un campo de 10 caracteres\n:^10d   Entero centrado en un campo de 10 caracteres\n:0.2f   Flotante con precisi\u00f3n de 2 d\u00edgitos\n:0,.2f  Flotante con precisi\u00f3n de 2 d\u00edgitos y coma en los miles.\n</code></pre>"},{"location":"02_Working_with_data/03_Formatting/#formato-del-diccionario","title":"Formato del diccionario","text":"<p>Puede utilizar el m\u00e9todo <code>format_map()</code> para aplicar formato de cadena a un diccionario de valores:</p> <pre><code>&gt;&gt;&gt; s = {\n    'name': 'IBM',\n    'shares': 100,\n    'price': 91.1\n}\n&gt;&gt;&gt; '{name:&gt;10s} {shares:10d} {price:10.2f}'.format_map(s)\n'       IBM        100      91.10'\n&gt;&gt;&gt;\n</code></pre> <p>Utiliza los mismos c\u00f3digos que <code>f-strings</code> pero toma los valores del diccionario suministrado.</p>"},{"location":"02_Working_with_data/03_Formatting/#metodo-format","title":"M\u00e9todo <code>format()</code>","text":"<p>Hay un m\u00e9todo <code>format()</code> que puede aplicar formato a argumentos o argumentos de palabras clave.</p> <pre><code>&gt;&gt;&gt; '{name:&gt;10s} {shares:10d} {price:10.2f}'.format(name='IBM', shares=100, price=91.1)\n'       IBM        100      91.10'\n&gt;&gt;&gt; '{:&gt;10s} {:10d} {:10.2f}'.format('IBM', 100, 91.1)\n'       IBM        100      91.10'\n&gt;&gt;&gt;\n</code></pre> <p>Francamente, <code>format()</code> es un poco verborr\u00e1gico. Prefiero las <code>f-strngs</code>.</p>"},{"location":"02_Working_with_data/03_Formatting/#formato-estilo-c","title":"Formato estilo C","text":"<p>Tambi\u00e9n puede utilizar el operador de formato <code>%</code>.</p> <pre><code>&gt;&gt;&gt; 'The value is %d' % 3\n'The value is 3'\n&gt;&gt;&gt; '%5d %-5d %10d' % (3,4,5)\n'    3 4              5'\n&gt;&gt;&gt; '%5d %d %14d' % (3,4,5)   # mismo resultado que al anterior\n'    3 4              5'\n&gt;&gt;&gt; '%0.2f' % (3.1415926,)\n'3.14'\n</code></pre> <p>Esto requiere un solo elemento o una tupla a la derecha. Los c\u00f3digos de formato tambi\u00e9n se modelan seg\u00fan <code>printf()</code> de C.</p> <p>Nota: Este es el \u00fanico formato disponible en cadenas de bytes.</p> <pre><code>&gt;&gt;&gt; b'%s tiene %d mensajes' % (b'Dave', 37)\nb'Dave tiene 37 mensajes\n&gt;&gt;&gt; b'%b tiene %d mensajes' % (b'Dave', 37) # %b se puede usar en lugar de %s\nb'Dave tiene 37 mensajes\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/03_Formatting/#ejercicios","title":"Ejercicios","text":""},{"location":"02_Working_with_data/03_Formatting/#ejercicio-28-como-formatear-numeros","title":"Ejercicio 2.8: C\u00f3mo formatear n\u00fameros","text":"<p>Un problema com\u00fan con la impresi\u00f3n de n\u00fameros es especificar el n\u00famero de decimales. Una forma de solucionar esto es utilizar <code>f-strings</code>. Pruebe estos ejemplos:</p> <pre><code>&gt;&gt;&gt; value = 42863.1\n&gt;&gt;&gt; print(value)\n42863.1\n&gt;&gt;&gt; print(f'{value:0.4f}')\n42863.1000\n&gt;&gt;&gt; print(f'{value:&gt;16.2f}')\n        42863.10\n&gt;&gt;&gt; print(f'{value:&lt;16.2f}')\n42863.10\n&gt;&gt;&gt; print(f'{value:*&gt;16,.2f}')\n*******42,863.10\n&gt;&gt;&gt;\n</code></pre> <p>La documentaci\u00f3n completa sobre los c\u00f3digos de formato utilizados en <code>f-strings</code> se puede encontrar aqu\u00ed. El formateo tambi\u00e9n se realiza a veces utilizando el operador <code>%</code> de cadenas.</p> <pre><code>&gt;&gt;&gt; print('%0.4f' % value)\n42863.1000\n&gt;&gt;&gt; print('%16.2f' % value)\n        42863.10\n&gt;&gt;&gt; print('%16,.2f' % value)\nTraceback (most recent call last):\n  File \"&lt;python-input-39&gt;\", line 1, in &lt;module&gt;\n    print('%16,.2f' % value)\n          ~~~~~~~~~~^~~~~~~\nValueError: unsupported format character ',' (0x2c) at index 3\n&gt;&gt;&gt;\n</code></pre> <p>La documentaci\u00f3n sobre varios c\u00f3digos utilizados con <code>%</code> se puede encontrar aqu\u00ed.</p> <p>Aunque se usa com\u00fanmente con <code>print</code>, el formato de cadena no est\u00e1 vinculado a la impresi\u00f3n. Si desea guardar una cadena formateada. Simplemente as\u00edgnelo a una variable.</p> <pre><code>&gt;&gt;&gt; f = '%0.4f' % value\n&gt;&gt;&gt; f\n'42863.1000'\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/03_Formatting/#ejercicio-29-recopilacion-de-datos","title":"Ejercicio 2.9: Recopilaci\u00f3n de datos","text":"<p>En el ejercicio 2.7, escribi\u00f3 un programa llamado <code>report.py</code> que calcul\u00f3 la ganancia/p\u00e9rdida de una cartera de acciones. En este ejercicio, comenzar\u00e1s a modificarlo para producir una tabla como esta:</p> <pre><code>      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n</code></pre> <p>En este informe, <code>Price</code> es el precio actual de la acci\u00f3n y <code>Change</code> es el cambio en el precio de la acci\u00f3n respecto del precio de compra inicial.</p> <p>Para generar el informe anterior, primero deber\u00e1 recopilar todos los datos que se muestran en la tabla. Escriba una funci\u00f3n <code>make_report()</code> que tome una lista de acciones y un diccionario de precios como entrada y devuelva una lista de tuplas que contengan las filas de la tabla anterior.</p> <p>Agregue esta funci\u00f3n a su archivo <code>report.py</code>. As\u00ed es como deber\u00eda funcionar si lo intentas de forma interactiva:</p> <pre><code>&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')\n&gt;&gt;&gt; prices = read_prices('Data/prices.csv')\n&gt;&gt;&gt; report = make_report(portfolio, prices)\n&gt;&gt;&gt; for r in report:\n        print(r)\n\n('AA', 100, 9.22, -22.980000000000004)\n('IBM', 50, 106.28, 15.180000000000007)\n('CAT', 150, 35.46, -47.98)\n('MSFT', 200, 20.89, -30.339999999999996)\n('GE', 95, 13.48, -26.889999999999997)\n...\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/03_Formatting/#ejercicio-210-impresion-de-una-tabla-formateada","title":"Ejercicio 2.10: Impresi\u00f3n de una tabla formateada","text":"<p>Rehaga el bucle <code>for</code> del Ejercicio 2.9, pero cambie la declaraci\u00f3n de impresi\u00f3n para formatear las tuplas.</p> <pre><code>&gt;&gt;&gt; for r in report:\n        print('%10s %10d %10.2f %10.2f' % r)\n\n          AA        100       9.22     -22.98\n         IBM         50     106.28      15.18\n         CAT        150      35.46     -47.98\n        MSFT        200      20.89     -30.34\n...\n&gt;&gt;&gt;\n</code></pre> <p>Tambi\u00e9n puedes expandir los valores y utilizar <code>f-strings</code>. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; for name, shares, price, change in report:\n        print(f'{name:&gt;10s} {shares:&gt;10d} {price:&gt;10.2f} {change:&gt;10.2f}')\n\n          AA        100       9.22     -22.98\n         IBM         50     106.28      15.18\n         CAT        150      35.46     -47.98\n        MSFT        200      20.89     -30.34\n...\n&gt;&gt;&gt;\n</code></pre> <p>Tome las declaraciones anteriores y agr\u00e9guelas a su programa <code>report.py</code>. Haga que su programa tome la salida de la funci\u00f3n <code>make_report()</code> e imprima una tabla bien formateada como se muestra.</p>"},{"location":"02_Working_with_data/03_Formatting/#ejercicio-211-agregar-algunos-encabezados","title":"Ejercicio 2.11: Agregar algunos encabezados","text":"<p>Supongamos que tienes una tupla de nombres de encabezado como \u00e9ste:</p> <pre><code>headers = ('Name', 'Shares', 'Price', 'Change')\n</code></pre> <p>Agregue c\u00f3digo a su programa que tome la tupla de encabezados anterior y cree una cadena donde cada nombre de encabezado est\u00e9 alineado a la derecha en un campo de 10 caracteres de ancho y cada campo est\u00e9 separado por un solo espacio.</p> <pre><code>'      Name     Shares      Price      Change'\n</code></pre> <p>Escriba el c\u00f3digo que tome los encabezados y cree la cadena separadora entre los encabezados y los datos a seguir. Esta cadena es solo un conjunto de caracteres \"-\" debajo de cada nombre de campo. Por ejemplo:</p> <pre><code>'---------- ---------- ---------- -----------'\n\n</code></pre> <p>Cuando haya terminado, su programa deber\u00eda producir la tabla que se muestra en la parte superior de este ejercicio.</p> <pre><code>\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n</code></pre>"},{"location":"02_Working_with_data/03_Formatting/#ejercicio-212-desafio-de-formato","title":"Ejercicio 2.12: Desaf\u00edo de formato","text":"<p>\u00bfC\u00f3mo modificar\u00edas tu c\u00f3digo para que el precio incluya el s\u00edmbolo de moneda ($) y el resultado se vea as\u00ed:</p> <pre><code>      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100      $9.22     -22.98\n       IBM         50    $106.28      15.18\n       CAT        150     $35.46     -47.98\n      MSFT        200     $20.89     -30.34\n        GE         95     $13.48     -26.89\n      MSFT         50     $20.89     -44.21\n       IBM        100    $106.28      35.84\n</code></pre> <p>Contenido | Anterior (2.2 Contenedores) | Pr\u00f3ximo (2.4 Secuencias)</p>"},{"location":"02_Working_with_data/04_Sequences/","title":"04_Sequences","text":"<p>Contenido | Anterior (2.3 Salida con formato) | Pr\u00f3ximo (2.5 M\u00f3dulo Collections)</p>"},{"location":"02_Working_with_data/04_Sequences/#24-secuencias","title":"2.4 Secuencias","text":""},{"location":"02_Working_with_data/04_Sequences/#tipos-de-datos-de-secuencia","title":"Tipos de datos de secuencia","text":"<p>Python tiene tres tipos de datos de secuencia.</p> <ul> <li>Cadena: <code>'Hola'</code>. Una cadena es una secuencia de caracteres. <code>str</code></li> <li>Lista: <code>[1, 4, 5]</code>. <code>list</code></li> <li>Tupla: <code>('GOOG', 100, 490.1)</code>. <code>tuple</code></li> </ul> <p>Todas las secuencias est\u00e1n ordenadas, indexadas por n\u00fameros enteros y tienen una longitud.</p> <pre><code>a = 'Hello'               # String\nb = [1, 4, 5]             # Lista\nc = ('GOOG', 100, 490.1)  # Tupla\n\n# Orden Indexado\na[0]                      # 'H'\nb[-1]                     # 5\nc[1]                      # 100\n\n# Longitud de la secuencia\nlen(a)                    # 5\nlen(b)                    # 3\nlen(c)                    # 3\n</code></pre> <p>Las secuencias se pueden replicar: <code>s * n</code>.</p> <pre><code>&gt;&gt;&gt; a = 'Hello'\n&gt;&gt;&gt; a * 3\n'HelloHelloHello'\n&gt;&gt;&gt; b = [1, 2, 3]\n&gt;&gt;&gt; b * 2\n[1, 2, 3, 1, 2, 3]\n&gt;&gt;&gt;\n</code></pre> <p>Las secuencias del mismo tipo se pueden concatenar: <code>s + t</code>.</p> <pre><code>&gt;&gt;&gt; a = (1, 2, 3)\n&gt;&gt;&gt; b = (4, 5)\n&gt;&gt;&gt; a + b\n(1, 2, 3, 4, 5)\n&gt;&gt;&gt;\n&gt;&gt;&gt; c = [1, 5]\n&gt;&gt;&gt; a + c\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: can only concatenate tuple (not \"list\") to tuple\n</code></pre>"},{"location":"02_Working_with_data/04_Sequences/#rebanar","title":"Rebanar","text":"<p>Rebanar significa tomar una subsecuencia de una secuencia. La sintaxis es <code>s[inicio:fin]</code>. Donde <code>inicio</code> y <code>fin</code> son los \u00edndices de la subsecuencia que desea.</p> <pre><code>a = [0,1,2,3,4,5,6,7,8]\n\na[2:5]    # [2,3,4]\na[-5:]    # [4,5,6,7,8]\na[:3]     # [0,1,2]\n</code></pre> <ul> <li>Los \u00edndices <code>inicio</code> y <code>fin</code> deben ser n\u00fameros enteros.</li> <li>Las porciones no incluyen el valor final. Es como un intervalo     medio abierto de matem\u00e1ticas.</li> <li>Si se omiten los \u00edndices, el valor predeterminado es el principio o     el final de la lista.</li> </ul>"},{"location":"02_Working_with_data/04_Sequences/#reasignacion-de-sectores","title":"Reasignaci\u00f3n de sectores","text":"<p>En las listas, las porciones se pueden reasignar y eliminar.</p> <pre><code># Reasignaci\u00f3n\na = [0,1,2,3,4,5,6,7,8]\na[2:4] = [10,11,12]       # [0,1,10,11,12,4,5,6,7,8]\n</code></pre> <p>Nota: La porci\u00f3n reasignada no necesita tener la misma longitud.</p> <pre><code># Eliminaci\u00f3n\na = [0,1,2,3,4,5,6,7,8]\ndel a[2:4]                # [0,1,4,5,6,7,8]\n</code></pre>"},{"location":"02_Working_with_data/04_Sequences/#reducciones-de-secuencia","title":"Reducciones de secuencia","text":"<p>Hay algunas funciones comunes para reducir una secuencia a un solo valor.</p> <pre><code>&gt;&gt;&gt; s = [1, 2, 3, 4]\n&gt;&gt;&gt; sum(s)\n10\n&gt;&gt;&gt; min(s)\n1\n&gt;&gt;&gt; max(s)\n4\n&gt;&gt;&gt; t = ['Hola', 'Mundo']\n&gt;&gt;&gt; max(t)\n'Mundo'\n&gt;&gt;&gt;\n</code></pre> <pre><code>\n## Iteraci\u00f3n sobre una secuencia\n\nEl bucle for itera sobre los elementos de una secuencia.\n\n```python\n&gt;&gt;&gt; s = [1, 4, 9, 16]\n&gt;&gt;&gt; for i in s:\n        print(i)\n1\n4\n9\n16\n&gt;&gt;&gt;\n</code></pre> <p>En cada iteraci\u00f3n del bucle, obtienes un nuevo elemento con el que trabajar. Este nuevo valor se coloca en la variable de iteraci\u00f3n. En este ejemplo, la variable de iteraci\u00f3n es <code>x</code>:</p> <pre><code>for x in s: # `x` es una variable de iteraci\u00f3n\n  ...declaraciones\n</code></pre> <p>En cada iteraci\u00f3n, se sobrescribe el valor anterior de la variable de iteraci\u00f3n (si lo hay). Una vez finalizado el bucle, la variable conserva el \u00faltimo valor.</p>"},{"location":"02_Working_with_data/04_Sequences/#declaracion-break","title":"Declaraci\u00f3n <code>break</code>","text":"<p>Puede utilizar la declaraci\u00f3n <code>break</code> para salir de un bucle antes de tiempo.</p> <pre><code>for name in namelist:\n    if name == 'Jake':\n        break\n    ...\n    ...\ndeclaraciones\n</code></pre> <p>Cuando se ejecuta la declaraci\u00f3n <code>break</code>, sale del bucle y pasa a las siguientes <code>declaraciones</code>. La declaraci\u00f3n <code>break</code> s\u00f3lo se aplica al bucle m\u00e1s interno. Si este bucle est\u00e1 dentro de otro bucle, no romper\u00e1 el bucle externo.</p>"},{"location":"02_Working_with_data/04_Sequences/#declaracion-continue","title":"Declaraci\u00f3n <code>continue</code>","text":"<p>Para omitir un elemento y pasar al siguiente, utilice la instrucci\u00f3n <code>continue</code>.</p> <pre><code>for line in lines:\n    if line == '\\n':    # Omite l\u00edneas en blanco\n        continue\n    # M\u00e1s declaraciones\n    ...\n</code></pre> <p>Esto es \u00fatil cuando el elemento actual no es de inter\u00e9s o no necesita ser revisado, ignoradolo en el procesamiento.</p>"},{"location":"02_Working_with_data/04_Sequences/#recorriendo-numeros-enteros","title":"Recorriendo n\u00fameros enteros","text":"<p>Si necesita contar, utilice <code>range()</code>.</p> <pre><code>for i in range(100):\n    # i = 0,1,...,99\n</code></pre> <p>La sintaxis es <code>range([inicio,] fin [,escal\u00f3n])</code></p> <pre><code>for i in range(100):\n    # i = 0,1,...,99\nfor j in range(10,20):\n    # j = 10,11,..., 19\nfor k in range(10,50,2):\n    # k = 10,12,...,48\n    # Observe que se cuenta en escalones de 2, no de 1.\n</code></pre> <ul> <li> <p>El valor final nunca se incluye. Espeja el comportamiento de las     rebanadas.</p> </li> <li> <p><code>start</code> es opcional. Valor predeterminado <code>0</code>.</p> </li> <li> <p><code>step</code> es opcional. Valor predeterminado <code>1</code>.</p> </li> <li> <p><code>range()</code> calcula valores seg\u00fan sea necesario. En realidad no     almacena un rango amplio de n\u00fameros.</p> </li> </ul>"},{"location":"02_Working_with_data/04_Sequences/#funcion-enumerate","title":"Funci\u00f3n enumerate()","text":"<p>La funci\u00f3n <code>enumerate</code> agrega un valor de contador adicional a la iteraci\u00f3n.</p> <pre><code>names = ['Elwood', 'Jake', 'Curtis']\nfor i, name in enumerate(names):\n    # Bucle con i = 0, name = 'Elwood'\n    # i = 1, name = 'Jake'\n    # i = 2, name = 'Curtis'\n</code></pre> <p>La forma general es <code>enumerate(secuencia [, inicio = 0])</code>. <code>start</code> es opcional. Un buen ejemplo del uso de <code>enumerate()</code> es el seguimiento de los n\u00fameros de l\u00ednea mientras se lee un archivo:</p> <pre><code>with open(filename) as f:\n    for lineno, line in enumerate(f, start=1):\n        ...\n</code></pre> <p>Al final, <code>enumerate</code> es simplemente un buen atajo para:</p> <pre><code>i = 0\nfor x in s:\n    declaraciones\n    i += 1\n</code></pre> <p>El uso de <code>enumerate</code> implica escribir menos y se ejecuta un poco m\u00e1s r\u00e1pido.</p>"},{"location":"02_Working_with_data/04_Sequences/#for-y-tuplas","title":"<code>for</code> y tuplas","text":"<p>Puedes iterar con m\u00faltiples variables de iteraci\u00f3n.</p> <pre><code>points = [\n  (1, 4),(10, 40),(23, 14),(5, 6),(7, 8)\n]\nfor x, y in points:\n    # Bucle con x = 1, y = 4\n    #           x = 10, y = 40\n    #           x = 23, y = 14\n    #           ...\n</code></pre> <p>Cuando se utilizan m\u00faltiples variables, cada tupla se desempaqueta en un conjunto de variables de iteraci\u00f3n. El n\u00famero de variables debe coincidir con el n\u00famero de elementos en cada tupla.</p>"},{"location":"02_Working_with_data/04_Sequences/#funcion-zip","title":"Funci\u00f3n <code>zip()</code>","text":"<p>La funci\u00f3n <code>zip</code> toma m\u00faltiples secuencias y crea un iterador que las combina.</p> <pre><code>columns = ['name', 'shares', 'price']\nvalues = ['GOOG', 100, 490.1 ]\npairs = zip(columns, values)\n# ('name','GOOG'), ('shares',100), ('price',490.1)\n</code></pre> <p>Para obtener el resultado debes iterar. Puedes usar m\u00faltiples variables para desempaquetar las tuplas como se mostr\u00f3 anteriormente.</p> <pre><code>for column, value in pairs:\n    ...\n</code></pre> <p>Un uso com\u00fan de <code>zip</code> es crear pares clave/valor para construir diccionarios.</p> <pre><code>d = dict(zip(columns, values))\n</code></pre>"},{"location":"02_Working_with_data/04_Sequences/#ejercicios","title":"Ejercicios","text":""},{"location":"02_Working_with_data/04_Sequences/#ejercicio-213-contar","title":"Ejercicio 2.13: Contar","text":"<p>Pruebe algunos ejemplos b\u00e1sicos de conteo:</p> <pre><code>&gt;&gt;&gt; for n in range(10):            # Count 0 ... 9\n        print(n, end=' ')\n\n0 1 2 3 4 5 6 7 8 9\n&gt;&gt;&gt; for n in range(10,0,-1):       # Count 10 ... 1\n        print(n, end=' ')\n\n10 9 8 7 6 5 4 3 2 1\n&gt;&gt;&gt; for n in range(0,10,2):        # Count 0, 2, ... 8\n        print(n, end=' ')\n\n0 2 4 6 8\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/04_Sequences/#ejercicio-214-mas-operaciones-de-secuencia","title":"Ejercicio 2.14: M\u00e1s operaciones de secuencia","text":"<p>Experimente interactivamente con algunas de las operaciones de reducci\u00f3n de secuencia.</p> <pre><code>&gt;&gt;&gt; data = [4, 9, 1, 25, 16, 100, 49]\n&gt;&gt;&gt; min(data)\n1\n&gt;&gt;&gt; max(data)\n100\n&gt;&gt;&gt; sum(data)\n204\n&gt;&gt;&gt;\n</code></pre> <p>Intente recorrer los datos en un bucle.</p> <pre><code>&gt;&gt;&gt; for x in data:\n        print(x)\n\n4\n9\n...\n&gt;&gt;&gt; for n, x in enumerate(data):\n        print(n, x)\n\n0 4\n1 9\n2 1\n...\n&gt;&gt;&gt;\n</code></pre> <p>A veces, los novatos utilizan la declaraci\u00f3n <code>for</code>, <code>len()</code> y <code>range()</code> en alg\u00fan tipo de fragmento de c\u00f3digo horrible que parece surgido de las profundidades de un programa C oxidado.</p> <pre><code>&gt;&gt;&gt; for n in range(len(data)):\n        print(data[n])\n\n4\n9\n1\n...\n&gt;&gt;&gt;\n</code></pre> <p>\u00a1No hagas eso! No s\u00f3lo leerlo hace sangrar los ojos a todos, sino que adem\u00e1s es ineficiente con la memoria y funciona mucho m\u00e1s lento. Simplemente use un bucle <code>for</code> normal si desea iterar sobre los datos. Utilice <code>enumerate()</code> si necesita el \u00edndice por alg\u00fan motivo.</p>"},{"location":"02_Working_with_data/04_Sequences/#ejercicio-215-un-ejemplo-practico-de-enumerate","title":"Ejercicio 2.15: Un ejemplo pr\u00e1ctico de enumerate()","text":"<p>Recuerde que el archivo <code>Data/missing.csv</code> contiene datos de una cartera de acciones, pero tiene algunas filas con datos faltantes. Usando <code>enumerate()</code>, modifique su programa <code>pcost.py</code> para que imprima un n\u00famero de l\u00ednea con el mensaje de advertencia cuando encuentre una entrada incorrecta.</p> <pre><code>&gt;&gt;&gt; cost = portfolio_cost('Data/missing.csv')\nRow 4: Couldn't convert: ['MSFT', '', '51.23'] # Fila 4: No se puede convertir\n Row 7: Couldn't convert: ['IBM', '', '70.44'] # Fila 7: No se puede convertir\n&gt;&gt;&gt;\n</code></pre> <p>Para hacer esto, necesitar\u00e1s cambiar algunas partes de tu c\u00f3digo.</p> <pre><code>...\nfor rowno, row in enumerate(rows, start=1):\n    try:\n        ...\n    except ValueError:\n        print(f'Row {rowno}: Bad row: {row}')\n</code></pre>"},{"location":"02_Working_with_data/04_Sequences/#ejercicio-216-uso-de-la-funcion-zip","title":"Ejercicio 2.16: Uso de la funci\u00f3n <code>zip()</code>","text":"<p>En el archivo <code>Data/portfolio.csv</code>, la primera l\u00ednea contiene encabezados de columna. En todo el c\u00f3digo anterior, los hemos estado descartando.</p> <pre><code>&gt;&gt;&gt; import csv\n&gt;&gt;&gt; f = open('Data/portfolio.csv')\n&gt;&gt;&gt; rows = csv.reader(f)\n&gt;&gt;&gt; headers = next(rows)\n&gt;&gt;&gt; headers\n['name', 'shares', 'price']\n&gt;&gt;&gt;\n</code></pre> <p>Pero \u00bfqu\u00e9 pasar\u00eda si pudieses usar los encabezados para algo \u00fatil? Aqu\u00ed es donde entra en escena la funci\u00f3n <code>zip()</code>. Primero intente esto para emparejar los encabezados de archivo con una fila de datos:</p> <pre><code>&gt;&gt;&gt; row = next(rows)\n&gt;&gt;&gt; row\n['AA', '100', '32.20']\n&gt;&gt;&gt; list(zip(headers, row))\n[ ('name', 'AA'), ('shares', '100'), ('price', '32.20') ]\n&gt;&gt;&gt;\n</code></pre> <p>Observe c\u00f3mo <code>zip()</code> emparej\u00f3 los encabezados de columna con los valores de columna. Aqu\u00ed usamos <code>list()</code> para convertir el resultado en una lista para que puedas verlo. Normalmente, <code>zip()</code> crea un iterador que debe ser consumido por un bucle for.</p> <p>Este emparejamiento es un paso intermedio para construir un diccionario. Ahora prueba esto:</p> <pre><code>&gt;&gt;&gt; record = dict(zip(headers, row))\n&gt;&gt;&gt; record\n{'price': '32.20', 'name': 'AA', 'shares': '100'}\n&gt;&gt;&gt;\n</code></pre> <p>Esta transformaci\u00f3n es uno de los trucos m\u00e1s \u00fatiles que debemos conocer al procesar muchos archivos de datos. Por ejemplo, supongamos que desea hacer que el programa <code>pcost.py</code> funcione con varios archivos de entrada, pero sin tener en cuenta el n\u00famero de columna real donde aparecen el nombre, las acciones y el precio.</p> <p>Modifique la funci\u00f3n <code>portfolio_cost()</code> en <code>pcost.py</code> para que se vea as\u00ed:</p> <pre><code># pcost.py\n\ndef portfolio_cost(filename):\n    ...\n        for rowno, row in enumerate(rows, start=1):\n            record = dict(zip(headers, row))\n            try:\n                nshares = int(record['shares'])\n                price = float(record['price'])\n                total_cost += nshares * price\n            # Esto detecta errores en las conversiones int() y float() anteriores\n            except ValueError:\n                print(f'Row {rowno}: Bad row: {row}')\n        ...\n</code></pre> <p>Ahora, prueba tu funci\u00f3n en un archivo de datos completamente diferente <code>Data/portfoliodate.csv</code> que se ve as\u00ed:</p> <pre><code>name,date,time,shares,price\n\"AA\",\"6/11/2007\",\"9:50am\",100,32.20\n\"IBM\",\"5/13/2007\",\"4:20pm\",50,91.10\n\"CAT\",\"9/23/2006\",\"1:30pm\",150,83.44\n\"MSFT\",\"5/17/2007\",\"10:30am\",200,51.23\n\"GE\",\"2/1/2006\",\"10:45am\",95,40.37\n\"MSFT\",\"10/31/2006\",\"12:05pm\",50,65.10\n\"IBM\",\"7/9/2006\",\"3:15pm\",100,70.44\n</code></pre> <pre><code>&gt;&gt;&gt; portfolio_cost('Data/portfoliodate.csv')\n44671.15\n&gt;&gt;&gt;\n</code></pre> <p>Si lo hiciste bien, descubrir\u00e1s que tu programa a\u00fan funciona. aunque el archivo de datos tiene un formato de columna completamente diferente al anterior. \u00a1Eso es genial!</p> <p>El cambio realizado aqu\u00ed es sutil, pero significativo. En lugar de que <code>portfolio_cost()</code> est\u00e9 codificado para leer un \u00fanico formato de archivo fijo, la nueva versi\u00f3n lee cualquier archivo CSV y selecciona los valores de inter\u00e9s. Siempre que el archivo tenga las columnas requeridas, el c\u00f3digo funcionar\u00e1.</p> <p>Modifique el programa <code>report.py</code> que escribi\u00f3 en la Secci\u00f3n 2.3 para que utilice la misma t\u00e9cnica para seleccionar los encabezados de columna.</p> <p>Intente ejecutar el programa <code>report.py</code> en el archivo <code>Data/portfoliodate.csv</code> y ver\u00e1 que produce la misma respuesta que antes.</p>"},{"location":"02_Working_with_data/04_Sequences/#ejercicio-217-invertir-un-diccionario","title":"Ejercicio 2.17: Invertir un diccionario","text":"<p>Un diccionario asigna claves a valores. Por ejemplo, un diccionario de precios de acciones.</p> <pre><code>&gt;&gt;&gt; prices = {\n        'GOOG' : 490.1,\n        'AA' : 23.45,\n        'IBM' : 91.1,\n        'MSFT' : 34.23\n    }\n&gt;&gt;&gt;\n</code></pre> <p>Si utiliza el m\u00e9todo <code>items()</code>, puede obtener pares <code>(clave, valor)</code>:</p> <pre><code>&gt;&gt;&gt; prices.items()\ndict_items([('GOOG', 490.1), ('AA', 23.45), ('IBM', 91.1), ('MSFT', 34.23)])\n&gt;&gt;&gt;\n</code></pre> <p>Sin embargo, \u00bfqu\u00e9 sucede si desea obtener una lista de pares '(valor, clave)'? Sugerencia: use <code>zip()</code>.</p> <pre><code>&gt;&gt;&gt; pricelist = list(zip(prices.values(),prices.keys()))\n&gt;&gt;&gt; pricelist\n[(490.1, 'GOOG'), (23.45, 'AA'), (91.1, 'IBM'), (34.23, 'MSFT')]\n&gt;&gt;&gt;\n</code></pre> <p>\u00bfPor qu\u00e9 har\u00edas esto? En primer lugar, permite realizar cierto tipo de procesamiento con los datos del diccionario.</p> <pre><code>&gt;&gt;&gt; min(pricelist)\n(23.45, 'AA')\n&gt;&gt;&gt; max(pricelist)\n(490.1, 'GOOG')\n&gt;&gt;&gt; sorted(pricelist)\n[(23.45, 'AA'), (34.23, 'MSFT'), (91.1, 'IBM'), (490.1, 'GOOG')]\n&gt;&gt;&gt;\n</code></pre> <p>Esto tambi\u00e9n ilustra una caracter\u00edstica importante de las tuplas. Cuando se utilizan en comparaciones, las tuplas se comparan elemento por elemento comenzando con el primer elemento. Similar a c\u00f3mo se comparan cadenas, car\u00e1cter por car\u00e1cter.</p> <p><code>zip()</code> se usa a menudo en situaciones como \u00e9sta, donde es necesario emparejar datos de diferentes lugares. Por ejemplo, emparejar los nombres de las columnas con los valores de las columnas para crear un diccionario de valores con nombre.</p> <p>Tenga en cuenta que <code>zip()</code> no est\u00e1 limitado a pares. Por ejemplo, puedes usarlo con cualquier n\u00famero de listas de entrada:</p> <pre><code>&gt;&gt;&gt; a = [1, 2, 3, 4]\n&gt;&gt;&gt; b = ['w', 'x', 'y', 'z']\n&gt;&gt;&gt; c = [0.2, 0.4, 0.6, 0.8]\n&gt;&gt;&gt; list(zip(a, b, c))\n[(1, 'w', 0.2), (2, 'x', 0.4), (3, 'y', 0.6), (4, 'z', 0.8))]\n&gt;&gt;&gt;\n</code></pre> <p>Adem\u00e1s, tenga en cuenta que <code>zip()</code> se detiene una vez que se agota la secuencia de entrada m\u00e1s corta.</p> <pre><code>&gt;&gt;&gt; a = [1, 2, 3, 4, 5, 6]\n&gt;&gt;&gt; b = ['x', 'y', 'z']\n&gt;&gt;&gt; list(zip(a,b))\n[(1, 'x'), (2, 'y'), (3, 'z')]\n&gt;&gt;&gt;\n</code></pre> <p>Contenido | Anterior (2.3 Salida con formato) | Pr\u00f3ximo (2.5 M\u00f3dulo Collections)</p>"},{"location":"02_Working_with_data/05_Collections/","title":"05_Collections","text":"<p>Contenido | Anterior (2.4 Secuencias) | Pr\u00f3ximo (2.6 Listas por comprensi\u00f3n)</p>"},{"location":"02_Working_with_data/05_Collections/#25-modulo-collections","title":"2.5 M\u00f3dulo <code>collections</code>","text":"<p>El m\u00f3dulo <code>collections</code> proporciona una serie de objetos \u00fatiles para el manejo de datos. En esta parte se presentan brevemente algunas de estas caracter\u00edsticas.</p>"},{"location":"02_Working_with_data/05_Collections/#ejemplo-contar-cosas","title":"Ejemplo: Contar cosas","text":"<p>Digamos que desea tabular el total de acciones de cada acci\u00f3n.</p> <pre><code>portfolio = [\n    ('GOOG', 100, 490.1),\n    ('IBM', 50, 91.1),\n    ('CAT', 150, 83.44),\n    ('IBM', 100, 45.23),\n    ('GOOG', 75, 572.45),\n    ('AA', 50, 23.15)\n]\n</code></pre> <p>Hay dos entradas <code>'IBM'</code> y dos entradas <code>'GOOG'</code> en esta lista. Las acciones deben combinarse de alguna manera.</p>"},{"location":"02_Working_with_data/05_Collections/#contadores","title":"Contadores","text":"<p>Soluci\u00f3n: Utilice un <code>Counter</code>.</p> <pre><code>from collections import Counter\ntotal_shares = Counter()\nfor name, shares, price in portfolio:\n    total_shares[name] += shares\n\ntotal_shares['IBM']     # 150\n</code></pre>"},{"location":"02_Working_with_data/05_Collections/#ejemplo-asignaciones-de-uno-a-muchos","title":"Ejemplo: Asignaciones de uno a muchos","text":"<p>Problema: desea asignar una clave a m\u00faltiples valores.</p> <pre><code>portfolio = [\n    ('GOOG', 100, 490.1),\n    ('IBM', 50, 91.1),\n    ('CAT', 150, 83.44),\n    ('IBM', 100, 45.23),\n    ('GOOG', 75, 572.45),\n    ('AA', 50, 23.15)\n]\n</code></pre> <p>Al igual que en el ejemplo anterior, la clave <code>'IBM'</code> deber\u00eda tener dos tuplas diferentes.</p> <p>Soluci\u00f3n: utilice un <code>defaultdict</code>.</p> <pre><code>from collections import defaultdict\nholdings = defaultdict(list)\nfor name, shares, price in portfolio:\n    holdings[name].append((shares, price))\nholdings['IBM'] # [ (50, 91.1), (100, 45.23) ]\n</code></pre> <p><code>defaultdict</code> garantiza que cada vez que accedas a una clave obtendr\u00e1s un valor predeterminado.</p>"},{"location":"02_Working_with_data/05_Collections/#ejemplo-mantener-un-historial","title":"Ejemplo: Mantener un historial","text":"<p>Problema: Queremos un historial de las \u00faltimas N cosas. Soluci\u00f3n: utilice <code>deque</code>.</p> <pre><code>from collections import deque\n\nhistory = deque(maxlen=N)\nwith open(filename) as f:\n    for line in f:\n        history.append(line)\n        ...\n</code></pre> <ul> <li> <p>Abre un archivo cuyo nombre est\u00e1 en la variable <code>filename</code> para     lectura.</p> </li> <li> <p>Lee el archivo l\u00ednea por l\u00ednea.</p> </li> <li> <p>A\u00f1ade cada l\u00ednea al deque llamado <code>history</code>.</p> </li> </ul> <p>De esta manera, al finalizar, el deque <code>history</code> contendr\u00e1 las \u00faltimas N l\u00edneas del archivo. Si el archivo tiene menos de N l\u00edneas, contendr\u00e1 todas las l\u00edneas del archivo. Si tiene m\u00e1s de N l\u00edneas, solo contendr\u00e1 las \u00faltimas N l\u00edneas debido al l\u00edmite m\u00e1ximo establecido.</p>"},{"location":"02_Working_with_data/05_Collections/#ejercicios","title":"Ejercicios","text":"<p>El m\u00f3dulo <code>collections</code> podr\u00eda ser uno de los m\u00f3dulos de biblioteca m\u00e1s \u00fatiles para tratar problemas de manejo de datos de prop\u00f3sitos especiales, tales como tabulaci\u00f3n e indexaci\u00f3n.</p> <p>En este ejercicio, veremos algunos ejemplos sencillos. Comience ejecutando su programa <code>report.py</code> para que tenga la cartera de acciones cargada en modo interactivo.</p> <pre><code>bash % python3 -i report.py\n</code></pre>"},{"location":"02_Working_with_data/05_Collections/#ejercicio-218-tabulacion-con-contadores","title":"Ejercicio 2.18: Tabulaci\u00f3n con contadores","text":"<p>Supongamos que desea tabular la tenencia total de cada acci\u00f3n. Esto es f\u00e1cil usando objetos 'Counter'. Pru\u00e9balo:</p> <pre><code>&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')\n&gt;&gt;&gt; from collections import Counter\n&gt;&gt;&gt; holdings = Counter()\n&gt;&gt;&gt; for s in portfolio:\n        holdings[s['name']] += s['shares']\n\n&gt;&gt;&gt; holdings\nCounter({'MSFT': 250, 'IBM': 150, 'CAT': 150, 'AA': 100, 'GE': 95})\n&gt;&gt;&gt;\n</code></pre> <p>Observe atentamente c\u00f3mo las entradas m\u00faltiples para <code>'MSFT'</code> e <code>'IBM'</code> en <code>portafolio</code> se combinan en una sola entrada aqu\u00ed.</p> <p>Puedes utilizar un contador como si fuera un diccionario para recuperar valores individuales:</p> <pre><code>&gt;&gt;&gt; holdings['IBM']\n150\n&gt;&gt;&gt; holdings['MSFT']\n250\n&gt;&gt;&gt;\n</code></pre> <p>Si desea clasificar los valores, haga lo siguiente:</p> <pre><code>&gt;&gt;&gt; # Obtenga las tres acciones m\u00e1s importantes\n&gt;&gt;&gt; holdings.most_common(3)\n[('MSFT', 250), ('IBM', 150), ('CAT', 150)]\n&gt;&gt;&gt;\n</code></pre> <p>Tomemos otra cartera de acciones y construyamos un nuevo contador:</p> <pre><code>&gt;&gt;&gt; portfolio2 = read_portfolio('Data/portfolio2.csv')\n&gt;&gt;&gt; holdings2 = Counter()\n&gt;&gt;&gt; for s in portfolio2:\n          holdings2[s['name']] += s['shares']\n\n&gt;&gt;&gt; holdings2\nCounter({'HPQ': 250, 'GE': 125, 'AA': 50, 'MSFT': 25})\n&gt;&gt;&gt;\n</code></pre> <p>Por \u00faltimo, combinemos todos los activos realizando una sencilla operaci\u00f3n:</p> <pre><code>&gt;&gt;&gt; holdings\nCounter({'MSFT': 250, 'IBM': 150, 'CAT': 150, 'AA': 100, 'GE': 95})\n&gt;&gt;&gt; holdings2\nCounter({'HPQ': 250, 'GE': 125, 'AA': 50, 'MSFT': 25})\n&gt;&gt;&gt; combined = holdings + holdings2\n&gt;&gt;&gt; combined\nCounter({'MSFT': 275, 'HPQ': 250, 'GE': 220, 'AA': 150, 'IBM': 150, 'CAT': 150})\n&gt;&gt;&gt;\n</code></pre> <p>Esto es s\u00f3lo una peque\u00f1a muestra de lo que los contadores ofrecen. Sin embargo, si alguna vez necesitas tabular valores, deber\u00edas considerar usar uno.</p>"},{"location":"02_Working_with_data/05_Collections/#comentario-modulo-collections","title":"Comentario: m\u00f3dulo Collections","text":"<p>El m\u00f3dulo <code>collections</code> es uno de los m\u00f3dulos de biblioteca m\u00e1s \u00fatiles de todo Python. De hecho, podr\u00edamos hacer un tutorial extenso s\u00f3lo sobre eso. Sin embargo, hacerlo ahora tambi\u00e9n ser\u00eda una distracci\u00f3n. Por ahora, pon <code>collections</code> en tu lista de lectura para antes de dormir, para m\u00e1s tarde.</p> <p>Contenido | Anterior (2.4 Secuencias) | Pr\u00f3ximo (2.6 Listas por comprensi\u00f3n)</p>"},{"location":"02_Working_with_data/06_List_comprehension/","title":"06_List_comprehension","text":"<p>Contenido | Anterior (2.5 Collections) | Pr\u00f3ximo (2.7 Objetos)</p>"},{"location":"02_Working_with_data/06_List_comprehension/#26-listas-por-comprension","title":"2.6 Listas por comprensi\u00f3n","text":"<p>Una tarea com\u00fan es procesar elementos de una lista. Esta secci\u00f3n presenta las listas por comprensi\u00f3n, una herramienta poderosa para hacer precisamente eso.</p>"},{"location":"02_Working_with_data/06_List_comprehension/#creando-nuevas-listas","title":"Creando nuevas listas","text":"<p>Una lista por comprensi\u00f3n crea una nueva lista aplicando una operaci\u00f3n a cada elemento de una secuencia.</p> <pre><code>&gt;&gt;&gt; a = [1, 2, 3, 4, 5]\n&gt;&gt;&gt; b = [2*x for x in a ]\n&gt;&gt;&gt; b\n[2, 4, 6, 8, 10]\n&gt;&gt;&gt;\n</code></pre> <p>Otro ejemplo:</p> <pre><code>&gt;&gt;&gt; names = ['Elwood', 'Jake']\n&gt;&gt;&gt; a = [name.lower() for name in names]\n&gt;&gt;&gt; a\n['elwood', 'jake']\n&gt;&gt;&gt;\n</code></pre> <p>La sintaxis general es: <code>[ &lt;expresi\u00f3n&gt; for &lt;nombre_de_variable&gt; in &lt;secuencia&gt; ]</code>.</p>"},{"location":"02_Working_with_data/06_List_comprehension/#filtrado","title":"Filtrado","text":"<p>Tambi\u00e9n puedes filtrar durante la listas por comprensi\u00f3n.</p> <pre><code>&gt;&gt;&gt; a = [1, -5, 4, 2, -2, 10]\n&gt;&gt;&gt; b = [2*x for x in a if x &gt; 0 ]\n&gt;&gt;&gt; b\n[2, 8, 4, 20]\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/06_List_comprehension/#casos-de-uso","title":"Casos de uso","text":"<p>Las listas por comprensi\u00f3n son muy \u00fatiles. Por ejemplo, puede recopilar valores de un diccionario espec\u00edfico:</p> <pre><code>stocknames = [s['name'] for s in stocks]\n</code></pre> <p>Puede realizar consultas similares a bases de datos en secuencias.</p> <pre><code>a = [s for s in stocks if s['price'] &gt; 100 and s['shares'] &gt; 50 ]\n</code></pre> <p>Tambi\u00e9n puedes combinar una lista por comprensi\u00f3n con una reducci\u00f3n de secuencia:</p> <pre><code>cost = sum([s['shares']*s['price'] for s in stocks])\n</code></pre>"},{"location":"02_Working_with_data/06_List_comprehension/#sintaxis-general","title":"Sintaxis general","text":"<pre><code>[ &lt;expresi\u00f3n&gt; for &lt;nombre_de_variable&gt; in &lt;secuencia&gt; if &lt;condici\u00f3n&gt;]\n</code></pre> <p>lo que significa:</p> <pre><code>result = []\nfor nombre_de_variable in secuencia:\n    if condici\u00f3n:\n        result.append(expresi\u00f3n)\n</code></pre>"},{"location":"02_Working_with_data/06_List_comprehension/#digresion-historica","title":"Digresi\u00f3n hist\u00f3rica","text":"<p>Las listas por comprensi\u00f3n provienen de las matem\u00e1ticas (notaci\u00f3n de construcci\u00f3n de conjuntos).</p> <pre><code>a = [ x * x for x in s if x &gt; 0 ] # Python\n\na = { x^2 | x \u2208 s, x &gt; 0 }         # Matem\u00e1tica\n</code></pre> <p>Tambi\u00e9n est\u00e1 implementado en varios otros lenguajes. Aunque la mayor\u00eda de los programadores probablemente no est\u00e9n pensando en sus clases de matem\u00e1ticas. No obstante, est\u00e1 bien verlo como un interesante atajo para crear listas.</p>"},{"location":"02_Working_with_data/06_List_comprehension/#ejercicios","title":"Ejercicios","text":"<p>Comience ejecutando su programa <code>report.py</code> para que tenga la Cartera de acciones cargadas en el modo interactivo.</p> <pre><code>bash % python3 -i report.py\n</code></pre> <p>Ahora, en modo interactivo de Python, escriba instrucciones para realizar la operaciones que se describen a continuaci\u00f3n. Estas operaciones realizan varios tipos de reducciones de datos, transformaciones y consultas sobre los datos de la cartera.</p>"},{"location":"02_Working_with_data/06_List_comprehension/#ejercicio-219-listas-por-comprension","title":"Ejercicio 2.19: Listas por Comprensi\u00f3n","text":"<p>Pruebe algunas listas por comprensi\u00f3n simples solo para familiarizarse con la sintaxis.</p> <pre><code>&gt;&gt;&gt; nums = [1,2,3,4]\n&gt;&gt;&gt; squares = [ x * x for x in nums ]\n&gt;&gt;&gt; squares\n[1, 4, 9, 16]\n&gt;&gt;&gt; twice = [ 2 * x for x in nums if x &gt; 2 ]\n&gt;&gt;&gt; twice\n[6, 8]\n&gt;&gt;&gt;\n</code></pre> <p>Observe c\u00f3mo las listas por comprensi\u00f3n crean una nueva lista con los datos adecuadamente transformados o filtrados.</p>"},{"location":"02_Working_with_data/06_List_comprehension/#ejercicio-220-reducciones-de-secuencias","title":"Ejercicio 2.20: Reducciones de secuencias","text":"<p>Calcule el costo total de la cartera utilizando una \u00fanica declaraci\u00f3n de Python.</p> <pre><code>&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')\n&gt;&gt;&gt; cost = sum([ s['shares'] * s['price'] for s in portfolio ])\n&gt;&gt;&gt; cost\n44671.15\n&gt;&gt;&gt;\n</code></pre> <p>Despu\u00e9s de haber hecho esto, muestra c\u00f3mo puedes calcular el valor actual. de la cartera mediante un \u00fanico enunciado.</p> <pre><code>&gt;&gt;&gt; value = sum([ s['shares'] * prices[s['name']] for s in portfolio ])\n&gt;&gt;&gt; value\n28686.1\n&gt;&gt;&gt;\n</code></pre> <p>Ambas operaciones anteriores son un ejemplo de reducci\u00f3n de mapa. Las listas por comprensi\u00f3n consisten en mapear una operaci\u00f3n a lo largo de la lista.</p> <pre><code>&gt;&gt;&gt; [ s['shares'] * s['price'] for s in portfolio ]\n[3220.0000000000005, 4555.0, 12516.0, 10246.0, 3835.1499999999996, 3254.9999999999995, 7044.0]\n&gt;&gt;&gt;\n</code></pre> <p>La funci\u00f3n <code>sum()</code> realiza entonces una reducci\u00f3n en el resultado:</p> <pre><code>&gt;&gt;&gt; sum(_)\n44671.15\n&gt;&gt;&gt;\n</code></pre> <p>Con este conocimiento, ahora est\u00e1s listo para lanzar una empresa emergente de big data.</p>"},{"location":"02_Working_with_data/06_List_comprehension/#ejercicio-221-consultas-de-datos","title":"Ejercicio 2.21: Consultas de datos","text":"<p>Pruebe los siguientes ejemplos de varias consultas de datos.</p> <p>En primer lugar, una lista de todas las tenencias de cartera con m\u00e1s de 100 acciones.</p> <pre><code>&gt;&gt;&gt; more100 = [ s for s in portfolio if s['shares'] &gt; 100 ]\n&gt;&gt;&gt; more100\n[{'price': 83.44, 'name': 'CAT', 'shares': 150}, {'price': 51.23, 'name': 'MSFT', 'shares': 200}]\n&gt;&gt;&gt;\n</code></pre> <p>Todas las tenencias de cartera de acciones de MSFT e IBM.</p> <pre><code>&gt;&gt;&gt; msftibm = [ s for s in portfolio if s['name'] in {'MSFT','IBM'} ]\n&gt;&gt;&gt; msftibm\n[{'price': 91.1, 'name': 'IBM', 'shares': 50}, {'price': 51.23, 'name': 'MSFT', 'shares': 200},\n  {'price': 65.1, 'name': 'MSFT', 'shares': 50}, {'price': 70.44, 'name': 'IBM', 'shares': 100}]\n&gt;&gt;&gt;\n</code></pre> <p>Una lista de todas las tenencias de acciones que cuestan m\u00e1s de $10000.</p> <pre><code>&gt;&gt;&gt; cost10k = [ s for s in portfolio if s['shares'] * s['price'] &gt; 10000 ]\n&gt;&gt;&gt; cost10k\n[{'price': 83.44, 'name': 'CAT', 'shares': 150}, {'price': 51.23, 'name': 'MSFT', 'shares': 200}]\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/06_List_comprehension/#ejercicio-222-extraccion-de-datos","title":"Ejercicio 2.22: Extracci\u00f3n de datos","text":"<p>Muestra c\u00f3mo podr\u00edas construir una lista de tuplas <code>(name, shares)</code> donde <code>name</code> y <code>shares</code> se toman de <code>portfolio</code>.</p> <pre><code>&gt;&gt;&gt; name_shares =[ (s['name'], s['shares']) for s in portfolio ]\n&gt;&gt;&gt; name_shares\n[('AA', 100), ('IBM', 50), ('CAT', 150), ('MSFT', 200), ('GE', 95), ('MSFT', 50), ('IBM', 100)]\n&gt;&gt;&gt;\n</code></pre> <p>Si cambias los corchetes (<code>[</code>,<code>]</code>) por llaves (<code>{</code>, <code>}</code>), obtienes algo conocido como comprensi\u00f3n de conjunto. Esto le proporciona valores \u00fanicos o distintos.</p> <p>Por ejemplo, esto determina el conjunto de nombres de acciones \u00fanicos que aparecen en <code>portafolio</code>:</p> <pre><code>&gt;&gt;&gt; names = { s['name'] for s in portfolio }\n&gt;&gt;&gt; names\n{ 'AA', 'GE', 'IBM', 'MSFT', 'CAT' }\n&gt;&gt;&gt;\n</code></pre> <p>Si especifica pares <code>clave:valor</code>, puede crear un diccionario. Por ejemplo, crear un diccionario que asigne el nombre de una acci\u00f3n al n\u00famero total de acciones que posee.</p> <pre><code>&gt;&gt;&gt; holdings = { name: 0 for name in names }\n&gt;&gt;&gt; holdings\n{'AA': 0, 'GE': 0, 'IBM': 0, 'MSFT': 0, 'CAT': 0}\n&gt;&gt;&gt;\n</code></pre> <p>Esta \u00faltima caracter\u00edstica se conoce como diccionario por comprensi\u00f3n. Vamos a tabular:</p> <pre><code>&gt;&gt;&gt; for s in portfolio:\n        holdings[s['name']] += s['shares']\n\n&gt;&gt;&gt; holdings\n{ 'AA': 100, 'GE': 95, 'IBM': 150, 'MSFT':250, 'CAT': 150 }\n&gt;&gt;&gt;\n</code></pre> <p>Pruebe este ejemplo que filtra el diccionario de <code>prices</code> solo a aquellos nombres que aparecen en la cartera:</p> <pre><code>&gt;&gt;&gt; names\n&gt;&gt;&gt; portfolio_prices = { name: prices[name] for name in names }\n&gt;&gt;&gt; portfolio_prices\n{'AA': 9.22, 'GE': 13.48, 'IBM': 106.28, 'MSFT': 20.89, 'CAT': 35.46}\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/06_List_comprehension/#ejercicio-223-extraccion-de-datos-de-archivos-csv","title":"Ejercicio 2.23: Extracci\u00f3n de datos de archivos CSV","text":"<p>Saber c\u00f3mo utilizar diversas combinaciones de listas, conjuntos y diccionarios puede ser \u00fatil en diversas formas de procesamiento de datos. A continuaci\u00f3n se muestra un ejemplo que muestra c\u00f3mo extraer columnas seleccionadas de un archivo CSV.</p> <p>Primero, lea una fila de informaci\u00f3n de encabezado de un archivo CSV:</p> <pre><code>&gt;&gt;&gt; import csv\n&gt;&gt;&gt; f = open('Data/portfoliodate.csv')\n&gt;&gt;&gt; rows = csv.reader(f)\n&gt;&gt;&gt; headers = next(rows)\n&gt;&gt;&gt; headers\n['name', 'date', 'time', 'shares', 'price']\n&gt;&gt;&gt;\n</code></pre> <p>A continuaci\u00f3n, defina una variable que enumere las columnas que realmente le interesan:</p> <pre><code>&gt;&gt;&gt; select = ['name', 'shares', 'price']\n&gt;&gt;&gt;\n</code></pre> <p>Ahora, ubique los \u00edndices de las columnas anteriores en el archivo CSV de origen:</p> <pre><code>&gt;&gt;&gt; indices = [ headers.index(colname) for colname in select ]\n&gt;&gt;&gt; indices\n[0, 3, 4]\n&gt;&gt;&gt;\n</code></pre> <p>Por \u00faltimo, lea una fila de datos y convi\u00e9rtala en un diccionario utilizando un diccionario por comprensi\u00f3n:</p> <pre><code>&gt;&gt;&gt; row = next(rows)\n&gt;&gt;&gt; record = { colname: row[index] for colname, index in zip(select, indices) }   # dict-comprehension\n&gt;&gt;&gt; record\n{'price': '32.20', 'name': 'AA', 'shares': '100'}\n&gt;&gt;&gt;\n</code></pre> <p>Si te sientes c\u00f3modo con lo que acaba de pasar, lee el resto del archivo:</p> <pre><code>&gt;&gt;&gt; portfolio = [ { colname: row[index] for colname, index in zip(select, indices) } for row in rows ]\n&gt;&gt;&gt; portfolio\n[{'price': '91.10', 'name': 'IBM', 'shares': '50'}, {'price': '83.44', 'name': 'CAT', 'shares': '150'},\n  {'price': '51.23', 'name': 'MSFT', 'shares': '200'}, {'price': '40.37', 'name': 'GE', 'shares': '95'},\n  {'price': '65.10', 'name': 'MSFT', 'shares': '50'}, {'price': '70.44', 'name': 'IBM', 'shares': '100'}]\n&gt;&gt;&gt;\n</code></pre> <p>Vaya, acabas de reducir gran parte de la funci\u00f3n <code>read_portfolio()</code> a una sola declaraci\u00f3n.</p>"},{"location":"02_Working_with_data/06_List_comprehension/#comentario","title":"Comentario","text":"<p>Las listas por comprensi\u00f3n se utilizan com\u00fanmente en Python como un medio eficiente para transformar, filtrar o recopilar datos. Debido a la sintaxis, no conviene exagerar: intenta que cada lista por comprensi\u00f3n sea lo m\u00e1s simple posible. Est\u00e1 bien dividir las cosas en varios pasos. Por ejemplo, no est\u00e1 claro que usted quiera soltar ese \u00faltimo ejemplo ante sus desprevenidos compa\u00f1eros de trabajo.</p> <p>Dicho esto, saber c\u00f3mo manipular datos r\u00e1pidamente es una habilidad incre\u00edblemente \u00fatil. Existen numerosas situaciones en las que podr\u00eda ser necesario resolver alg\u00fan tipo de problema puntual relacionado con la importaci\u00f3n, exportaci\u00f3n, extracci\u00f3n de datos, etc. Convertirse en un maestro de las listas por comprensi\u00f3n puede reducir sustancialmente el tiempo empleado en idear una soluci\u00f3n. Adem\u00e1s, no te olvides del m\u00f3dulo <code>collections</code>.</p> <p>Contenido | Anterior (2.5 M\u00f3dulo collections) | Pr\u00f3ximo (2.7 Modelo de objetos)</p>"},{"location":"02_Working_with_data/07_Objects/","title":"07_Objects","text":"<p>Contenido | Anterior (2.6 Listas por comprensi\u00f3n) | Pr\u00f3ximo (3. Organizaci\u00f3n del programa)</p>"},{"location":"02_Working_with_data/07_Objects/#27-objetos","title":"2.7 Objetos","text":"<p>Esta secci\u00f3n presenta m\u00e1s detalles sobre el modelo de objetos internos de Python y analiza algunos asuntos relacionados con la administraci\u00f3n de memoria, la copia y la verificaci\u00f3n de tipos.</p>"},{"location":"02_Working_with_data/07_Objects/#asignacion","title":"Asignaci\u00f3n","text":"<p>Muchas operaciones en Python est\u00e1n relacionadas con la asignaci\u00f3n o almacenamiento de valores.</p> <pre><code>a = value # Asignar a una variable\ns[n] = value # Asignar a una lista\ns.append(value) # Anexar a una lista\nd['key'] = value # Agregar a un diccionario\n</code></pre> <p>Precauci\u00f3n: las operaciones de asignaci\u00f3n nunca hacen una copia del valor que se est\u00e1 asignando. Todas las asignaciones son simplemente copias de referencia (o copias de puntero si lo prefiere).</p>"},{"location":"02_Working_with_data/07_Objects/#ejemplo-de-asignacion","title":"Ejemplo de asignaci\u00f3n","text":"<p>Considere este fragmento de c\u00f3digo.</p> <pre><code>a = [1,2,3]\nb = a\nc = [a,b]\n</code></pre> <p>Una imagen de las operaciones de memoria subyacentes. En este ejemplo, solo hay un objeto de lista <code>[1,2,3]</code>, pero hay cuatro referencias diferentes a \u00e9l.</p> <p></p> <p>Esto significa que modificar un valor afecta a todas las referencias.</p> <pre><code>&gt;&gt;&gt; a.append(999)\n&gt;&gt;&gt; a\n[1,2,3,999]\n&gt;&gt;&gt; b\n[1,2,3,999]\n&gt;&gt;&gt; c\n[[1,2,3,999], [1,2,3,999]]\n&gt;&gt;&gt;\n</code></pre> <p>Observe c\u00f3mo un cambio en la lista original aparece en todos lados (\u00a1vaya!). Esto se debe a que nunca se hicieron copias. Todo apunta a lo mismo.</p>"},{"location":"02_Working_with_data/07_Objects/#reasignacion-de-valores","title":"Reasignaci\u00f3n de valores","text":"<p>Reasignar un valor nunca sobrescribe la memoria utilizada por el valor anterior.</p> <pre><code>a = [1,2,3]\nb = a\na = [4,5,6]\n\nprint(a) # [4, 5, 6]\nprint(b) # [1, 2, 3] Contiene el valor original\n</code></pre> <p>Recuerde: Las variables son nombres, no ubicaciones de memoria.</p>"},{"location":"02_Working_with_data/07_Objects/#algunos-peligros","title":"Algunos peligros","text":"<p>Si no sabe sobre este intercambio, en alg\u00fan momento se disparar\u00e1 en el pie. Escenario t\u00edpico. Modifica algunos datos pensando que son su propia copia privada y accidentalmente corrompe algunos datos en alguna otra parte del programa.</p> <p>Comentario: Esta es una de las razones por las que los tipos de datos primitivos (int, float, string) son inmutables (solo lectura).</p>"},{"location":"02_Working_with_data/07_Objects/#identidad-y-referencias","title":"Identidad y referencias","text":"<p>Use el operador <code>is</code> para verificar si dos valores son exactamente el mismo objeto.</p> <pre><code>&gt;&gt;&gt; a = [1,2,3]\n&gt;&gt;&gt; b = a\n&gt;&gt;&gt; a is b\nTrue\n&gt;&gt;&gt;\n</code></pre> <p><code>is</code> compara la identidad del objeto (un entero). La identidad se puede obtener usando <code>id()</code>.</p> <pre><code>&gt;&gt;&gt; id(a)\n3588944\n&gt;&gt;&gt; id(b)\n3588944\n&gt;&gt;&gt;\n</code></pre> <p>Nota: Casi siempre es mejor usar <code>==</code> para verificar objetos. El comportamiento de <code>is</code> suele ser inesperado:</p> <pre><code>&gt;&gt;&gt; a = [1,2,3]\n&gt;&gt;&gt; b = a\n&gt;&gt;&gt; c = [1,2,3]\n&gt;&gt;&gt; a is b\nTrue\n&gt;&gt;&gt; a is c\nFalse\n&gt;&gt;&gt; a == c\nTrue\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/07_Objects/#copias-superficiales","title":"Copias superficiales","text":"<p>Las listas y los diccionarios tienen m\u00e9todos para copiar.</p> <pre><code>&gt;&gt;&gt; a = [2,3,[100,101],4]\n&gt;&gt;&gt; b = list(a) # Hacer una copia\n&gt;&gt;&gt; a is b\nFalse\n</code></pre> <p>Es una lista nueva, pero los elementos de la lista se comparten.</p> <pre><code>&gt;&gt;&gt; a[2].append(102)\n&gt;&gt;&gt; b[2]\n[100,101,102]\n&gt;&gt;&gt;\n&gt;&gt;&gt; a[2] is b[2]\nTrue\n&gt;&gt;&gt;\n</code></pre> <p>Por ejemplo, se est\u00e1 compartiendo la lista interna <code>[100, 101, 102]</code>. Esto se conoce como copia superficial. Aqu\u00ed hay una imagen.</p> <p></p>"},{"location":"02_Working_with_data/07_Objects/#copias-profundas","title":"Copias profundas","text":"<p>A veces es necesario hacer una copia de un objeto y de todos los objetos que contiene. Puede utilizar el m\u00f3dulo <code>copy</code> para esto:</p> <pre><code>&gt;&gt;&gt; a = [2,3,[100,101],4]\n&gt;&gt;&gt; import copy\n&gt;&gt;&gt; b = copy.deepcopy(a)\n&gt;&gt;&gt; a[2].append(102)\n&gt;&gt;&gt; b[2]\n[100,101]\n&gt;&gt;&gt; a[2] is b[2]\nFalse\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/07_Objects/#nombres-valores-tipos","title":"Nombres, valores, tipos","text":"<p>Los nombres de las variables no tienen un tipo. Son solo un nombre. Sin embargo, los valores s\u00ed tienen un tipo subyacente.</p> <pre><code>&gt;&gt;&gt; a = 42\n&gt;&gt;&gt; b = 'Hola Mundo'\n&gt;&gt;&gt; type(a)\n&lt;type 'int'&gt;\n&gt;&gt;&gt; type(b)\n&lt;type 'str'&gt;\n</code></pre> <p><code>type()</code> le dir\u00e1 cu\u00e1l es. El nombre del tipo se utiliza generalmente como una funci\u00f3n que crea o convierte un valor a ese tipo.</p>"},{"location":"02_Working_with_data/07_Objects/#comprobacion-de-tipos","title":"Comprobaci\u00f3n de tipos","text":"<p>C\u00f3mo saber si un objeto es de un tipo espec\u00edfico.</p> <pre><code>if isinstance(a, list):\n  print('a es a lista')\n</code></pre> <p>Comprobaci\u00f3n de uno de los muchos tipos posibles.</p> <pre><code>if isinstance(a, (list,tuple)):\n  print('a es a lista o tupla')\n</code></pre> <p>Precauci\u00f3n: No se exceda con la comprobaci\u00f3n de tipos. Puede generar una complejidad excesiva en el c\u00f3digo. Por lo general, solo lo har\u00eda si al hacerlo evitara errores comunes que cometen otras personas al usar su c\u00f3digo.</p>"},{"location":"02_Working_with_data/07_Objects/#todo-es-un-objeto","title":"Todo es un objeto","text":"<p>N\u00fameros, cadenas, listas, funciones, excepciones, clases, instancias, etc. son todos objetos. Esto significa que todos los objetos que se pueden nombrar se pueden pasar como datos, colocar en contenedores, etc., sin ninguna restricci\u00f3n. No hay tipos especiales de objetos. A veces se dice que todos los objetos son \"de primera clase\".</p> <p>Un ejemplo simple:</p> <pre><code>&gt;&gt;&gt; import math\n&gt;&gt;&gt; items = [abs, math, ValueError ]\n&gt;&gt;&gt; items\n[&lt;built-in function abs&gt;,\n  &lt;module 'math' (builtin)&gt;,\n  &lt;type 'exceptions.ValueError'&gt;]\n&gt;&gt;&gt; items[0](-45)\n45\n&gt;&gt;&gt; items[1].sqrt(2)\n1.4142135623730951\n&gt;&gt;&gt; try:\n        x = int('not a number')\n    except items[2]:\n        print('Fall\u00f3!')\nFall\u00f3!\n&gt;&gt;&gt;\n</code></pre> <p>Aqu\u00ed, <code>items</code> es una lista que contiene una funci\u00f3n, un m\u00f3dulo y una excepci\u00f3n. Puedes usar directamente los elementos de la lista en lugar de los nombres originales:</p> <pre><code>items[0](-45) # abs\nitems[1].sqrt(2) # math\nexcept items[2]: # ValueError\n</code></pre> <p>Un gran poder conlleva una responsabilidad. El hecho de que puedas hacer eso no significa que debas hacerlo.</p>"},{"location":"02_Working_with_data/07_Objects/#ejercicios","title":"Ejercicios","text":"<p>En este conjunto de ejercicios, observamos parte del poder que proviene de los objetos de primera clase.</p>"},{"location":"02_Working_with_data/07_Objects/#ejercicio-224-datos-de-primera-clase","title":"Ejercicio 2.24: Datos de primera clase","text":"<p>En el archivo <code>Data/portfolio.csv</code>, leemos datos organizados en columnas que se ven as\u00ed:</p> <pre><code>name,shares,price\n\"AA\",100,32.20\n\"IBM\",50,91.10\n...\n</code></pre> <p>En el c\u00f3digo anterior, usamos el m\u00f3dulo <code>csv</code> para leer el archivo, pero a\u00fan as\u00ed tuvimos que realizar conversiones de tipo manuales. Por ejemplo:</p> <pre><code>```python\nfor row in rows:\n    name   = row[0]\n    shares = int(row[1])\n    price  = float(row[2])\n```\n</code></pre> <p>Este tipo de conversi\u00f3n tambi\u00e9n se puede realizar de una manera m\u00e1s inteligente utilizando algunas operaciones b\u00e1sicas de lista.</p> <p>Haz una lista de Python que contenga los nombres de las funciones de conversi\u00f3n que usar\u00edas para convertir cada columna al tipo apropiado:</p> <pre><code>&gt;&gt;&gt; types = [str, int, float]\n&gt;&gt;&gt;\n</code></pre> <p>La raz\u00f3n por la que puedes crear esta lista es que todo en Python es de primera clase. Por lo tanto, si quieres tener una lista de funciones, est\u00e1 bien. Los elementos de la lista que creaste son funciones para convertir un valor <code>x</code> en un tipo determinado (por ejemplo, <code>str(x)</code>, <code>int(x)</code>, <code>float(x)</code>).</p> <p>Ahora, lee una fila de datos del archivo anterior:</p> <pre><code>&gt;&gt;&gt; import csv\n&gt;&gt;&gt; f = open('Data/portfolio.csv')\n&gt;&gt;&gt; rows = csv.reader(f)\n&gt;&gt;&gt; headers = next(rows)\n&gt;&gt;&gt; row = next(rows)\n&gt;&gt;&gt; row\n['AA', '100', '32.20']\n&gt;&gt;&gt;\n</code></pre> <p>Como se se\u00f1al\u00f3, esta fila no es suficiente para realizar los c\u00e1lculos porque los tipos son incorrectos. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; row[1] * row[2]\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: can't multiplicar sequence by non-int of type 'str'\n&gt;&gt;&gt;\n</code></pre> <p>Sin embargo, tal vez los datos se puedan emparejar con los tipos que especificaste en <code>types</code>. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; types[1]\n&lt;type 'int'&gt;\n&gt;&gt;&gt; row[1]\n'100'\n&gt;&gt;&gt;\n</code></pre> <p>Intenta convertir uno de los valores:</p> <pre><code>&gt;&gt;&gt; types[1](row[1]) # Igual que int(row[1])\n100\n&gt;&gt;&gt;\n</code></pre> <p>Intenta convertir un valor diferente:</p> <pre><code>&gt;&gt;&gt; types[2](row[2]) # Igual que float(row[2])\n32.2\n&gt;&gt;&gt;\n</code></pre> <p>Intenta el c\u00e1lculo con valores convertidos:</p> <pre><code>&gt;&gt;&gt; types[1](row[1])*types[2](row[2])\n3220.0000000000005\n&gt;&gt;&gt;\n</code></pre> <p>Comprime los tipos de columna con los campos y mira el resultado:</p> <pre><code>&gt;&gt;&gt; r = list(zip(types, row))\n&gt;&gt;&gt; r\n[(&lt;type 'str'&gt;, 'AA'), (&lt;type 'int'&gt;, '100'), (&lt;type 'float'&gt;,'32.20')]\n&gt;&gt;&gt;\n</code></pre> <p>Notar\u00e1s que esto ha emparejado una conversi\u00f3n de tipo con un valor. Por ejemplo, <code>int</code> est\u00e1 emparejado con el valor <code>'100'</code>.</p> <p>La lista por compresi\u00f3n es \u00fatil si quieres realizar conversiones en todos los valores, uno despu\u00e9s del otro. Prueba esto:</p> <pre><code>&gt;&gt;&gt; converted = []\n&gt;&gt;&gt; for func, val in zip(types, row):\n          converted.append(func(val))\n...\n&gt;&gt;&gt; converted\n['AA', 100, 32.2]\n&gt;&gt;&gt; converted[1] * converted[2]\n3220.0000000000005\n&gt;&gt;&gt;\n</code></pre> <p>Aseg\u00farate de entender lo que est\u00e1 sucediendo en el c\u00f3digo anterior. En el bucle, la variable <code>func</code> es una de las funciones de conversi\u00f3n de tipo (p. ej., <code>str</code>, <code>int</code>, etc.) y la variable <code>val</code> es uno de los valores como <code>'AA'</code>, <code>'100'</code>. La expresi\u00f3n <code>func(val)</code> convierte un valor (algo as\u00ed como una conversi\u00f3n de tipo).</p> <p>El c\u00f3digo anterior se puede comprimir en una \u00fanica lista por comprensi\u00f3n.</p> <pre><code>&gt;&gt;&gt; converted = [func(val) for func, val in zip(types, row)]\n&gt;&gt;&gt; converted\n['AA', 100, 32.2]\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/07_Objects/#ejercicio-225-creacion-de-diccionarios","title":"Ejercicio 2.25: Creaci\u00f3n de diccionarios","text":"<p>\u00bfRecuerdas c\u00f3mo la funci\u00f3n <code>dict()</code> puede crear f\u00e1cilmente un diccionario si tienes una secuencia de nombres y valores de claves? Hagamos un diccionario a partir de los encabezados de las columnas:</p> <pre><code>&gt;&gt;&gt; headers\n['name', 'shares', 'price']\n&gt;&gt;&gt; converted\n['AA', 100, 32.2]\n&gt;&gt;&gt; dict(zip(headers, converted))\n{'price': 32.2, 'name': 'AA', 'shares': 100}\n&gt;&gt;&gt;\n</code></pre> <p>Por supuesto, si ya tienes experiencia con las listas por comprensi\u00f3n, puedes hacer toda la conversi\u00f3n en un solo paso usando una comprensi\u00f3n de diccionarios:</p> <pre><code>&gt;&gt;&gt; { name: func(val) for name, func, val in zip(headers, types, row) }\n{'price': 32.2, 'name': 'AA', 'shares': 100}\n&gt;&gt;&gt;\n</code></pre>"},{"location":"02_Working_with_data/07_Objects/#ejercicio-226-el-panorama-general","title":"Ejercicio 2.26: El panorama general","text":"<p>Si utiliza las t\u00e9cnicas de este ejercicio, podr\u00e1 escribir instrucciones que conviertan f\u00e1cilmente los campos de casi cualquier archivo de datos orientado a columnas en un diccionario de Python.</p> <p>Solo para ilustrar, supongamos que lees datos de un archivo de datos diferente como este:</p> <pre><code>&gt;&gt;&gt; f = open('Data/dowstocks.csv')\n&gt;&gt;&gt; rows = csv.reader(f)\n&gt;&gt;&gt; headers = next(rows)\n&gt;&gt;&gt; row = next(rows)\n&gt;&gt;&gt; headers\n['name', 'price', 'date', 'time', 'change', 'open', 'high', 'low', 'volume']\n&gt;&gt;&gt; row\n['AA', '39.48', '6/11/2007', '9:36am', '-0.18', '39.67', '39.69', '39.45', '181800']\n&gt;&gt;&gt;\n</code></pre> <p>Convirtamos los campos usando un truco similar:</p> <pre><code>&gt;&gt;&gt; types = [str, float, str, str, float, float, float, float, int]\n&gt;&gt;&gt; converted = [func(val) for func, val in zip(types, row)]\n&gt;&gt;&gt; record = dict(zip(headers, converted))\n&gt;&gt;&gt; record\n{'volume': 181800, 'name': 'AA', 'price': 39.48, 'high': 39.69,\n'low': 39.45, 'time': '9:36am', 'date': '6/11/2007', 'open': 39.67,\n'change': -0.18}\n&gt;&gt;&gt; record['name']\n'AA'\n&gt;&gt;&gt; record['price']\n39.48\n&gt;&gt;&gt;\n</code></pre> <p>Bonificaci\u00f3n: \u00bfC\u00f3mo modificar\u00edas este ejemplo para que sea adicional? \u00bfC\u00f3mo analizar la entrada <code>date</code> en una tupla como <code>(6, 11, 2007)</code>?</p> <p>Dedica un tiempo a reflexionar sobre lo que has hecho en este ejercicio. Volveremos a tratar estas ideas un poco m\u00e1s adelante.</p> <p>Contenido | Anterior (2.6 Listas por comprensi\u00f3n) | Pr\u00f3ximo (3. Organizaci\u00f3n del programa)</p>"},{"location":"03_Program_organization/00_Overview/","title":"00_Overview","text":"<p>Contenido | Anterior (2. Trabajar con datos) | Pr\u00f3ximo (4. Classes y Objetos)</p>"},{"location":"03_Program_organization/00_Overview/#3-organizacion-del-programa","title":"3. Organizaci\u00f3n del programa","text":"<p>Hasta ahora, hemos aprendido algunos conceptos b\u00e1sicos de Python y hemos escrito algunos scripts cortos. Sin embargo, a medida que comiences a escribir programas m\u00e1s grandes, querr\u00e1s organizarte. Esta secci\u00f3n profundiza en mayor detalle sobre la escritura de funciones, el manejo de errores y presenta m\u00f3dulos. Al final deber\u00edas poder escribir programas que se subdividan en funciones en varios archivos. Tambi\u00e9n proporcionaremos algunas plantillas de c\u00f3digo \u00fatiles para escribir scripts m\u00e1s pr\u00e1cticos.</p> <ul> <li>3.1 Funciones y escritura de scripts</li> <li>3.2 M\u00e1s detalles sobre las funciones</li> <li>3.3 Comprobaci\u00f3n de errores</li> <li>3.4 M\u00f3dulos</li> <li>3.5 M\u00f3dulo principal</li> <li>3.6 Discusi\u00f3n sobre el dise\u00f1o</li> </ul> <p>Contenido | Anterior (2. Trabajar con datos) | Pr\u00f3ximo (4. Clases y objetos)</p>"},{"location":"03_Program_organization/01_Script/","title":"00_Script","text":"<p>Contenido | Anterior (2.7 Objetos) | Pr\u00f3ximo (3.2 M\u00e1s detalles sobre las funciones)</p>"},{"location":"03_Program_organization/01_Script/#31-creacion-de-scripts","title":"3.1 Creaci\u00f3n de scripts","text":"<p>En esta parte, analizamos m\u00e1s de cerca la pr\u00e1ctica de escribir scripts de Python.</p>"},{"location":"03_Program_organization/01_Script/#que-es-un-script","title":"\u00bfQu\u00e9 es un script?","text":"<p>Un script es un programa que ejecuta una serie de instrucciones y se detiene.</p> <pre><code># program.py\n\ndeclaraci\u00f3n1\ndeclaraci\u00f3n2\ndeclaraci\u00f3n3\n...\n</code></pre> <p>Hasta este punto, hemos estado escribiendo principalmente scripts.</p>"},{"location":"03_Program_organization/01_Script/#un-problema","title":"Un problema","text":"<p>Si escribe un script \u00fatil, crecer\u00e1 en caracter\u00edsticas y funcionalidades. Es posible que desee aplicarlo a otros problemas relacionados. Con el tiempo, podr\u00eda convertirse en una aplicaci\u00f3n cr\u00edtica. Y si no tienes cuidado, puede convertirse en un gran l\u00edo. As\u00ed que, organic\u00e9monos.</p>"},{"location":"03_Program_organization/01_Script/#definicion-de-cosas","title":"Definici\u00f3n de cosas","text":"<p>Los nombres siempre deben definirse antes de que se utilicen m\u00e1s adelante.</p> <pre><code>def square(x):\n    return x*x\n\na = 42\nb = a + 2 # Requiere que `a` est\u00e9 definido\n\nz = square(b) # Requiere que `square` y `b` est\u00e9n definidos\n</code></pre> <p>El orden es importante. Casi siempre colocas las definiciones de variables y funciones cerca de la parte superior.</p>"},{"location":"03_Program_organization/01_Script/#definicion-de-funciones","title":"Definici\u00f3n de funciones","text":"<p>Es una buena idea poner todo el c\u00f3digo relacionado con una sola tarea en un solo lugar. Usa una funci\u00f3n.</p> <pre><code>def read_prices(filename):\n    prices = {}\n    with open(filename) as f:\n        f_csv = csv.reader(f)\n        for row in f_csv:\n            prices[row[0]] = float(row[1])\n    return prices\n</code></pre> <p>Una funci\u00f3n tambi\u00e9n simplifica las operaciones repetidas.</p> <pre><code>oldprices = read_prices('oldprices.csv')\nnewprices = read_prices('newprices.csv')\n</code></pre>"},{"location":"03_Program_organization/01_Script/#que-es-una-funcion","title":"\u00bfQu\u00e9 es una funci\u00f3n?","text":"<p>Una funci\u00f3n es una secuencia de instrucciones con nombre.</p> <pre><code>def funcname(args):\n    statement\n    statement\n    ...\n    return result\n</code></pre> <p>Cualquier instrucci\u00f3n de Python se puede utilizar dentro de ella.</p> <pre><code>def foo():\n    import math\n    print(math.sqrt(2))\n    help(math)\n</code></pre> <p>No hay instrucciones especiales en Python (lo que hace que sea f\u00e1cil de recordar).</p>"},{"location":"03_Program_organization/01_Script/#definicion-de-funcion","title":"Definici\u00f3n de funci\u00f3n","text":"<p>Las funciones se pueden definir en cualquier orden.</p> <pre><code>def foo(x):\n    bar(x)\n\ndef bar(x):\n    statements\n\n# O\ndef bar(x):\n    statements\n\ndef foo(x):\n    bar(x)\n</code></pre> <p>Las funciones solo se deben definir antes de utilizarse (o llamarse) durante la ejecuci\u00f3n del programa.</p> <pre><code>foo(3) # foo ya debe estar definido\n</code></pre> <p>Por estilo, es probablemente m\u00e1s com\u00fan ver funciones definidas de manera de abajo hacia arriba.</p>"},{"location":"03_Program_organization/01_Script/#estilo-de-abajo-hacia-arriba","title":"Estilo de abajo hacia arriba","text":"<p>Las funciones se tratan como bloques de construcci\u00f3n. Los bloques m\u00e1s peque\u00f1os/simples van primero.</p> <pre><code># myprogram.py\ndef foo(x):\n    ...\n\ndef bar(x):\n    ...\n    foo(x) # Definido arriba\n    ...\n\ndef spam(x):\n    ...\n    bar(x) # Definido arriba\n    ...\n\nspam(42) # El c\u00f3digo que usa las funciones aparece al final\n</code></pre> <p>Las funciones posteriores se basan en funciones anteriores. Nuevamente, esto es solo una cuesti\u00f3n de estilo. Lo \u00fanico que importa en el programa anterior es que la llamada a <code>spam(42)</code> va al final.</p>"},{"location":"03_Program_organization/01_Script/#diseno-de-funciones","title":"Dise\u00f1o de funciones","text":"<p>Idealmente, las funciones deber\u00edan ser una caja negra. Solo deber\u00edan operar en entradas pasadas y evitar variables globales y efectos secundarios misteriosos. Sus principales objetivos: Modularidad y Predictibilidad.</p>"},{"location":"03_Program_organization/01_Script/#cadenas-de-documentacion","title":"Cadenas de documentaci\u00f3n","text":"<p>Es una buena pr\u00e1ctica incluir la documentaci\u00f3n en forma de cadena de documentaci\u00f3n. Las cadenas de documentaci\u00f3n son cadenas que se escriben inmediatamente despu\u00e9s del nombre de la funci\u00f3n. Alimentan <code>help()</code>, IDEs y otras herramientas.</p> <pre><code>def read_prices(filename):\n    '''\n    Leer precios de un archivo CSV de nombre y datos de precios\n    '''\n    prices = {}\n    with open(filename) as f:\n      f_csv = csv.reader(f)\n      for row in f_csv:\n          prices[row[0]] = float(row[1])\n    return prices\n</code></pre> <p>Una buena pr\u00e1ctica para las cadenas de documentaci\u00f3n es escribir un resumen breve de una oraci\u00f3n de lo que hace la funci\u00f3n. Si se necesita m\u00e1s informaci\u00f3n, incluya un breve ejemplo de uso junto con una descripci\u00f3n m\u00e1s detallada de los argumentos.</p>"},{"location":"03_Program_organization/01_Script/#anotaciones-de-tipo","title":"Anotaciones de tipo","text":"<p>Tambi\u00e9n puede agregar sugerencias de tipo opcionales a las definiciones de funciones.</p> <pre><code>def read_prices(filename: str) -&gt; dict:\n    '''\n    Leer precios de un archivo CSV de nombre y datos de precios\n    '''\n    prices = {}\n    with open(filename) as f:\n      f_csv = csv.reader(f)\n      for row in f_csv:\n          prices[row[0]] = float(row[1])\n    return prices\n</code></pre> <p>Las sugerencias no hacen nada operativamente. Son puramente informativas. Sin embargo, pueden ser utilizadas por IDE, verificadores de c\u00f3digo y otras herramientas para hacer m\u00e1s.</p>"},{"location":"03_Program_organization/01_Script/#ejercicios","title":"Ejercicios","text":"<p>En la secci\u00f3n 2, escribi\u00f3 un programa llamado <code>report.py</code> que imprim\u00eda un informe que mostraba el rendimiento de una cartera de acciones. Este programa constaba de algunas funciones. Por ejemplo:</p> <pre><code># report.py\nimport csv\n\ndef read_portfolio(filename):\n    '''\n    Leer un archivo de cartera de acciones en una lista de diccionarios con claves\n    nombre, acciones y precio.\n    '''\n    portfolio = []\n    with open(filename) as f:\n        rows = csv.reader(f)\n        headers = next(rows)\n\n        for row in rows:\n            record = dict(zip(headers, row))\n            stock = {\n                'name' : record['name'],\n                'shares' : int(record['shares']),\n                'price' : float(record['price'])\n            }\n            portfolio.append(stock)\n    return portfolio\n...\n</code></pre> <p>Sin embargo, tambi\u00e9n hab\u00eda partes del programa que solo realizaban una serie de c\u00e1lculos programados. Este c\u00f3digo apareci\u00f3 cerca del final del programa. Por ejemplo:</p> <pre><code>...\n\n# Generar el informe\n\nheaders = ('Name', 'Shares', 'Price', 'Change')\nprint('%10s %10s %10s %10s'  % headers)\nprint(('-' * 10 + ' ') * len(headers))\nfor row in report:\n    print('%10s %10d %10.2f %10.2f' % row)\n...\n</code></pre> <p>En este ejercicio, tomaremos este programa y lo organizaremos un poco m\u00e1s en torno al uso de funciones.</p>"},{"location":"03_Program_organization/01_Script/#ejercicio-31-estructurar-un-programa-como-una-coleccion-de-funciones","title":"Ejercicio 3.1: Estructurar un programa como una colecci\u00f3n de funciones","text":"<p>Modifique su programa <code>report.py</code> para que todas las operaciones principales, incluidos los c\u00e1lculos y la salida, se realicen mediante una colecci\u00f3n de funciones. Espec\u00edficamente:</p> <ul> <li>Cree una funci\u00f3n <code>print_report(report)</code> que imprima el informe. </li> <li>Cambie la \u00faltima parte del programa para que no sea m\u00e1s que una serie de llamadas de funci\u00f3n y ning\u00fan otro c\u00e1lculo.</li> </ul>"},{"location":"03_Program_organization/01_Script/#ejercicio-32-creacion-de-una-funcion-de-nivel-superior-para-la-ejecucion-del-programa","title":"Ejercicio 3.2: Creaci\u00f3n de una funci\u00f3n de nivel superior para la ejecuci\u00f3n del programa","text":"<p>Tome la \u00faltima parte de su programa y empaquetela en una sola funci\u00f3n <code>portfolio_report(portfolio_filename, prices_filename)</code>. Haga que la funci\u00f3n funcione de modo que la siguiente llamada de funci\u00f3n cree el informe como antes:</p> <pre><code>portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\n</code></pre> <p>En esta versi\u00f3n final, su programa no ser\u00e1 m\u00e1s que una serie de definiciones de funciones seguidas de una \u00fanica llamada de funci\u00f3n a <code>portfolio_report()</code> al final (que ejecuta todos los pasos involucrados en el programa).</p> <p>Al convertir su programa en una \u00fanica funci\u00f3n, se vuelve f\u00e1cil ejecutarlo en diferentes entradas. Por ejemplo, prueba estas declaraciones de forma interactiva despu\u00e9s de ejecutar tu programa:</p> <pre><code>&gt;&gt;&gt; portfolio_report('Data/portfolio2.csv', 'Data/prices.csv')\n... Observa la salida ...\n&gt;&gt;&gt; files = ['Data/portfolio.csv', 'Data/portfolio2.csv']\n&gt;&gt;&gt; for name in files:\n        print(f'{name:-^43s}')\n        portfolio_report(name, 'Data/prices.csv')\n        print()\n\n... Observa la salida ...\n&gt;&gt;&gt;\n</code></pre>"},{"location":"03_Program_organization/01_Script/#comentario","title":"Comentario","text":"<p>Python hace que sea muy f\u00e1cil escribir c\u00f3digo de script relativamente desestructurado, en el que solo tienes un archivo con una secuencia de declaraciones. En el panorama general, casi siempre es mejor utilizar funciones siempre que puedas. En alg\u00fan momento, ese script crecer\u00e1 y desear\u00e1s tener un poco m\u00e1s de organizaci\u00f3n. Adem\u00e1s, un hecho poco conocido es que Python se ejecuta un poco m\u00e1s r\u00e1pido si se utilizan funciones.</p> <p>Contenido | Anterior (2.7 Objetos) | Pr\u00f3ximo (3.2 M\u00e1s detalles sobre las funciones)</p>"},{"location":"03_Program_organization/02_More_functions/","title":"02_More_functions","text":"<p>Contenido | Anterior (3.1 Funciones y escritura de scripts) | Pr\u00f3ximo (3.3 Comprobaci\u00f3n de errores)</p>"},{"location":"03_Program_organization/02_More_functions/#32-mas-detalles-sobre-las-funciones","title":"3.2 M\u00e1s detalles sobre las funciones","text":"<p>Aunque las funciones se introdujeron anteriormente, se proporcionaron muy pocos detalles sobre c\u00f3mo funcionan realmente en un nivel m\u00e1s profundo. Esta secci\u00f3n tiene como objetivo llenar algunos vac\u00edos y analizar cuestiones como las convenciones de llamadas, las reglas de alcance y m\u00e1s.</p>"},{"location":"03_Program_organization/02_More_functions/#llamada-a-una-funcion","title":"Llamada a una funci\u00f3n","text":"<p>Considere esta funci\u00f3n:</p> <pre><code>def read_prices(filename, debug):\n    ...\n</code></pre> <p>Puede llamar a la funci\u00f3n con argumentos posicionales:</p> <pre><code>prices = read_prices('prices.csv', True)\n</code></pre> <p>O puede llamar a la funci\u00f3n con argumentos de palabras clave:</p> <pre><code>prices = read_prices(filename='prices.csv', debug=True)\n</code></pre>"},{"location":"03_Program_organization/02_More_functions/#argumentos-predeterminados","title":"Argumentos predeterminados","text":"<p>A veces desea que un argumento sea opcional. Si es as\u00ed, asigne un valor predeterminado en la definici\u00f3n de la funci\u00f3n.</p> <pre><code>def read_prices(filename, debug=False):\n    ...\n</code></pre> <p>Si se asigna un valor predeterminado, el argumento es opcional en las llamadas a la funci\u00f3n.</p> <pre><code>d = read_prices('prices.csv')\ne = read_prices('prices.dat', True)\n</code></pre> <p>Nota: Los argumentos con valores predeterminados deben aparecer al final de la lista de argumentos (todos los argumentos no opcionales van primero).</p>"},{"location":"03_Program_organization/02_More_functions/#prefiera-argumentos-de-palabras-clave-para-argumentos-opcionales","title":"Prefiera argumentos de palabras clave para argumentos opcionales","text":"<p>Compare y contraste estos dos estilos de llamada diferentes:</p> <pre><code>parse_data(data, False, True) # ?????\n\nparse_data(data, ignore_errors=True)\nparse_data(data, debug=True)\nparse_data(data, debug=True, ignore_errors=True)\n</code></pre> <p>En la mayor\u00eda de los casos, los argumentos de palabras clave mejoran la claridad del c\u00f3digo, especialmente para los argumentos que sirven como indicadores o que est\u00e1n relacionados con caracter\u00edsticas opcionales.</p>"},{"location":"03_Program_organization/02_More_functions/#mejores-practicas-de-diseno","title":"Mejores pr\u00e1cticas de dise\u00f1o","text":"<p>Siempre de nombres breves, pero significativos, a los argumentos de las funciones.</p> <p>Alguien que use una funci\u00f3n puede querer usar el estilo de llamada de palabras clave.</p> <pre><code>d = read_prices('prices.csv', debug=True)\n</code></pre> <p>Las herramientas de desarrollo de Python mostrar\u00e1n los nombres en las funciones de ayuda y la documentaci\u00f3n.</p>"},{"location":"03_Program_organization/02_More_functions/#valores-de-retorno","title":"Valores de retorno","text":"<p>La declaraci\u00f3n <code>return</code> devuelve un valor</p> <pre><code>def square(x):\n    return x * x\n</code></pre> <p>Si no se proporciona ning\u00fan valor de retorno o falta <code>return</code>, se devuelve <code>None</code>.</p> <pre><code>def bar(x):\n    declaraciones\n    return\n\na = bar(4)      # a = None\n\n# de otro modo\n\ndef foo(x):\n    declaraciones  # Sin `return`\n\nb = foo(4)      # b = None\n</code></pre>"},{"location":"03_Program_organization/02_More_functions/#valores-de-retorno-multiples","title":"Valores de retorno m\u00faltiples","text":"<p>Las funciones solo pueden devolver un valor. Sin embargo, una funci\u00f3n puede devolver m\u00faltiples valores al devolverlos en una tupla.</p> <pre><code>def divide(a,b):\n    q = a // b      # Cociente entero\n    r = a % b       # Resto\n    return q, r     # Devuelve una tupla\n</code></pre> <p>Ejemplo de uso:</p> <pre><code>x, y = divide(37,5)     # x = 7, y = 2\n\nx = divide(37, 5)       # x = (7, 2)\n</code></pre>"},{"location":"03_Program_organization/02_More_functions/#ambito-de-la-variable","title":"\u00c1mbito de la variable","text":"<p>Los programas asignan valores a las variables.</p> <pre><code>x = valor       # Variable global\n\ndef foo():\n    y = valor   # Variable local\n</code></pre> <p>Las asignaciones de variables ocurren fuera y dentro de las definiciones de funciones. Las variables definidas fuera son \"globales\". Las variables dentro de una funci\u00f3n son \"locales\".</p>"},{"location":"03_Program_organization/02_More_functions/#variables-locales","title":"Variables locales","text":"<p>Las variables asignadas dentro de las funciones son privadas.</p> <pre><code>def read_portfolio(filename):\n    portfolio = []\n    with open(filename) as file:\n        headers = next(file)\n        for line in file:\n            fields = line.split(',')\n            s = (fields[0], int(fields[1]), float(fields[2]))\n            portfolio.append(s)\n    return portfolio\n</code></pre> <p>En este ejemplo, <code>filename</code>, \u00b4file\u00b4, <code>portfolio</code>, <code>line</code>, <code>fields</code> y <code>s</code> son variables locales. Esas variables no se conservan ni se puede acceder a ellas despu\u00e9s de la llamada a la funci\u00f3n.</p> <pre><code>&gt;&gt;&gt; stocks = read_portfolio('Data/portfolio.csv')\n&gt;&gt;&gt; fields\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in ?\nNameError: name 'fields' is not defined\n&gt;&gt;&gt;\n</code></pre> <p>Las variables locales tampoco pueden entrar en conflicto con las variables que se encuentran en otro lugar.</p>"},{"location":"03_Program_organization/02_More_functions/#variables-globales","title":"Variables globales","text":"<p>Las funciones pueden acceder libremente a los valores de las variables globales definidas en el mismo archivo.</p> <pre><code>name = 'Dave'\n\ndef greeting():\n    print('Hola', name)  # Uso de la variable global `name`\n</code></pre> <p>Sin embargo, las funciones no pueden modificar las variables globales:</p> <pre><code>name = 'Dave'\n\ndef spam():\n  name = 'Guido'\n\nspam()\nprint(name) # imprime 'Dave'\n</code></pre> <p>Recuerde: todas las asignaciones en funciones son locales.</p>"},{"location":"03_Program_organization/02_More_functions/#modificacion-de-variables-globales","title":"Modificaci\u00f3n de variables globales","text":"<p>Si debe modificar una variable global, debe declararla como tal.</p> <pre><code>name = 'Dave'\n\ndef spam():\n    global name\n    name = 'Guido' # Cambia el nombre global anterior\n</code></pre> <p>La declaraci\u00f3n global debe aparecer antes de su uso y la variable correspondiente debe existir en el mismo archivo que la funci\u00f3n. Habiendo visto esto, debes saber que se considera una mala forma de hacerlo. De hecho, intenta evitar el uso de \"global\" por completo si puedes. Si necesitas una funci\u00f3n para modificar alg\u00fan tipo de estado fuera de la funci\u00f3n, es mejor usar una clase en su lugar (m\u00e1s sobre esto m\u00e1s adelante).</p>"},{"location":"03_Program_organization/02_More_functions/#pase-de-argumentos","title":"Pase de argumentos","text":"<p>Cuando llamas a una funci\u00f3n, las variables de argumento son nombres que hacen referencia a los valores pasados. Estos valores NO son copias (ver secci\u00f3n 2.7). Si se pasan tipos de datos mutables (por ejemplo, listas, diccionarios), se pueden modificar in situ.</p> <pre><code>def foo(items):\n    items.append(42)    # Modifies the input object\n\na = [1, 2, 3]\nfoo(a)\nprint(a)           # [1, 2, 3, 42]\n</code></pre> <p>Punto clave: Las funciones no reciben una copia de los argumentos de entrada.</p>"},{"location":"03_Program_organization/02_More_functions/#reasignacion-vs-modificacion","title":"Reasignaci\u00f3n vs. Modificaci\u00f3n","text":"<p>Aseg\u00farese de comprender la sutil diferencia entre modificar un valor y reasignar un nombre de variable.</p> <pre><code>def foo(items):\n    items.append(42) # Modifica el objeto de entrada\n\na = [1, 2, 3]\nfoo(a)\nprint(a) # [1, 2, 3, 42]\n\n# en lugar de\n\ndef bar(items):\n    items = [4,5,6] # Reasigna la variable `items` local para que apunte a un objeto diferente\n\nb = [1, 2, 3]\nbar(b)\nprint(b) # [1, 2, 3]\n</code></pre> <p>Recordatorio: la asignaci\u00f3n de variables nunca sobrescribe la memoria. El nombre simplemente est\u00e1 ligado a un nuevo valor.</p>"},{"location":"03_Program_organization/02_More_functions/#ejercicios","title":"Ejercicios","text":"<p>Este conjunto de ejercicios te permite implementar lo que es, quiz\u00e1s, la parte m\u00e1s poderosa y dif\u00edcil del curso. Hay muchos pasos y muchos conceptos de ejercicios anteriores se combinan a la vez. La soluci\u00f3n final consta de tan solo unas 25 l\u00edneas de c\u00f3digo, pero t\u00f3mate tu tiempo y aseg\u00farate de comprender cada parte.</p> <p>Una parte central de tu programa <code>report.py</code> se centra en la lectura de archivos CSV. Por ejemplo, la funci\u00f3n <code>read_portfolio()</code> lee un archivo que contiene filas de datos de cartera y la funci\u00f3n <code>read_prices()</code> lee un archivo que contiene filas de datos de precios. En ambas funciones, hay muchos fragmentos \"complicados\" de bajo nivel y caracter\u00edsticas similares. Por ejemplo, ambas abren un archivo y lo envuelven con el m\u00f3dulo <code>csv</code> y ambas convierten varios campos en nuevos tipos.</p> <p>Si estuvieras haciendo mucho an\u00e1lisis de archivos de verdad, probablemente querr\u00edas limpiar algo de esto y hacerlo m\u00e1s general. Ese es nuestro objetivo.</p> <p>Comienza este ejercicio abriendo el archivo llamado <code>Work/fileparse.py</code>. Aqu\u00ed es donde haremos nuestro trabajo.</p>"},{"location":"03_Program_organization/02_More_functions/#ejercicio-33-lectura-de-archivos-csv","title":"Ejercicio 3.3: Lectura de archivos CSV","text":"<p>Para comenzar, centr\u00e9monos en el problema de leer un archivo CSV en una lista de diccionarios. En el archivo <code>fileparse.py</code>, defina una funci\u00f3n que se parezca a esto:</p> <pre><code># fileparse.py\nimport csv\n\ndef parse_csv(filename):\n    '''\n    Analiza un archivo CSV en una lista de registros\n    '''\n    with open(filename) as f:\n        rows = csv.reader(f)\n\n        # Read the file headers\n        headers = next(rows)\n        records = []\n        for row in rows:\n            if not row:    # Omite filas sin datos\n                continue\n            record = dict(zip(headers, row))\n            records.append(record)\n\n    return records\n</code></pre> <p>Esta funci\u00f3n lee un archivo CSV y crea una lista de diccionarios mientras oculta los detalles de apertura del archivo, lo envuelve con el m\u00f3dulo <code>csv</code>, ignora las l\u00edneas en blanco, etc.</p> <p>Pru\u00e9belo:</p> <p>Sugerencia: <code>python -i fileparse.py</code>.</p> <pre><code>&gt;&gt;&gt; portfolio = parse_csv('Data/portfolio.csv')\n&gt;&gt;&gt; portfolio\n[{'name': 'AA', 'shares': '100', 'price': '32.20'}, {'name': 'IBM', 'shares': '50', 'price': '91.10'}, {'name': 'CAT', 'shares': '150', 'price': '83.44'}, {'name': 'MSFT', 'shares': '200', 'price': '51.23'}, {'name': 'GE', 'shares': '95', 'price': '40.37'}, {'name': 'MSFT', 'shares': '50', 'price': '65.10'}, {'name': 'IBM', 'shares': '100', 'price': '70.44'}]\n&gt;&gt;&gt;\n</code></pre> <p>Esto es bueno, excepto que no se puede hacer ning\u00fan tipo de c\u00e1lculo \u00fatil con los datos porque todo se representa como una cadena. Arreglaremos esto en breve, pero sigamos trabajando en ello.</p>"},{"location":"03_Program_organization/02_More_functions/#ejercicio-34-creacion-de-un-selector-de-columnas","title":"Ejercicio 3.4: Creaci\u00f3n de un selector de columnas","text":"<p>En muchos casos, solo interesan las columnas seleccionadas de un archivo CSV, no todos los datos. Modifique la funci\u00f3n <code>parse_csv()</code> para que permita opcionalmente seleccionar columnas especificadas por el usuario de la siguiente manera:</p> <pre><code>&gt;&gt;&gt; # Leer todos los datos\n&gt;&gt;&gt; portfolio = parse_csv('Data/portfolio.csv')\n&gt;&gt;&gt; portfolio\n[{'name': 'AA', 'shares': '100', 'price': '32.20'}, {'name': 'IBM', 'shares': '50', 'price': '91.10'}, {'name': 'CAT', 'shares': '150', 'price': '83.44'}, {'name': 'MSFT', 'shares': '200', 'price': '51.23'}, {'name': 'GE', 'shares': '95', 'price': '40.37'}, {'name': 'MSFT', 'shares': '50', 'price': '65.10'}, {'name': 'IBM', 'shares': '100', 'price': '70.44'}]\n\n&gt;&gt;&gt; # Leer solo algunos de los datos\n&gt;&gt;&gt; shares_held = parse_csv('Data/portfolio.csv', select=['name','shares'])\n&gt;&gt;&gt; shares_held\n[{'name': 'AA', 'shares': '100'}, {'name': 'IBM', 'shares': '50'}, {'name': 'CAT', 'shares': '150'}, {'name': 'MSFT', 'shares': '200'}, {'name': 'GE', 'shares': '95'}, {'name': 'MSFT', 'shares': '50'}, {'name': 'IBM', 'shares': '100'}]\n&gt;&gt;&gt;\n</code></pre> <p>En el Ejercicio 2.23 se proporcion\u00f3 un ejemplo de selector de columnas. Sin embargo, aqu\u00ed se muestra una forma de hacerlo:</p> <pre><code># fileparse.py\nimport csv\n\ndef parse_csv(filename, select=None):\n    '''\n    Analizar un archivo CSV con una lista de registros\n    '''\n    with open(filename) as f:\n        rows = csv.reader(f)\n\n        # Leer los encabezados del archivo\n        headers = next(rows)\n\n        # Si se proporcion\u00f3 un selector de columnas, buscar los \u00edndices de las columnas especificadas\n        # Tambi\u00e9n se limita el conjunto de encabezados utilizados para los diccionarios resultantes\n        if select:\n            indices = [headers.index(colname) for colname in select]\n            headers = select\n        else:\n            indices = []\n\n        records = []\n        for row in rows:\n            if not row:    # Omite filas sin datos\n                continue\n            # Filtrar la fila si se seleccionaron columnas espec\u00edficas\n            if indices:\n                row = [ row[index] for index in indices ]\n\n            # Crear un dicciona\n            record = dict(zip(headers, row))\n            records.append(record)\n\n    return records\n</code></pre> <p>Esta parte tiene varios puntos complicados. Probablemente, el m\u00e1s importante sea la asignaci\u00f3n de las selecciones de columnas a los \u00edndices de filas. Por ejemplo, supongamos que el archivo de entrada tiene los siguientes encabezados:</p> <pre><code>&gt;&gt;&gt; headers = ['name', 'date', 'time', 'shares', 'price']\n&gt;&gt;&gt;\n</code></pre> <p>Ahora, supongamos que las columnas seleccionadas fueran las siguientes:</p> <pre><code>&gt;&gt;&gt; select = ['name', 'shares']\n&gt;&gt;&gt;\n</code></pre> <p>Para realizar la selecci\u00f3n adecuada, debe asignar los nombres de las columnas seleccionadas a los \u00edndices de las columnas en el archivo. Esto es lo que hace este paso:</p> <pre><code>&gt;&gt;&gt; indices = [headers.index(colname) for colname in select ]\n&gt;&gt;&gt; indices\n[0, 3]\n&gt;&gt;&gt;\n</code></pre> <p>En otras palabras, \u00b4name\u00b4 es la columna 0 y \u00b4shares` es la columna 3. Cuando se lee una fila de datos del archivo, se utilizan los \u00edndices para filtrarla:</p> <pre><code>&gt;&gt;&gt; row = ['AA', '6/11/2007', '9:50am', '100', '32.20' ]\n&gt;&gt;&gt; row = [ row[index] for index in indices ]\n&gt;&gt;&gt; row\n['AA', '100']\n&gt;&gt;&gt;\n</code></pre>"},{"location":"03_Program_organization/02_More_functions/#ejercicio-35-realizar-conversion-de-tipos","title":"Ejercicio 3.5: Realizar conversi\u00f3n de tipos","text":"<p>Modifique la funci\u00f3n <code>parse_csv()</code> para que permita opcionalmente conversiones de tipo que se aplicar\u00e1n a los datos devueltos. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; portfolio = parse_csv('Data/portfolio.csv', types=[str, int, float])\n&gt;&gt;&gt; portfolio\n[{'name': 'AA', 'shares': 100, 'price': 32.2}, {'name': 'IBM', 'shares': 50, 'price': 91.1}, {'name': 'CAT', 'shares': 150, 'price': 83.44}, {'name': 'MSFT', 'shares': 200, 'price': 51.23}, {'name': 'GE', 'shares': 95, 'price': 40.37}, {'name': 'MSFT', 'shares': 50, 'price': 65.1}, {'name': 'IBM', 'shares': 100, 'price': 70.44}]\n\n&gt;&gt;&gt; shares_held = parse_csv('Data/portfolio.csv', select=['name', 'shares'], types=[str, int])\n&gt;&gt;&gt; shares_held\n[{'name': 'AA', 'shares': 100}, {'name': 'IBM', 'shares': 50}, {'name': 'CAT', 'shares': 150}, {'name': 'MSFT', 'shares': 200}, {'name': 'GE', 'shares': 95}, {'name': 'MSFT', 'shares': 50}, {'name': 'IBM', 'shares': 100}]\n&gt;&gt;&gt;\n</code></pre> <p>Ya exploraste esto en Ejercicio 2.24.</p> <p>Necesitar\u00e1 insertar el siguiente fragmento de c\u00f3digo en su soluci\u00f3n:</p> <pre><code>...\nif types:\n    row = [func(val) for func, val in zip(types, row) ]\n...\n</code></pre>"},{"location":"03_Program_organization/02_More_functions/#ejercicio-36-trabajar-sin-encabezados","title":"Ejercicio 3.6: Trabajar sin encabezados","text":"<p>Algunos archivos CSV no incluyen ninguna informaci\u00f3n de encabezado. Por ejemplo, el archivo <code>prices.csv</code> tiene este aspecto:</p> <pre><code>\"AA\",9.22\n\"AXP\",24.85\n\"BA\",44.85\n\"BAC\",11.27\n...\n</code></pre> <p>Modifique la funci\u00f3n <code>parse_csv()</code> para que pueda trabajar con dichos archivos creando una lista de tuplas en su lugar. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; prices = parse_csv('Data/prices.csv', types=[str,float], has_headers=False)\n&gt;&gt;&gt; prices\n[('AA', 9.22), ('AXP', 24.85), ('BA', 44.85), ('BAC', 11.27), ('C', 3.72), ('CAT', 35.46), ('CVX', 66.67), ('DD', 28.47), ('DIS', 24.22), ('GE', 13.48), ('GM', 0.75), ('HD', 23.16), ('HPQ', 34.35), ('IBM', 106.28), ('INTC', 15.72), ('JNJ', 55.16), ('JPM', 36.9), ('KFT', 26.11), ('KO', 49.16), ('MCD', 58.99), ('MMM', 57.1), ('MRK', 27.58), ('MSFT', 20.89), ('PFE', 15.19), ('PG', 51.94), ('T', 24.79), ('UTX', 52.61), ('VZ', 29.26), ('WMT', 49.74), ('XOM', 69.35)]\n&gt;&gt;&gt;\n</code></pre> <p>Para realizar este cambio, deber\u00e1 modificar el c\u00f3digo de modo que la primera l\u00ednea de datos No se interprete como una l\u00ednea de encabezado. Adem\u00e1s, deber\u00e1 asegurarse de no crear diccionarios, ya que ya no hay nombres de columnas para usar como claves.</p>"},{"location":"03_Program_organization/02_More_functions/#ejercicio-37-elegir-un-delimitador-de-columna-diferente","title":"Ejercicio 3.7: Elegir un delimitador de columna diferente","text":"<p>Aunque los archivos CSV son bastante comunes, tambi\u00e9n es posible encontrar un archivo que utilice un separador de columnas diferente, como una tabulaci\u00f3n o un espacio. Por ejemplo, el archivo <code>Data/portfolio.dat</code> tiene este aspecto:</p> <pre><code>name shares price\n\"AA\" 100 32.20\n\"IBM\" 50 91.10\n\"CAT\" 150 83.44\n\"MSFT\" 200 51.23\n\"GE\" 95 40.37\n\"MSFT\" 50 65.10\n\"IBM\" 100 70.44\n</code></pre> <p>La funci\u00f3n <code>csv.reader()</code> permite indicar un delimitador de columna diferente de la siguiente manera:</p> <pre><code>rows = csv.reader(f, delimiter=' ')\n`` `\n\nModifique su funci\u00f3n `parse_csv()` para que tambi\u00e9n permita cambiar el delimitador.\n\nPor ejemplo:\n\n```python\n&gt;&gt;&gt; portfolio = parse_csv('Data/portfolio.dat', types=[str, int, float], delimiter=' ')\n&gt;&gt;&gt; portfolio\n[{'name': 'AA', 'shares': 100, 'price': 32.2}, {'name': 'IBM', 'shares': 50, 'price': 91.1}, {'name': 'CAT', 'shares': 150, 'price': 83.44}, {'name': 'MSFT', 'shares': 200, 'price': 51.23}, {'name': 'GE', 'shares': 95, 'price': 40.37}, {'name': 'MSFT', 'shares': 50, 'price': 65.1}, {'name': 'IBM', 'shares': 100, 'price': 70.44}]\n&gt;&gt;&gt;\n</code></pre>"},{"location":"03_Program_organization/02_More_functions/#comentario","title":"Comentario","text":"<p>Si has llegado hasta aqu\u00ed, has creado una bonita funci\u00f3n de biblioteca que es realmente \u00fatil. Puedes usarla para analizar archivos CSV arbitrarios, seleccionar columnas de inter\u00e9s, realizar conversiones de tipos, sin tener que preocuparte demasiado por el funcionamiento interno de los archivos o el m\u00f3dulo <code>csv</code>.</p> <p>Contenido | Anterior (3.1 Funciones y escritura de scripts) | Pr\u00f3ximo (3.3 Comprobaci\u00f3n de errores)</p>"},{"location":"03_Program_organization/03_Error_checking/","title":"03_Error_checking","text":"<p>Contenido | Anterior (3.2 M\u00e1s detalles sobre las funciones) | Pr\u00f3ximo (3.4 M\u00f3dulos)</p>"},{"location":"03_Program_organization/03_Error_checking/#33-comprobacion-de-errores","title":"3.3 Comprobaci\u00f3n de errores","text":"<p>Aunque las excepciones se introdujeron anteriormente, esta secci\u00f3n completa algunos detalles adicionales sobre la comprobaci\u00f3n de errores y el manejo de excepciones.</p>"},{"location":"03_Program_organization/03_Error_checking/#como-fallan-los-programas","title":"C\u00f3mo fallan los programas","text":"<p>Python no realiza ninguna comprobaci\u00f3n o validaci\u00f3n de los tipos o valores de los argumentos de la funci\u00f3n. Una funci\u00f3n funcionar\u00e1 con cualquier dato que sea compatible con las declaraciones de la funci\u00f3n.</p> <pre><code>def add(x, y):\n    return x + y\n\nadd(3, 4) # 7\nadd('Hello', 'World') # 'HelloWorld'\nadd('3', '4') # '34'\n</code></pre> <p>Si hay errores en una funci\u00f3n, aparecen en tiempo de ejecuci\u00f3n (como una excepci\u00f3n).</p> <pre><code>def add(x, y):\n  return x + y\n\n&gt;&gt;&gt; add(3, '4')\nTraceback (most recent call last):\n...\nTypeError: unsupported operand type(s) for +:\n'int' and 'str'\n&gt;&gt;&gt;\n</code></pre> <p>Para verificar el c\u00f3digo, se hace mucho hincapi\u00e9 en las pruebas (que se tratan m\u00e1s adelante).</p>"},{"location":"03_Program_organization/03_Error_checking/#excepciones","title":"Excepciones","text":"<p>Las excepciones se utilizan para se\u00f1alar errores. Para generar una excepci\u00f3n usted mismo, utilice la declaraci\u00f3n <code>raise</code>.</p> <pre><code>if name not in authorized:\n    raise RuntimeError(f'{name} not authorized')\n</code></pre> <p>Para capturar una excepci\u00f3n, utilice <code>try-except</code>.</p> <pre><code>try:\n    authenticate(username)\nexcept RuntimeError as e:\n    print(e)\n</code></pre>"},{"location":"03_Program_organization/03_Error_checking/#manejo-de-excepciones","title":"Manejo de excepciones","text":"<p>Las excepciones se propagan al primer <code>except</code> coincidente.</p> <pre><code>def grok():\n    ...\n    raise RuntimeError('\u00a1Vaya!') # Excepci\u00f3n generada aqu\u00ed\n\ndef spam():\n    grok() # Llamada que generar\u00e1 la excepci\u00f3n\n\ndef bar():\n    try:\n        spam()\n    except RuntimeError as e: # Excepci\u00f3n detectada aqu\u00ed\n        ...\n\ndef foo():\n    try:\n        bar()\n    except RuntimeError as e: # La excepci\u00f3n NO llega aqu\u00ed\n        ...\n\nfoo()\n</code></pre> <p>Para manejar la excepci\u00f3n, coloque declaraciones en el bloque <code>except</code>. Puede agregar cualquier declaraci\u00f3n que desee para manejar el error.</p> <pre><code>def grok():...\n    raise RuntimeError('\u00a1Vaya!')\n\ndef bar():\n    try:\n        grok()\n    except RuntimeError as e: # Excepci\u00f3n detectada aqu\u00ed\n        declaraciones # Usa esta declaraci\u00f3n\n        declaraciones\n        ...\n\nbar()\n</code></pre> <p>Despu\u00e9s de la manipulaci\u00f3n, la ejecuci\u00f3n se reanuda con la primera declaraci\u00f3n despu\u00e9s de <code>try-except</code>.</p> <pre><code>def grok(): ...\n    raise RuntimeError('\u00a1Vaya!')\n\ndef bar():\n    try:\n      grok()\n    except RuntimeError as e: # Excepci\u00f3n detectada aqu\u00ed\n        declaraciones\n        declaraciones\n        ...\n    declaraciones # Reanuda la ejecuci\u00f3n aqu\u00ed\n    declaraciones # Y contin\u00faa aqu\u00ed\n    ...\n\nbar()\n</code></pre>"},{"location":"03_Program_organization/03_Error_checking/#excepciones-integradas","title":"Excepciones integradas","text":"<p>Hay alrededor de dos docenas de excepciones integradas. Generalmente el nombre de la excepci\u00f3n es indicativo de lo que est\u00e1 mal (por ejemplo, se genera un <code>ValueError</code> porque usted proporcion\u00f3 un valor incorrecto). Esta no es una lista exhaustiva. Consulte la documentaci\u00f3n para obtener m\u00e1s informaci\u00f3n.</p> <pre><code>ArithmeticError\nAssertionError\nEnvironmentError\nEOFError\nImportError\nIndexError\nKeyboardInterrupt\nKeyError\nMemoryError\nNameError\nReferenceError\nRuntimeError\nSyntaxError\nSystemError\nTypeError\nValueError\n</code></pre>"},{"location":"03_Program_organization/03_Error_checking/#valores-de-excepcion","title":"Valores de excepci\u00f3n","text":"<p>Las excepciones tienen un valor asociado. Contiene informaci\u00f3n m\u00e1s espec\u00edfica sobre lo que est\u00e1 mal.</p> <pre><code>raise RuntimeError('Nombre de usuario no v\u00e1lido')\n</code></pre> <p>Este valor es parte de la instancia de excepci\u00f3n que se coloca en la variable suministrada a <code>except</code>.</p> <pre><code>try:\n...\nexcept RuntimeError as e: # `e` contiene la excepci\u00f3n generada\n...\n</code></pre> <p><code>e</code> es una instancia del tipo de excepci\u00f3n. Sin embargo, a menudo parece una cadena cuando se imprime.</p> <pre><code>except RuntimeError as e:\n    print('Fall\u00f3 : Raz\u00f3n', e)\n</code></pre>"},{"location":"03_Program_organization/03_Error_checking/#captura-de-multiples-errores","title":"Captura de m\u00faltiples errores","text":"<p>Puedes capturar diferentes tipos de excepciones usando m\u00faltiples bloques <code>except</code>.</p> <pre><code>try:\n...\nexcept LookupError as e:\n...\nexcept RuntimeError as e:\n...\nexcept IOError as e:\n...\nexcept KeyboardInterrupt as e:\n...\n</code></pre> <p>Alternativamente, si las instrucciones para manejarlas son las mismas, puede agruparlas:</p> <pre><code>try:\n...\nexcept (IOError,LookupError,RuntimeError) as e:\n...\n</code></pre>"},{"location":"03_Program_organization/03_Error_checking/#capturar-todos-los-errores","title":"Capturar todos los errores","text":"<p>Para capturar cualquier excepci\u00f3n, use <code>Exception</code> de esta manera:</p> <pre><code>try:\n...\nexcept Exception: # DANGER. Vea a continuaci\u00f3n\n    print('Un error ha ocurrido')\n</code></pre> <p>En general, escribir c\u00f3digo como ese es una mala idea porque no tendr\u00e1 idea de por qu\u00e9 fall\u00f3.</p>"},{"location":"03_Program_organization/03_Error_checking/#forma-incorrecta-de-capturar-errores","title":"Forma incorrecta de capturar errores","text":"<p>Esta es la forma incorrecta de usar excepciones.</p> <pre><code>try:\n    go_do_something()\nexcept Exception:\n    print('La computadora dice no')\n</code></pre> <p>Esto captura todos los errores posibles y puede hacer que sea imposible depurar cuando el c\u00f3digo falla por alguna raz\u00f3n que no esperabas en absoluto (por ejemplo, m\u00f3dulo Python desinstalado, etc.).</p>"},{"location":"03_Program_organization/03_Error_checking/#un-enfoque-un-poco-mejor","title":"Un enfoque un poco mejor","text":"<p>Si vas a capturar todos los errores, este es un enfoque m\u00e1s sensato.</p> <pre><code>try:\n    go_do_something()\nexcept Exception as e:\n    print('La computadora dice no. Raz\u00f3n :', e)\n</code></pre> <p>Informa de una raz\u00f3n espec\u00edfica de la falla. Casi siempre es una buena idea tener alg\u00fan mecanismo para ver o informar errores cuando escribe c\u00f3digo que captura todas las excepciones posibles.</p> <p>En general, sin embargo, es mejor capturar el error de la forma m\u00e1s espec\u00edfica posible. Solo capture los errores que realmente puede manejar. Deje pasar otros errores, tal vez alg\u00fan otro c\u00f3digo pueda manejarlos.</p>"},{"location":"03_Program_organization/03_Error_checking/#volver-a-generar-una-excepcion","title":"Volver a generar una excepci\u00f3n","text":"<p>Use <code>raise</code> para propagar un error capturado.</p> <pre><code>try:\n    go_do_something()\nexcept Exception as e:\n    print('La computadora dice no. Raz\u00f3n :', e)\n    raise\n</code></pre> <p>Esto le permite tomar medidas (por ejemplo, registrar) y pasar el error al autor de la llamada.</p>"},{"location":"03_Program_organization/03_Error_checking/#mejores-practicas-para-excepciones","title":"Mejores pr\u00e1cticas para excepciones","text":"<p>No capture excepciones. Falle r\u00e1pido y en voz alta. Si es importante, alguien m\u00e1s se ocupar\u00e1 del problema. Solo capture una excepci\u00f3n si usted es esa persona. Es decir, solo captura errores de los que puedas recuperarte y seguir adelante de forma sensata.</p>"},{"location":"03_Program_organization/03_Error_checking/#instruccion-finally","title":"Instrucci\u00f3n <code>finally</code>","text":"<p>Especifica el c\u00f3digo que debe ejecutarse independientemente de si se produce o no una excepci\u00f3n.</p> <pre><code>lock = Lock()\n...\nlock.acquire()\ntry:\n  ...\nfinally:\n    lock.release() # esto SIEMPRE se ejecutar\u00e1. Con y sin excepci\u00f3n.\n</code></pre> <p>Se utiliza habitualmente para gestionar recursos de forma segura (especialmente bloqueos, archivos, etc.).</p>"},{"location":"03_Program_organization/03_Error_checking/#instruccion-with","title":"Instrucci\u00f3n <code>with</code>","text":"<p>En el c\u00f3digo moderno, <code>try-finally</code> suele sustituirse por la instrucci\u00f3n <code>with</code>.</p> <pre><code>lock = Lock()\nwith lock:\n    # bloqueo adquirido\n    ...\n# bloqueo liberado\n</code></pre> <p>Un ejemplo m\u00e1s familiar:</p> <pre><code>with open(filename) as f:\n    # Use el archivo\n    ...\n# Cierre el archivo\n</code></pre> <p><code>with</code> define un contexto de uso para un recurso. Cuando la ejecuci\u00f3n abandona ese contexto, se liberan los recursos. <code>with</code> s\u00f3lo funciona con ciertos objetos que han sido programados espec\u00edficamente para soportarlo.</p>"},{"location":"03_Program_organization/03_Error_checking/#ejercicios","title":"Ejercicios","text":""},{"location":"03_Program_organization/03_Error_checking/#ejercicio-38-generar-excepciones","title":"Ejercicio 3.8: Generar excepciones","text":"<p>La funci\u00f3n <code>parse_csv()</code> que escribi\u00f3 en la \u00faltima secci\u00f3n permite seleccionar columnas especificadas por el usuario, pero eso s\u00f3lo funciona si el archivo de datos de entrada tiene encabezados de columna.</p> <p>Modifique el c\u00f3digo para que se genere una excepci\u00f3n si se pasan los argumentos <code>select</code> y <code>has_headers=False</code>. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; parse_csv('Data/prices.csv', select=['name','price'], has_headers=False)\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nFile \"fileparse.py\", line 9, in parse_csv\nraise RuntimeError(\"select argument require column headers\")\nRuntimeError: select argument require column headers\n&gt;&gt;&gt;\n</code></pre> <p>Despu\u00e9s de agregar esta verificaci\u00f3n, puede preguntarse si deber\u00eda realizar otros tipos de verificaciones de integridad en la funci\u00f3n. Por ejemplo, \u00bfdeber\u00eda verificar que el nombre del archivo sea una cadena, que los tipos sean una lista o algo de esa naturaleza?</p> <p>Como regla general, generalmente es mejor omitir dichas pruebas y simplemente dejar que el programa falle en las entradas incorrectas. El mensaje de traceback se\u00f1alar\u00e1 la fuente del problema y puede ayudar en la depuraci\u00f3n.</p> <p>La raz\u00f3n principal para agregar la comprobaci\u00f3n anterior es evitar ejecutar el c\u00f3digo en un modo sin sentido (por ejemplo, usar una funci\u00f3n que requiere encabezados de columna, pero especificar simult\u00e1neamente que no hay encabezados).</p> <p>Esto indica un error de programaci\u00f3n por parte del c\u00f3digo que realiza la llamada. Comprobar los casos que \"no deber\u00edan ocurrir\" suele ser una buena idea.</p>"},{"location":"03_Program_organization/03_Error_checking/#ejercicio-39-captura-de-excepciones","title":"Ejercicio 3.9: Captura de excepciones","text":"<p>La funci\u00f3n <code>parse_csv()</code> que escribiste se usa para procesar todo el contenido de un archivo. Sin embargo, en el mundo real, es posible que los archivos de entrada tengan datos corruptos, faltantes o sucios. Pruebe este experimento:</p> <pre><code>&gt;&gt;&gt; portfolio = parse_csv('Data/missing.csv', types=[str, int, float])\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nFile \"fileparse.py\", line 36, in parse_csv\nrow = [func(val) for func, val in zip(types, row)]\nValueError: invalid literal for int() with base 10: ''\n&gt;&gt;&gt;\n</code></pre> <p>Modifique la funci\u00f3n <code>parse_csv()</code> para capturar todas las excepciones <code>ValueError</code> generadas durante la creaci\u00f3n de registros e imprimir un mensaje de advertencia para las filas que no se pueden convertir.</p> <p>El mensaje debe incluir el n\u00famero de fila e informaci\u00f3n sobre el motivo por el que fall\u00f3. Para probar su funci\u00f3n, intente leer el archivo <code>Data/missing.csv</code> anterior. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; portfolio = parse_csv('Data/missing.csv', types=[str, int, float])\nFila 4: No se pudo convertir ['MSFT', '', '51.23']\nFila 4: Motivo por el que el literal no es v\u00e1lido para int() con base 10: ''\nFila 7: No se pudo convertir ['IBM', '', '70.44']\nFila 7: Motivo por el que el literal no es v\u00e1lido para int() con base 10: ''\n&gt;&gt;&gt;\n&gt;&gt;&gt; portfolio\n[{'price': 32.2, 'name': 'AA', 'shares': 100}, {'price': 91.1, 'name': 'IBM', 'shares': 50}, {'price': 83.44, 'name': 'CAT', 'shares': 150}, {'price': 40,37, 'name': 'GE', 'shares': 95}, {'price': 65,1, 'name': 'MSFT', 'shares': 50}]\n&gt;&gt;&gt;\n</code></pre>"},{"location":"03_Program_organization/03_Error_checking/#ejercicio-310-silenciamiento-de-errores","title":"Ejercicio 3.10: Silenciamiento de errores","text":"<p>Modifique la funci\u00f3n <code>parse_csv()</code> para que los mensajes de error de an\u00e1lisis puedan silenciarse si el usuario lo desea expl\u00edcitamente. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; portfolio = parse_csv('Data/missing.csv', types=[str,int,float], silence_errors=True)\n&gt;&gt;&gt; portfolio\n[{'price': 32.2, 'name': 'AA', 'shares': 100}, {'pricename': 'MSFT', 'shares': 50}]\n&gt;&gt;&gt;\n</code></pre> <p>El manejo de errores es una de las cosas m\u00e1s dif\u00edciles de hacer bien en la mayor\u00eda de los programas. Como regla general, no deber\u00eda ignorar los errores en silencio. En cambio, es mejor informar los problemas y darle al usuario una opci\u00f3n para silenciar el mensaje de error si as\u00ed lo desea.</p> <p>Contenido | Anterior (3.2 M\u00e1s detalles sobre las funciones) | Pr\u00f3ximo (3.4 M\u00f3dulos)</p>"},{"location":"03_Program_organization/04_Modules/","title":"04_Modules","text":"<p>Contenido | Anterior (3.3 Comprobaci\u00f3n de errores) | Pr\u00f3ximo (3.5 M\u00f3dulo principal)</p>"},{"location":"03_Program_organization/04_Modules/#34-modulos","title":"3.4 M\u00f3dulos","text":"<p>Esta secci\u00f3n presenta el concepto de m\u00f3dulos y el trabajo con funciones que abarcan varios archivos.</p>"},{"location":"03_Program_organization/04_Modules/#modulos-e-importacion","title":"M\u00f3dulos e importaci\u00f3n","text":"<p>Cualquier archivo fuente de Python es un m\u00f3dulo.</p> <pre><code># foo.py\ndef grok(a):\n    ...\ndef spam(b):\n    ...\n</code></pre> <p>La declaraci\u00f3n <code>import</code> carga y ejecuta un m\u00f3dulo.</p> <pre><code># program.py\nimport foo\n\na = foo.grok(2)\nb = foo.spam('Hola')\n...\n</code></pre>"},{"location":"03_Program_organization/04_Modules/#espacio-de-nombres","title":"Espacio de nombres","text":"<p>Un m\u00f3dulo es una colecci\u00f3n de valores nombrados y a veces se dice que es un espacio de nombres o namespace. Los nombres son todas las variables y funciones globales definidas en el archivo fuente. Despu\u00e9s de la importaci\u00f3n, el nombre del m\u00f3dulo se utiliza como prefijo. De ah\u00ed el espacio de nombres.</p> <pre><code>import foo\n\na = foo.grok(2)\nb = foo.spam('Hola')\n...\n</code></pre> <p>El nombre del m\u00f3dulo est\u00e1 directamente vinculado al nombre del archivo (foo -&gt; foo.py).</p>"},{"location":"03_Program_organization/04_Modules/#definiciones-globales","title":"Definiciones globales","text":"<p>Todo lo definido en el \u00e1mbito global es lo que llena el espacio de nombres del m\u00f3dulo. Considere dos m\u00f3dulos que definen la misma variable <code>x</code>.</p> <pre><code># foo.py\nx = 42\ndef grok(a):\n    ...\n</code></pre> <pre><code># bar.py\nx = 37\ndef spam(a):\n    ...\n</code></pre> <p>En este caso, las definiciones de <code>x</code> se refieren a diferentes variables. Una es <code>foo.x</code> y la otra es <code>bar.x</code>. Diferentes m\u00f3dulos pueden usar los mismos nombres y esos nombres no entrar\u00e1n en conflicto entre s\u00ed.</p> <p>Los m\u00f3dulos est\u00e1n aislados.</p>"},{"location":"03_Program_organization/04_Modules/#modulos-como-entornos","title":"M\u00f3dulos como entornos","text":"<p>Los m\u00f3dulos forman un entorno envolvente para todo el c\u00f3digo definido en su interior.</p> <pre><code># foo.py\nx = 42\n\ndef grok(a):\n    print(x)\n</code></pre> <p>Las variables globales siempre est\u00e1n vinculadas al m\u00f3dulo envolvente (mismo archivo). Cada archivo fuente es su propio peque\u00f1o universo.</p>"},{"location":"03_Program_organization/04_Modules/#ejecucion-de-modulo","title":"Ejecuci\u00f3n de m\u00f3dulo","text":"<p>Cuando se importa un m\u00f3dulo, todas las instrucciones del m\u00f3dulo se ejecutan una tras otra hasta llegar al final del archivo. El contenido del espacio de nombres del m\u00f3dulo son todos los nombres globales que todav\u00eda est\u00e1n definidos al final del proceso de ejecuci\u00f3n. Si hay instrucciones de script que realizan tareas en el \u00e1mbito global (imprimir, crear archivos, etc.), ver\u00e1 que se ejecutan durante la importaci\u00f3n.</p>"},{"location":"03_Program_organization/04_Modules/#instruccion-import-as","title":"Instrucci\u00f3n <code>import as</code>","text":"<p>Puede cambiar el nombre de un m\u00f3dulo mientras lo importa:</p> <pre><code>import math as m\ndef rectangular(r, theta):\n    x = r * m.cos(theta)\n    y = r * m.sin(theta)\n    return x, y\n</code></pre> <p>Funciona igual que una importaci\u00f3n normal. Simplemente cambia el nombre del m\u00f3dulo en ese archivo.</p>"},{"location":"03_Program_organization/04_Modules/#importacion-de-modulo-from","title":"Importaci\u00f3n de m\u00f3dulo <code>from</code>","text":"<p>Esto selecciona s\u00edmbolos seleccionados de un m\u00f3dulo y los pone a disposici\u00f3n localmente.</p> <pre><code>from math import sin, cos\n\ndef rectangular(r, theta):\n    x = r * cos(theta)\n    y = r * sin(theta)\n    return x, y\n</code></pre> <p>Esto permite que se utilicen partes de un m\u00f3dulo sin tener que escribir el prefijo del m\u00f3dulo. Es \u00fatil para nombres de uso frecuente.</p>"},{"location":"03_Program_organization/04_Modules/#comentarios-sobre-la-importacion","title":"Comentarios sobre la importaci\u00f3n","text":"<p>Las variaciones en la importaci\u00f3n no cambian la forma en que funcionan los m\u00f3dulos.</p> <pre><code>import math\n# versus\nimport math as m\n# versus\nfrom math import cos, sin\n...\n</code></pre> <p>Espec\u00edficamente, <code>import</code> siempre ejecuta el archivo completo y los m\u00f3dulos siguen siendo entornos aislados.</p> <p>La declaraci\u00f3n <code>import module as</code> solo cambia el nombre localmente. La declaraci\u00f3n <code>from math import cos, sin</code> todav\u00eda carga el m\u00f3dulo matem\u00e1tico completo detr\u00e1s de escena. Simplemente copia los nombres <code>cos</code> y <code>sin</code> del m\u00f3dulo al espacio local despu\u00e9s de que finaliza.</p>"},{"location":"03_Program_organization/04_Modules/#carga-de-modulos","title":"Carga de m\u00f3dulos","text":"<p>Cada m\u00f3dulo se carga y se ejecuta solo una vez. </p> <p>Nota: Las importaciones repetidas solo devuelven una referencia al m\u00f3dulo cargado previamente.</p> <p><code>sys.modules</code> es un diccionario de todos los m\u00f3dulos cargados.</p> <pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.modules.keys()\n['copy_reg', '__main__', 'site', '__builtin__', 'encodings', 'encodings.encodings', 'posixpath', ...]\n&gt;&gt;&gt;\n</code></pre> <p>Precauci\u00f3n: Surge una confusi\u00f3n com\u00fan si repite una declaraci\u00f3n <code>import</code> despu\u00e9s de cambiar el c\u00f3digo fuente de un m\u00f3dulo. Debido a la cach\u00e9 de m\u00f3dulos <code>sys.modules</code>, las importaciones repetidas siempre devuelven el m\u00f3dulo cargado previamente, incluso si se realiz\u00f3 un cambio. La forma m\u00e1s segura de cargar c\u00f3digo modificado en Python es salir y reiniciar el int\u00e9rprete.</p>"},{"location":"03_Program_organization/04_Modules/#localizacion-de-modulos","title":"Localizaci\u00f3n de m\u00f3dulos","text":"<p>Python consulta una lista de rutas (sys.path) cuando busca m\u00f3dulos.</p> <pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.path\n[\n'',\n'/usr/local/lib/python36/python36.zip',\n'/usr/local/lib/python36',\n...\n]\n</code></pre> <p>El directorio de trabajo actual suele ser el primero.</p>"},{"location":"03_Program_organization/04_Modules/#ruta-de-busqueda-de-modulos","title":"Ruta de b\u00fasqueda de m\u00f3dulos","text":"<p>Como se indic\u00f3, <code>sys.path</code> contiene las rutas de b\u00fasqueda. Puede ajustarlas manualmente si es necesario.</p> <pre><code>import sys\nsys.path.append('/project/foo/pyfiles')\n</code></pre> <p>Las rutas tambi\u00e9n se pueden agregar a trav\u00e9s de variables de entorno.</p> <pre><code>bash % env PYTHONPATH=/project/foo/pyfiles python3\nPython 3.13.0 (tags/v3.13.0:60403a5, Oct  7 2024, 09:38:07) [MSC v.1941 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.path\n['', 'C:\\\\Program Files\\\\Git\\\\project\\\\foo\\\\pyfiles', ...]\n</code></pre> <p>Como regla general, no deber\u00eda ser necesario ajustar manualmente la ruta de b\u00fasqueda del m\u00f3dulo. Sin embargo, a veces surge si intenta importar c\u00f3digo Python que se encuentra en una ubicaci\u00f3n inusual o que no es f\u00e1cilmente accesible desde el directorio de trabajo actual.</p>"},{"location":"03_Program_organization/04_Modules/#ejercicios","title":"Ejercicios","text":"<p>Para este ejercicio que involucra m\u00f3dulos, es de vital importancia asegurarse de que est\u00e1 ejecutando Python en un entorno adecuado. Los m\u00f3dulos a menudo presentan a los nuevos programadores problemas relacionados con el directorio de trabajo actual o con la configuraci\u00f3n de la ruta de Python. Para este curso, se supone que est\u00e1 escribiendo todo su c\u00f3digo en el directorio <code>Work/</code>. Para obtener mejores resultados, debe asegurarse de que tambi\u00e9n est\u00e1 en ese directorio cuando inicia el int\u00e9rprete. Si no es as\u00ed, debe asegurarse de que <code>practical-python/Work</code> se agregue a <code>sys.path</code>.</p>"},{"location":"03_Program_organization/04_Modules/#ejercicio-311-importaciones-de-modulos","title":"Ejercicio 3.11: Importaciones de m\u00f3dulos","text":"<p>En la secci\u00f3n 3, creamos una funci\u00f3n de prop\u00f3sito general <code>parse_csv()</code> para analizar el contenido de los archivos de datos CSV.</p> <p>Ahora, vamos a ver c\u00f3mo usar esa funci\u00f3n en otros programas. Primero, comienza en una nueva ventana de shell. Navega hasta la carpeta donde tienes todos tus archivos. Vamos a importarlos.</p> <p>Inicia el modo interactivo de Python.</p> <pre><code>bash % $ python\nPython 3.13.0 (tags/v3.13.0:60403a5, Oct  7 2024, 09:38:07) [MSC v.1941 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt;\n</code></pre> <p>Una vez que hayas hecho eso, intenta importar algunos de los programas que escribiste anteriormente. Deber\u00edas ver su salida exactamente como antes. Solo para enfatizar, importar un m\u00f3dulo ejecuta su c\u00f3digo.</p> <pre><code>&gt;&gt;&gt; import bounce\n... mira el resultado ...\n&gt;&gt;&gt; import mortgage\n... mira el resultado ...\n&gt;&gt;&gt; import report\n... mira el resultado ...\n&gt;&gt;&gt;\n</code></pre> <p>Si nada de esto funciona, probablemente est\u00e9s ejecutando Python en el directorio incorrecto. Ahora, intenta importar tu m\u00f3dulo <code>fileparse</code> y obtener ayuda al respecto.</p> <pre><code>&gt;&gt;&gt; import fileparse\n&gt;&gt;&gt; help(fileparse)\n... mira el resultado...\n&gt;&gt;&gt; dir(fileparse)\n... mira el resultado...\n&gt;&gt;&gt;\n</code></pre> <p>Intenta usar el m\u00f3dulo para leer algunos datos:</p> <pre><code>&gt;&gt;&gt; portfolio = fileparse.parse_csv('Data/portfolio.csv',select=['name','shares','price'], types=[str,int,float])\n&gt;&gt;&gt; portfolio\n... mira el resultado...\n&gt;&gt;&gt; pricelist = fileparse.parse_csv('Data/prices.csv',types=[str,float], has_headers=False)\n&gt;&gt;&gt; pricelist\n... mira el resultado...\n&gt;&gt;&gt; prices = dict(pricelist)\n&gt;&gt;&gt; prices\n... mira el resultado...\n&gt;&gt;&gt; prices['IBM']\n106.28\n&gt;&gt;&gt;\n</code></pre> <p>Intenta importar una funci\u00f3n de modo que no necesites incluir el nombre del m\u00f3dulo:</p> <pre><code>&gt;&gt;&gt; from fileparse import parse_csv\n&gt;&gt;&gt; portfolio = parse_csv('Data/portfolio.csv', select=['name','shares','price'], types=[str,int,float])\n&gt;&gt;&gt; portfolio\n... mira el resultado...\n&gt;&gt;&gt;\n</code></pre>"},{"location":"03_Program_organization/04_Modules/#ejercicio-312-uso-del-modulo-de-la-biblioteca","title":"Ejercicio 3.12: Uso del m\u00f3dulo de la biblioteca","text":"<p>En la secci\u00f3n 2, escribiste un programa <code>report.py</code> que produjo un informe de acciones como este:</p> <pre><code>Name            Shares      Price     Change\n---------- ---------- ---------- ---------- \n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n</code></pre> <p>Tome ese programa y modif\u00edquelo de modo que todo el procesamiento del archivo de entrada se realice utilizando funciones en su m\u00f3dulo <code>fileparse</code>. Para ello, importe <code>fileparse</code> como m\u00f3dulo y cambie las funciones <code>read_portfolio()</code> y <code>read_prices()</code> para utilizar la funci\u00f3n <code>parse_csv()</code>.</p> <p>Use el modo interactivo al comienzo de este ejercicio como gu\u00eda. Despu\u00e9s, deber\u00eda obtener exactamente el mismo resultado que antes.</p>"},{"location":"03_Program_organization/04_Modules/#ejercicio-313-se-dejo-en-blanco-intencionalmente-omitir","title":"Ejercicio 3.13: Se dej\u00f3 en blanco intencionalmente (omitir)","text":""},{"location":"03_Program_organization/04_Modules/#ejercicio-314-uso-de-mas-importaciones-de-bibliotecas","title":"Ejercicio 3.14: Uso de m\u00e1s importaciones de bibliotecas","text":"<p>En la secci\u00f3n 1, escribi\u00f3 un programa <code>pcost.py</code> que lee una cartera y calcula su costo.</p> <pre><code>&gt;&gt;&gt; import pcost\n&gt;&gt;&gt; pcost.portfolio_cost('Data/portfolio.csv')\n44671.15\n&gt;&gt;&gt;\n</code></pre> <p>Modifique el archivo <code>pcost.py</code> para que use la funci\u00f3n <code>report.read_portfolio()</code>.</p>"},{"location":"03_Program_organization/04_Modules/#comentario","title":"Comentario","text":"<p>Cuando haya terminado con este ejercicio, deber\u00eda tener tres programas. <code>fileparse.py</code> que contiene una funci\u00f3n <code>parse_csv()</code> de prop\u00f3sito general. <code>report.py</code> que produce un informe atractivo, pero tambi\u00e9n contiene las funciones <code>read_portfolio()</code> y <code>read_prices()</code>. Y finalmente,<code>pcost.py</code>que calcula el costo de la cartera, pero hace uso de la funci\u00f3n<code>read_portfolio()</code>escrita para el programa<code>report.py\\</code>.</p> <p>Contenido | Anterior (3.3 Comprobaci\u00f3n de errores) | Pr\u00f3ximo (3.5 M\u00f3dulo principal)</p>"},{"location":"03_Program_organization/05_Main_module/","title":"05_Main_module","text":"<p>Conteido | Anterior (3.4 M\u00f3dulos) | Pr\u00f3ximo (3.6 Discusi\u00f3n sobre el dise\u00f1o)</p>"},{"location":"03_Program_organization/05_Main_module/#35-modulo-principal","title":"3.5 M\u00f3dulo principal","text":"<p>Esta secci\u00f3n presenta el concepto de un programa principal o m\u00f3dulo principal.</p>"},{"location":"03_Program_organization/05_Main_module/#funciones-principales","title":"Funciones principales","text":"<p>En muchos lenguajes de programaci\u00f3n, existe el concepto de una funci\u00f3n o m\u00e9todo principal.</p> <pre><code>// c / c++\nint main(int argc, char *argv[]) {\n...\n}\n</code></pre> <pre><code>// java\nclass myprog {\npublic static void main(String args[]) {\n...\n}\n}\n</code></pre> <p>Esta es la primera funci\u00f3n que se ejecuta cuando se inicia una aplicaci\u00f3n.</p>"},{"location":"03_Program_organization/05_Main_module/#modulo-principal-de-python","title":"M\u00f3dulo principal de Python","text":"<p>Python no tiene una funci\u00f3n o m\u00e9todo principal. En cambio, hay un m\u00f3dulo principal. El m\u00f3dulo principal es el archivo fuente que se ejecuta primero.</p> <pre><code>bash % python3 prog.py\n...\n</code></pre> <p>Cualquier archivo que le d\u00e9 al int\u00e9rprete al inicio se convierte en principal. No importa el nombre.</p>"},{"location":"03_Program_organization/05_Main_module/#__main__-verificacion","title":"<code>__main__</code> verificaci\u00f3n","text":"<p>Es una pr\u00e1ctica est\u00e1ndar para los m\u00f3dulos que se ejecutan como un script principal usar esta convenci\u00f3n:</p> <pre><code># prog.py\n...\nif __name__ == '__main__':\n    # Ejecutando como el programa principal ...\n    declaraciones\n    ...\n</code></pre> <p>Las declaraciones incluidas dentro de la declaraci\u00f3n <code>if</code> se convierten en el programa principal.</p>"},{"location":"03_Program_organization/05_Main_module/#programas-principales-vs-importaciones-de-bibliotecas","title":"Programas principales vs. importaciones de bibliotecas","text":"<p>Cualquier archivo Python puede ejecutarse como principal o como una importaci\u00f3n de biblioteca:</p> <pre><code>bash % python3 prog.py # Ejecutando como principal\n</code></pre> <pre><code>import prog # Ejecutando como importaci\u00f3n de biblioteca\n</code></pre> <p>En ambos casos, <code>__name__</code> es el nombre del m\u00f3dulo. Sin embargo, solo se establecer\u00e1 en <code>__main__</code> si se ejecuta como principal.</p> <p>Por lo general, no desea que las declaraciones que son parte del programa principal se ejecuten en una importaci\u00f3n de biblioteca. Por lo tanto, es com\u00fan tener un <code>if-</code>check en el c\u00f3digo que se puede usar de cualquier manera.</p> <pre><code>if __name__ == '__main__':\n    # No se ejecuta si se carga con importaci\u00f3n ...\n</code></pre>"},{"location":"03_Program_organization/05_Main_module/#plantilla-de-programa","title":"Plantilla de programa","text":"<p>A continuaci\u00f3n, se incluye una plantilla de programa com\u00fan para escribir un programa Python:</p> <pre><code># prog.py\n# Declaraciones de importaci\u00f3n (bibliotecas)\nimport modules\n\n# Funciones\ndef spam():\n    ...\n\ndef blah():\n    ...\n\n# Funci\u00f3n principal\ndef main():\n    ...\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"03_Program_organization/05_Main_module/#herramientas-de-linea-de-comandos","title":"Herramientas de l\u00ednea de comandos","text":"<p>Python se utiliza a menudo para herramientas de l\u00ednea de comandos</p> <pre><code>bash % python3 report.py portfolio.csv prices.csv\n</code></pre> <p>Significa que los scripts se ejecutan desde el shell/terminal. Los casos de uso m\u00e1s comunes son la automatizaci\u00f3n, las tareas en segundo plano, etc.</p>"},{"location":"03_Program_organization/05_Main_module/#argumentos-de-la-linea-de-comandos","title":"Argumentos de la l\u00ednea de comandos","text":"<p>La l\u00ednea de comandos es una lista de cadenas de texto.</p> <pre><code>bash % python3 -i report.py portfolio.csv prices.csv\n</code></pre> <p>Esta lista de cadenas de texto se encuentra en <code>sys.argv</code>.</p> <pre><code># En el comando bash anterior\n&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.argv # ['report.py, 'portfolio.csv', 'prices.csv']\n</code></pre> <p>A continuaci\u00f3n, se incluye un ejemplo simple de procesamiento de argumentos:</p> <pre><code>import sys\n\nif len(sys.argv) != 3:\n    raise SystemExit(f'Usage: {sys.argv[0]} ' 'portfile pricefile')\nportfile = sys.argv[1]\npricefile = sys.argv[2]\n...\n</code></pre>"},{"location":"03_Program_organization/05_Main_module/#es-estandar","title":"E/S est\u00e1ndar","text":"<p>La entrada/salida est\u00e1ndar (o <code>stdio</code>) son archivos que funcionan de la misma manera que los archivos normales.</p> <pre><code>sys.stdout\nsys.stderr\nsys.stdin\n</code></pre> <p>De manera predeterminada, la impresi\u00f3n se dirige a <code>sys.stdout</code>. La entrada se lee desde <code>sys.stdin</code>. Los seguimientos y errores se dirigen a <code>sys.stderr</code>.</p> <p>Tenga en cuenta que stdio podr\u00eda estar conectado a terminales, archivos, tuber\u00edas, etc.</p> <pre><code>bash % python3 prog.py &gt; results.txt\n# o\nbash % cmd1 | python prog.py | cmd2\n</code></pre>"},{"location":"03_Program_organization/05_Main_module/#variables-de-entorno","title":"Variables de entorno","text":"<p>Las variables de entorno se configuran en el shell.</p> <pre><code>bash % setenv NAME dave\nbash % setenv RSH ssh\nbash % python prog.py\n</code></pre> <p><code>os.environ</code> es un diccionario que contiene estos valores.</p> <pre><code>import os\n\nname = os.environ['NAME'] # 'dave'\n</code></pre> <p>Los cambios se reflejan en cualquier subproceso que el programa inicie posteriormente.</p>"},{"location":"03_Program_organization/05_Main_module/#salida-del-programa","title":"Salida del programa","text":"<p>La salida del programa se maneja mediante excepciones.</p> <pre><code>raise SystemExit\nraise SystemExit(exitcode)\nraise SystemExit('Mensaje Informativo')\n</code></pre> <p>Una alternativa.</p> <pre><code>import sys\nsys.exit(exitcode)\n</code></pre> <p>Un c\u00f3digo de salida distinto de cero indica un error.</p>"},{"location":"03_Program_organization/05_Main_module/#la-linea","title":"La l\u00ednea <code>#!</code>","text":"<p>En Unix, la l\u00ednea <code>#!</code> puede iniciar un script como Python. Agregue lo siguiente a la primera l\u00ednea de su archivo de script.</p> <pre><code>#!/usr/bin/env python\n# prog.py\n...\n</code></pre> <p>Requiere el permiso de ejecuci\u00f3n.</p> <pre><code>bash % chmod +x prog.py\n# Luego puedes ejecutar\nbash % prog.py\n... output ...\n</code></pre> <p>Nota: El lanzador de Python en Windows tambi\u00e9n busca la l\u00ednea <code>#!</code> para indicar la versi\u00f3n del idioma.</p>"},{"location":"03_Program_organization/05_Main_module/#plantilla-de-script","title":"Plantilla de script","text":"<p>Finalmente, aqu\u00ed hay una plantilla de c\u00f3digo com\u00fan para programas Python que se ejecutan como scripts de l\u00ednea de comandos:</p> <pre><code>#!/usr/bin/env python\n# prog.py\n\n# Declaraciones de importaci\u00f3n (bibliotecas)\nimport modules\n\n# Funciones\ndef spam():\n    ...\n\ndef blah():\n    ...\n\n# Funci\u00f3n principal\ndef main(argv):\n    # Analizar argumentos de l\u00ednea de comandos, entorno, etc.\n    ...\n\nif __name__ == '__main__':\n    import sys\n    main(sys.argv)\n</code></pre>"},{"location":"03_Program_organization/05_Main_module/#ejercicios","title":"Ejercicios","text":""},{"location":"03_Program_organization/05_Main_module/#ejercicio-315-funciones-main","title":"Ejercicio 3.15: funciones <code>main()</code>","text":"<p>En el archivo <code>report.py</code>, agregue una funci\u00f3n <code>main()</code> que acepte una lista de opciones de l\u00ednea de comandos y produzca el mismo resultado que antes. Deber\u00eda poder ejecutarla en modo interactivo de esta manera:</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; report.main(['report.py', 'Data/portfolio.csv', 'Data/prices.csv'])\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n&gt;&gt;&gt;\n</code></pre> <pre><code>\nModifique el archivo `pcost.py` para que tenga una funci\u00f3n `main()` similar:\n\n```python\n&gt;&gt;&gt; import pcost\n&gt;&gt;&gt; pcost.main(['pcost.py', 'Data/portfolio.csv'])\nTotal cost: 44671.15\n&gt;&gt;&gt;\n</code></pre>"},{"location":"03_Program_organization/05_Main_module/#ejercicio-316-creacion-de-scripts","title":"Ejercicio 3.16: Creaci\u00f3n de scripts","text":"<p>Modifique los programas <code>report.py</code> y <code>pcost.py</code> para que puedan ejecutarse como un script en la l\u00ednea de comandos:</p> <pre><code>bash % python3 report.py Data/portfolio.csv Data/prices.csv\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n\nbash $ python3 pcost.py Data/portfolio.csv\nTotal cost: 44671.15\n</code></pre> <p>Contenido | Anterior (3.4 M\u00f3dulos) | Pr\u00f3ximo (3.6 Discusi\u00f3n sobre el dise\u00f1o)</p>"},{"location":"03_Program_organization/06_Design_discussion/","title":"06_Design_discussion","text":"<p>Contenido | Anterior (3.5 M\u00f3dulo principal) | Pr\u00f3ximo (4. Clases y Objetos)</p>"},{"location":"03_Program_organization/06_Design_discussion/#36-discusion-sobre-el-diseno","title":"3.6 Discusi\u00f3n sobre el dise\u00f1o","text":"<p>En esta secci\u00f3n reconsideramos una decisi\u00f3n de dise\u00f1o tomada anteriormente.</p>"},{"location":"03_Program_organization/06_Design_discussion/#nombres-de-archivo-versus-iterables","title":"Nombres de archivo versus iterables","text":"<p>Compare estos dos programas que devuelven el mismo resultado.</p> <pre><code># Proporcione un nombre de archivo\ndef read_data(filename):\n    records = []\n    with open(filename) as f:\n        for line in f:\n            ...\n            records.append(r)\n    return records\n\nd = read_data('file.csv')\n</code></pre> <pre><code># Proporcione l\u00edneas\ndef read_data(lines):\n    records = []\n    for line in lines:\n        ...\n        records.append(r)\n    return records\n\nwith open('file.csv') as f:\n    d = read_data(f)\n</code></pre> <ul> <li>\u00bfCu\u00e1l de estas funciones prefiere? \u00bfPor qu\u00e9?</li> <li>\u00bfCu\u00e1l de estas funciones es m\u00e1s flexible?</li> </ul>"},{"location":"03_Program_organization/06_Design_discussion/#idea-profunda-duck-typing","title":"Idea profunda: \"Duck Typing\"","text":"<p>Duck Typing es un concepto de programaci\u00f3n inform\u00e1tica para determinar si un objeto se puede usar para un prop\u00f3sito particular. Es una aplicaci\u00f3n de la prueba del pato.</p> <p>Si parece un pato, nada como un pato y grazna como un pato, entonces probablemente sea un pato.</p> <p>En la segunda versi\u00f3n de <code>read_data()</code> anterior, la funci\u00f3n espera cualquier objeto iterable. No solo las l\u00edneas de un archivo.</p> <pre><code>def read_data(lines):\n    records = []\n    for line in lines:\n        ...\n        records.append(r)\n    return records\n</code></pre> <p>Esto significa que podemos usarlo con otras l\u00edneas.</p> <pre><code># Un archivo CSV\nlines = open('data.csv')\ndata = read_data(lines)\n\n# Un archivo comprimido\nlines = gzip.open('data.csv.gz','rt')\ndata = read_data(lines)\n\n# La entrada est\u00e1ndar\nlines = sys.stdin\ndata = read_data(lines)\n\n# Una lista de cadenas\nlines = ['ACME,50,91.1','IBM,75,123.45', ... ]\ndata = read_data(lines)\n</code></pre> <p>Este dise\u00f1o ofrece una flexibilidad considerable.</p> <p>Pregunta: \u00bfDeber\u00edamos adoptar o luchar contra esta flexibilidad?</p>"},{"location":"03_Program_organization/06_Design_discussion/#mejores-practicas-de-diseno-de-bibliotecas","title":"Mejores pr\u00e1cticas de dise\u00f1o de bibliotecas","text":"<p>Las bibliotecas de c\u00f3digo suelen funcionar mejor si adoptan la flexibilidad. No restrinja sus opciones. Una gran flexibilidad conlleva un gran poder.</p>"},{"location":"03_Program_organization/06_Design_discussion/#ejercicio","title":"Ejercicio","text":""},{"location":"03_Program_organization/06_Design_discussion/#ejercicio-317-de-nombres-de-archivo-a-objetos-similares-a-archivos","title":"Ejercicio 3.17: De nombres de archivo a objetos similares a archivos","text":"<p>Ahora ha creado un archivo <code>fileparse.py</code> que conten\u00eda una funci\u00f3n <code>parse_csv()</code>. La funci\u00f3n funcionaba de la siguiente manera:</p> <pre><code>&gt;&gt;&gt; import fileparse\n&gt;&gt;&gt; portfolio = fileparse.parse_csv('Data/portfolio.csv', types=[str,int,float])\n&gt;&gt;&gt;\n</code></pre> <p>En este momento, la funci\u00f3n espera que se le pase un nombre de archivo. Sin embargo, puede hacer que el c\u00f3digo sea m\u00e1s flexible. Modifique la funci\u00f3n para que funcione con cualquier objeto iterable o similar a un archivo. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; import fileparse\n&gt;&gt;&gt; import gzip\n&gt;&gt;&gt; with gzip.open('Data/portfolio.csv.gz', 'rt') as file:\n...      port = fileparse.parse_csv(file, types=[str,int,float])\n...\n&gt;&gt;&gt; lines = ['name,shares,price', 'AA,100,34.23', 'IBM,50,91.1', 'HPE,75,45.1']\n&gt;&gt;&gt; port = fileparse.parse_csv(lines, types=[str,int,float])\n&gt;&gt;&gt;\n</code></pre> <p>En este nuevo c\u00f3digo, \u00bfqu\u00e9 sucede si pasa un nombre de archivo como antes?</p> <pre><code>&gt;&gt;&gt; port = fileparse.parse_csv('Data/portfolio.csv', types=[str,int,float])\n&gt;&gt;&gt; port\n... mira la salida (deber\u00eda ser una locura) ...\n&gt;&gt;&gt;\n</code></pre> <p>S\u00ed, tendr\u00e1s que tener cuidado. \u00bfPodr\u00edas agregar una comprobaci\u00f3n de seguridad para evitar esto?</p>"},{"location":"03_Program_organization/06_Design_discussion/#ejercicio-318-corregir-funciones-existentes","title":"Ejercicio 3.18: Corregir funciones existentes","text":"<p>Corrige las funciones <code>read_portfolio()</code> y <code>read_prices()</code> en el archivo <code>report.py</code> para que funcionen con la versi\u00f3n modificada de <code>parse_csv()</code>. Esto solo deber\u00eda implicar una modificaci\u00f3n menor. Despu\u00e9s, tus programas <code>report.py</code> y <code>pcost.py</code> deber\u00edan funcionar de la misma manera que siempre lo hicieron.</p> <p>Contenido | Anterior (3.5 M\u00f3dulo principal) | Pr\u00f3ximo (4. Clases y Objetos)</p>"},{"location":"04_Classes_objects/00_Overview/","title":"00_Overview","text":"<p>Contenido | Anterior (3 Organizaci\u00f3n del programa) | Pr\u00f3ximo (5. Funcionamiento interno de los objetos de Python)</p>"},{"location":"04_Classes_objects/00_Overview/#4-clases-y-objetos","title":"4. Clases y objetos","text":"<p>Hasta ahora, nuestros programas solo han utilizado tipos de datos integrados de Python. En esta secci\u00f3n, presentamos el concepto de clases y objetos. Aprender\u00e1 sobre la declaraci\u00f3n <code>class</code> que le permite crear nuevos objetos. Tambi\u00e9n presentaremos el concepto de herencia, una herramienta que se usa com\u00fanmente para crear programas extensibles. Finalmente, veremos algunas otras caracter\u00edsticas de las clases, incluidos los m\u00e9todos especiales, la b\u00fasqueda din\u00e1mica de atributos y la definici\u00f3n de nuevas excepciones.</p> <ul> <li>4.1 Introducci\u00f3n de clases</li> <li>4.2 Herencia</li> <li>4.3 M\u00e9todos especiales</li> <li>4.4 Definici\u00f3n de excepciones</li> </ul> <p>Contenido | Anterior (3 Organizaci\u00f3n del programa) | Pr\u00f3ximo (5. Funcionamiento interno de los objetos de Python)</p>"},{"location":"04_Classes_objects/01_Class/","title":"01_Class","text":"<p>Contenido | Anterior (3.6 Discusi\u00f3n sobre el dise\u00f1o) | Pr\u00f3ximo (4.2 Herencia)</p>"},{"location":"04_Classes_objects/01_Class/#41-clases","title":"4.1 Clases","text":"<p>Esta secci\u00f3n presenta la declaraci\u00f3n de clase y la idea de crear nuevos objetos.</p>"},{"location":"04_Classes_objects/01_Class/#programacion-orientada-a-objetos-oo","title":"Programaci\u00f3n Orientada a Objetos (OO)","text":"<p>Una t\u00e9cnica de programaci\u00f3n en la que el c\u00f3digo se organiza como una colecci\u00f3n de objetos.</p> <p>Un objeto consta de:</p> <ul> <li>Datos. Atributos</li> <li>Comportamiento. M\u00e9todos que son funciones aplicadas al objeto.</li> </ul> <p>Ya ha estado utilizando algo de OO durante este curso.</p> <p>Por ejemplo, manipular una lista.</p> <pre><code>&gt;&gt;&gt; nums = [1, 2, 3]\n&gt;&gt;&gt; nums.append(4) # M\u00e9todo\n&gt;&gt;&gt; nums.insert(1,10) # M\u00e9todo\n&gt;&gt;&gt; nums\n[1, 10, 2, 3, 4] # Datos\n&gt;&gt;&gt;\n</code></pre> <p><code>nums</code> es una instancia de una lista.</p> <p>Los m\u00e9todos (<code>append()</code> y <code>insert()</code>) se adjuntan a la instancia (<code>nums</code>).</p>"},{"location":"04_Classes_objects/01_Class/#la-declaracion-class","title":"La declaraci\u00f3n <code>class</code>","text":"<p>Use la declaraci\u00f3n <code>class</code> para definir un nuevo objeto.</p> <pre><code>class Player:\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n        self.health = 100\n\n    def move(self, dx, dy):\n        self.x += dx\n        self.y += dy\n\n    def damage(self, pts):\n        self.health -= pts\n</code></pre> <p>En pocas palabras, una clase es un conjunto de funciones que realizan varias operaciones en las llamadas instancias.</p>"},{"location":"04_Classes_objects/01_Class/#instancias","title":"Instancias","text":"<p>Las instancias son los objetos reales que manipulas en tu programa.</p> <p>Se crean llamando a la clase como una funci\u00f3n.</p> <pre><code>&gt;&gt;&gt; a = Player(2, 3)\n&gt;&gt;&gt; b = Player(10, 20)\n&gt;&gt;&gt;\n</code></pre> <p><code>a</code> y <code>b</code> son instancias de <code>Player</code>.</p> <p>Enfatizar: La declaraci\u00f3n de clase es solo la definici\u00f3n (no hace nada por s\u00ed misma). Similar a una definici\u00f3n de funci\u00f3n.</p>"},{"location":"04_Classes_objects/01_Class/#datos-de-instancia","title":"Datos de instancia","text":"<p>Cada instancia tiene sus propios datos locales.</p> <pre><code>&gt;&gt;&gt; a.x\n2\n&gt;&gt;&gt; b.x\n10\n</code></pre> <p>Estos datos se inicializan mediante <code>__init__()</code>.</p> <pre><code>class Player:\n    def __init__(self, x, y):\n    # Cualquier valor almacenado en `self` son datos de instancia\n        self.x = x\n        self.y = y\n        self.health = 100\n</code></pre> <p>No hay restricciones sobre la cantidad total o el tipo de atributos almacenados.</p>"},{"location":"04_Classes_objects/01_Class/#metodos-de-instancia","title":"M\u00e9todos de instancia","text":"<p>Los m\u00e9todos de instancia son funciones que se aplican a instancias de un objeto.</p> <pre><code>class Player:\n    ...\n    # `move` es un m\u00e9todo\n    def move(self, dx, dy):\n        self.x += dx\n        self.y += dy\n</code></pre> <p>El objeto en s\u00ed siempre se pasa como primer argumento.</p> <pre><code>&gt;&gt;&gt; a.move(1, 2)\n\n# hace coincidir `a` con `self`\n# hace coincidir `1` con `dx`\n# hace coincidir `2` con `dy`\ndef move(self, dx, dy):\n</code></pre> <p>Por convenci\u00f3n, la instancia se llama <code>self</code>. Sin embargo, el nombre real utilizado no es importante. El objeto siempre se pasa como primer argumento. Es simplemente el estilo de programaci\u00f3n de Python llamar a este argumento <code>self</code>.</p>"},{"location":"04_Classes_objects/01_Class/#alcance-de-la-clase","title":"Alcance de la clase","text":"<p>Las clases no definen un alcance de nombres.</p> <pre><code>class Player:\n    ...\n    def move(self, dx, dy):\n        self.x += dx\n        self.y += dy\n\n    def left(self, amt):\n        move(-amt, 0) # NO. Llama a una funci\u00f3n `move` global\n        self.move(-amt, 0) # S\u00cd. Llama al m\u00e9todo `move` de arriba.\n</code></pre> <p>Si desea operar en una instancia, siempre debe hacer referencia a ella expl\u00edcitamente (por ejemplo, <code>self</code>).</p>"},{"location":"04_Classes_objects/01_Class/#ejercicios","title":"Ejercicios","text":"<p>A partir de este conjunto de ejercicios, comenzaremos a realizar una serie de cambios en el c\u00f3digo existente de las secciones anteriores. Es fundamental que tenga una versi\u00f3n funcional del Ejercicio 3.18 para comenzar. Si no la tiene, trabaje a partir del c\u00f3digo de soluci\u00f3n que se encuentra en el directorio <code>Solutions/3_18</code>. Est\u00e1 bien copiarlo.</p>"},{"location":"04_Classes_objects/01_Class/#ejercicio-41-objetos-como-estructuras-de-datos","title":"Ejercicio 4.1: Objetos como estructuras de datos","text":"<p>En las secciones 2 y 3, trabajamos con datos representados como tuplas y diccionarios. Por ejemplo, una cartera de acciones se podr\u00eda representar como una tupla como esta:</p> <pre><code>s = ('GOOG',100,490.10)\n</code></pre> <p>o como un diccionario como este:</p> <pre><code>s = { 'name' : 'GOOG',\n      'shares' : 100,\n      'price' : 490.10\n}\n</code></pre> <p>Incluso puede escribir funciones para manipular dichos datos. Por ejemplo:</p> <pre><code>def cost(s):\n    return s['shares'] * s['price']\n</code></pre> <p>Sin embargo, a medida que su programa crezca, es posible que desee crear una mejor sensaci\u00f3n de organizaci\u00f3n. Por lo tanto, otro enfoque para representar datos ser\u00eda definir una clase. Cree un archivo llamado <code>stock.py</code> y defina una clase <code>Stock</code> que represente una \u00fanica tenencia de acciones. Haga que las instancias de <code>Stock</code> tengan los atributos <code>name</code>, <code>shares</code> y <code>price</code>. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; import stock\n&gt;&gt;&gt; a = stock.Stock('GOOG',100,490.10)\n&gt;&gt;&gt; a.name\n'GOOG'\n&gt;&gt;&gt; a.shares\n100\n&gt;&gt;&gt; a.price\n490.1\n&gt;&gt;&gt;\n</code></pre> <p>Cree algunos objetos <code>Stock</code> m\u00e1s y manip\u00falelos. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; b = stock.Stock('AAPL', 50, 122.34)\n&gt;&gt;&gt; c = stock.Stock('IBM', 75, 91.75)\n&gt;&gt;&gt; b.shares * b.price\n6117.0\n&gt;&gt;&gt; c.shares * c.price\n6881.25\n&gt;&gt;&gt; stocks = [a, b, c]\n&gt;&gt;&gt; stocks\n[&lt;stock.Objeto Stock en 0x37d0b0&gt;, &lt;stock.Objeto Stock en 0x37d110&gt;, &lt;stock.Objeto Stock en 0x37d050&gt;]\n&gt;&gt;&gt; for s in stocks:\n        print(f'{s.name:&gt;10s} {s.shares:&gt;10d} {s.price:&gt;10.2f}')\n\n... mira el resultado...\n&gt;&gt;&gt;\n</code></pre> <p>Una cosa que hay que destacar aqu\u00ed es que la clase <code>Stock</code> act\u00faa como una f\u00e1brica para crear instancias de objetos. B\u00e1sicamente, la llamas como una funci\u00f3n y crea un nuevo objeto para ti. Adem\u00e1s, hay que destacar que cada objeto es distinto: cada uno tiene sus propios datos que est\u00e1n separados de otros objetos que se han creado.</p> <p>Un objeto definido por una clase es algo similar a un diccionario, solo que con una sintaxis ligeramente diferente. Por ejemplo, en lugar de escribir <code>s['nombre']</code> o <code>s['precio']</code>, ahora escribes <code>s.nombre</code> y <code>s.precio</code>.</p>"},{"location":"04_Classes_objects/01_Class/#ejercicio-42-agregar-algunos-metodos","title":"Ejercicio 4.2: Agregar algunos m\u00e9todos","text":"<p>Con las clases, puedes adjuntar funciones a tus objetos. Estas se conocen como m\u00e9todos y son funciones que operan sobre los datos almacenados dentro de un objeto. Agrega un m\u00e9todo <code>cost()</code> y <code>sell()</code> a tu objeto <code>Stock</code>. Deber\u00edan funcionar as\u00ed:</p> <pre><code>&gt;&gt;&gt; import stock\n&gt;&gt;&gt; s = stock.Stock('GOOG', 100, 490.10)\n&gt;&gt;&gt; s.cost()\n49010.0\n&gt;&gt;&gt; s.shares\n100\n&gt;&gt;&gt; s.sell(25)\n&gt;&gt;&gt; s.shares\n75\n&gt;&gt;&gt; s.cost()\n36757.5\n&gt;&gt;&gt;\n</code></pre>"},{"location":"04_Classes_objects/01_Class/#ejercicio-43-creacion-de-una-lista-de-instancias","title":"Ejercicio 4.3: Creaci\u00f3n de una lista de instancias","text":"<p>Pruebe estos pasos para crear una lista de instancias de <code>Stock</code> a partir de una lista de diccionarios. Luego, calcula el costo total:</p> <pre><code>&gt;&gt;&gt; import fileparse\n&gt;&gt;&gt; with open('Data/portfolio.csv') as lines:\n...     portdicts = fileparse.parse_csv(lines, select=['name','shares','price'], types=[str,int,float])\n...\n&gt;&gt;&gt; portfolio = [ stock.Stock(d['name'], d['shares'], d['price']) for d in portdicts]\n&gt;&gt;&gt; portfolio\n[&lt;stock.Objeto Stock en 0x10c9e2128&gt;, &lt;stock.Objeto Stock en 0x10c9e2048&gt;, &lt;stock.Objeto Stock en 0x10c9e2080&gt;,\n&lt;stock.Objeto Stock en 0x10c9e25f8&gt;, &lt;stock.Objeto Stock en 0x10c9e2630&gt;, &lt;stock.Stock object at 0x10ca6f748&gt;,\n&lt;stock.Stock object at 0x10ca6f7b8&gt;]\n&gt;&gt;&gt; sum([s.cost() for s in portfolio])\n44671.15\n&gt;&gt;&gt;\n</code></pre>"},{"location":"04_Classes_objects/01_Class/#ejercicio-44-utilizando-tu-clase","title":"Ejercicio 4.4: Utilizando tu clase","text":"<p>Modifique la funci\u00f3n <code>read_portfolio()</code> en el programa <code>report.py</code> para que lea un portfolio en una lista de instancias de <code>Stock</code> como se muestra en el Ejercicio 4.3. Una vez que haya hecho eso, corrija todo el c\u00f3digo en <code>report.py</code> y <code>pcost.py</code> para que funcione con instancias <code>Stock</code> en lugar de diccionarios.</p> <p>Sugerencia: No deber\u00eda tener que hacer cambios importantes en el c\u00f3digo. Principalmente cambiar\u00e1 el acceso al diccionario como <code>s['shares']</code> a <code>s.shares</code>.</p> <p>Deber\u00edas poder ejecutar tus funciones de la misma manera que antes:</p> <pre><code>&gt;&gt;&gt; import pcost\n&gt;&gt;&gt; pcost.portfolio_cost('Data/portfolio.csv')\n44671.15\n&gt;&gt;&gt; import report\n&gt;&gt;&gt; report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n&gt;&gt;&gt;\n</code></pre> <p>Contenido | Anterior (3.6 Discusi\u00f3n sobre el dise\u00f1o) | Pr\u00f3ximo (4.2 Herencia)</p>"},{"location":"04_Classes_objects/02_Inheritance/","title":"02_Inheritance","text":"<p>Contenido | Anterior (4.1 Clases) | Pr\u00f3ximo (4.3 M\u00e9todos especiales)</p>"},{"location":"04_Classes_objects/02_Inheritance/#42-herencia","title":"4.2 Herencia","text":"<p>La herencia es una herramienta que se utiliza habitualmente para escribir programas extensibles. Esta secci\u00f3n explora esa idea.</p>"},{"location":"04_Classes_objects/02_Inheritance/#introduccion","title":"Introducci\u00f3n","text":"<p>La herencia se utiliza para especializar objetos existentes:</p> <pre><code>class Parent:\n...\n\nclass Child(Parent):\n...\n</code></pre> <p>La nueva clase <code>Child</code> se denomina clase derivada o subclase. La clase <code>Parent</code> se conoce como clase base o superclase. <code>Parent</code> se especifica en <code>()</code> despu\u00e9s del nombre de la clase, <code>class Child(Parent):</code>.</p>"},{"location":"04_Classes_objects/02_Inheritance/#extencion","title":"Extenci\u00f3n","text":"<p>Con la herencia, tomas una clase existente y:</p> <ul> <li>Agregas nuevos m\u00e9todos</li> <li>Redefines algunos de los m\u00e9todos existentes</li> <li>Agregas nuevos atributos a las instancias</li> </ul> <p>Al final, extiendes el c\u00f3digo existente.</p>"},{"location":"04_Classes_objects/02_Inheritance/#ejemplo","title":"Ejemplo","text":"<p>Sup\u00f3n que esta es tu clase inicial:</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n\n    def cost(self):\n        return self.shares * self.price\n\n    def sell(self, nshares):\n        self.shares -= nshares\n</code></pre> <p>Puedes cambiar cualquier parte de esto mediante la herencia.</p>"},{"location":"04_Classes_objects/02_Inheritance/#agrega-un-nuevo-metodo","title":"Agrega un nuevo m\u00e9todo","text":"<pre><code>class MyStock(Stock):\n    def panic(self):\n        self.sell(self.shares)\n</code></pre> <p>Ejemplo de uso.</p> <pre><code>&gt;&gt;&gt; s = MyStock('GOOG', 100, 490.1)\n&gt;&gt;&gt; s.sell(25)\n&gt;&gt;&gt; s.shares\n75\n&gt;&gt;&gt; s.panic()\n&gt;&gt;&gt; s.shares\n0\n&gt;&gt;&gt;\n</code></pre>"},{"location":"04_Classes_objects/02_Inheritance/#redefinicion-de-un-metodo-existente","title":"Redefinici\u00f3n de un m\u00e9todo existente","text":"<pre><code>class MyStock(Stock):\n    def cost(self):\n        return 1.25 * self.shares * self.price\n</code></pre> <p>Ejemplo de uso.</p> <pre><code>&gt;&gt;&gt; s = MyStock('GOOG', 100, 490.1)\n&gt;&gt;&gt; s.cost()\n61262.5\n&gt;&gt;&gt;\n</code></pre> <p>El nuevo m\u00e9todo reemplaza al anterior. Los otros m\u00e9todos no se ven afectados. Es fant\u00e1stico.</p>"},{"location":"04_Classes_objects/02_Inheritance/#sobreescritura","title":"Sobreescritura","text":"<p>A veces, una clase extiende un m\u00e9todo existente, pero desea utilizar la implementaci\u00f3n original dentro de la redefinici\u00f3n. Para ello, utilice <code>super()</code>:</p> <pre><code>class Stock:\n    ...\n    def cost(self):\n        return self.shares * self.price\n    ...\n\nclass MyStock(Stock):\n    def cost(self):\n    # Verifique la llamada a `super`\n        actual_cost = super().cost()\n        return 1.25 * actual_cost\n</code></pre> <p>Use <code>super()</code> para llamar a la versi\u00f3n anterior.</p> <p>Precauci\u00f3n: En Python 2, la sintaxis era m\u00e1s detallada.</p> <pre><code>actual_cost = super(MyStock, self).cost()\n</code></pre>"},{"location":"04_Classes_objects/02_Inheritance/#__init__-y-herencia","title":"<code>__init__</code> y herencia","text":"<p>Si se redefine <code>__init__</code>, es esencial inicializar el padre.</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n\nclass MyStock(Stock):\n    def __init__(self, name, shares, price, factor):\n    # Verifica la llamada a `super` y `__init__`\n        super().__init__(name, shares, price)\n        self.factor = factor\n\n    def cost(self):\n        return self.factor * super().cost()\n</code></pre> <p>Debes llamar al m\u00e9todo <code>__init__()</code> en <code>super</code>, que es la forma de llamar a la versi\u00f3n anterior como se mostr\u00f3 anteriormente.</p>"},{"location":"04_Classes_objects/02_Inheritance/#uso-de-herencia","title":"Uso de herencia","text":"<p>La herencia se usa a veces para organizar objetos relacionados.</p> <pre><code>class Shape:\n...\n\nclass Circle(Shape):\n...\n\nclass Rectangle(Shape):\n...\n</code></pre> <p>Piensa en una jerarqu\u00eda l\u00f3gica o taxonom\u00eda. Sin embargo, un uso m\u00e1s com\u00fan (y pr\u00e1ctico) est\u00e1 relacionado con la creaci\u00f3n de c\u00f3digo reutilizable o extensible. Por ejemplo, un marco de trabajo puede definir una clase base y darte instrucciones para personalizarla.</p> <pre><code>class CustomHandler(TCPHandler):\n    def handle_request(self):\n    ...\n    # Procesamiento personalizado\n</code></pre> <p>La clase base contiene c\u00f3digo de prop\u00f3sito general. Tu clase hereda y personaliza partes espec\u00edficas.</p>"},{"location":"04_Classes_objects/02_Inheritance/#relacion-es-una","title":"Relaci\u00f3n \"es una\"","text":"<p>La herencia establece una relaci\u00f3n de tipos.</p> <pre><code>class Shape:\n...\n\nclass Circle(Shape):\n...\n</code></pre> <p>Comprueba si hay una instancia de objeto.</p> <pre><code>&gt;&gt;&gt; c = Circle(4.0)\n&gt;&gt;&gt; isinstance(c, Shape)\nTrue\n&gt;&gt;&gt;\n</code></pre> <p>Importante: idealmente, cualquier c\u00f3digo que haya funcionado con instancias de la clase padre tambi\u00e9n funcionar\u00e1 con instancias de la clase hija.</p>"},{"location":"04_Classes_objects/02_Inheritance/#clase-base-object","title":"Clase base <code>object</code>","text":"<p>Si una clase no tiene padre, a veces ver\u00e1s que <code>object</code> se usa como base.</p> <pre><code>class Shape(object):\n...\n</code></pre> <p><code>object</code> es el padre de todos los objetos en Python.</p> <p>*Nota: t\u00e9cnicamente no es obligatorio, pero a menudo lo ves especificado como un remanente de su uso obligatorio en Python 2. Si se omite, la clase a\u00fan hereda impl\u00edcitamente de <code>object</code>.</p>"},{"location":"04_Classes_objects/02_Inheritance/#herencia-multiple","title":"Herencia m\u00faltiple","text":"<p>Puedes heredar de varias clases especific\u00e1ndolas en la definici\u00f3n de la clase.</p> <pre><code>class Mother:\n...\n\nclass Father:\n...\n\nclass Child(Mother, Father):\n...\n</code></pre> <p>La clase <code>Child</code> hereda caracter\u00edsticas de ambos padres. Hay algunos detalles un poco complicados. No lo hagas a menos que sepas lo que est\u00e1s haciendo. Se dar\u00e1 m\u00e1s informaci\u00f3n en la siguiente secci\u00f3n, pero no vamos a utilizar m\u00e1s la herencia m\u00faltiple en este curso.</p>"},{"location":"04_Classes_objects/02_Inheritance/#ejercicios","title":"Ejercicios","text":"<p>Un uso importante de la herencia es escribir c\u00f3digo que se puede ampliar o personalizar de varias maneras, especialmente en bibliotecas o marcos. Para ilustrarlo, considere la funci\u00f3n <code>print_report()</code> en su programa <code>report.py</code>. Deber\u00eda verse algo como esto:</p> <pre><code>def print_report(reportdata):\n    '''\n    Imprima una tabla con un formato agradable a partir de una lista de         tuplas (name, shares, price, change).\n    '''\n    headers = ('Name','Shares','Price','Change')\n    print('%10s %10s %10s %10s' % headers)\n    print(('-'*10 + ' ')*len(headers))\n    for row in reportdata:\n        print('%10s %10d %10.2f %10.2f' % row)\n</code></pre> <p>Cuando ejecute su programa de informe, deber\u00eda obtener un resultado como este:</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n</code></pre>"},{"location":"04_Classes_objects/02_Inheritance/#ejercicio-45-un-problema-de-extensibilidad","title":"Ejercicio 4.5: Un problema de extensibilidad","text":"<p>Supongamos que desea modificar la funci\u00f3n <code>print_report()</code> para que admita una variedad de formatos de salida diferentes, como texto sin formato, HTML, CSV o XML. Para ello, podr\u00eda intentar escribir una funci\u00f3n gigantesca que hiciera todo. Sin embargo, hacerlo probablemente conducir\u00eda a un desastre imposible de mantener. En cambio, esta es una oportunidad perfecta para utilizar la herencia.</p> <p>Para comenzar, conc\u00e9ntrese en los pasos que intervienen en la creaci\u00f3n de una tabla. En la parte superior de la tabla hay un conjunto de encabezados de tabla. Despu\u00e9s de eso, aparecen las filas de datos de la tabla. Tomemos esos pasos y pong\u00e1moslos en su propia clase. Cree un archivo llamado <code>tableformat.py</code> y defina la siguiente clase:</p> <pre><code># tableformat.py\n\nclass TableFormatter:\n    def headers(self, headers):\n      '''\n      Emite los encabezados de la tabla.\n      '''\n      raise NotImplementedError()\n\n    def row(self, rowdata):\n      '''\n      Emite una sola fila de datos de la tabla.\n      '''\n      raise NotImplementedError()\n</code></pre> <p>Esta clase no hace nada, pero sirve como una especie de especificaci\u00f3n de dise\u00f1o para clases adicionales que se definir\u00e1n en breve. A una clase como esta a veces se la llama \"clase base abstracta\".</p> <p>Modifique la funci\u00f3n <code>print_report()</code> para que acepte un objeto <code>TableFormatter</code> como entrada e invoque m\u00e9todos en \u00e9l para producir la salida. Por ejemplo, de esta manera:</p> <pre><code># report.py\n...\n\ndef print_report(reportdata, formatter):\n    '''\n    Imprime una tabla con un formato agradable a partir de una lista de tuplas (name, shares, price, change).\n    '''\n    formatter.headings(['Name','Shares','Price','Change'])\n    for name, shares, price, change in reportdata:\n        rowdata = [ name, str(shares), f'{price:0.2f}', f'{change:0.2f}' ]\n        formatter.row(rowdata)\n</code></pre> <p>Dado que agregaste un argumento a <code>print_report()</code>, tambi\u00e9n necesitar\u00e1s modificar la funci\u00f3n portfolio_report()<code>. C\u00e1mbielo para que cree un</code>TableFormatter` como este:</p> <pre><code># report.py\n\nimport tableformat\n\n...\ndef portfolio_report(portfoliofile, pricefile):\n    '''\n    Cree un informe de acciones a partir de los archivos de datos de cartera y precios.\n    '''\n    # Leer archivos de datos\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Crear los datos del informe\n    report = make_report_data(portfolio, prices)\n\n    # Imprimirlo\n    formatter = tableformat.TableFormatter()\n    print_report(report, formatter)\n</code></pre> <p>Ejecutar este nuevo c\u00f3digo:</p> <pre><code>&gt;&gt;&gt; ================================== RESTART ==================================\n&gt;&gt;&gt; import report\n&gt;&gt;&gt; report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\n... se bloquea ...\n</code></pre> <p>Deber\u00eda bloquearse inmediatamente con una excepci\u00f3n <code>NotImplementedError</code>. No es muy interesante, pero es exactamente lo que esper\u00e1bamos. Contin\u00fae con la siguiente parte.</p>"},{"location":"04_Classes_objects/02_Inheritance/#ejercicio-46-uso-de-la-herencia-para-producir-resultados-diferentes","title":"Ejercicio 4.6: Uso de la herencia para producir resultados diferentes","text":"<p>La clase <code>TableFormatter</code> que defini\u00f3 en la parte (a) est\u00e1 pensada para extenderse mediante herencia. De hecho, esa es la idea. Para ilustrarlo, defina una clase <code>TextTableFormatter</code> de la siguiente manera:</p> <pre><code># tableformat.py\n...\nclass TextTableFormatter(TableFormatter):\n    '''\n    Emite una tabla en formato de texto simple\n    '''\n    def headings(self, headers):\n        for h in headers:\n              print(f'{h:&gt;10s}', end=' ')\n        print()\n        print(('-'*10 + ' ')*len(headers))\n\n    def row(self, rowdata):\n        for d in rowdata:\n            print(f'{d:&gt;10s}', end=' ')\n        print()\n</code></pre> <p>Modifique la funci\u00f3n <code>portfolio_report()</code> de esta manera y pru\u00e9bela:</p> <pre><code># report.py\n...\ndef portfolio_report(portfoliofile, pricefile):\n    '''\n    Genere un informe de acciones a partir de los archivos de datos de cartera y precios.\n    '''\n    # Leer archivos de datos\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Crear los datos del informe\n    report = make_report_data(portfolio, prices)\n\n    # Imprimirlo\n    formatter = tableformat.TextTableFormatter()\n    print_report(report, formatter)\n</code></pre> <p>Esto deber\u00eda producir el mismo resultado que antes:</p> <pre><code>&gt;&gt;&gt; ================================ RESTART ================================\n&gt;&gt;&gt; import report\n&gt;&gt;&gt; report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n&gt;&gt;&gt;\n</code></pre> <p>Sin embargo, cambiemos la salida por otra cosa. Definamos una nueva clase <code>CSVTableFormatter</code> que produzca una salida en formato CSV:</p> <pre><code># tableformat.py\n...\nclass CSVTableFormatter(TableFormatter):\n    '''\n    Datos de cartera de salida en formato CSV.\n    '''\n    def headings(self, headers):\n    print(','.join(headers))\n\n    def row(self, rowdata):\n    print(','.join(rowdata))\n</code></pre> <p>Modifique su programa principal de la siguiente manera:</p> <pre><code>def portfolio_report(portfoliofile, pricefile):\n    '''\n    Genere un informe de acciones a partir de los archivos de datos de cartera y precios. \n    '''\n    # Leer archivos de datos\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Crear los datos del informe\n    report = make_report_data(portfolio, prices)\n\n    # Imprimirlo\n    formatter = tableformat.CSVTableFormatter()\n    print_report(report, formatter)\n</code></pre> <p>Ahora deber\u00eda ver una salida CSV como esta:</p> <pre><code>&gt;&gt;&gt; ================================ RESTART ================================\n&gt;&gt;&gt; import report\n&gt;&gt;&gt; report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\nName,Shares,Price,Change\nAA,100,9.22,-22.98\nIBM,50,106.28,15.18\nCAT,150,35.46,-47.98\nMSFT,200,20.89,-30.34\nGE,95,13.48,-26.89\nMSFT,50,20.89,-44.21\nIBM,100,106.28,35.84\n</code></pre> <p>Usando una idea similar, defina una clase <code>HTMLTableFormatter</code> que produzca una tabla con lo siguiente salida:</p> <pre><code>&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Shares&lt;/th&gt;&lt;th&gt;Price&lt;/th&gt;&lt;th&gt;Change&lt;/th&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;AA&lt;/td&gt;&lt;td&gt;100&lt;/td&gt;&lt;td&gt;9.22&lt;/td&gt;&lt;td&gt;-22.98&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;IBM&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;106.28&lt;/td&gt;&lt;td&gt;15.18&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;CAT&lt;/td&gt;&lt;td&gt;150&lt;/td&gt;&lt;td&gt;35.46&lt;/td&gt;&lt;td&gt;-47.98&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;MSFT&lt;/td&gt;&lt;td&gt;200&lt;/td&gt;&lt;td&gt;20.89&lt;/td&gt;&lt;td&gt;-30.34&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;GE&lt;/td&gt;&lt;td&gt;95&lt;/td&gt;&lt;td&gt;13.48&lt;/td&gt;&lt;td&gt;-26.89&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;MSFT&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;20.89&lt;/td&gt;&lt;td&gt;-44.21&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;IBM&lt;/td&gt;&lt;td&gt;100&lt;/td&gt;&lt;td&gt;106.28&lt;/td&gt;&lt;td&gt;35.84&lt;/td&gt;&lt;/tr&gt;\n</code></pre> <p>Pruebe Su c\u00f3digo modificando el programa principal para crear un objeto <code>HTMLTableFormatter</code> en lugar de un objeto <code>CSVTableFormatter</code>.</p>"},{"location":"04_Classes_objects/02_Inheritance/#ejercicio-47-polimorfismo-en-accion","title":"Ejercicio 4.7: Polimorfismo en acci\u00f3n","text":"<p>Una caracter\u00edstica importante de la programaci\u00f3n orientada a objetos es que puede conectar un objeto a un programa y funcionar\u00e1 sin tener que cambiar nada del c\u00f3digo existente. Por ejemplo, si escribi\u00f3 un programa que esperaba utilizar un objeto <code>TableFormatter</code>, funcionar\u00eda sin importar qu\u00e9 tipo de <code>TableFormatter</code> le haya asignado. Este comportamiento a veces se denomina \"polimorfismo\".</p> <p>Un problema potencial es averiguar c\u00f3mo permitir que un usuario elija el formateador que desea. El uso directo de los nombres de clase como <code>TextTableFormatter</code> suele ser molesto. Por lo tanto, puede considerar un enfoque simplificado. Tal vez puedas incorporar una declaraci\u00f3n <code>if-</code> en el c\u00f3digo de esta manera:</p> <pre><code>def portfolio_report(portfoliofile, pricefile, fmt='txt'):\n    '''\n    Crea un informe de acciones a partir de los archivos de datos de cartera y precios. '''\n    # Leer archivos de datos\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Crear los datos del informe\n    report = make_report_data(portfolio, prices)\n\n    # Imprimirlo\n    if fmt == 'txt':\n        formatter = tableformat.TextTableFormatter()\n    elif fmt == 'csv':\n        formatter = tableformat.CSVTableFormatter()\n    elif fmt == 'html':\n        formatter = tableformat.HTMLTableFormatter()\n    else:\n        raise RuntimeError(f'Formato deconocido {fmt}')\n    print_report(report, formatter)\n</code></pre> <p>En este c\u00f3digo, el usuario especifica un nombre simplificado como <code>'txt'</code> o <code>'csv'</code> para elegir un formato. Sin embargo, \u00bfes la mejor idea poner una declaraci\u00f3n <code>if</code> grande en la funci\u00f3n <code>portfolio_report()</code>? Tal vez sea mejor mover ese c\u00f3digo a una funci\u00f3n de prop\u00f3sito general en otro lugar.</p> <p>En el archivo <code>tableformat.py</code>, agregue una funci\u00f3n <code>create_formatter(name)</code> que permita a un usuario crear un formateador dado un nombre de salida como <code>'txt'</code>, <code>'csv'</code> o <code>'html'</code>. Modifique <code>portfolio_report()</code> para que se vea as\u00ed:</p> <pre><code>def portfolio_report(portfoliofile, pricefile, fmt='txt'):\n    '''\n    Cree un informe de acciones dados los archivos de datos de cartera y precios.\n    '''\n    # Leer archivos de datos\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Crear los datos del informe\n    report = make_report_data(portfolio, prices)\n\n    # Imprimirlo\n    formatter = tableformat.create_formatter(fmt)\n    print_report(report, formatter)\n</code></pre> <p>Intente llamar a la funci\u00f3n con diferentes formatos para asegurarse de que est\u00e9 funcionando.</p>"},{"location":"04_Classes_objects/02_Inheritance/#ejercicio-48-uniendo-todo","title":"Ejercicio 4.8: Uniendo todo","text":"<p>Modifique el programa <code>report.py</code> para que la funci\u00f3n <code>portfolio_report()</code> acepte un argumento opcional que especifique el formato de salida. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv', 'txt')\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n&gt;&gt;&gt;\n</code></pre> <p>Modifique el programa principal para que se pueda proporcionar un formato en la l\u00ednea de comandos:</p> <pre><code>bash % python3 report.py Data/portfolio.csv Data/prices.csv csv\nName,Shares,Price,Change\nAA,100,9.22,-22.98\nIBM,50,106.28,15.18\nCAT,150,35.46,-47.98\nMSFT,200,20.89,-30.34\nGE,95,13.48,-26.89\nMSFT,50,20.89,-44.21\nIBM,100,106.28,35.84\nbash %\n</code></pre>"},{"location":"04_Classes_objects/02_Inheritance/#discusion","title":"Discusi\u00f3n","text":"<p>Escribir c\u00f3digo extensible es uno de los usos m\u00e1s comunes de la herencia en bibliotecas y marcos. Por ejemplo, un marco puede indicarle que defina su propio objeto que hereda de una clase base proporcionada. Luego se le indica que complete varios m\u00e9todos que implementan varios fragmentos de funcionalidad.</p> <p>Otro concepto un poco m\u00e1s profundo es la idea de \"ser due\u00f1o de sus abstracciones\". En los ejercicios, definimos nuestra propia clase para formatear una tabla. Puede mirar su c\u00f3digo y decirse a s\u00ed mismo \"\u00a1Deber\u00eda usar una biblioteca de formato o algo que alguien m\u00e1s ya haya creado!\" No, debe usar TANTO su clase como una biblioteca. Usar su propia clase promueve el acoplamiento estrecho (loose coupling) [https://en.wikipedia.org/wiki/Loose_coupling] es m\u00e1s independiente y es m\u00e1s flexible. Mientras su aplicaci\u00f3n use la interfaz de programaci\u00f3n de su clase, puede cambiar la implementaci\u00f3n interna para que funcione de la forma que desee. Puede escribir c\u00f3digo totalmente personalizado. Puede usar el paquete de alguien. Puede cambiar un paquete de terceros por un paquete diferente cuando encuentre uno mejor. No importa: nada del c\u00f3digo de su aplicaci\u00f3n se romper\u00e1 mientras conserve la interfaz. Esa es una idea poderosa y es una de las razones por las que podr\u00eda considerar la herencia para algo como esto.</p> <p>Dicho esto, dise\u00f1ar programas orientados a objetos puede ser extremadamente dif\u00edcil. Para obtener m\u00e1s informaci\u00f3n, probablemente deber\u00eda buscar libros sobre el tema de los patrones de dise\u00f1o (aunque comprender lo que sucedi\u00f3 en este ejercicio lo llevar\u00e1 bastante lejos en t\u00e9rminos de usar objetos de una manera pr\u00e1ctica y \u00fatil).</p> <p>Contenido | Anterior (4.1 Clases) | Pr\u00f3ximo (4.3 M\u00e9todos especiales)</p>"},{"location":"04_Classes_objects/03_Special_methods/","title":"03_Special_methods","text":"<p>Contenido | Anterior (4.2 Herencia) | Pr\u00f3ximo (4.4 Definici\u00f3n de excepciones)</p>"},{"location":"04_Classes_objects/03_Special_methods/#43-metodos-especiales","title":"4.3 M\u00e9todos especiales","text":"<p>Varias partes del comportamiento de Python se pueden personalizar mediante m\u00e9todos especiales o los llamados \"m\u00e1gicos\". Esta secci\u00f3n presenta esa idea. Adem\u00e1s, se analizan el acceso din\u00e1mico a los atributos y los m\u00e9todos enlazados.</p>"},{"location":"04_Classes_objects/03_Special_methods/#introduccion","title":"Introducci\u00f3n","text":"<p>Las clases pueden definir m\u00e9todos especiales. Estos tienen un significado especial para el int\u00e9rprete de Python. Siempre est\u00e1n precedidos y seguidos por <code>__</code>. Por ejemplo, <code>__init__</code>.</p> <pre><code>class Stock(object):\n    def __init__(self):\n    ...\n\n    def __repr__(self):\n...\n</code></pre> <p>Existen docenas de m\u00e9todos especiales, pero solo veremos algunos ejemplos espec\u00edficos.</p>"},{"location":"04_Classes_objects/03_Special_methods/#metodos-especiales-para-conversiones-de-strins","title":"M\u00e9todos especiales para conversiones de strins","text":"<p>Los objetos tienen dos representaciones de cadena.</p> <pre><code>&gt;&gt;&gt; from datetime import date\n&gt;&gt;&gt; d = date(2012, 12, 21)\n&gt;&gt;&gt; print(d)\n2012-12-21\n&gt;&gt;&gt; d\ndatetime.date(2012, 12, 21)\n&gt;&gt;&gt;\n</code></pre> <p>La funci\u00f3n <code>str()</code> se utiliza para crear una salida imprimible agradable:</p> <pre><code>&gt;&gt;&gt; str(d)\n'2012-12-21'\n&gt;&gt;&gt;\n</code></pre> <p>La funci\u00f3n <code>repr()</code> se utiliza para crear una representaci\u00f3n m\u00e1s detallada para los programadores.</p> <pre><code>&gt;&gt;&gt; repr(d)\n'datetime.date(2012, 12, 21)'\n&gt;&gt;&gt;\n</code></pre> <p>Estas funciones, <code>str()</code> y <code>repr()</code>, utilizan un par de m\u00e9todos especiales en la clase para producir la cadena que se mostrar\u00e1.</p> <pre><code>class Date(object):\n    def __init__(self, year, month, day):\n        self.year = year\n        self.month = month\n        self.day = day\n\n    # Se utiliza con `str()`\n    def __str__(self):\n        return f'{self.year}-{self.month}-{self.day}'\n\n    # Se utiliza con `repr()`\n    def __repr__(self):\n        return f'Date({self.year},{self.month},{self.day})'\n</code></pre> <p>Nota: La convenci\u00f3n para <code>__repr__()</code> es devolver una cadena que, cuando se ingresa en <code>eval()</code>, recrear\u00e1 el objeto subyacente. Si esto no es posible, se utiliza alg\u00fan tipo de representaci\u00f3n de f\u00e1cil lectura en su lugar.</p>"},{"location":"04_Classes_objects/03_Special_methods/#metodos-especiales-para-matematicas","title":"M\u00e9todos especiales para matem\u00e1ticas","text":"<p>Los operadores matem\u00e1ticos implican llamadas a los siguientes m\u00e9todos.</p> <pre><code>a + b       a.__add__(b)\na - b       a.__sub__(b)\na * b       a.__mul__(b)\na / b       a.__truediv__(b)\na // b      a.__floordiv__(b)\na % b       a.__mod__(b)\na &lt;&lt; b      a.__lshift__(b)\na &gt;&gt; b      a.__rshift__(b)\na &amp; b       a.__and__(b)\na | b       a.__or__(b)\na ^ b       a.__xor__(b)\na ** b      a.__pow__(b)\n-a          a.__neg__()\n~a          a.__invert__()\nabs(a)      a.__abs__()\n</code></pre>"},{"location":"04_Classes_objects/03_Special_methods/#metodos-especiales-para-el-acceso-a-elementos","title":"M\u00e9todos especiales para el acceso a elementos","text":"<p>Estos son los m\u00e9todos para implementar contenedores.</p> <pre><code>len(x)      x.__len__()\nx[a]        x.__getitem__(a)\nx[a] = v    x.__setitem__(a,v)\ndel x[a]    x.__delitem__(a)\n</code></pre> <p>Puedes usarlos en tus clases.</p> <pre><code>class Sequence:\n    def __len__(self):\n        ...\n    def __getitem__(self,a):\n        ...\n    def __setitem__(self,a,v):\n        ...\n    def __delitem__(self,a):\n        ...\n</code></pre>"},{"location":"04_Classes_objects/03_Special_methods/#invocacion-al-metodo","title":"Invocaci\u00f3n al m\u00e9todo","text":"<p>Invocar un m\u00e9todo es un proceso de dos pasos.</p> <ol> <li>B\u00fasqueda: el operador <code>.</code></li> <li>Invocaci\u00f3n al m\u00e9todo: el operador <code>()</code></li> </ol> <pre><code>&gt;&gt;&gt; s = Stock('GOOG',100,490.10)\n&gt;&gt;&gt; c = s.cost  # Busqueda\n&gt;&gt;&gt; c\n&lt;bound method Stock.cost of &lt;Stock object at 0x590d0&gt;&gt;\n&gt;&gt;&gt; c()         # Invocando al m\u00e9todo\n49010.0\n&gt;&gt;&gt;\n</code></pre>"},{"location":"04_Classes_objects/03_Special_methods/#metodos-enlazados","title":"M\u00e9todos enlazados","text":"<p>Un m\u00e9todo que a\u00fan no ha sido invocado por el operador de llamada de funci\u00f3n <code>()</code> se conoce como m\u00e9todo enlazado. Opera en la instancia en la que se origin\u00f3.</p> <pre><code>&gt;&gt;&gt; s = Stock('GOOG', 100, 490.10)\n&gt;&gt;&gt; s\n&lt;Stock object at 0x590d0&gt;\n&gt;&gt;&gt; c = s.cost\n&gt;&gt;&gt; c\n&lt;bound method Stock.cost of &lt;Stock object at 0x590d0&gt;&gt;\n&gt;&gt;&gt; c()\n49010.0\n&gt;&gt;&gt;\n</code></pre> <p>Los m\u00e9todos enlazados suelen ser una fuente de errores no obvios causados \u200b\u200bpor descuido. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; s = Stock('GOOG', 100, 490.10)\n&gt;&gt;&gt; print('Cost : %0.2f' % s.cost)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: float argument required\n&gt;&gt;&gt;\n</code></pre> <p>O un comportamiento tortuoso que es dif\u00edcil de depurar.</p> <pre><code>f = open(filename, 'w')\n...\nf.close # Ups, no hice nada en absoluto. `f` sigue abierto.\n</code></pre> <p>En ambos casos, el error se debe a que se olvid\u00f3 incluir los par\u00e9ntesis finales. Por ejemplo, <code>s.cost()</code> o <code>f.close()</code>.</p>"},{"location":"04_Classes_objects/03_Special_methods/#acceso-a-atributos","title":"Acceso a atributos","text":"<p>Existe una forma alternativa de acceder, manipular y administrar atributos.</p> <pre><code>getattr(obj, 'name')          # Igual que obj.name\nsetattr(obj, 'name', value)   # Igual que obj.name = value\ndelattr(obj, 'name')          # Igual que del obj.name\nhasattr(obj, 'name')          # Comprueba si el atributo existe\n</code></pre> <p>Ejemplo:</p> <pre><code>if hasattr(obj, 'x'):\n    x = getattr(obj, 'x'):\nelse:\n    x = None\n</code></pre> <p>*Nota: <code>getattr()</code> tambi\u00e9n tiene un valor predeterminado \u00fatil <code>default</code>.</p> <pre><code>x = getattr(obj, 'x', None)\n</code></pre>"},{"location":"04_Classes_objects/03_Special_methods/#ejercicios","title":"Ejercicios","text":""},{"location":"04_Classes_objects/03_Special_methods/#ejercicio-49-mejor-salida-para-imprimir-objetos","title":"Ejercicio 4.9: Mejor salida para imprimir objetos","text":"<p>Modifique el objeto <code>Stock</code> que defini\u00f3 en <code>stock.py</code> para que el m\u00e9todo <code>__repr__()</code> produzca una salida m\u00e1s \u00fatil. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; goog = Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; goog\nStock('GOOG', 100, 490.1)\n&gt;&gt;&gt;\n</code></pre> <p>Observa lo que sucede cuando lees una cartera de acciones y visualizas la lista resultante despu\u00e9s de haber realizado estos cambios. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; portfolio = report.read_portfolio('Data/portfolio.csv')\n&gt;&gt;&gt; portfolio\n... observa cu\u00e1l es el resultado...\n&gt;&gt;&gt;\n</code></pre>"},{"location":"04_Classes_objects/03_Special_methods/#ejercicio-410-un-ejemplo-de-uso-de-getattr","title":"Ejercicio 4.10: Un ejemplo de uso de getattr()","text":"<p><code>getattr()</code> es un mecanismo alternativo para leer atributos. Se puede utilizar para escribir c\u00f3digo extremadamente flexible. Para comenzar, pruebe este ejemplo:</p> <pre><code>&gt;&gt;&gt; import stock\n&gt;&gt;&gt; s = stock.Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; columns = ['name', 'shares']\n&gt;&gt;&gt; for colname in columns:\n        print(colname, '=', getattr(s, colname))\n\nname = GOOG\nshares = 100\n&gt;&gt;&gt;\n</code></pre> <p>Observe con atenci\u00f3n que los datos de salida est\u00e1n determinados completamente por los nombres de los atributos que se enumeran en la variable <code>columnas</code>.</p> <p>En el archivo <code>tableformat.py</code>, tome esta idea y ampl\u00edela a una funci\u00f3n generalizada <code>print_table()</code> que imprima una tabla que muestre los atributos especificados por el usuario de una lista de objetos arbitrarios. Al igual que con la funci\u00f3n <code>print_report()</code> anterior, <code>print_table()</code> tambi\u00e9n debe aceptar una instancia de <code>TableFormatter</code> para controlar el formato de salida. As\u00ed es como deber\u00eda funcionar:</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; portfolio = report.read_portfolio('Data/portfolio.csv')\n&gt;&gt;&gt; from tableformat import create_formatter, print_table\n&gt;&gt;&gt; formatter = create_formatter('txt')\n&gt;&gt;&gt; print_table(portfolio, ['name','shares'], formatter)\n      name     shares\n---------- ----------\n        AA        100\n       IBM         50\n       CAT        150\n      MSFT        200\n        GE         95\n      MSFT         50\n       IBM        100\n\n&gt;&gt;&gt; print_table(portfolio, ['name','shares','price'], formatter)\n      name     shares      price\n---------- ---------- ----------\n        AA        100       32.2\n       IBM         50       91.1\n       CAT        150      83.44\n      MSFT        200      51.23\n        GE         95      40.37\n      MSFT         50       65.1\n       IBM        100      70.44\n&gt;&gt;&gt;\n</code></pre> <p>Contenido | Anterior (4.2 Herencia) | Pr\u00f3ximo (4.4 Definici\u00f3n de una nueva excepci\u00f3n)</p>"},{"location":"04_Classes_objects/04_Defining_exceptions/","title":"04_Defining_exceptions","text":"<p>Contenido | Anterior (4.3 M\u00e9todos especiales) | Pr\u00f3ximo (5. Funcionamiento interno de los objetos de Python)</p>"},{"location":"04_Classes_objects/04_Defining_exceptions/#44-definicion-de-excepciones","title":"4.4 Definici\u00f3n de excepciones","text":"<p>Las excepciones definidas por el usuario se definen por clases.</p> <pre><code>class NetworkError(Exception):\n    pass\n</code></pre> <p>Las excepciones siempre heredan de <code>Exception</code>.</p> <p>Normalmente son clases vac\u00edas. Utilice <code>pass</code> para el cuerpo. Tambi\u00e9n puede crear una jerarqu\u00eda de sus excepciones.</p> <pre><code>class AuthenticationError(NetworkError):\n    pass\n\nclass ProtocolError(NetworkError):\n    pass\n</code></pre>"},{"location":"04_Classes_objects/04_Defining_exceptions/#ejercicios","title":"Ejercicios","text":""},{"location":"04_Classes_objects/04_Defining_exceptions/#ejercicio-411-definicion-de-una-excepcion-personalizada","title":"Ejercicio 4.11: Definici\u00f3n de una excepci\u00f3n personalizada","text":"<p>A menudo, es una buena pr\u00e1ctica que las bibliotecas definan sus propias excepciones.</p> <p>Esto facilita la distinci\u00f3n entre las excepciones de Python generadas en respuesta a errores de programaci\u00f3n comunes y las excepciones generadas intencionalmente por una biblioteca para se\u00f1alar un problema de uso espec\u00edfico.</p> <p>Modifique la funci\u00f3n <code>create_formatter()</code> del \u00faltimo ejercicio para que genere una excepci\u00f3n <code>FormatError</code> personalizada cuando el usuario proporcione un nombre de formato incorrecto.</p> <p>Por ejemplo:</p> <pre><code>&gt;&gt;&gt; from tableformat import create_formatter\n&gt;&gt;&gt; formatter = create_formatter('xls')\nTraceback (most recent call last):\n  File \"&lt;python-input-1&gt;\", line 1, in &lt;module&gt;\n    formatter = create_formatter('xls')\n  File \"C:\\Users\\Mario\\practical-python\\Work\\tableformat.py\", line 30, in create_formatter\n    raise FormatError(f'Unknown table format {name}')\ntableformat.FormatError: Unknown table format xls\n&gt;&gt;&gt;\n</code></pre> <p>Contenido | Anterior (4.3 M\u00e9todos especiales) | Pr\u00f3ximo (5. Funcionamiento interno de los objetos de Python)</p>"},{"location":"05_Object_model/00_Overview/","title":"00_Overview","text":"<p>Contenido | Anterior (4 Clases y Objetos) | Pr\u00f3ximo (6 Generadores)</p>"},{"location":"05_Object_model/00_Overview/#5-funcionamiento-interno-de-los-objetos-de-python","title":"5. Funcionamiento interno de los objetos de Python","text":"<p>Esta secci\u00f3n cubre algunos de los funcionamientos internos de los objetos de Python. Los programadores que vienen de otros lenguajes de programaci\u00f3n a menudo encuentran que la noci\u00f3n de clases de Python carece de caracter\u00edsticas. Por ejemplo, no hay noci\u00f3n de control de acceso (p. ej., privado, protegido), todo el argumento <code>self</code> se siente extra\u00f1o y, francamente, trabajar con objetos a veces se siente como un \"vale para todos\". Tal vez eso sea cierto, pero descubriremos c\u00f3mo funciona todo, as\u00ed como algunos modismos de programaci\u00f3n comunes para encapsular mejor los aspectos internos de los objetos.</p> <p>No es necesario preocuparse por los detalles internos para ser productivo. Sin embargo, la mayor\u00eda de los programadores de Python tienen un conocimiento b\u00e1sico de c\u00f3mo funcionan las clases. Por eso lo cubriremos.</p> <ul> <li>5.1 Revisi\u00f3n de diccionarios (Implementaci\u00f3n de objetos)</li> <li>5.2 T\u00e9cnicas de encapsulaci\u00f3n</li> </ul> <p>Contenido | Anterior (4 Clases y Objetos) | Pr\u00f3ximo (6 Generadores)</p>"},{"location":"05_Object_model/01_Dicts_revisited/","title":"01_Dicts_revisited","text":"<p>Contenido | Anterior (4.4 Definici\u00f3n de excepciones) | Pr\u00f3ximo (5.2 T\u00e9cnicas de encapsulaci\u00f3n)</p>"},{"location":"05_Object_model/01_Dicts_revisited/#51-revision-de-diccionarios","title":"5.1 Revisi\u00f3n de diccionarios","text":"<p>El sistema de objetos de Python se basa en gran medida en una implementaci\u00f3n que involucra diccionarios. Esta secci\u00f3n trata sobre eso.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#diccionarios-revisitados","title":"Diccionarios revisitados","text":"<p>Recuerde que un diccionario es una colecci\u00f3n de valores nombrados.</p> <pre><code>stock = {\n    'name' : 'GOOG',\n    'shares' : 100,\n    'price' : 490.1\n}\n</code></pre> <p>Los diccionarios se usan com\u00fanmente para estructuras de datos simples. Sin embargo, se usan para partes cr\u00edticas del int\u00e9rprete y pueden ser el tipo de datos m\u00e1s importante en Python.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#diccionarios-y-modulos","title":"Diccionarios y m\u00f3dulos","text":"<p>Dentro de un m\u00f3dulo, un diccionario contiene todas las variables y funciones globales.</p> <pre><code># foo.py\n\nx = 42\ndef bar():\n    ...\n\ndef spam():\n    ...\n</code></pre> <p>Si inspecciona <code>foo.__dict__</code> o <code>globals()</code>, ver\u00e1 el diccionario.</p> <pre><code>{\n    'x' : 42,\n    'bar' : &lt;function bar&gt;,\n    'spam' : &lt;function spam&gt;\n}\n</code></pre>"},{"location":"05_Object_model/01_Dicts_revisited/#diccionarios-y-objetos","title":"Diccionarios y objetos","text":"<p>Los objetos definidos por el usuario tambi\u00e9n usan diccionarios tanto para los datos de instancia como para las clases. De hecho, todo el sistema de objetos es principalmente una capa adicional que se coloca sobre los diccionarios.</p> <p>Un diccionario contiene los datos de instancia, <code>__dict__</code>.</p> <pre><code>&gt;&gt;&gt; s = Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; s.__dict__\n{'name' : 'GOOG', 'shares' : 100, 'price': 490.1 }\n</code></pre> <p>Este diccionario (y la instancia) se rellenan al asignar a <code>self</code>.</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n</code></pre> <p>Los datos de la instancia, <code>self.__dict__</code>, tienen este aspecto:</p> <pre><code>{\n    'name': 'GOOG',\n    'shares': 100,\n    'price': 490.1\n}\n</code></pre> <p>Cada instancia obtiene su propio diccionario privado.</p> <pre><code>s = Stock('GOOG', 100, 490.1) # {'name' : 'GOOG','shares' : 100, 'price': 490.1 }\nt = Stock('AAPL', 50, 123.45) # {'name' : 'AAPL','shares' : 50, 'price': 123.45 }\n</code></pre> <p>Si creaste 100 instancias de alguna clase, hay 100 diccionarios que contienen datos.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#miembros-de-clase","title":"Miembros de clase","text":"<p>Un diccionario separado tambi\u00e9n contiene los m\u00e9todos.</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n\n    def cost(self):\n        return self.shares * self.price\n\n    def sell(self, nshares):\n        self.shares -= nshares\n</code></pre> <p>El diccionario est\u00e1 en <code>Stock.__dict__</code>.</p> <pre><code>{\n    'cost': &lt;function&gt;,\n    'sell': &lt;function&gt;,\n    '__init__': &lt;function&gt;\n}\n</code></pre>"},{"location":"05_Object_model/01_Dicts_revisited/#instancias-y-clases","title":"Instancias y clases","text":"<p>Las instancias y las clases est\u00e1n vinculadas entre s\u00ed. El atributo <code>__class__</code> hace referencia a la clase.</p> <pre><code>&gt;&gt;&gt; s = Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; s.__dict__\n{ 'name': 'GOOG', 'shares': 100, 'price': 490.1 }\n&gt;&gt;&gt; s.__class__\n&lt;class '__main__.Stock'&gt;\n&gt;&gt;&gt;\n</code></pre> <p>El diccionario de instancias contiene datos exclusivos de cada instancia, mientras que el diccionario de clases contiene datos compartidos colectivamente por todas las instancias.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#acceso-a-atributos","title":"Acceso a atributos","text":"<p>Cuando trabaja con objetos, accede a los datos y m\u00e9todos utilizando el operador <code>.</code>.</p> <pre><code>x = obj.name            # Obtenci\u00f3n\nobj.name = value        # Configuraci\u00f3n\ndel obj.name            # Eliminaci\u00f3n\n</code></pre> <p>Estas operaciones est\u00e1n directamente vinculadas a los diccionarios que se encuentran debajo de las s\u00e1banas.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#modificacion-de-instancias","title":"Modificaci\u00f3n de instancias","text":"<p>Las operaciones que modifican un objeto actualizan el diccionario subyacente.</p> <pre><code>&gt;&gt;&gt; s = Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; s.__dict__\n{ 'nombre': 'GOOG', 'acciones': 100, 'precio': 490.1 }\n&gt;&gt;&gt; s.shares = 50 # Configuraci\u00f3n\n&gt;&gt;&gt; s.date = '6/7/2007' # Configuraci\u00f3n\n&gt;&gt;&gt; s.__dict__\n{ 'nombre': 'GOOG', 'acciones': 50, 'precio': 490.1, 'fecha': '6/7/2007' }\n&gt;&gt;&gt; del s.shares # Eliminando\n&gt;&gt;&gt; s.__dict__\n{ 'nombre': 'GOOG', 'precio': 490.1, 'fecha': '6/7/2007' }\n&gt;&gt;&gt;\n</code></pre>"},{"location":"05_Object_model/01_Dicts_revisited/#lectura-de-atributos","title":"Lectura de atributos","text":"<p>Supongamos que lee un atributo en una instancia.</p> <pre><code>x = obj.name\n</code></pre> <p>El atributo puede existir en dos lugares:</p> <ul> <li>Diccionario de instancia local.</li> <li>Diccionario de clase.</li> </ul> <p>Se deben verificar ambos diccionarios. Primero, verifique en <code>__dict__</code> local. Si no se encuentra, busque en <code>__dict__</code> de la clase hasta <code>__class__</code>.</p> <pre><code>&gt;&gt;&gt; s = Stock(...)\n&gt;&gt;&gt; s.name\n'GOOG'\n&gt;&gt;&gt; s.cost()\n49010.0\n&gt;&gt;&gt;\n</code></pre> <p>Este esquema de b\u00fasqueda es la forma en que los miembros de una clase se comparten entre todas las instancias.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#como-funciona-la-herencia","title":"C\u00f3mo funciona la herencia","text":"<p>Las clases pueden heredar de otras clases.</p> <pre><code>class A(B, C):\n    ...\n</code></pre> <p>Las clases base se almacenan en una tupla en cada clase.</p> <pre><code>&gt;&gt;&gt; A.__bases__\n(&lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;)\n&gt;&gt;&gt;\n</code></pre> <p>Esto proporciona un enlace a las clases padre.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#lectura-de-atributos-con-herencia","title":"Lectura de atributos con herencia","text":"<p>L\u00f3gicamente, el proceso para encontrar un atributo es el siguiente. Primero, verifique en <code>__dict__</code> local. Si no lo encuentra, busque en <code>__dict__</code> de la clase. Si no lo encuentra en la clase, busque en las clases base a trav\u00e9s de <code>__bases__</code>. Sin embargo, hay algunos aspectos sutiles de esto que se analizan a continuaci\u00f3n.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#lectura-de-atributos-con-herencia-unica","title":"Lectura de atributos con herencia \u00fanica","text":"<p>En las jerarqu\u00edas de herencia, los atributos se encuentran recorriendo el \u00e1rbol de herencia en orden.</p> <pre><code>class A: pass\nclass B(A): pass\nclass C(A): pass\nclass D(B): pass\nclass E(D): pass\n</code></pre> <p>Con herencia simple, hay una \u00fanica ruta hacia la cima. Se detiene en la primera coincidencia.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#orden-de-resolucion-de-metodos-o-mro","title":"Orden de resoluci\u00f3n de m\u00e9todos o MRO","text":"<p>Python precalcula una cadena de herencia y la almacena en el atributo MRO de la clase. Puede verla.</p> <pre><code>&gt;&gt;&gt; E.__mro__\n(&lt;class '__main__.E'&gt;, &lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;)\n&gt;&gt;&gt;\n</code></pre> <p>Esta cadena se denomina Orden de resoluci\u00f3n de m\u00e9todos. Para encontrar un atributo, Python recorre el MRO en orden. La primera coincidencia gana.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#mro-en-herencia-multiple","title":"MRO en herencia m\u00faltiple","text":"<p>Con la herencia m\u00faltiple, no hay una \u00fanica ruta hacia la cima. Veamos un ejemplo.</p> <pre><code>class A: pass\nclass B: pass\nclass C(A, B): pass\nclass D(B): pass\nclass E(C, D): pass\n</code></pre> <p>\u00bfQu\u00e9 sucede cuando se accede a un atributo?</p> <pre><code>e = E()\ne.attr\n</code></pre> <p>Se lleva a cabo un proceso de b\u00fasqueda de atributos, pero \u00bfcu\u00e1l es el orden? Eso es un problema.</p> <p>Python utiliza herencia m\u00faltiple cooperativa que obedece algunas reglas sobre el orden de las clases.</p> <ul> <li>Los hijos siempre se comprueban antes que los padres</li> <li>Los padres (si son m\u00faltiples) siempre se comprueban en el orden indicado.</li> </ul> <p>El MRO se calcula ordenando todas las clases en una jerarqu\u00eda de acuerdo con esas reglas.</p> <pre><code>&gt;&gt;&gt; E.__mro__\n(\n&lt;class 'E'&gt;,\n&lt;class 'C'&gt;,\n&lt;class 'A'&gt;,\n&lt;class 'D'&gt;,\n&lt;class 'B'&gt;,\n&lt;class 'object'&gt;)\n&gt;&gt;&gt;\n</code></pre> <p>El algoritmo subyacente se llama \"Algoritmo de linealizaci\u00f3n C3\". Los detalles precisos no son importantes siempre que recuerde que una jerarqu\u00eda de clases obedece las mismas reglas de ordenamiento que podr\u00eda seguir si su casa se incendiara y tuviera que evacuar: primero los ni\u00f1os, luego los padres.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#una-reutilizacion-de-codigo-extrana-que-implica-herencia-multiple","title":"Una reutilizaci\u00f3n de c\u00f3digo extra\u00f1a (que implica herencia m\u00faltiple)","text":"<p>Considere dos objetos completamente no relacionados:</p> <pre><code>class Dog:    # Perro\n    def noise(self): # ruido\n        return 'Bark'   # Ladrar\n\n    def chase(self): # caza\n        return 'Chasing!'   # Cazando\n\nclass LoudDog(Dog): # Perro ruidoso\n    def noise(self):\n        # C\u00f3digo com\u00fan con LoudBike (abajo)\n        return super().noise().upper()\n</code></pre> <p>Y</p> <pre><code>class Bike:\n    def noise(self):\n        return 'On Your Left'\n\n    def pedal(self):\n        return 'Pedaling!'\n\nclass LoudBike(Bike):\n    def noise(self):\n        # C\u00f3digo com\u00fan con LoudDog (arriba)\n        return super().noise().upper()\n</code></pre> <p>Hay un c\u00f3digo com\u00fan en la implementaci\u00f3n de <code>LoudDog.noise()</code> y <code>LoudBike.noise()</code>. De hecho, el c\u00f3digo es exactamente el mismo. Naturalmente, c\u00f3digo como ese est\u00e1 destinado a atraer a los ingenieros de software.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#el-patron-mixin","title":"El patr\u00f3n \"Mixin\"","text":"<p>El patr\u00f3n Mixin es una clase con un fragmento de c\u00f3digo.</p> <pre><code>class Loud:\n    def noise(self):\n        return super().noise().upper()\n</code></pre> <p>Esta clase no se puede usar de forma aislada. Se mezcla con otras clases a trav\u00e9s de la herencia.</p> <pre><code>class LoudDog(Loud, Dog):\n    pass\n\nclass LoudBike(Loud, Bike):\n    pass\n</code></pre> <p>Milagrosamente, la sonoridad ahora se implement\u00f3 solo una vez y se reutiliz\u00f3 en dos clases completamente no relacionadas. Este tipo de truco es uno de los usos principales de la herencia m\u00faltiple en Python.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#por-que-super","title":"Por qu\u00e9 <code>super()</code>","text":"<p>Siempre use <code>super()</code> al anular m\u00e9todos.</p> <pre><code>class Loud:\n    def noise(self):\n        return super().noise().upper()\n</code></pre> <p><code>super()</code> delega a la pr\u00f3xima clase en el MRO.</p> <p>La parte complicada es que no sabe cual es. En particular, no sabe cual es si se utiliza la herencia m\u00faltiple.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#algunas-precauciones","title":"Algunas precauciones","text":"<p>La herencia m\u00faltiple es una herramienta poderosa. Recuerde que el poder conlleva responsabilidad. Los marcos de trabajo y las bibliotecas a veces la utilizan para funciones avanzadas que implican la composici\u00f3n de componentes. Ahora, olv\u00eddese de que vio eso.</p>"},{"location":"05_Object_model/01_Dicts_revisited/#ejercicios","title":"Ejercicios","text":"<p>En la Secci\u00f3n 4, defini\u00f3 una clase <code>Stock</code> que representaba una tenencia de acciones. En este ejercicio, utilizaremos esa clase. Reinicie el int\u00e9rprete y cree algunas instancias:</p> <pre><code>&gt;&gt;&gt; ================================= RESTART ==================================\n&gt;&gt;&gt; from stock import Stock\n&gt;&gt;&gt; goog = Stock('GOOG',100,490.10)\n&gt;&gt;&gt; ibm = Stock('IBM',50, 91.23)\n&gt;&gt;&gt;\n</code></pre>"},{"location":"05_Object_model/01_Dicts_revisited/#ejercicio-51-representacion-de-instancias","title":"Ejercicio 5.1: Representaci\u00f3n de instancias","text":"<p>En el modo interactivo, inspeccione los diccionarios subyacentes de las dos instancias que cre\u00f3:</p> <pre><code>&gt;&gt;&gt; goog.__dict__\n... observe la salida ...\n&gt;&gt;&gt; ibm.__dict__\n... observe la salida ...\n&gt;&gt;&gt;\n</code></pre>"},{"location":"05_Object_model/01_Dicts_revisited/#ejercicio-52-modificacion-de-datos-de-instancia","title":"Ejercicio 5.2: Modificaci\u00f3n de datos de instancia","text":"<p>Intente configurar un nuevo atributo en una de las instancias anteriores:</p> <pre><code>&gt;&gt;&gt; goog.date = '6/11/2007'\n&gt;&gt;&gt; goog.__dict__\n... observe el resultado ...\n&gt;&gt;&gt; ibm.__dict__\n... observe el resultado ...\n&gt;&gt;&gt;\n</code></pre> <p>En el resultado anterior, notar\u00e1 que la instancia <code>goog</code> tiene un atributo <code>date</code> mientras que la instancia <code>ibm</code> no lo tiene. Es importante notar que Python realmente no impone ninguna restricci\u00f3n sobre los atributos. Por ejemplo, los atributos de una instancia no est\u00e1n limitados a los configurados en el m\u00e9todo <code>__init__()</code>.</p> <p>En lugar de establecer un atributo, intente colocar un nuevo valor directamente en el objeto <code>__dict__</code>:</p> <pre><code>&gt;&gt;&gt; goog.__dict__['time'] = '9:45am'\n&gt;&gt;&gt; goog.time\n'9:45am'\n&gt;&gt;&gt;\n</code></pre> <p>Aqu\u00ed, realmente se nota el hecho de que una instancia es solo la parte superior de un diccionario. Nota: se debe enfatizar que la manipulaci\u00f3n directa del diccionario es poco com\u00fan; siempre debe escribir su c\u00f3digo para usar la sintaxis (<code>.</code>).</p>"},{"location":"05_Object_model/01_Dicts_revisited/#ejercicio-53-el-rol-de-las-clases","title":"Ejercicio 5.3: El rol de las clases","text":"<p>Las definiciones que componen una definici\u00f3n de clase son compartidas por todas las instancias de esa clase. Tenga en cuenta que todas las instancias tienen un enlace a su clase asociada:</p> <pre><code>&gt;&gt;&gt; goog.__class__\n... observe la salida ...\n&gt;&gt;&gt; ibm.__class__\n... observe la salida ...\n&gt;&gt;&gt;\n</code></pre> <p>Intente llamar a un m\u00e9todo en las instancias:</p> <pre><code>&gt;&gt;&gt; goog.cost()\n49010.0\n&gt;&gt;&gt; ibm.cost()\n4561.5\n&gt;&gt;&gt;\n</code></pre> <p>Observe que el nombre <code>cost</code> no est\u00e1 definido ni en <code>goog.__dict__</code> ni en <code>ibm.__dict__</code>. En cambio, lo proporciona el diccionario de clases. Pruebe esto:</p> <pre><code>&gt;&gt;&gt; Stock.__dict__['cost']\n... observe la salida...\n&gt;&gt;&gt;\n</code></pre> <p>Intente llamar al m\u00e9todo <code>cost()</code> directamente a trav\u00e9s del diccionario:</p> <pre><code>&gt;&gt;&gt; Stock.__dict__['cost'](goog)\n49010.0\n&gt;&gt;&gt; Stock.__dict__['cost'](ibm)\n4561.5\n&gt;&gt;&gt;\n</code></pre> <p>Observe c\u00f3mo est\u00e1 llamando a la funci\u00f3n definida en la definici\u00f3n de clase y c\u00f3mo el argumento <code>self</code> obtiene la instancia.</p> <p>Intenta agregar un nuevo atributo a la clase <code>Stock</code>:</p> <pre><code>&gt;&gt;&gt; Stock.foo = 42\n&gt;&gt;&gt;\n</code></pre> <p>Observa c\u00f3mo este nuevo atributo ahora aparece en todas las instancias:</p> <pre><code>&gt;&gt;&gt; goog.foo\n42\n&gt;&gt;&gt; ibm.foo\n42\n&gt;&gt;&gt;\n</code></pre> <p>Sin embargo, observa que no es parte del diccionario de la instancia:</p> <pre><code>&gt;&gt;&gt; goog.__dict__\n... observa la salida y observa que no hay ning\u00fan atributo 'foo' ...\n&gt;&gt;&gt;\n</code></pre> <p>La raz\u00f3n por la que puedes acceder al atributo <code>foo</code> en las instancias es que Python siempre verifica el diccionario de clase si no puede encontrar algo en la instancia misma.</p> <p>Nota: Esta parte del ejercicio ilustra algo conocido como variable de clase. Supongamos, por ejemplo, que tiene una clase como esta:</p> <pre><code>class Foo:\n    a = 13 # Variable de clase\n    def __init__(self,b):\n        self.b = b # Variable de instancia\n</code></pre> <p>En esta clase, la variable <code>a</code>, asignada en el cuerpo de la clase misma, es una \"variable de clase\". Es compartida por todas las instancias que se crean. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; f = Foo(10)\n&gt;&gt;&gt; g = Foo(20)\n&gt;&gt;&gt; f.a # Inspeccionar la variable de clase (igual para ambas instancias)\n13\n&gt;&gt;&gt; g.a\n13\n&gt;&gt;&gt; f.b # Inspeccionar la variable de instancia (difiere)\n10\n&gt;&gt;&gt; g.b\n20\n&gt;&gt;&gt; Foo.a = 42 # Cambiar el valor de la variable de clase\n&gt;&gt;&gt; f.a\n42\n&gt;&gt;&gt; g.a\n42\n&gt;&gt;&gt;\n</code></pre>"},{"location":"05_Object_model/01_Dicts_revisited/#ejercicio-54-metodos-enlazados","title":"Ejercicio 5.4: M\u00e9todos enlazados","text":"<p>Una caracter\u00edstica sutil de Python es que invocar un m\u00e9todo en realidad implica dos pasos y algo conocido como m\u00e9todo enlazado. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; s = goog.sell\n&gt;&gt;&gt; s\n&lt;bound method Stock.sell of Stock('GOOG', 100, 490.1)&gt;\n&gt;&gt;&gt; s(25)\n&gt;&gt;&gt; goog.shares\n75\n&gt;&gt;&gt;\n</code></pre> <p>Los m\u00e9todos enlazados en realidad contienen todas las piezas necesarias para llamar a un m\u00e9todo. Por ejemplo, mantienen un registro de la funci\u00f3n que implementa el m\u00e9todo:</p> <pre><code>&gt;&gt;&gt; s.__func__\n&lt;function sell at 0x10049af50&gt;\n&gt;&gt;&gt;\n</code></pre> <p>Este es el mismo valor que se encuentra en el diccionario <code>Stock</code>.</p> <pre><code>&gt;&gt;&gt; Stock.__dict__['sell']\n&lt;function sell at 0x10049af50&gt;\n&gt;&gt;&gt;\n</code></pre> <p>Los m\u00e9todos enlazados tambi\u00e9n registran la instancia, que es el argumento <code>self</code>.</p> <pre><code>&gt;&gt;&gt; s.__self__\nStock('GOOG',75,490.1)\n&gt;&gt;&gt;\n</code></pre> <p>Cuando invocas la funci\u00f3n usando <code>()</code> todas las piezas se unen. Por ejemplo, llamar a <code>s(25)</code> en realidad hace esto:</p> <pre><code>&gt;&gt;&gt; s.__func__(s.__self__, 25) # Igual que s(25)\n&gt;&gt;&gt; goog.shares\n50\n&gt;&gt;&gt;\n</code></pre>"},{"location":"05_Object_model/01_Dicts_revisited/#ejercicio-55-herencia","title":"Ejercicio 5.5: Herencia","text":"<p>Crea una nueva clase que herede de <code>Stock</code>.</p> <pre><code>&gt;&gt;&gt; class NewStock(Stock):\n    def yow(self):\n        print('Yow!')\n\n&gt;&gt;&gt; n = NewStock('ACME', 50, 123.45)\n&gt;&gt;&gt; n.cost()\n6172.50\n&gt;&gt;&gt; n.yow()\nYow!\n&gt;&gt;&gt;\n</code></pre> <p>La herencia se implementa extendiendo el proceso de b\u00fasqueda de atributos. El atributo <code>__bases__</code> tiene una tupla de los padres inmediatos:</p> <pre><code>&gt;&gt;&gt; NewStock.__bases__\n(&lt;class 'stock.Stock'&gt;,)\n&gt;&gt;&gt;\n</code></pre> <p>El atributo <code>__mro__</code> tiene una tupla de todos los padres, en el orden en que se buscar\u00e1n los atributos.</p> <pre><code>&gt;&gt;&gt; NewStock.__mro__\n(&lt;class '__main__.NewStock'&gt;, &lt;class 'stock.Stock'&gt;, &lt;class 'object'&gt;)\n&gt;&gt;&gt;\n</code></pre> <p>As\u00ed es como se encontrar\u00eda el m\u00e9todo <code>cost()</code> de la instancia <code>n</code> anterior:</p> <pre><code>&gt;&gt;&gt; for cls in n.__class__.__mro__:\n        if 'cost' in cls.__dict__:\n            break\n\n&gt;&gt;&gt; cls\n&lt;class '__main__.Stock'&gt;\n&gt;&gt;&gt; cls.__dict__['cost']\n&lt;function cost at 0x101aed598&gt;\n&gt;&gt;&gt;\n</code></pre> <p>Contenido | Anterior (4.4 Definici\u00f3n de excepciones) | Pr\u00f3ximo (5.2 T\u00e9cnicas de encapsulaci\u00f3n)</p>"},{"location":"05_Object_model/02_Classes_encapsulation/","title":"02_Classes_encapsulation","text":"<p>Contenido | Anterior (5.1 Diccionarios revisados) | Pr\u00f3ximo (6 Generadores)</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#52-clases-y-encapsulacion","title":"5.2 Clases y encapsulaci\u00f3n","text":"<p>Al escribir clases, es com\u00fan intentar encapsular detalles internos. Esta secci\u00f3n presenta algunos modismos de programaci\u00f3n de Python para esto, incluidas las variables y propiedades privadas.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#publico-vs-privado","title":"P\u00fablico vs. Privado.","text":"<p>Una de las funciones principales de una clase es encapsular datos y detalles de implementaci\u00f3n interna de un objeto. Sin embargo, una clase tambi\u00e9n define una interfaz p\u00fablica que se supone que el mundo exterior debe usar para manipular el objeto. Esta distinci\u00f3n entre los detalles de implementaci\u00f3n y la interfaz p\u00fablica es importante.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#un-problema","title":"Un problema","text":"<p>En Python, casi todo lo relacionado con las clases y los objetos es abierto.</p> <ul> <li>Puede inspeccionar f\u00e1cilmente los componentes internos de los objetos.</li> <li>Puedes cambiar las cosas a voluntad.</li> <li>No existe una noci\u00f3n s\u00f3lida de control de acceso (es decir, miembros de clase privados)</li> </ul> <p>Eso es un problema cuando intentas aislar detalles de la implementaci\u00f3n interna.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#encapsulacion-de-python","title":"Encapsulaci\u00f3n de Python","text":"<p>Python se basa en convenciones de programaci\u00f3n para indicar el uso previsto de algo. Estas convenciones se basan en la denominaci\u00f3n. Existe una actitud general de que es responsabilidad del programador observar las reglas en lugar de que el lenguaje las imponga.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#atributos-privados","title":"Atributos privados","text":"<p>Cualquier nombre de atributo con <code>_</code> inicial se considera privado.</p> <pre><code>class Person:\n    def __init__(self, name):\n        self._name = name\n</code></pre> <p>Como se mencion\u00f3 anteriormente, este es solo un estilo de programaci\u00f3n. A\u00fan puedes acceder a \u00e9l y cambiarlo.</p> <pre><code>&gt;&gt;&gt; p = Person('Guido')\n&gt;&gt;&gt; p._name\n'Guido'\n&gt;&gt;&gt; p._name = 'Dave'\n&gt;&gt;&gt;\n</code></pre> <p>Como regla general, cualquier nombre con un <code>_</code> inicial se considera una implementaci\u00f3n interna, ya sea una variable, una funci\u00f3n o el nombre de un m\u00f3dulo. Si te encuentras usando dichos nombres directamente, probablemente est\u00e9s haciendo algo mal. Busca una funcionalidad de nivel superior.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#atributos-simples","title":"Atributos simples","text":"<p>Considera la siguiente clase.</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n</code></pre> <p>Una caracter\u00edstica sorprendente es que puedes establecer los atributos con cualquier valor:</p> <pre><code>&gt;&gt;&gt; s = Stock('IBM', 50, 91.1)\n&gt;&gt;&gt; s.shares = 100\n&gt;&gt;&gt; s.shares = \"hundred\"\n&gt;&gt;&gt; s.shares = [1, 0, 0]\n&gt;&gt;&gt;\n</code></pre> <p>Puedes ver eso y pensar que necesitas algunas comprobaciones adicionales.</p> <pre><code>s.shares = '50' # Generar un TypeError, esto es una cadena\n</code></pre> <p>\u00bfC\u00f3mo lo har\u00edas?</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#atributos-administrados","title":"Atributos administrados","text":"<p>Un enfoque: introducir m\u00e9todos de acceso.</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.set_shares(shares)\n        self.price = price\n\n    # Funci\u00f3n que superpone la operaci\u00f3n \"get\"\n    def get_shares(self):\n        return self._shares\n\n    # Funci\u00f3n que superpone la operaci\u00f3n \"set\"\n    def set_shares(self, value):\n        if not isinstance(value, int):\n            raise TypeError('Se espera un int')\n        self._shares = value\n</code></pre> <p>Es una l\u00e1stima que esto rompa todo nuestro c\u00f3digo existente. <code>s.shares = 50</code> se convierte en <code>s.set_shares(50)</code></p>"},{"location":"05_Object_model/02_Classes_encapsulation/#propiedades","title":"Propiedades","text":"<p>Existe un enfoque alternativo al patr\u00f3n anterior.</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n\n    @property\n    def shares(self):\n        return self._shares\n\n    @shares.setter\n    def shares(self, value):\n        if not isinstance(value, int):\n            raise TypeError('Esperado un int')\n        self._shares = value\n</code></pre> <p>El acceso normal a los atributos ahora activa los m\u00e9todos getter y setter en <code>@property</code> y <code>@shares.setter</code>.</p> <pre><code>&gt;&gt;&gt; s = Stock('IBM', 50, 91.1)\n&gt;&gt;&gt; s.shares # Disparado por @property\n50\n&gt;&gt;&gt; s.shares = 75 # Disparado por @shares.setter\n&gt;&gt;&gt;\n</code></pre> <p>Con este patr\u00f3n, no se necesitan cambios en el c\u00f3digo fuente. El nuevo setter tambi\u00e9n se llama cuando hay una asignaci\u00f3n dentro de la clase, incluso dentro del m\u00e9todo <code>__init__()</code>.</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n    ...\n    # Esta asignaci\u00f3n llama al configurador que aparece a continuaci\u00f3n\n    self.shares = shares\n    ...\n\n    ...\n    @shares.setter\n    def shares(self, value):\n        if not isinstance(value, int):\n            raise TypeError('Esperado un int')\n        self._shares = value\n</code></pre> <p>A menudo existe una confusi\u00f3n entre una propiedad y el uso de nombres privados. Aunque una propiedad usa internamente un nombre privado como <code>_shares</code>, el resto de la clase (no la propiedad) puede seguir usando un nombre como <code>shares</code>.</p> <p>Las propiedades tambi\u00e9n son \u00fatiles para los atributos de datos calculados.</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n\n    @property\n    def cost(self):\n        return self.shares * self.price\n    ...\n</code></pre> <p>Esto le permite eliminar los par\u00e9ntesis adicionales, ocultando el hecho de que en realidad es un m\u00e9todo:</p> <pre><code>&gt;&gt;&gt; s = Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; s.shares # Variable de instancia\n100\n&gt;&gt;&gt; s.cost # Valor calculado\n49010.0\n&gt;&gt;&gt;\n</code></pre>"},{"location":"05_Object_model/02_Classes_encapsulation/#acceso-uniforme","title":"Acceso uniforme","text":"<p>El \u00faltimo ejemplo muestra c\u00f3mo poner una interfaz m\u00e1s uniforme en un objeto. Si no lo hace, un objeto puede resultar confuso de usar:</p> <pre><code>&gt;&gt;&gt; s = Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; a = s.cost() # M\u00e9todo\n49010.0\n&gt;&gt;&gt; b = s.shares # Atributo de datos\n100\n&gt;&gt;&gt;\n</code></pre> <p>\u00bfPor qu\u00e9 se requiere <code>()</code> para <code>cost</code>, pero no para <code>shares</code>? Una propiedad puede solucionar esto.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#sintaxis-del-decorador","title":"Sintaxis del decorador","text":"<p>La sintaxis <code>@</code> se conoce como \"decoraci\u00f3n\". Especifica un modificador que se aplica a la definici\u00f3n de funci\u00f3n que sigue inmediatamente.</p> <pre><code>...\n@property\ndef cost(self):\n    return self.shares * self.price\n</code></pre> <p>Se proporcionan m\u00e1s detalles en la Secci\u00f3n 7.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#atributo-__slots__","title":"Atributo <code>__slots__</code>","text":"<p>Puede restringir el conjunto de nombres de atributos.</p> <pre><code>class Stock:\n    __slots__ = ('name','_shares','price')\n    def __init__(self, name, shares, price):\n        self.name = name\n    ...\n</code></pre> <p>Se generar\u00e1 un error para otros atributos.</p> <pre><code>&gt;&gt;&gt; s = Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; s.price = 385.15\n&gt;&gt;&gt; s.prices = 410.2\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'Stock' object has no attribute 'prices' and no __dict__ for setting new attributes. Did you mean: 'price'?\n</code></pre> <p>Aunque esto evita errores y restringe el uso de objetos, en realidad se utiliza para mejorar el rendimiento y hace que Python utilice la memoria de forma m\u00e1s eficiente.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#comentarios-finales-sobre-la-encapsulacion","title":"Comentarios finales sobre la encapsulaci\u00f3n","text":"<p>No se exceda con los atributos privados, las propiedades, los slots, etc. Tienen una finalidad espec\u00edfica y puede verlos al leer otro c\u00f3digo Python. Sin embargo, no son necesarios para la mayor\u00eda de la codificaci\u00f3n del d\u00eda a d\u00eda.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#ejercicios","title":"Ejercicios","text":""},{"location":"05_Object_model/02_Classes_encapsulation/#ejercicio-56-propiedades-simples","title":"Ejercicio 5.6: Propiedades simples","text":"<p>Las propiedades son una forma \u00fatil de agregar \"atributos calculados\" a un objeto. En <code>stock.py</code>, cre\u00f3 un objeto <code>Stock</code>. Observa que en tu objeto hay una ligera inconsistencia en c\u00f3mo se extraen los diferentes tipos de datos:</p> <pre><code>&gt;&gt;&gt; from stock import Stock\n&gt;&gt;&gt; s = Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; s.shares\n100\n&gt;&gt;&gt; s.price\n490.1\n&gt;&gt;&gt; s.cost()\n49010.0\n&gt;&gt;&gt;\n</code></pre> <p>En concreto, observa c\u00f3mo tienes que a\u00f1adir el extra <code>()</code> a <code>cost</code> porque es un m\u00e9todo.</p> <p>Puedes deshacerte del extra <code>()</code> en <code>cost()</code> si lo conviertes en una propiedad. Tome su clase <code>Stock</code> y modif\u00edquela para que el c\u00e1lculo de costos funcione de esta manera:</p> <pre><code>&gt;&gt;&gt; ================================= RESTART ==================================\n&gt;&gt;&gt; from stock import Stock\n&gt;&gt;&gt; s = Stock('GOOG', 100, 490.1)\n&gt;&gt;&gt; s.cost\n49010.0\n&gt;&gt;&gt;\n</code></pre> <p>Intente llamar a <code>s.cost()</code> como una funci\u00f3n y observe que no funciona ahora que <code>cost</code> se ha definido como una propiedad.</p> <pre><code>&gt;&gt;&gt; s.cost()\n... falla ...\n&gt;&gt;&gt;\n</code></pre> <p>Hacer este cambio probablemente romper\u00e1 su programa <code>pcost.py</code> anterior. Es posible que deba volver atr\u00e1s y deshacerse del <code>()</code> en el m\u00e9todo <code>cost()</code>.</p>"},{"location":"05_Object_model/02_Classes_encapsulation/#ejercicio-57-properties-and-setters","title":"Ejercicio 5.7: Properties and Setters","text":"<p>Modifique el atributo <code>shares</code> para que el valor se almacene en un atributo privado y se utilice un par de funciones con <code>@property</code> para garantizar que siempre se establezca en un valor entero. Aqu\u00ed hay un ejemplo del comportamiento esperado:</p> <pre><code>&gt;&gt;&gt; ================================= RESTART ==================================\n&gt;&gt;&gt; from stock import Stock\n&gt;&gt;&gt; s = Stock('GOOG',100,490.10)\n&gt;&gt;&gt; s.shares = 50\n&gt;&gt;&gt; s.shares = 'a lot'\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: Esperado un int\n&gt;&gt;&gt;\n</code></pre>"},{"location":"05_Object_model/02_Classes_encapsulation/#ejercicio-58-agregar-__slots__","title":"Ejercicio 5.8: Agregar <code>__slots__</code>","text":"<p>Modifique la clase <code>Stock</code> para que tenga un atributo <code>__slots__</code>. Luego, verifique que no se puedan agregar nuevos atributos:</p> <pre><code>&gt;&gt;&gt; ================================= RESTART =================================\n&gt;&gt;&gt; from stock import Stock\n&gt;&gt;&gt; s = Stock('GOOG', 100, 490.10)\n&gt;&gt;&gt; s.name\n'GOOG'\n&gt;&gt;&gt; s.blah = 42\n... vea qu\u00e9 sucede...\n&gt;&gt;&gt;\n</code></pre> <p>Cuando usa <code>__slots__</code>, Python usa una representaci\u00f3n interna m\u00e1s eficiente de los objetos. \u00bfQu\u00e9 sucede si intenta inspeccionar el diccionario subyacente de <code>s</code> arriba?</p> <pre><code>&gt;&gt;&gt; s.__dict__\n... vea lo que sucede...\n&gt;&gt;&gt;\n</code></pre> <p>Cabe se\u00f1alar que <code>__slots__</code> se utiliza m\u00e1s com\u00fanmente como una optimizaci\u00f3n en clases que sirven como estructuras de datos. El uso de slots har\u00e1 que dichos programas utilicen mucha menos memoria y se ejecuten un poco m\u00e1s r\u00e1pido. Sin embargo, probablemente deber\u00eda evitar <code>__slots__</code> en la mayor\u00eda de las otras clases.</p> <p>Contenido | Anterior (5.1 Diccionarios revisados) | Pr\u00f3ximo (6 Generadores)</p>"},{"location":"06_Generators/00_Overview/","title":"00_Overview","text":"<p>Contenido | Anterior (5 Funcionamiento interno de los objetos de Python) | Pr\u00f3ximo (7. Algunos temas avanzados)</p>"},{"location":"06_Generators/00_Overview/#6-generadores","title":"6. Generadores","text":"<p>La iteraci\u00f3n (el bucle <code>for</code>) es uno de los patrones de programaci\u00f3n m\u00e1s comunes en Python. Los programas realizan muchas iteraciones para procesar listas, leer archivos, consultar bases de datos y m\u00e1s. Una de las caracter\u00edsticas m\u00e1s poderosas de Python es la capacidad de personalizar y redefinir la iteraci\u00f3n en forma de una denominada \"funci\u00f3n generadora\". Esta secci\u00f3n presenta este tema. Al final, escribir\u00e1 algunos programas que procesan algunos datos de transmisi\u00f3n en tiempo real de una manera interesante.</p> <ul> <li>6.1 Protocolo de iteraci\u00f3n</li> <li>6.2 Personalizaci\u00f3n de la iteraci\u00f3n con generadores</li> <li>6.3 Problemas y flujos de trabajo de productores y consumidores</li> <li>6.4 Expresiones de generador</li> </ul> <p>Contenido | Anterior (5 Funcionamiento interno de los objetos de Python) | Pr\u00f3ximo (7. Algunos temas avanzados)</p>"},{"location":"06_Generators/01_Iteration_protocol/","title":"01_Iteration_protocol","text":"<p>Contenido | Anterior (5.2 T\u00e9cnicas de encapsulaci\u00f3n) | Pr\u00f3ximo (6.2 Personalizaci\u00f3n de la iteraci\u00f3n con generadores)</p>"},{"location":"06_Generators/01_Iteration_protocol/#61-protocolo-de-iteracion","title":"6.1 Protocolo de iteraci\u00f3n","text":"<p>Esta secci\u00f3n analiza el proceso subyacente de la iteraci\u00f3n.</p>"},{"location":"06_Generators/01_Iteration_protocol/#iteracion-en-todas-partes","title":"Iteraci\u00f3n en todas partes","text":"<p>Muchos objetos diferentes admiten la iteraci\u00f3n.</p> <pre><code>a = 'hello'\nfor c in a: # Recorrer caracteres en a\n    ...\n\nb = { 'name': 'Dave', 'password':'foo'}\nfor k in b: # Recorrer claves en diccionario\n    ...\n\nc = [1,2,3,4]\nfor i in c: # Recorrer elementos en una lista/tupla\n    ...\n\nf = open('foo.txt')\nfor x in f: # Recorrer l\u00edneas en un archivo\n    ...\n</code></pre>"},{"location":"06_Generators/01_Iteration_protocol/#iteracion-protocolo","title":"Iteraci\u00f3n: Protocolo","text":"<p>Considere la declaraci\u00f3n <code>for</code>.</p> <pre><code>for x in obj:\n    # declaraciones\n    ```\n\n\u00bfQu\u00e9 sucede en segundo plano?\n\n```python\n_iter = obj.__iter__() # Obtener objeto iterador\nwhile True:\n    try:\n        x = _iter.__next__() # Obtener siguiente elemento\n        # declaraciones ...\n    except StopIteration: # No m\u00e1s elementos\n        break\n</code></pre> <p>Todos los objetos que funcionan con el <code>bucle for</code> implementan este protocolo de iteraci\u00f3n de bajo nivel.</p> <p>Ejemplo: Iteraci\u00f3n manual sobre una lista.</p> <pre><code>&gt;&gt;&gt; x = [1,2,3]\n&gt;&gt;&gt; it = x.__iter__()\n&gt;&gt;&gt; it\n&lt;listiterator object at 0x590b0&gt;\n&gt;&gt;&gt; it.__next__()\n1\n&gt;&gt;&gt; it.__next__()\n2\n&gt;&gt;&gt; it.__next__()\n3\n&gt;&gt;&gt; it.__next__()\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in ? StopIteration\n&gt;&gt;&gt;\n</code></pre>"},{"location":"06_Generators/01_Iteration_protocol/#soporte-de-iteracion","title":"Soporte de iteraci\u00f3n","text":"<p>Conocer la iteraci\u00f3n es \u00fatil si desea agregarla a sus propios objetos. Por ejemplo, crear un contenedor personalizado.</p> <pre><code>class Portfolio:\n    def __init__(self):\n        self.holdings = []\n\n    def __iter__(self):\n        return self.holdings.__iter__()\n    ...\n\nport = Portfolio()\nfor s in port:\n    ...\n</code></pre>"},{"location":"06_Generators/01_Iteration_protocol/#ejercicios","title":"Ejercicios","text":""},{"location":"06_Generators/01_Iteration_protocol/#ejercicio-61-iteracion-ilustrada","title":"Ejercicio 6.1: Iteraci\u00f3n ilustrada","text":"<p>Cree la siguiente lista:</p> <pre><code>a = [1,9,4,25,16]\n</code></pre> <p>Itere manualmente sobre esta lista. Llame a <code>__iter__()</code> para obtener un iterador y llame al m\u00e9todo <code>__next__()</code> para obtener elementos sucesivos.</p> <pre><code>&gt;&gt;&gt; i = a.__iter__()\n&gt;&gt;&gt; i\n&lt;listiterator object at 0x64c10&gt;\n&gt;&gt;&gt; i.__next__()\n1\n&gt;&gt;&gt; i.__next__()\n9\n&gt;&gt;&gt; i.__next__()\n4\n&gt;&gt;&gt; i.__next__()\n25\n&gt;&gt;&gt; i.__next__()\n16\n&gt;&gt;&gt; i.__next__()\nTraceback (most recent call last):\nArchivo \"&lt;stdin&gt;\", l\u00ednea 1, en &lt;module&gt;\nStopIteration\n&gt;&gt;&gt;\n</code></pre> <p>La funci\u00f3n incorporada <code>next()</code> es un atajo para llamar al m\u00e9todo <code>__next__()</code> de un iterador. Intente usarlo en un archivo:</p> <pre><code>&gt;&gt;&gt; f = open('Data/portfolio.csv')\n&gt;&gt;&gt; f.__iter__() # Nota: Esto devuelve el archivo en s\u00ed\n&lt;_io.TextIOWrapper name='Data/portfolio.csv' mode='r' encoding='UTF-8'&gt;\n&gt;&gt;&gt; next(f)\n'name,shares,price\\n'\n&gt;&gt;&gt; next(f)\n'\"AA\",100,32.20\\n'\n&gt;&gt;&gt; next(f)\n'\"IBM\",50,91.10\\n'\n&gt;&gt;&gt;\n</code></pre> <p>Siga llamando a <code>next(f)</code> hasta que llegue al final del archivo. Observe lo que sucede.</p>"},{"location":"06_Generators/01_Iteration_protocol/#ejercicio-62-compatibilidad-con-iteraciones","title":"Ejercicio 6.2: Compatibilidad con iteraciones","text":"<p>En ocasiones, es posible que desee hacer que uno de sus propios objetos admita la iteraci\u00f3n, especialmente si su objeto envuelve una lista existente u otro iterable. En un nuevo archivo <code>portfolio.py</code>, defina la siguiente clase:</p> <pre><code># portfolio.py\n\nclass Portfolio:\n\n    def __init__(self, holdings):\n        self._holdings = holdings\n\n    @property\n    def total_cost(self):\n        return sum([s.cost for s in self._holdings])\n\n    def tabulate_shares(self):\n        from collections import Counter\n        total_shares = Counter()\n        for s in self._holdings:\n            total_shares[s.name] += s.shares\n        return total_shares\n</code></pre> <p>Esta clase est\u00e1 pensada para ser una capa alrededor de una lista, pero con algunos m\u00e9todos adicionales como la propiedad <code>total_cost</code>. Modifique la funci\u00f3n <code>read_portfolio()</code> en <code>report.py</code> para que cree una instancia <code>Portfolio</code> como esta:</p> <pre><code># report.py\n...\n\nimport fileparse\nfrom stock import Stock\nfrom portfolio import Portfolio\n\ndef read_portfolio(filename):\n    '''\n    Lee un archivo de cartera de acciones en una lista de diccionarios con claves\n    name, shares, and price.\n    '''\n    with open(filename) as file:\n        portdicts = fileparse.parse_csv(file,\n                                        select=['name','shares','price'],\n                                        types=[str,int,float])\n\n    portfolio = [ Stock(d['name'], d['shares'], d['price']) for d in portdicts ]\n    return Portfolio(portfolio)\n...\n</code></pre> <p>Intente ejecutar el programa <code>report.py</code>. Descubrir\u00e1s que falla espectacularmente debido al hecho de que las instancias de \"Portfolio\" no son iterables.</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\n... falla...\n</code></pre> <p>Solucione esto modificando la clase <code>Portfolio</code> para que admita la iteraci\u00f3n:</p> <pre><code>class Portfolio:\n\n    def __init__(self, holdings):\n        self._holdings = holdings\n\n    def __iter__(self):\n        return self._holdings.__iter__()\n\n    @property\n    def total_cost(self):\n        return sum([s.shares*s.price for s in self._holdings])\n\n    def tabulate_shares(self):\n        from collections import Counter\n        total_shares = Counter()\n        for s in self._holdings:\n            total_shares[s.name] += s.shares\n        return total_shares\n</code></pre> <p>Despu\u00e9s de realizar este cambio, su programa <code>report.py</code> deber\u00eda funcionar nuevamente. Mientras lo hace, arregle su programa <code>pcost.py</code> para que use el nuevo objeto <code>Portfolio</code>. De esta manera:</p> <pre><code># pcost.py\n\nimport report\n\ndef portfolio_cost(filename):\n  '''\n  Calcula el costo total (shares*price) de un archivo de cartera\n  '''\n  portfolio = report.read_portfolio(filename)\n  return portfolio.total_cost\n  ...\n</code></pre> <p>Pru\u00e9belo para asegurarse de que funciona:</p> <pre><code>&gt;&gt;&gt; import pcost\n&gt;&gt;&gt; pcost.portfolio_cost('Data/portfolio.csv')\n44671.15\n&gt;&gt;&gt;\n</code></pre>"},{"location":"06_Generators/01_Iteration_protocol/#ejercicio-63-como-crear-un-contenedor-mas-apropiado","title":"Ejercicio 6.3: C\u00f3mo crear un contenedor m\u00e1s apropiado","text":"<p>Si crea una clase contenedora, a menudo querr\u00e1 hacer m\u00e1s que solo iterar. Modifique la clase <code>Portfolio</code> para que tenga otros m\u00e9todos especiales como este:</p> <pre><code>class Portfolio:\n    def __init__(self, holdings):\n        self._holdings = holdings\n\n    def __iter__(self):\n        return self._holdings.__iter__()\n\n    def __len__(self):\n        return len(self._holdings)\n\n    def __getitem__(self, index):\n        return self._holdings[index]\n\n    def __contains__(self, name):\n        return any([s.name == name for s in self._holdings])\n\n    @property\n    def total_cost(self):\n        return sum([s.shares*s.price for s in self._holdings])\n\n    def tabulate_shares(self):\n        from collections import Counter\n        total_shares = Counter()\n        for s in self._holdings:\n            total_shares[s.name] += s.shares\n        return total_shares\n</code></pre> <p>Ahora, prueba algunos experimentos usando esta nueva clase:</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; portfolio = report.read_portfolio('Data/portfolio.csv')\n&gt;&gt;&gt; len(portfolio)\n7\n&gt;&gt;&gt; portfolio[0]\nStock('AA', 100, 32.2)\n&gt;&gt;&gt; portfolio[1]\nStock('IBM', 50, 91.1)\n&gt;&gt;&gt; portfolio[0:3]\n[Stock('AA', 100, 32.2), Stock('IBM', 50, 91.1), Stock('CAT', 150, 83.44)]\n&gt;&gt;&gt; 'IBM' in portfolio\nTrue\n&gt;&gt;&gt; 'AAPL' in portfolio\nFalse\n&gt;&gt;&gt;\n</code></pre> <p>Una observaci\u00f3n importante sobre esto: en general, el c\u00f3digo se considera \"Pythonic\" si habla el vocabulario com\u00fan de c\u00f3mo funcionan normalmente otras partes de Python. Para los objetos contenedores, la compatibilidad con la iteraci\u00f3n, la indexaci\u00f3n, la contenci\u00f3n y otros tipos de operadores es una parte importante de esto.</p> <p>Contenido | Anterior (5.2 T\u00e9cnicas de encapsulaci\u00f3n) | Pr\u00f3ximo (6.2 Personalizaci\u00f3n de la iteraci\u00f3n con generadores)</p>"},{"location":"06_Generators/02_Customizing_iteration/","title":"02_Customizing_iteration","text":"<p>Contenido | Anterior (6.1 Protocolo de iteraci\u00f3n) | Pr\u00f3ximo (6.3 Problemas y flujos de trabajo de productores y consumidores)</p>"},{"location":"06_Generators/02_Customizing_iteration/#62-personalizacion-de-la-iteracion","title":"6.2 Personalizaci\u00f3n de la iteraci\u00f3n","text":"<p>Esta secci\u00f3n analiza c\u00f3mo se puede personalizar la iteraci\u00f3n utilizando una funci\u00f3n generadora.</p>"},{"location":"06_Generators/02_Customizing_iteration/#un-problema","title":"Un problema","text":"<p>Supongamos que desea crear su propio patr\u00f3n de iteraci\u00f3n personalizado.</p> <p>Por ejemplo, una cuenta regresiva.</p> <pre><code>&gt;&gt;&gt; for x in countdown(10):\n...     print(x, end=' ')\n...\n10 9 8 7 6 5 4 3 2 1\n&gt;&gt;&gt;\n</code></pre> <p>Hay una manera f\u00e1cil de hacer esto.</p>"},{"location":"06_Generators/02_Customizing_iteration/#generadores","title":"Generadores","text":"<p>Un generador es una funci\u00f3n que define la iteraci\u00f3n.</p> <pre><code>def countdown(n):\n    while n &gt; 0:\n        yield n\n        n -= 1\n</code></pre> <p>Por ejemplo:</p> <pre><code>&gt;&gt;&gt; for x in countdown(10):\n...     print(x, end=' ')\n...\n10 9 8 7 6 5 4 3 2 1\n&gt;&gt;&gt;\n</code></pre> <p>Un generador es cualquier funci\u00f3n que utiliza la declaraci\u00f3n <code>yield</code>.</p> <p>El comportamiento de los generadores es diferente al de una funci\u00f3n normal. Al llamar a una funci\u00f3n de generador se crea un objeto generador. No se ejecuta inmediatamente la funci\u00f3n.</p> <pre><code>def countdown(n):\n    # Se agreg\u00f3 una declaraci\u00f3n de impresi\u00f3n\n    print('Cuenta regresiva desde', n)\n    while n &gt; 0:\n        yield n\n        n -= 1\n</code></pre> <pre><code>&gt;&gt;&gt; x = countdown(10)\n# NO HAY DECLARACI\u00d3N DE IMPRESI\u00d3N\n&gt;&gt;&gt; x\n# x es un objeto generador\n&lt;generator object countdown at 0x0000028C7FDB9FF0&gt;\n&gt;&gt;&gt;\n</code></pre> <p>La funci\u00f3n solo se ejecuta en la llamada <code>__next__()</code>.</p> <pre><code>&gt;&gt;&gt; x = countdown(10)\n&gt;&gt;&gt; x\n&lt;generator object countdown at 0x0000028C7FDB9FF0&gt;\n&gt;&gt;&gt; x.__next__()\nCuenta regresiva desde 10\n10\n&gt;&gt;&gt;\n</code></pre> <p><code>yield</code> produce un valor, pero suspende la ejecuci\u00f3n de la funci\u00f3n. La funci\u00f3n se reanuda en la siguiente llamada a <code>__next__()</code>.</p> <pre><code>&gt;&gt;&gt; x.__next__()\n9\n&gt;&gt;&gt; x.__next__()\n8\n</code></pre> <p>Cuando el generador finalmente retorna, la iteraci\u00f3n genera un error.</p> <pre><code>&gt;&gt;&gt; x.__next__()\n1\n&gt;&gt;&gt; x.__next__()\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in ? StopIteration\n&gt;&gt;&gt;\n</code></pre> <p>Observaci\u00f3n: una funci\u00f3n generadora implementa el mismo protocolo de bajo nivel que las instrucciones <code>for</code> usan en listas, tuplas, diccionarios, archivos, etc.</p>"},{"location":"06_Generators/02_Customizing_iteration/#ejercicios","title":"Ejercicios","text":""},{"location":"06_Generators/02_Customizing_iteration/#ejercicio-64-un-generador-simple","title":"Ejercicio 6.4: Un generador simple","text":"<p>Si alguna vez te encuentras con ganas de personalizar la iteraci\u00f3n, siempre debes pensar en funciones generadoras. Son f\u00e1ciles de escribir: crea una funci\u00f3n que lleve a cabo la l\u00f3gica de iteraci\u00f3n deseada y usa <code>yield</code> para emitir valores.</p> <p>Por ejemplo, prueba este generador que busca en un archivo l\u00edneas que contengan una subcadena coincidente:</p> <pre><code>&gt;&gt;&gt; def filematch(filename, substr):\n        with open(filename, 'r') as f:\n            for line in f:\n                if substr in line:\n                    yield line\n\n&gt;&gt;&gt; for line in open('Data/portfolio.csv'):\n        print(line, end='')\n\nname,shares,price\n\"AA\",100,32.20\n\"IBM\",50,91.10\n\"CAT\",150,83.44\n\"MSFT\",200,51.23\n\"GE\",95,40.37\n\"MSFT\",50,65.10\n\"IBM\",100,70.44\n&gt;&gt;&gt; for line in filematch('Data/portfolio.csv', 'IBM'):\n        print(line, end='')\n\n\"IBM\",50,91.10\n\"IBM\",100,70.44\n&gt;&gt;&gt;\n</code></pre> <p>Esto es bastante interesante: la idea de que se puede ocultar un mont\u00f3n de procesamiento personalizado en una funci\u00f3n y utilizarlo para alimentar un bucle <code>for</code>. El siguiente ejemplo analiza un caso m\u00e1s inusual.</p>"},{"location":"06_Generators/02_Customizing_iteration/#ejercicio-65-monitoreo-de-una-fuente-de-datos-en-tiempo-real","title":"Ejercicio 6.5: Monitoreo de una fuente de datos en tiempo real","text":"<p>Los generadores pueden ser una forma interesante de monitorear fuentes de datos en tiempo real, como archivos de registro o feeds del mercado de valores. En esta parte, exploraremos esta idea. Para comenzar, siga atentamente las siguientes instrucciones.</p> <p>El programa <code>Data/stocksim.py</code> es un programa que simula datos del mercado de valores. Como salida, el programa escribe constantemente datos en tiempo real en un archivo <code>Data/stocklog.csv</code>. En una ventana de comandos independiente, vaya al directorio <code>Data/</code> y ejecute este programa:</p> <pre><code>bash % python3 stocksim.py\n</code></pre> <p>Si est\u00e1 en Windows, simplemente busque el programa <code>stocksim.py</code> y haga doble clic en \u00e9l para ejecutarlo. Ahora, olv\u00eddese de este programa (simplemente d\u00e9jelo ejecutar). En otra ventana, observe el archivo <code>Data/stocklog.csv</code> que est\u00e1 escribiendo el simulador. Deber\u00eda ver nuevas l\u00edneas de texto que se agregan al archivo cada pocos segundos. Nuevamente, simplemente deje que este programa se ejecute en segundo plano; se ejecutar\u00e1 durante varias horas (no deber\u00eda tener que preocuparse por eso).</p> <p>Una vez que se est\u00e9 ejecutando el programa anterior, escribamos un peque\u00f1o programa para abrir el archivo, buscar hasta el final y observar si hay un nuevo resultado. Cree un archivo <code>follow.py</code> y pon este c\u00f3digo en \u00e9l:</p> <pre><code># follow.py\nimport os\nimport time\n\nf = open('Data/stocklog.csv')\nf.seek(0, os.SEEK_END)   # Mueve el puntero del archivo 0 bytes desde el final del archivo\n\nwhile True:\n    line = f.readline()\n    if line == '':\n        time.sleep(0.1)   # Duerme brevemente y vuelve a intentar\n        continue\n    fields = line.split(',')\n    name = fields[0].strip('\"')\n    price = float(fields[1])\n    change = float(fields[4])\n    if change &lt; 0:\n        print(f'{name:&gt;10s} {price:&gt;10.2f} {change:&gt;10.2f}')\n</code></pre> <p>Si ejecutas el programa, ver\u00e1s un indicador de cotizaci\u00f3n de acciones en tiempo real. Debajo del cap\u00f3, Este c\u00f3digo es similar al comando <code>tail -f</code> de Unix que se usa para ver un archivo de registro.</p> <p>Nota: El uso del m\u00e9todo <code>readline()</code> en este ejemplo es algo inusual, ya que no es la forma habitual de leer l\u00edneas de un archivo (normalmente, solo se usar\u00eda un bucle <code>for</code>). Sin embargo, en este caso, lo estamos usando para sondear repetidamente el final del archivo para ver si se han agregado m\u00e1s datos (<code>readline()</code> devolver\u00e1 datos nuevos o una cadena vac\u00eda).</p>"},{"location":"06_Generators/02_Customizing_iteration/#ejercicio-66-uso-de-un-generador-para-producir-datos","title":"Ejercicio 6.6: Uso de un generador para producir datos","text":"<p>Si observa el c\u00f3digo del Ejercicio 6.5, la primera parte del c\u00f3digo produce l\u00edneas de datos, mientras que las instrucciones al final del bucle <code>while</code> consumen los datos. Una caracter\u00edstica importante de las funciones generadoras es que puede mover todo el c\u00f3digo de producci\u00f3n de datos a una funci\u00f3n reutilizable.</p> <p>Modifique el c\u00f3digo del Ejercicio 6.5 para que la lectura del archivo la realice una funci\u00f3n generadora <code>follow(filename)</code>. Haz que funcione el siguiente c\u00f3digo:</p> <pre><code>&gt;&gt;&gt; for line in follow('Data/stocklog.csv'):\n        print(line, end='')\n\n... Deber\u00edas ver l\u00edneas de salida generadas aqu\u00ed...\n</code></pre> <p>Modifica el c\u00f3digo del ticker de acciones para que se vea as\u00ed:</p> <pre><code>if __name__ == '__main__':\n    for line in follow('Data/stocklog.csv'):\n        fields = line.split(',')\n        name = fields[0].strip('\"')\n        price = float(fields[1])\n        change = float(fields[4])\n        if change &lt; 0:\n            print(f'{name:&gt;10s} {price:&gt;10.2f} {change:&gt;10.2f}')\n</code></pre>"},{"location":"06_Generators/02_Customizing_iteration/#ejercicio-67-observando-tu-cartera","title":"Ejercicio 6.7: Observando tu cartera","text":"<p>Modifica el programa <code>follow.py</code> para que observe el flujo de datos de acciones e imprime un ticker que muestra informaci\u00f3n solo de las acciones en una cartera. Por ejemplo:</p> <pre><code>if __name__ == '__main__':\n    import report\n\n    portfolio = report.read_portfolio('Data/portfolio.csv')\n\n    for line in follow('Data/stocklog.csv'):\n        fields = line.split(',')\n        name = fields[0].strip('\"')\n        price = float(fields[1])\n        change = float(fields[4])\n        if name in portfolio:\n            print(f'{name:&gt;10s} {price:&gt;10.2f} {change:&gt;10.2f}')\n</code></pre> <p>Nota: Para que esto funcione, su clase <code>Portfolio</code> debe admitir el operador <code>in</code>. Consulte el Ejercicio 6.3 y aseg\u00farese de implementar el operador <code>__contains__()</code>.</p>"},{"location":"06_Generators/02_Customizing_iteration/#discusion","title":"Discusi\u00f3n","text":"<p>Aqu\u00ed acaba de ocurrir algo muy poderoso. Has trasladado un patr\u00f3n de iteraci\u00f3n interesante (leer l\u00edneas al final de un archivo) a su propia peque\u00f1a funci\u00f3n. La funci\u00f3n <code>follow()</code> es ahora una utilidad de prop\u00f3sito completamente general que puede utilizar en cualquier programa. Por ejemplo, puede utilizarla para ver registros de servidores, registros de depuraci\u00f3n y otras fuentes de datos similares. Eso es genial.</p> <p>Contenido | Anterior (6.1 Protocolo de iteraci\u00f3n) | Pr\u00f3ximo (6.3 Problemas y flujos de trabajo de productores y consumidores)</p>"},{"location":"06_Generators/03_Producers_consumers/","title":"03_Producers_consumers","text":"<p>Contenido | Anterior (6.2 Personalizaci\u00f3n de la iteraci\u00f3n) | Pr\u00f3ximo (6.4 Expresiones generadoras)</p>"},{"location":"06_Generators/03_Producers_consumers/#63-problemas-y-flujos-de-trabajo-de-productores-y-consumidores","title":"6.3 Problemas y flujos de trabajo de productores y consumidores","text":"<p>Los generadores son una herramienta \u00fatil para configurar varios tipos de problemas de productor/consumidor y las tuber\u00edas de flujo de datos. Esta secci\u00f3n trata sobre eso.</p>"},{"location":"06_Generators/03_Producers_consumers/#problemas-de-productor-consumidor","title":"Problemas de productor-consumidor","text":"<p>Los generadores est\u00e1n estrechamente relacionados con varias formas de problemas de productor-consumidor.</p> <pre><code># Productor\ndef follow(f):\n    ...\n    while True:\n        ...\n        yield line        # Produce el valor en `line` a continuaci\u00f3n\n        ...\n\n# Consumidor\nfor line in follow(f):    # Consume el valor de `yield` arriba\n    ...\n</code></pre> <p><code>yield</code> produce valores que <code>for</code> consume.</p>"},{"location":"06_Generators/03_Producers_consumers/#tuberias-de-generadores","title":"Tuberias de generadores","text":"<p>Puede utilizar este aspecto de los generadores para configurar tuber\u00edas de procesamiento (como las tuber\u00edas de Unix).</p> <p>productor =&gt; procesamiento =&gt; procesamiento =&gt; consumidor</p> <p>Las tuber\u00edas de procesamiento tienen un productor de datos inicial, un conjunto de etapas de procesamiento intermedias y un consumidor final.</p> <p>productor =&gt; procesamiento =&gt; procesamiento =&gt; consumidor</p> <pre><code>def productor():\n    ...\n    yield item\n    ...\n</code></pre> <p>El productor es normalmente un generador. Aunque tambi\u00e9n podr\u00eda ser una lista de alguna otra secuencia. <code>yield</code> introduce datos en la tuber\u00eda.</p> <p>productor =&gt; procesamiento =&gt; procesamiento =&gt; consumidor</p> <pre><code>def consumidor(s):\n    for item in s:\n        ...\n</code></pre> <p>El consumidor es un bucle <code>for</code>. Obtiene elementos y hace algo con ellos.</p> <p>productor =&gt; procesamiento =&gt; procesamiento =&gt; consumidor</p> <pre><code>def procesamiento(s):\n    for item in s:\n        ...\n        yield newitem\n...\n</code></pre> <p>Las etapas de procesamiento intermedias consumen y producen elementos simult\u00e1neamente. Pueden modificar el flujo de datos. Tambi\u00e9n pueden filtrar (descartando elementos).</p> <p>productor =&gt; procesamiento =&gt; procesamiento =&gt; consumer</p> <pre><code>def productor():\n    ...\n    yield item # produce el elemento que recibe de `procesamiento`\n    ...\n\ndef procesamiento(s):\n    for item in s: # Proviene del `productor`\n        ...\n        yield newitem # produce un nuevo elemento\n        ...\n\ndef consumidor(s):\n    for item in s: # Proviene del `procesamiento`\n        ...\n</code></pre> <p>C\u00f3digo para configurar la canalizaci\u00f3n</p> <pre><code>a = productor()\nb = procesamiento(a)\nc = consumidor(b)\n</code></pre> <p>Notar\u00e1s que los datos fluyen de manera incremental a trav\u00e9s de las diferentes funciones.</p>"},{"location":"06_Generators/03_Producers_consumers/#ejercicios","title":"Ejercicios","text":"<p>Para este ejercicio, el programa <code>stocksim.py</code> debe seguir ejecut\u00e1ndose en segundo plano. Vas a utilizar la funci\u00f3n <code>follow()</code> que escribiste en el ejercicio anterior.</p>"},{"location":"06_Generators/03_Producers_consumers/#ejercicio-68-configuracion-de-una-tuberia-simple","title":"Ejercicio 6.8: Configuraci\u00f3n de una tuber\u00eda simple","text":"<p>Veamos la idea de la tuber\u00eda en acci\u00f3n. Escriba la siguiente funci\u00f3n:</p> <pre><code>&gt;&gt;&gt; def filematch(lines, substr):\n...     for line in lines:\n...         if substr in line:\n...             yield line\n... \n\n&gt;&gt;&gt;\n</code></pre> <p>Esta funci\u00f3n es casi exactamente la misma que el primer ejemplo de generador del ejercicio anterior, excepto que ya no abre un archivo, sino que simplemente opera sobre una secuencia de l\u00edneas que se le proporciona como argumento. Ahora, pruebe esto:</p> <pre><code>&gt;&gt;&gt; from follow import follow\n&gt;&gt;&gt; lines = follow('Data/stocklog.csv')\n&gt;&gt;&gt; ibm = filematch(lines, 'IBM')\n&gt;&gt;&gt; for line in ibm:\n        print(line)\n\n... espere la salida ...\n</code></pre> <p>Puede que la salida tarde un poco en aparecer, pero con el tiempo deber\u00eda ver algunas l\u00edneas que contienen datos de IBM.</p>"},{"location":"06_Generators/03_Producers_consumers/#ejercicio-69-configuracion-de-una-secuencia-de-comandos-mas-compleja","title":"Ejercicio 6.9: Configuraci\u00f3n de una secuencia de comandos m\u00e1s compleja","text":"<p>Lleve la idea de la secuencia de comandos un poco m\u00e1s all\u00e1 realizando m\u00e1s acciones.</p> <pre><code>&gt;&gt;&gt; from follow import follow\n&gt;&gt;&gt; import csv\n&gt;&gt;&gt; lines = follow('Data/stocklog.csv')\n&gt;&gt;&gt; rows = csv.reader(lines)\n&gt;&gt;&gt; for row in rows:\n        print(row)\n\n['BA', '98.35', '6/11/2007', '09:41.07', '0.16', '98.25', '98.35', '98.31', '158148']\n['AA', '39.63', '6/11/2007', '09:41.07', '-0.03', '39.67', '39.63', '39.31', '270224']\n['XOM', '82.45', '6/11/2007', '09:41.07', '-0.23', '82.68', '82.64', '82.41', '748062']\n['PG', '62.95', '6/11/2007', '09:41.08', '-0.12', '62.80', '62.97', '62.61', '454327']\n</code></pre> <p>Bueno, eso es interesante. Lo que est\u00e1s viendo aqu\u00ed es que la salida de la funci\u00f3n <code>follow()</code> se ha canalizado a la funci\u00f3n <code>csv.reader()</code> y ahora estamos obteniendo una secuencia de filas divididas.</p>"},{"location":"06_Generators/03_Producers_consumers/#ejercicio-610-creacion-de-mas-componentes-de-tuberia","title":"Ejercicio 6.10: Creaci\u00f3n de m\u00e1s componentes de tuber\u00eda","text":"<p>Extendamos toda la idea a una canalizaci\u00f3n m\u00e1s grande. En un archivo separado <code>ticker.py</code>, comience por crear una funci\u00f3n que lea un archivo CSV como lo hizo anteriormente:</p> <pre><code># ticker.py\n\nfrom follow import follow\nimport csv\n\ndef parse_stock_data(lines):\n    rows = csv.reader(lines)\n    return rows\n\nif __name__ == '__main__':\n    lines = follow('Data/stocklog.csv')\n    rows = parse_stock_data(lines)\n    for row in rows:\n        print(row)\n</code></pre> <p>Escriba una nueva funci\u00f3n que seleccione columnas espec\u00edficas:</p> <pre><code># ticker.py\n...\ndef select_columns(rows, indices):\n    for row in rows:\n        yield [row[index] for index in indices]\n...\ndef parse_stock_data(lines):\n    rows = csv.reader(lines)\n    rows = select_columns(rows, [0, 1, 4])\n    return rows\n</code></pre> <p>Ejecute su programa nuevamente. Deber\u00eda ver la salida acotada de esta manera:</p> <pre><code>['BA', '98.35', '0.16']\n['AA', '39.63', '-0.03']\n['XOM', '82.45', '-0.23']\n['PG', '62.95', '-0.12']\n...\n</code></pre> <p>Escriba funciones generadoras que conviertan tipos de datos y creen diccionarios. Por ejemplo:</p> <pre><code># ticker.py\n...\n\ndef convert_types(rows, types):\n    for row in rows:\n        yield [func(val) for func, val in zip(types, row)]\n\ndef make_dicts(rows, headers):\n    for row in rows:\n        yield dict(zip(headers, row))\n...\ndef parse_stock_data(lines):\n    rows = csv.reader(lines)\n    rows = select_columns(rows, [0, 1, 4])\n    rows = convert_types(rows, [str, float, float])\n    rows = make_dicts(rows, ['name', 'price', 'change'])\n    return rows\n...\n</code></pre> <p>Ejecute su programa nuevamente. Ahora deber\u00eda aparecer un flujo de diccionarios como este:</p> <pre><code>{ 'name':'BA', 'price':98.35, 'change':0.16 }\n{ 'name':'AA', 'price':39.63, 'change':-0.03 }\n{ 'name':'XOM', 'price':82.45, 'change': -0.23 }\n{ 'name':'PG', 'price':62.95, 'change':-0.12 }\n...\n</code></pre>"},{"location":"06_Generators/03_Producers_consumers/#ejercicio-611-filtrado-de-datos","title":"Ejercicio 6.11: Filtrado de datos","text":"<p>Escribe una funci\u00f3n que filtre datos. Por ejemplo:</p> <pre><code># ticker.py\n...\n\ndef filter_symbols(rows, names):\n    for row in rows:\n        if row['name'] in names:\n            yield row\n</code></pre> <p>Use esto para filtrar acciones y seleccionar solo las que est\u00e1n en su cartera:</p> <pre><code>import report\nportfolio = report.read_portfolio('Data/portfolio.csv')\nrows = parse_stock_data(follow('Data/stocklog.csv'))\nrows = filter_symbols(rows, portfolio)\nfor row in rows:\n    print(row)\n</code></pre>"},{"location":"06_Generators/03_Producers_consumers/#ejercicio-612-poniendolo-todo-junto","title":"Ejercicio 6.12: Poni\u00e9ndolo todo junto","text":"<p>En el programa <code>ticker.py</code>, escriba una funci\u00f3n <code>ticker(portfile, logfile, fmt)</code> que cree un ticker de acciones en tiempo real a partir de una cartera, un archivo de registro y un formato de tabla determinados. Por ejemplo::</p> <pre><code>&gt;&gt;&gt; from ticker import ticker\n&gt;&gt;&gt; ticker('Data/portfolio.csv', 'Data/stocklog.csv', 'txt')\n      Name      Price     Change\n---------- ---------- ----------\n        GE      37.14      -0.18\n      MSFT      29.96      -0.09\n       CAT      78.03      -0.49\n        AA      39.34      -0.32\n...\n\n&gt;&gt;&gt; ticker('Data/portfolio.csv', 'Data/stocklog.csv', 'csv')\nName,Price,Change\nIBM,102.79,-0.28\nCAT,78.04,-0.48\nAA,39.35,-0.31\nCAT,78.05,-0.47\n...\n</code></pre>"},{"location":"06_Generators/03_Producers_consumers/#discusion","title":"Discusi\u00f3n","text":"<p>Algunas lecciones aprendidas: Puede crear varias funciones generadoras y encadenarlas para realizar un procesamiento que involucre flujos de datos. Adem\u00e1s, puede crear funciones que empaqueten una serie de etapas de flujos de datos en una \u00fanica llamada a la funci\u00f3n (por ejemplo, la funci\u00f3n <code>parse_stock_data()</code>).</p> <p>Contenido | Anterior (6.2 Personalizaci\u00f3n de la iteraci\u00f3n) | Pr\u00f3ximo (6.4 Expresiones generadoras)</p>"},{"location":"06_Generators/04_More_generators/","title":"04_More_generators","text":"<p>Contenido | Anterior (6.3 Problemas y flujos de trabajo de productores y consumidores) | Pr\u00f3ximo (7. Algunos temas avanzados)</p>"},{"location":"06_Generators/04_More_generators/#64-mas-generadores","title":"6.4 M\u00e1s generadores","text":"<p>Esta secci\u00f3n presenta algunos temas adicionales relacionados con los generadores, incluidas las expresiones de generador y el m\u00f3dulo <code>itertools</code>.</p>"},{"location":"06_Generators/04_More_generators/#expresiones-generadoras","title":"Expresiones generadoras","text":"<p>Una versi\u00f3n de generador de una lista por comprensi\u00f3n.</p> <pre><code>&gt;&gt;&gt; a = [1,2,3,4]\n&gt;&gt;&gt; b = (2*x for x in a)\n&gt;&gt;&gt; b\n&lt;generator object at 0x58760&gt;\n&gt;&gt;&gt; for i in b:\n... print(i, end=' ')\n...\n2 4 6 8\n&gt;&gt;&gt;\n</code></pre> <p>Diferencias con las listas por comprensi\u00f3n.</p> <ul> <li>No construye una lista.</li> <li>El \u00fanico prop\u00f3sito \u00fatil es la iteraci\u00f3n.</li> <li>Una vez consumido, no se puede reutilizar.</li> </ul> <p>Sintaxis general.</p> <pre><code>(&lt;expresi\u00f3n&gt; for i in s if &lt;condicional&gt;)\n</code></pre> <p>Tambi\u00e9n puede servir como argumento de funci\u00f3n.</p> <pre><code>sum(x*x for x in a)\n</code></pre> <p>Se puede aplicar a cualquier iterable.</p> <pre><code>&gt;&gt;&gt; a = [1,2,3,4]\n&gt;&gt;&gt; b = (x*x for x in a)\n&gt;&gt;&gt; c = (-x for x in b)\n&gt;&gt;&gt; for i in c:\n... print(i, end=' ')\n...\n-1 -4 -9 -16\n&gt;&gt;&gt;\n</code></pre> <p>El uso principal de las expresiones de generador es en c\u00f3digo que realiza alg\u00fan c\u00e1lculo en una secuencia, pero solo usa el resultado una vez. Por ejemplo, eliminar todos los comentarios de un archivo.</p> <pre><code>f = open('somefile.txt')\nlines = (line for line in f if not line.startswith('#'))\nfor line in lines:\n    ...\nf.close()\n</code></pre> <p>Con los generadores, el c\u00f3digo se ejecuta m\u00e1s r\u00e1pido y usa menos memoria. Es como un filtro aplicado a una secuencia.</p>"},{"location":"06_Generators/04_More_generators/#por-que-generadores","title":"Por qu\u00e9 generadores","text":"<ul> <li>Muchos problemas se expresan mucho m\u00e1s claramente en t\u00e9rminos de iteraci\u00f3n.</li> <li>Recorrer una colecci\u00f3n de elementos y realizar alg\u00fan tipo de operaci\u00f3n (buscar, reemplazar, modificar, etc.).</li> <li>Las tuberias de procesamiento se pueden aplicar a una amplia gama de problemas de procesamiento de datos.</li> <li>Mejor eficiencia de la memoria.</li> <li>Solo se producen valores cuando es necesario.</li> <li>Contrasta con la construcci\u00f3n de listas gigantes.</li> <li>Puede operar en datos en tiempo real.</li> <li>Los generadores fomentan la reutilizaci\u00f3n de c\u00f3digo.</li> <li>Separa la iteraci\u00f3n del c\u00f3digo que utiliza la iteraci\u00f3n.</li> <li>Puede crear una caja de herramientas de funciones de iteraci\u00f3n interesantes y mezclar y combinar.</li> </ul>"},{"location":"06_Generators/04_More_generators/#modulo-itertools","title":"M\u00f3dulo <code>itertools</code>","text":"<p><code>itertools</code> es un m\u00f3dulo de biblioteca con varias funciones dise\u00f1adas para ayudar con los iteradores/generadores.</p> <pre><code>itertools.chain(s1,s2)\nitertools.count(n)\nitertools.cycle(s)\nitertools.dropwhile(predicate, s)\nitertools.groupby(s)\nitertools.ifilter(predicate, s)\nitertools.imap(function, s1, ... sN)\nitertools.repeat(s, n)\nitertools.tee(s, ncopies)\nitertools.izip(s1, ... , sN)\n</code></pre> <p>Todas las funciones procesan datos de forma iterativa. Implementan varios tipos de patrones de interaci\u00f3n.</p> <p>M\u00e1s informaci\u00f3n en el tutorial Generator Tricks for Systems Programmers de PyCon '08.</p>"},{"location":"06_Generators/04_More_generators/#ejercicios","title":"Ejercicios","text":"<p>En los ejercicios anteriores, escribi\u00f3 un c\u00f3digo que segu\u00eda las l\u00edneas que se escrib\u00edan en un archivo de registro y las analiz\u00f3 en una secuencia de filas. Este ejercicio contin\u00faa bas\u00e1ndose en eso. Aseg\u00farese de que <code>Data/stocksim.py</code> todav\u00eda se est\u00e9 ejecutando.</p>"},{"location":"06_Generators/04_More_generators/#ejercicio-613-expresiones-generadoras","title":"Ejercicio 6.13: Expresiones generadoras","text":"<p>Las expresiones generadoras son una versi\u00f3n generadora de una comprensi\u00f3n de lista. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; nums = [1, 2, 3, 4, 5]\n&gt;&gt;&gt; squares = (x*x for x in nums)\n&gt;&gt;&gt; squares\n&lt;generator object &lt;genexpr&gt; at 0x109207e60&gt;\n&gt;&gt;&gt; for n in squares:\n...     print(n)\n...\n1\n4\n9\n16\n25\n</code></pre> <p>A diferencia de una lista por comprensi\u00f3n, una expresi\u00f3n generadora solo se puede usar una vez. Por lo tanto, si intentas otro bucle for, no obtienes nada:</p> <pre><code>&gt;&gt;&gt; for n in squares:\n...     print(n)\n...\n&gt;&gt;&gt;\n</code></pre>"},{"location":"06_Generators/04_More_generators/#ejercicio-614-expresiones-generadoras-en-argumentos-de-funcion","title":"Ejercicio 6.14: Expresiones generadoras en argumentos de funci\u00f3n","text":"<p>A veces, las expresiones generadoras se colocan en los argumentos de funci\u00f3n. Parece un poco extra\u00f1o al principio, pero prueba este experimento:</p> <pre><code>&gt;&gt;&gt; nums = [1,2,3,4,5]\n&gt;&gt;&gt; sum([x*x for x in nums]) # Una comprensi\u00f3n de lista\n55\n&gt;&gt;&gt; sum(x*x for x in nums) # Una expresi\u00f3n generadora\n55\n&gt;&gt;&gt;\n</code></pre> <p>En el ejemplo anterior, la segunda versi\u00f3n que usa generadores utilizar\u00eda significativamente menos memoria si se manipulara una lista grande.</p> <p>En tu archivo <code>portfolio.py</code>, realizaste algunos c\u00e1lculos que involucraban comprensiones de lista. Intente reemplazarlas con expresiones generadoras.</p>"},{"location":"06_Generators/04_More_generators/#ejercicio-615-simplificacion-de-codigo","title":"Ejercicio 6.15: Simplificaci\u00f3n de c\u00f3digo","text":"<p>Las expresiones generadoras suelen ser un reemplazo \u00fatil para funciones generadoras peque\u00f1as. Por ejemplo, en lugar de escribir una funci\u00f3n como esta:</p> <pre><code>def filter_symbols(rows, names):\n    for row in rows:\n        if row['name'] in names:\n            yield row\n</code></pre> <p>Podr\u00eda escribir algo como esto:</p> <pre><code>rows = (row for row in rows if row['name'] in names)\n</code></pre> <p>Modifique el programa <code>ticker.py</code> para usar expresiones generadoras seg\u00fan corresponda.</p> <p>Contenido | Anterior (6.3 Problemas y flujos de trabajo de productores y consumidores) | Pr\u00f3ximo (7. Algunos temas avanzados)</p>"},{"location":"07_Advanced_Topics/00_Overview/","title":"00_Overview","text":"<p>Contenido | Anterior (6 Generadores) | Pr\u00f3ximo (8. Pruebas, registro y depuraci\u00f3n)</p>"},{"location":"07_Advanced_Topics/00_Overview/#7-algunos-temas-avanzados","title":"7. Algunos temas avanzados","text":"<p>En esta secci\u00f3n, analizamos un peque\u00f1o conjunto de caracter\u00edsticas de Python un poco m\u00e1s avanzadas que puede encontrar en su codificaci\u00f3n diaria. Muchos de estos temas podr\u00edan haberse tratado en secciones anteriores del curso, pero no lo hicimos para ahorrarle m\u00e1s dolores de cabeza en ese momento.</p> <p>Se debe enfatizar que los temas de esta secci\u00f3n solo est\u00e1n destinados a servir como una introducci\u00f3n muy b\u00e1sica a estas ideas. Deber\u00e1 buscar material m\u00e1s avanzado para completar los detalles.</p> <ul> <li>7.1 Funciones con argumentos variables</li> <li>7.2 Funciones an\u00f3nimas y lambda</li> <li>7.3 Retornando Funciones y clousures</li> <li>7.4 Decoradores de funciones</li> <li>7.5 M\u00e9todos est\u00e1ticos y de clase</li> </ul> <p>Contenido | Anterior (6 Generadores) | Pr\u00f3ximo (8. Pruebas, registro y depuraci\u00f3n)</p>"},{"location":"07_Advanced_Topics/01_Variable_arguments/","title":"01_Variable_arguments","text":"<p>Contenido | Anterior (6.4 Expresiones generadoras) | Pr\u00f3ximo (7.2 Funciones an\u00f3nimas y lambda)</p>"},{"location":"07_Advanced_Topics/01_Variable_arguments/#71-argumentos-variables","title":"7.1 Argumentos variables","text":"<p>Esta secci\u00f3n cubre argumentos de funciones variables, a veces descritos como \"*args\" y \"**kwargs\".</p>"},{"location":"07_Advanced_Topics/01_Variable_arguments/#argumentos-de-variables-posicionales-args","title":"Argumentos de variables posicionales (<code>*args</code>)","text":"<p>Se dice que una funci\u00f3n que acepta cualquier n\u00famero de argumentos usa argumentos variables. Por ejemplo:</p> <pre><code>def f(x, *args):\n    ...\n</code></pre> <p>Llamada de funci\u00f3n.</p> <pre><code>f(1,2,3,4,5)\n</code></pre> <p>Los argumentos adicionales se pasan como una tupla.</p> <pre><code>def f(x, *args):\n    # x -&gt; 1\n    # args -&gt; (2,3,4,5)\n</code></pre>"},{"location":"07_Advanced_Topics/01_Variable_arguments/#argumentos-variables-de-palabra-clave-kwargs","title":"Argumentos variables de palabra clave (<code>*kwargs</code>)","text":"<p>Una funci\u00f3n tambi\u00e9n puede aceptar cualquier n\u00famero de argumentos de palabra clave. Por ejemplo:</p> <pre><code>def f(x, y, **kwargs):\n    ...\n</code></pre> <p>Llamada de funci\u00f3n.</p> <pre><code>f(2, 3, flag=True, mode='fast', header='debug')\n</code></pre> <p>Las palabras clave adicionales se pasan en un diccionario.</p> <pre><code>def f(x, y, **kwargs):\n    # x -&gt; 2\n    # y -&gt; 3\n    # kwargs -&gt; { 'flag': True, 'mode': 'fast', 'header': 'debug' }\n</code></pre>"},{"location":"07_Advanced_Topics/01_Variable_arguments/#combinacion-de-ambos","title":"Combinaci\u00f3n de ambos","text":"<p>Una funci\u00f3n tambi\u00e9n puede aceptar cualquier n\u00famero de argumentos variables, tanto de palabras clave como de palabras no clave.</p> <pre><code>def f(*args, **kwargs):\n    ...\n</code></pre> <p>Llamada a la funci\u00f3n.</p> <pre><code>f(2, 3, flag=True, mode='fast', header='debug')\n</code></pre> <p>Los argumentos se separan en componentes posicionales y de palabras clave</p> <pre><code>def f(*args, **kwargs):\n    # args = (2, 3)\n    # kwargs -&gt; { 'flag': True, 'mode': 'fast', 'header': 'debug' }\n    ...\n</code></pre> <p>Esta funci\u00f3n acepta cualquier combinaci\u00f3n de argumentos posicionales o de palabras clave. A veces se utiliza al escribir contenedores o cuando se quieren pasar argumentos a otra funci\u00f3n.</p>"},{"location":"07_Advanced_Topics/01_Variable_arguments/#pasar-tuplas-y-diccionarios","title":"Pasar tuplas y diccionarios","text":"<p>Las tuplas se pueden expandir en argumentos variables.</p> <pre><code>numbers = (2,3,4)\nf(1, *numbers) # Igual que f(1,2,3,4)\n</code></pre> <p>Los diccionarios tambi\u00e9n se pueden expandir a argumentos de palabras clave.</p> <pre><code>options = {\n    'color' : 'red',\n    'delimiter' : ',',\n    'width' : 400\n}\nf(data, **options)\n# Igual que f(data, color='red', delimiter=',', width=400)\n</code></pre>"},{"location":"07_Advanced_Topics/01_Variable_arguments/#ejercicios","title":"Ejercicios","text":""},{"location":"07_Advanced_Topics/01_Variable_arguments/#ejercicio-71-un-ejemplo-simple-de-argumentos-variables","title":"Ejercicio 7.1: Un ejemplo simple de argumentos variables","text":"<p>Intenta definir la siguiente funci\u00f3n:</p> <pre><code>&gt;&gt;&gt; def avg(x,*more):\n        return float(x+sum(more))/(1+len(more))\n\n&gt;&gt;&gt; avg(10,11)\n10.5\n&gt;&gt;&gt; avg(3,4,5)\n4.0\n&gt;&gt;&gt; avg(1,2,3,4,5,6)\n3.5\n&gt;&gt;&gt;\n</code></pre> <p>Observa c\u00f3mo el par\u00e1metro <code>*more</code> recopila todos los argumentos adicionales.</p>"},{"location":"07_Advanced_Topics/01_Variable_arguments/#ejercicio-72-pasar-tuplas-y-diccionarios-como-argumentos","title":"Ejercicio 7.2: Pasar tuplas y diccionarios como argumentos","text":"<p>Supongamos que lees algunos datos de un archivo y obtienes una tupla como esta:</p> <pre><code>&gt;&gt;&gt; data = ('GOOG', 100, 490.1)\n&gt;&gt;&gt;\n</code></pre> <p>Ahora, supongamos que quieres crear un objeto <code>Stock</code> a partir de estos datos. Si intentas pasar <code>data</code> directamente, no funciona:</p> <pre><code>&gt;&gt;&gt; from stock import Stock\n&gt;&gt;&gt; s = Stock(data)\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: __init__() takes exactly 4 arguments (2 given)\n&gt;&gt;&gt;\n</code></pre> <p>Esto se soluciona f\u00e1cilmente utilizando <code>*data</code> en su lugar. Pruebe esto:</p> <pre><code>&gt;&gt;&gt; s = Stock(*data)\n&gt;&gt;&gt; s\nStock('GOOG', 100, 490.1)\n&gt;&gt;&gt;\n</code></pre> <p>Si tiene un diccionario, puede usar <code>**</code> en su lugar. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; data = { 'name': 'GOOG', 'shares': 100, 'price': 490.1 }\n&gt;&gt;&gt; s = Stock(**data)\nStock('GOOG', 100, 490.1)\n&gt;&gt;&gt;\n</code></pre>"},{"location":"07_Advanced_Topics/01_Variable_arguments/#ejercicio-73-creacion-de-una-lista-de-instancias","title":"Ejercicio 7.3: Creaci\u00f3n de una lista de instancias","text":"<p>En su programa <code>report.py</code>, cre\u00f3 una lista de instancias utilizando un c\u00f3digo como este:</p> <pre><code>def read_portfolio(filename):\n    '''\n    Lea un archivo de cartera de acciones en una lista de diccionarios con claves\n    name, shares, and price.\n    '''\n\n    with open(filename) as lines:\n        portdicts = fileparse.parse_csv(lines,\n                               select=['name','shares','price'],\n                               types=[str,int,float])\n\n    portfolio = [ Stock(d['name'], d['shares'], d['price'])\n                  for d in portdicts ]\n    return Portfolio(portfolio)\n</code></pre> <p>Puede simplificar ese c\u00f3digo usando <code>Stock(**d)</code> en su lugar. Realice ese cambio.</p>"},{"location":"07_Advanced_Topics/01_Variable_arguments/#ejercicio-74-paso-de-argumentos","title":"Ejercicio 7.4: Paso de argumentos","text":"<p>La funci\u00f3n <code>fileparse.parse_csv()</code> tiene algunas opciones para cambiar el delimitador de archivo y para informar errores. Tal vez le gustar\u00eda exponer esas opciones a la funci\u00f3n <code>read_portfolio()</code> anterior. Realice este cambio:</p> <pre><code>def read_portfolio(filename, **opts):\n    '''\n    Lea un archivo de cartera de acciones en una lista de diccionarios con las claves name, shares, and price.\n    '''\n    with open(filename) as lines:\n        portdicts = fileparse.parse_csv(lines,\n                                        select=['name','shares','price'],\n                                        types=[str,int,float],\n                                        **opts)\n\n    portfolio = [ Stock(**d) for d in portdicts ]\n    return Portfolio(portfolio)\n</code></pre> <p>Una vez que haya realizado el cambio, intente leer un archivo con algunos errores:</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; port = report.read_portfolio('Data/missing.csv')\nRow 4: Couldn't convert ['MSFT', '', '51.23']\nRow 4: Reason invalid literal for int() with base 10: ''\nRow 7: Couldn't convert ['IBM', '', '70.44']\nRow 7: Reason invalid literal for int() with base 10: ''\n&gt;&gt;&gt;\n</code></pre> <p>Ahora, intenta silenciar los errores:</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; port = report.read_portfolio('Data/missing.csv', silence_errors=True)\n&gt;&gt;&gt;\n</code></pre> <p>Contenido | Anterior (6.4 Expresiones generadoras) | Pr\u00f3ximo (7.2 Funciones an\u00f3nimas y lambda)</p>"},{"location":"07_Advanced_Topics/02_Anonymous_function/","title":"02_Anonymous_function","text":"<p>Contenido | Anterior (7.1 Funciones con argumentos variables) | Pr\u00f3ximo (7.3 Retornando Funciones y clousures)</p>"},{"location":"07_Advanced_Topics/02_Anonymous_function/#72-funciones-anonimas-y-lambda","title":"7.2 Funciones an\u00f3nimas y Lambda","text":""},{"location":"07_Advanced_Topics/02_Anonymous_function/#revision-del-ordenamiento-de-listas","title":"Revisi\u00f3n del ordenamiento de listas","text":"<p>Las listas se pueden ordenar in situ. Utilizando el m\u00e9todo <code>sort</code>.</p> <pre><code>s = [10,1,7,3]\ns.sort() # s = [1,3,7,10]\n</code></pre> <p>Puede ordenar en orden inverso.</p> <pre><code>s = [10,1,7,3]\ns.sort(reverse=True) # s = [10,7,3,1]\n</code></pre> <p>Parece bastante simple. Sin embargo, \u00bfc\u00f3mo ordenamos una lista de diccionarios?</p> <pre><code>[{'name': 'AA', 'price': 32,2, 'shares': 100},\n{'name': 'IBM', 'price': 91,1, 'shares': 50},\n{'name': 'CAT', 'price': 83,44, 'shares': 150},\n{'name': 'MSFT', 'price': 51,23, 'shares': 200},\n{'name': 'GE', 'price': 40,37, 'shares': 95},\n{'name': 'MSFT', 'price': 65,1, 'shares': 50},\n{'name': 'IBM', 'price': 70,44, 'shares': 100}]\n</code></pre> <p>\u00bfCon qu\u00e9 criterios?</p> <p>Puede guiar la clasificaci\u00f3n mediante una funci\u00f3n clave. La funci\u00f3n clave es una funci\u00f3n que recibe el diccionario y devuelve el valor de inter\u00e9s para la clasificaci\u00f3n.</p> <pre><code>def stock_name(s):\n    return s['name']\n\nportfolio.sort(key=stock_name)\n</code></pre> <p>A continuaci\u00f3n se muestra el resultado.</p> <pre><code># Verifica c\u00f3mo se ordenan los diccionarios por la clave `name`\n[\n{'name': 'AA', 'price': 32.2, 'shares': 100},\n{'name': 'CAT', 'price': 83.44, 'shares': 150},\n{'name': 'GE', 'price': 40.37, 'shares': 95},\n{'name': 'IBM', 'price': 91.1, 'shares': 50},\n{'name': 'IBM', 'price': 70.44, 'shares': 100},\n{'name': 'MSFT', 'price': 51.23, 'shares': 200},\n{'name': 'MSFT', 'price': 65.1, 'shares': 50}\n]\n</code></pre>"},{"location":"07_Advanced_Topics/02_Anonymous_function/#funciones-de-devolucion-de-llamada","title":"Funciones de devoluci\u00f3n de llamada","text":"<p>En el ejemplo anterior, la funci\u00f3n clave es un ejemplo de una funci\u00f3n de devoluci\u00f3n de llamada. El m\u00e9todo <code>sort()</code> \"devuelve la llamada\" a una funci\u00f3n que usted proporciona. Las funciones de devoluci\u00f3n de llamada suelen ser funciones cortas de una sola l\u00ednea que solo se utilizan para esa operaci\u00f3n. Los programadores suelen pedir un atajo para especificar este procesamiento adicional.</p>"},{"location":"07_Advanced_Topics/02_Anonymous_function/#lambda-funciones-anonimas","title":"Lambda: Funciones an\u00f3nimas","text":"<p>Utilice una lambda en lugar de crear la funci\u00f3n. En nuestro ejemplo de ordenaci\u00f3n anterior.</p> <pre><code>portfolio.sort(key=lambda s: s['name'])\n</code></pre> <p>Esto crea una funci\u00f3n sin nombre que eval\u00faa una \u00fanica expresi\u00f3n. El c\u00f3digo anterior es mucho m\u00e1s corto que el c\u00f3digo inicial.</p> <pre><code>def stock_name(s):\n    return s['name']\n\nportfolio.sort(key=stock_name)\n\n# vs lambda\nportfolio.sort(key=lambda s: s['name'])\n</code></pre>"},{"location":"07_Advanced_Topics/02_Anonymous_function/#uso-de-lambda","title":"Uso de lambda","text":"<ul> <li>Lambda est\u00e1 muy restringida.</li> <li>Solo se permite una \u00fanica expresi\u00f3n.</li> <li>No se permiten declaraciones como <code>if</code>, <code>while</code>, etc.</li> <li>El uso m\u00e1s com\u00fan es con funciones como <code>sort()</code>.</li> </ul>"},{"location":"07_Advanced_Topics/02_Anonymous_function/#ejercicios","title":"Ejercicios","text":"<p>Lea algunos datos de una cartera de acciones y convi\u00e9rtalos en una lista:</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; portfolio = list(report.read_portfolio('Data/portfolio.csv'))\n&gt;&gt;&gt; for s in portfolio:\n        print(s)\n\nStock('AA', 100, 32.2)\nStock('IBM', 50, 91.1)\nStock('CAT', 150, 83.44)\nStock('MSFT', 200, 51.23)\nStock('GE', 95, 40.37)\nStock('MSFT', 50, 65.1)\nStock('IBM', 100, 70.44)\n&gt;&gt;&gt;\n</code></pre>"},{"location":"07_Advanced_Topics/02_Anonymous_function/#ejercicio-75-ordenar-por-un-campo","title":"Ejercicio 7.5: Ordenar por un campo","text":"<p>Pruebe las siguientes instrucciones que ordenan la cartera datos ordenados alfab\u00e9ticamente por nombre de la acci\u00f3n.</p> <pre><code>&gt;&gt;&gt; def stock_name(s):\n        return s.name\n\n&gt;&gt;&gt; portfolio.sort(key=stock_name)\n&gt;&gt;&gt; for s in portfolio:\n        print(s)\n\n... inspeccionar el resultado...\n&gt;&gt;&gt;\n</code></pre> <p>En esta parte, la funci\u00f3n <code>stock_name()</code> extrae el nombre de una acci\u00f3n de una sola entrada en la lista <code>portfolio</code>. <code>sort()</code> utiliza el resultado de esta funci\u00f3n para hacer la comparaci\u00f3n.</p>"},{"location":"07_Advanced_Topics/02_Anonymous_function/#ejercicio-76-ordenar-por-un-campo-con-lambda","title":"Ejercicio 7.6: Ordenar por un campo con lambda","text":"<p>Intenta ordenar la cartera seg\u00fan la cantidad de acciones usando una expresi\u00f3n <code>lambda</code>:</p> <pre><code>&gt;&gt;&gt; portfolio.sort(key=lambda s: s.shares)\n&gt;&gt;&gt; for s in portfolio:\n        print(s)\n\n... inspeccionar el resultado ...\n&gt;&gt;&gt;\n</code></pre> <p>Intenta ordenar la cartera seg\u00fan el precio de cada acci\u00f3n</p> <pre><code>&gt;&gt;&gt; portfolio.sort(key=lambda s: s.price)\n&gt;&gt;&gt; for s in portfolio:\n        print(s)\n\n... inspeccionar el resultado ...\n&gt;&gt;&gt;\n</code></pre> <p>Nota: <code>lambda</code> es un atajo \u00fatil porque te permite definir una funci\u00f3n de procesamiento especial directamente en la llamada a <code>sort()</code> en lugar de tener que definir una funci\u00f3n separada primero.</p> <p>Contenido | Anterior (7.1 Funciones con argumentos variables) | Pr\u00f3ximo (7.3 Retornando Funciones y clousures)</p>"},{"location":"07_Advanced_Topics/03_Returning_functions/","title":"03_Returning_functions","text":"<p>Contenido | Anterior (7.2 Funciones an\u00f3nimas y lambda) | Pr\u00f3ximo (7.4 Decoradores de funciones)</p>"},{"location":"07_Advanced_Topics/03_Returning_functions/#73-retornando-funciones-y-clousures","title":"7.3 Retornando Funciones y clousures","text":"<p>Esta secci\u00f3n presenta la idea de usar funciones para crear otras funciones.</p>"},{"location":"07_Advanced_Topics/03_Returning_functions/#introduccion","title":"Introducci\u00f3n","text":"<p>Considere la siguiente funci\u00f3n.</p> <pre><code>def add(x, y):\n    def do_add():\n        print('Sumando', x, y)\n        return x + y\n    return do_add\n</code></pre> <p>Esta es una funci\u00f3n que devuelve otra funci\u00f3n.</p> <pre><code>&gt;&gt;&gt; a = add(3,4)\n&gt;&gt;&gt; a\n&lt;function do_add at 0x6a670&gt;\n&gt;&gt;&gt; a()\nSumando 3 4\n7\n</code></pre>"},{"location":"07_Advanced_Topics/03_Returning_functions/#variables-locales","title":"Variables locales","text":"<p>Observe c\u00f3mo la funci\u00f3n interna hace referencia a las variables definidas por la funci\u00f3n externa.</p> <pre><code>def add(x, y):\n    def do_add():\n        # `x` e `y` se definen arriba, en `add(x, y)`\n        print('Sumando ', x, y)\n        return x + y\n    return do_add\n</code></pre> <p>Observe adem\u00e1s que esas variables se mantienen vivas de alguna manera despu\u00e9s de que <code>add()</code> haya terminado.</p> <pre><code>&gt;&gt;&gt; a = add(3,4)\n&gt;&gt;&gt; a\n&lt;function do_add at 0x6a670&gt;\n&gt;&gt;&gt; a()\nSumando 3 4 # \u00bfDe d\u00f3nde provienen estos valores?\n7\n</code></pre>"},{"location":"07_Advanced_Topics/03_Returning_functions/#clousures","title":"<code>Clousures</code>","text":"<p>Cuando se devuelve una funci\u00f3n interna como resultado, esa funci\u00f3n interna se conoce como clousure.</p> <pre><code>def add(x, y):\n    # `do_add` es un clousure\n    def do_add():\n        print('Sumando', x, y)\n        return x + y\n    return do_add\n</code></pre> <p>Caracter\u00edstica esencial: <code>clousures</code> conserva los valores de todas las variables necesarias para que la funci\u00f3n se ejecute correctamente m\u00e1s adelante. Piense en <code>Clousures</code> como una funci\u00f3n m\u00e1s un entorno adicional que contiene los valores de las variables de las que depende.</p>"},{"location":"07_Advanced_Topics/03_Returning_functions/#uso-de-clousures","title":"Uso de <code>Clousures</code>","text":"<p><code>Clousures</code> son una caracter\u00edstica esencial de Python. Sin embargo, su uso suele ser sutil. Aplicaciones comunes:</p> <ul> <li>Uso en funciones de devoluci\u00f3n de llamada.</li> <li>Evaluaci\u00f3n retrasada.</li> <li>Funciones de decorador (m\u00e1s adelante).</li> </ul>"},{"location":"07_Advanced_Topics/03_Returning_functions/#evaluacion-retrasada","title":"Evaluaci\u00f3n retrasada","text":"<p>Considere una funci\u00f3n como esta:</p> <pre><code>def after(seconds, func):\n    import time\n    time.sleep(seconds)\n    func()\n</code></pre> <p>Ejemplo de uso:</p> <pre><code>def greeting():\n    print('Hola Guido')\n\nafter(30, greeting)\n</code></pre> <p><code>after</code> ejecuta la funci\u00f3n suministrada... m\u00e1s tarde.</p> <p><code>Clousures</code> llevan informaci\u00f3n adicional.</p> <pre><code>def add(x, y):\n    def do_add():\n        print(f'Sumando {x} + {y} -&gt; {x+y}')\n    return do_add\n\ndef after(seconds, func):\n    import time\n    time.sleep(seconds)\n    func()\n\nafter(30, add(2, 3))\n# `do_add` tiene las referencias x -&gt; 2 e y -&gt; 3\n</code></pre>"},{"location":"07_Advanced_Topics/03_Returning_functions/#repeticion-de-codigo","title":"Repetici\u00f3n de c\u00f3digo","text":"<p><code>Clousures</code> tambi\u00e9n se pueden utilizar como t\u00e9cnica para evitar la repetici\u00f3n excesiva de c\u00f3digo. Puede escribir funciones que generen c\u00f3digo.</p>"},{"location":"07_Advanced_Topics/03_Returning_functions/#ejercicios","title":"Ejercicios","text":""},{"location":"07_Advanced_Topics/03_Returning_functions/#ejercicio-77-uso-de-clousures-para-evitar-la-repeticion","title":"Ejercicio 7.7: Uso de clousures para evitar la repetici\u00f3n","text":"<p>Una de las caracter\u00edsticas m\u00e1s poderosas de los <code>clousures</code> es su uso para generar c\u00f3digo repetitivo. Si vuelve a consultar Ejercicio 5.7, recuerde el c\u00f3digo para definir una propiedad con verificaci\u00f3n de tipos.</p> <pre><code>class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n        ...\n    @property\n    def shares(self):\n        return self._shares\n\n    @shares.setter\n    def shares(self, value):\n        if not isinstance(value, int):\n            raise TypeError('Expected int')\n        self._shares = value\n        ...\n</code></pre> <p>En lugar de escribir ese c\u00f3digo una y otra vez, puede crearlo autom\u00e1ticamente utilizando un <code>clousure</code>.</p> <p>Crea un archivo <code>typedproperty.py</code> y pon el siguiente c\u00f3digo en \u00e9l:</p> <pre><code># typedproperty.py\n\ndef typedproperty(name, expected_type):\n    private_name = '_' + name\n\n    @property\n    def prop(self):\n        return getattr(self, private_name)\n\n    @prop.setter\n    def prop(self, value):\n        if not isinstance(value, expected_type):\n            raise TypeError(f'Esperado un {expected_type}')\n        setattr(self, private_name, value)\n\n    return prop\n</code></pre> <p>Ahora, pru\u00e9balo definiendo una clase como esta:</p> <pre><code>from typedproperty import typedproperty\n\nclass Stock:\n    name = typedproperty('name', str)\n    shares = typedproperty('shares', int)\n    price = typedproperty('price', float)\n\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n</code></pre> <p>Intenta crear una instancia y verificar que la comprobaci\u00f3n de tipos funciona.</p> <pre><code>&gt;&gt;&gt; s = Stock('IBM', 50, 91.1)\n&gt;&gt;&gt; s.name\n'IBM'\n&gt;&gt;&gt; s.shares = '100'\n... deber\u00eda obtener un TypeError ...\n&gt;&gt;&gt;\n</code></pre>"},{"location":"07_Advanced_Topics/03_Returning_functions/#ejercicio-78-simplificacion-de-llamadas-a-funciones","title":"Ejercicio 7.8: Simplificaci\u00f3n de llamadas a funciones","text":"<p>En el ejemplo anterior, los usuarios pueden encontrar llamadas como <code>typedproperty('shares', int)</code> un poco verbosas para escribir, especialmente si se repiten mucho. Agregue las siguientes definiciones al archivo <code>typedproperty.py</code>:</p> <pre><code>String = lambda name: typedproperty(name, str)\nInteger = lambda name: typedproperty(name, int)\nFloat = lambda name: typedproperty(name, float)\n</code></pre> <p>Ahora, reescriba la clase <code>Stock</code> para usar estas funciones en su lugar:</p> <pre><code>class Stock:\n    name = String('name')\n    shares = Integer('shares')\n    price = Float('price')\n\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price= price\n</code></pre> <p>Ah, eso est\u00e1 un poco mejor. La principal conclusi\u00f3n aqu\u00ed es que <code>clousures</code> y <code>lambda</code> a menudo se pueden usar para simplificar el c\u00f3digo y eliminar repeticiones molestas. Esto suele ser bueno.</p>"},{"location":"07_Advanced_Topics/03_Returning_functions/#ejercicio-79-poniendolo-en-practica","title":"Ejercicio 7.9: Poni\u00e9ndolo en pr\u00e1ctica","text":"<p>Reescribe la clase <code>Stock</code> en el archivo <code>stock.py</code> para que use propiedades tipificadas como se muestra.</p> <p>Contenido | Anterior (7.2 Funciones an\u00f3nimas y lambda) | Pr\u00f3ximo (7.4 Decoradores de funciones)</p>"},{"location":"07_Advanced_Topics/04_Function_decorators/","title":"04_Function_decorators","text":"<p>Contenido | Anterior (7.3 Retornando Funciones y clousures) | Pr\u00f3ximo (7.5 M\u00e9todos est\u00e1ticos y de clase)</p>"},{"location":"07_Advanced_Topics/04_Function_decorators/#74-decoradores-de-funciones","title":"7.4 Decoradores de funciones","text":"<p>Esta secci\u00f3n presenta el concepto de decorador. Este es un tema avanzado del que apenas hemos tocado la superficie.</p>"},{"location":"07_Advanced_Topics/04_Function_decorators/#ejemplo-de-registro","title":"Ejemplo de registro","text":"<p>Considere una funci\u00f3n.</p> <pre><code>def add(x, y):\n    return x + y\n</code></pre> <p>Ahora, considere la funci\u00f3n con alg\u00fan registro agregado.</p> <pre><code>def add(x, y):\n    print('Llamando a add')\n    return x + y\n</code></pre> <p>Ahora una segunda funci\u00f3n tambi\u00e9n con alg\u00fan registro.</p> <pre><code>def sub(x, y):\n    print('Llamando a sub')\n    return x - y\n</code></pre>"},{"location":"07_Advanced_Topics/04_Function_decorators/#observacion","title":"Observaci\u00f3n","text":"<p>Observaci\u00f3n: Es algo repetitivo.</p> <p>Escribir programas en los que hay mucha replicaci\u00f3n de c\u00f3digo suele ser muy molesto. Son tediosos de escribir y dif\u00edciles de mantener. Especialmente si decides que quieres cambiar su funcionamiento (es decir, un tipo diferente de registro, tal vez).</p>"},{"location":"07_Advanced_Topics/04_Function_decorators/#codigo-que-crea-el-registro","title":"C\u00f3digo que crea el registro","text":"<p>Quiz\u00e1s puedas crear una funci\u00f3n que cree funciones con el registro agregado a ellas. Un contenedor.</p> <pre><code>def logged(func):\n    def wrapper(*args, **kwargs):\n        print('Llamando a', func.__name__)\n        return func(*args, **kwargs)\n    return wrapper\n</code></pre> <p>Ahora \u00fasalo.</p> <pre><code>def add(x, y):\n    return x + y\n\nlogged_add = logged(add)\n</code></pre> <p>\u00bfQu\u00e9 sucede cuando llamas a la funci\u00f3n devuelta por <code>logged</code>?</p> <pre><code>logged_add(3, 4) # Ves que aparece el mensaje de registro\n</code></pre> <p>Este ejemplo ilustra el proceso de creaci\u00f3n de una llamada funci\u00f3n contenedora.</p> <p>Una funci\u00f3n contenedora es una funci\u00f3n que envuelve otra funci\u00f3n con algunos bits adicionales de procesamiento, pero que por lo dem\u00e1s funciona exactamente de la misma manera que la funci\u00f3n original.</p> <pre><code>&gt;&gt;&gt; logged_add(3, 4)\nLlamando a add # Salida adicional. A\u00f1adida por la funci\u00f3n contenedora\n7\n&gt;&gt;&gt;\n</code></pre> <p>Nota: La funci\u00f3n <code>logged()</code> crea la funci\u00f3n contenedora y la devuelve como resultado.</p>"},{"location":"07_Advanced_Topics/04_Function_decorators/#decoradores","title":"Decoradores","text":"<p>Poner envoltorios a las funciones es extremadamente com\u00fan en Python. Es tan com\u00fan que existe una sintaxis especial para ello.</p> <pre><code>def add(x, y):\n    return x + y\n\nadd = logged(add)\n\n# Sintaxis especial\n@logged\ndef add(x, y):\n    return x + y\n</code></pre> <p>La sintaxis especial realiza exactamente los mismos pasos que se muestran arriba. Un decorador es simplemente una sintaxis nueva. Se dice que decora la funci\u00f3n.</p>"},{"location":"07_Advanced_Topics/04_Function_decorators/#comentario","title":"Comentario","text":"<p>Hay muchos m\u00e1s detalles sutiles sobre los decoradores que los que se han presentado aqu\u00ed. Por ejemplo, su uso en clases o el uso de m\u00faltiples decoradores con una funci\u00f3n. Sin embargo, el ejemplo anterior es una buena ilustraci\u00f3n de c\u00f3mo tiende a surgir su uso. Por lo general, es en respuesta a un c\u00f3digo repetitivo que aparece en una amplia gama de definiciones de funciones. Un decorador puede mover ese c\u00f3digo a una definici\u00f3n central.</p>"},{"location":"07_Advanced_Topics/04_Function_decorators/#ejercicios","title":"Ejercicios","text":""},{"location":"07_Advanced_Topics/04_Function_decorators/#ejercicio-710-un-decorador-para-cronometrar","title":"Ejercicio 7.10: Un decorador para cronometrar","text":"<p>Si define una funci\u00f3n, su nombre y m\u00f3dulo se almacenan en los atributos <code>__name__</code> y <code>__module__</code>. Por ejemplo:</p> <pre><code>&gt;&gt;&gt; def add(x,y):\n        return x+y\n\n&gt;&gt;&gt; add.__name__\n'add'\n&gt;&gt;&gt; add.__module__\n'__main__'\n&gt;&gt;&gt;\n</code></pre> <p>En un archivo <code>timethis.py</code>, escriba una funci\u00f3n decoradora <code>timethis(func)</code> que envuelva una funci\u00f3n con una capa adicional de l\u00f3gica que muestre cu\u00e1nto tiempo tarda una funci\u00f3n en ejecutarse. Para ello, rodear\u00e1s la funci\u00f3n con llamadas de temporizaci\u00f3n como esta:</p> <pre><code>start = time.time()\nr = func(*args,**kwargs)\nend = time.time()\nprint('%s.%s: %f' % (func.__module__, func.__name__, end-start))\n</code></pre> <p>A continuaci\u00f3n, se incluye un ejemplo de c\u00f3mo deber\u00eda funcionar tu decorador:</p> <pre><code>&gt;&gt;&gt; from timethis import timethis\n&gt;&gt;&gt; @timethis\n    def countdown(n):\n        while n &gt; 0:\n            n -= 1\n\n&gt;&gt;&gt; countdown(10000000)\n__main__.countdown : 0.076562\n&gt;&gt;&gt;\n</code></pre> <p>Discusi\u00f3n: Este decorador <code>@timethis</code> se puede colocar delante de cualquier definici\u00f3n de funci\u00f3n. Por lo tanto, puedes usarlo como una herramienta de diagn\u00f3stico para ajustar el rendimiento.</p> <p>Contenido | Anterior (7.3 Retornando Funciones y clousures) | Pr\u00f3ximo (7.5 M\u00e9todos est\u00e1ticos y de clase)</p>"},{"location":"07_Advanced_Topics/05_Decorated_methods/","title":"05_Decorated_methods","text":"<p>Contenido | Anterior (7.4 Decoradores de funciones) | Pr\u00f3ximo (8 Pruebas y depuraci\u00f3n)</p>"},{"location":"07_Advanced_Topics/05_Decorated_methods/#75-metodos-estaticos-y-de-clase","title":"7.5 M\u00e9todos est\u00e1ticos y de clase","text":"<p>Esta secci\u00f3n analiza algunos decoradores integrados que se utilizan en combinaci\u00f3n con definiciones de m\u00e9todos.</p>"},{"location":"07_Advanced_Topics/05_Decorated_methods/#decoradores-predefinidos","title":"Decoradores predefinidos","text":"<p>Existen decoradores predefinidos que se utilizan para especificar tipos especiales de m\u00e9todos en las definiciones de clase.</p> <pre><code>class Foo:\n    def bar(self,a):\n    ...\n\n    @staticmethod\n        def spam(a):\n        ...\n\n    @classmethod\n    def grok(cls,a):\n        ...\n\n    @property\n    def name(self):\n        ...\n</code></pre> <p>Veamos uno por uno.</p>"},{"location":"07_Advanced_Topics/05_Decorated_methods/#metodos-estaticos","title":"M\u00e9todos est\u00e1ticos","text":"<p><code>@staticmethod</code> se utiliza para definir los llamados m\u00e9todos de clase est\u00e1ticos (de C++/Java). Un m\u00e9todo est\u00e1tico es una funci\u00f3n que forma parte de la clase, pero que no opera en instancias.</p> <pre><code>class Foo(object):\n    @staticmethod\n    def bar(x):\n        print('x =', x)\n\n&gt;&gt;&gt; Foo.bar(2) x=2\n&gt;&gt;&gt;\n</code></pre> <p>Los m\u00e9todos est\u00e1ticos se utilizan a veces para implementar c\u00f3digo de soporte interno para una clase. Por ejemplo, c\u00f3digo para ayudar a administrar instancias creadas (administraci\u00f3n de memoria, recursos del sistema, persistencia, bloqueo, etc.). Tambi\u00e9n se utilizan en ciertos patrones de dise\u00f1o (no se analizan aqu\u00ed).</p>"},{"location":"07_Advanced_Topics/05_Decorated_methods/#metodos-de-clase","title":"M\u00e9todos de clase","text":"<p><code>@classmethod</code> se utiliza para definir m\u00e9todos de clase. Un m\u00e9todo de clase es un m\u00e9todo que recibe el objeto de clase como primer par\u00e1metro en lugar de la instancia.</p> <pre><code>class Foo:\n    def bar(self):\n        print(self)\n\n    @classmethod\n    def spam(cls):\n        print(cls)\n\n&gt;&gt;&gt; f = Foo()\n&gt;&gt;&gt; f.bar()\n&lt;__main__.Foo object at 0x971690&gt; # La instancia `f`\n&gt;&gt;&gt; Foo.spam()\n&lt;class '__main__.Foo'&gt; # La clase `Foo`\n&gt;&gt;&gt;\n</code></pre> <p>Los m\u00e9todos de clase se utilizan con mayor frecuencia como una herramienta para definir constructores alternativos.</p> <pre><code>import time\nclass Date:\n    def __init__(self,year,month,day):\n        self.year = year\n        self.month = month\n        self.day = day\n\n    @classmethod\n    def today(cls):\n        # Observa c\u00f3mo se pasa la clase como argumento\n        tm = time.localtime()\n        # Y se usa para crear una nueva instancia\n        return cls(tm.tm_year, tm.tm_mon, tm.tm_mday)\n\nd = Date.today()\nprint(d.__dict__)\n</code></pre> <p>Los m\u00e9todos de clase resuelven algunos problemas complicados con caracter\u00edsticas como la herencia.</p> <pre><code>class Date:\n    ...\n    @classmethod\n    def today(cls):\n        # Obtiene la clase correcta (p. ej., `NewDate`)\n        tm = time.localtime()\n        return cls(tm.tm_year, tm.tm_mon, tm.tm_mday)\n\nclass NewDate(Date):\n    ...\n\nd = NewDate.today()\n</code></pre>"},{"location":"07_Advanced_Topics/05_Decorated_methods/#ejercicios","title":"Ejercicios","text":""},{"location":"07_Advanced_Topics/05_Decorated_methods/#ejercicio-711-metodos-de-clase-en-la-practica","title":"Ejercicio 7.11: M\u00e9todos de clase en la pr\u00e1ctica","text":"<p>En los archivos <code>report.py</code> y <code>portfolio.py</code>, la creaci\u00f3n de un objeto <code>Portfolio</code> es un poco confusa. Por ejemplo, el programa <code>report.py</code> tiene un c\u00f3digo como este:</p> <pre><code>def read_portfolio(filename, **opts):\n    '''\n    Lee un archivo de cartera de acciones en una lista de diccionarios con claves\n    name, shares, and price.\n    '''\n    with open(filename) as lines:\n        portdicts = fileparse.parse_csv(lines,\n                                        select=['name','shares','price'],\n                                        types=[str,int,float],\n                                        **opts)\n\n    portfolio = [ Stock(**d) for d in portdicts ]\n    return Portfolio(portfolio)\n</code></pre> <p>y el archivo <code>portfolio.py</code> define <code>Portfolio()</code> con un inicializador extra\u00f1o como este:</p> <pre><code>class Portfolio:\n    def __init__(self, holdings):\n        self.holdings = holdings\n    ...\n</code></pre> <p>Francamente, la cadena de responsabilidad es un poco confusa porque el c\u00f3digo est\u00e1 disperso. Si se supone que una clase <code>Portfolio</code> contiene una lista de instancias de <code>Stock</code>, tal vez deber\u00eda cambiar la clase para que sea un poco m\u00e1s clara. As\u00ed:</p> <pre><code># portfolio.py\n\nimport stock\n\nclass Portfolio:\n    def __init__(self):\n        self.holdings = []\n\n    def append(self, holding):\n        if not isinstance(holding, stock.Stock):\n            raise TypeError('Se esperaba una instancia de Stock')\n        self.holdings.append(holding)\n    ...\n</code></pre> <p>Si quieres leer un portfolio desde un archivo CSV, tal vez deber\u00edas crear un m\u00e9todo de clase para ello:</p> <pre><code># portfolio.py\n\nimport fileparse\nimport stock\n\nclass Portfolio:\n    def __init__(self):\n        self.holdings = []\n\n    def append(self, holding):\n        if not isinstance(holding, stock.Stock):\n            raise TypeError('Se esperaba una instancia de Stock')\n        self.holdings.append(holding)\n\n    @classmethod\n    def from_csv(cls, lines, **opts):\n        self = cls()\n        portdicts = fileparse.parse_csv(lines,\n                                        select=['name','shares','price'],\n                                        types=[str,int,float],\n                                        **opts)\n\n        for d in portdicts:\n            self.append(stock.Stock(**d))\n\n        return self\n</code></pre> <p>Para usar esta nueva clase Portfolio, ahora puede escribir c\u00f3digo como este:</p> <pre><code>&gt;&gt;&gt; from portfolio import Portfolio\n&gt;&gt;&gt; with open('Data/portfolio.csv') as lines:\n...     port = Portfolio.from_csv(lines)\n...\n&gt;&gt;&gt;\n</code></pre> <p>Realice estos cambios en la clase <code>Portfolio</code> y modifique el c\u00f3digo <code>report.py</code> para utilizar el m\u00e9todo de clase.</p> <p>Contenido | Anterior (7.4 Decoradores de funciones) | Pr\u00f3ximo (8 Pruebas y depuraci\u00f3n)</p>"},{"location":"08_Testing_debugging/00_Overview/","title":"00_Overview","text":"<p>Contenido | Anterior (7. Algunos temas avanzados) | Pr\u00f3ximo (9. Paquetes)</p>"},{"location":"08_Testing_debugging/00_Overview/#8-pruebas-y-depuracion","title":"8. Pruebas y depuraci\u00f3n","text":"<p>Esta secci\u00f3n presenta algunos temas b\u00e1sicos relacionados con las pruebas, el registro y la depuraci\u00f3n.</p> <ul> <li>8.1 Pruebas</li> <li>8.2 Registro, manejo de errores y diagn\u00f3sticos</li> <li>8.3 Depuraci\u00f3n</li> </ul> <p>Contenido | Anterior (7. Algunos temas avanzados) | Pr\u00f3ximo (9. Paquetes)</p>"},{"location":"08_Testing_debugging/01_Testing/","title":"01_Testing","text":"<p>Contenido | Anterior (7.5 M\u00e9todos est\u00e1ticos y de clase) | Pr\u00f3ximo (8.2 Logging)</p>"},{"location":"08_Testing_debugging/01_Testing/#81-pruebas","title":"8.1 Pruebas","text":""},{"location":"08_Testing_debugging/01_Testing/#las-pruebas-son-geniales-la-depuracion-es-un-asco","title":"Las pruebas son geniales, la depuraci\u00f3n es un asco","text":"<p>La naturaleza din\u00e1mica de Python hace que las pruebas sean de vital importancia para la mayor\u00eda de las aplicaciones. No hay ning\u00fan compilador que encuentre errores. La \u00fanica forma de encontrarlos es ejecutar el c\u00f3digo y asegurarse de probar todas sus funciones.</p>"},{"location":"08_Testing_debugging/01_Testing/#afirmaciones","title":"Afirmaciones","text":"<p>La declaraci\u00f3n <code>assert</code> es una verificaci\u00f3n interna del programa. Si una expresi\u00f3n no es verdadera, genera una excepci\u00f3n <code>AssertionError</code>.</p> <p>Sintaxis de la declaraci\u00f3n <code>assert</code>.</p> <pre><code>assert &lt;expresi\u00f3nn&gt; [, 'Mensaje de diagn\u00f3stico']\n</code></pre> <p>Por ejemplo.</p> <pre><code>assert isinstance(10, int), 'Int esperado'\n</code></pre> <p>No deber\u00eda usarse para verificar la entrada del usuario (es decir, los datos ingresados en un formulario web o algo as\u00ed). Su prop\u00f3sito es m\u00e1s para verificaciones internas e invariantes (condiciones que siempre deben ser verdaderas).</p>"},{"location":"08_Testing_debugging/01_Testing/#programacion-por-contrato","title":"Programaci\u00f3n por contrato","text":"<p>Tambi\u00e9n conocida como Dise\u00f1o por contrato, el uso liberal de aserciones es un enfoque para dise\u00f1ar software. Prescribe que los dise\u00f1adores de software deben definir especificaciones de interfaces precisas para los componentes del software.</p> <p>Por ejemplo, puede colocar aserciones en todas las entradas de una funci\u00f3n.</p> <pre><code>def add(x, y):\n    assert isinstance(x, int), 'Espera un int'\n    assert isinstance(y, int), 'Espera un int'\n    return x + y\n</code></pre> <p>Al verificar las entradas, se detectar\u00e1n inmediatamente los invocadores que no est\u00e9n usando los argumentos adecuados.</p> <pre><code>&gt;&gt;&gt; add(2, 3)\n5\n&gt;&gt;&gt; add('2', '3')\nTraceback (most recent call last):\n...\nAssertionError: Esperado un int\n&gt;&gt;&gt;\n</code></pre>"},{"location":"08_Testing_debugging/01_Testing/#pruebas-en-linea","title":"Pruebas en l\u00ednea","text":"<p>Las afirmaciones tambi\u00e9n se pueden usar para pruebas simples.</p> <pre><code>def add(x, y):\n    return x + y\n\nassert add(2,2) == 4\n</code></pre> <p>De esta manera, est\u00e1 incluyendo la prueba en el mismo m\u00f3dulo que su c\u00f3digo.</p> <p>Beneficio: si el c\u00f3digo est\u00e1 claramente da\u00f1ado, los intentos de importar el m\u00f3dulo fallar\u00e1n.</p> <p>Esto no se recomienda para pruebas exhaustivas. Es m\u00e1s bien una \"prueba de humo\" b\u00e1sica. \u00bfFunciona la funci\u00f3n en alg\u00fan ejemplo? Si no, entonces algo est\u00e1 definitivamente da\u00f1ado.</p>"},{"location":"08_Testing_debugging/01_Testing/#modulo-unittest","title":"M\u00f3dulo <code>unittest</code>","text":"<p>Supongamos que tiene un c\u00f3digo.</p> <pre><code># simple.py\n\ndef add(x, y):\n    return x + y\n</code></pre> <p>Ahora, supongamos que desea probarlo. Cree un archivo de prueba independiente como este.</p> <pre><code># test_simple.py\n\nimport simple\nimport unittest\n</code></pre> <p>Luego defina una clase de prueba.</p> <pre><code># test_simple.py\n\nimport simple\nimport unittest\n\n# Observe que hereda de unittest.TestCase\nclass TestAdd(unittest.TestCase):\n    ...\n</code></pre> <p>La clase de prueba debe heredar de <code>unittest.TestCase</code>.</p> <p>En la clase de prueba, se definen los m\u00e9todos de prueba.</p> <pre><code># test_simple.py\n\nimport simple\nimport unittest\n\n# Observe que hereda de unittest.TestCase\nclass TestAdd(unittest.TestCase):\n    def test_simple(self):\n        # Prueba con argumentos enteros simples\n        r = simple.add(2, 2)\n        self.assertEqual(r, 5)\n\n    def test_str(self):\n        # Prueba con cadenas\n        r = simple.add('hello', 'world')\n        self.assertEqual(r, 'helloworld')\n</code></pre> <p>*Importante: Cada m\u00e9todo debe comenzar con <code>test</code>.</p>"},{"location":"08_Testing_debugging/01_Testing/#uso-de-unittest","title":"Uso de <code>unittest</code>","text":"<p>Hay varias afirmaciones integradas que vienen con <code>unittest</code>. Cada una de ellas afirma algo diferente.</p> <pre><code># Afirmar que expr es True\nself.assertTrue(expr)\n\n# Afirmar que x == y\nself.assertEqual(x,y)\n\n# Afirmar que x != y\nself.assertNotEqual(x,y)\n\n# Afirmar que x est\u00e1 cerca de y\nself.assertAlmostEqual(x,y,places)\n\n# Afirmar que callable(arg1,arg2,...) genera excepci\u00f3n\nself.assertRaises(exc, callable, arg1, arg2, ...)\n</code></pre> <p>Esta no es una lista exhaustiva. Hay otras afirmaciones en el m\u00f3dulo.</p>"},{"location":"08_Testing_debugging/01_Testing/#ejecutar-unittest","title":"Ejecutar <code>unittest</code>","text":"<p>Para ejecutar las pruebas, convierta el c\u00f3digo en un script.</p> <pre><code># test_simple.py\n\n...\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre> <p>Luego, ejecute Python en el archivo de prueba.</p> <pre><code>bash % python3 test_simple.py\nF.\n=========================================================\nFAIL: test_simple (__main__.TestAdd)\n--------------------------------------------------------\nTraceback (most recent call last):\nFile \"testsimple.py\", line 8, in test_simple\nself.assertEqual(r, 5)\nAssertionError: 4 != 5\n--------------------------------------------------------\nRan 2 tests in 0.000s\nFAILED (failures=1)\n</code></pre>"},{"location":"08_Testing_debugging/01_Testing/#comentario","title":"Comentario","text":"<p>La realizaci\u00f3n de pruebas unitarias efectivas es un arte y puede volverse bastante complicada para aplicaciones grandes.</p> <p>El m\u00f3dulo <code>unittest</code> tiene una gran cantidad de opciones relacionadas con los ejecutores de pruebas, la recopilaci\u00f3n de resultados y otros aspectos de las pruebas. Consulta la documentaci\u00f3n para obtener m\u00e1s detalles.</p>"},{"location":"08_Testing_debugging/01_Testing/#herramientas-de-prueba-de-terceros","title":"Herramientas de prueba de terceros","text":"<p>El m\u00f3dulo <code>unittest</code> integrado tiene la ventaja de estar disponible en todas partes: es parte de Python. Sin embargo, muchos programadores tambi\u00e9n lo consideran bastante detallado. Una alternativa popular es pytest. Con pytest, tu archivo de prueba se simplifica a algo como lo siguiente:</p> <pre><code># test_simple.py\nimport simple\n\ndef test_simple():\n    assert simple.add(2,2) == 4\n\ndef test_str():\n    assert simple.add('hello','world') == 'helloworld'\n</code></pre> <p>Para ejecutar las pruebas, simplemente escriba un comando como <code>python -m pytest</code>. Descubrir\u00e1 todas las pruebas y las ejecutar\u00e1.</p> <p><code>pytest</code> es mucho m\u00e1s que este ejemplo, pero suele ser bastante f\u00e1cil comenzar si decide probarlo.</p>"},{"location":"08_Testing_debugging/01_Testing/#ejercicios","title":"Ejercicios","text":"<p>En este ejercicio, explorar\u00e1 la mec\u00e1nica b\u00e1sica del uso del m\u00f3dulo <code>unittest</code> de Python.</p> <p>En ejercicios anteriores, escribi\u00f3 un archivo <code>stock.py</code> que conten\u00eda una clase <code>Stock</code>. Para este ejercicio, se asumi\u00f3 que est\u00e1 usando el c\u00f3digo escrito para Ejercicio 7.9 que involucra propiedades tipificadas. Si, por alguna raz\u00f3n, eso no funciona, es posible que desee copiar la soluci\u00f3n de <code>Soluciones/7_9</code> a su directorio de trabajo.</p>"},{"location":"08_Testing_debugging/01_Testing/#ejercicio-81-escritura-de-pruebas-unitarias","title":"Ejercicio 8.1: Escritura de pruebas unitarias","text":"<p>En un archivo separado <code>test_stock.py</code>, escribe un conjunto de pruebas unitarias para la clase <code>Stock</code>. Para comenzar, aqu\u00ed tienes un peque\u00f1o fragmento de c\u00f3digo que prueba la creaci\u00f3n de instancias:</p> <pre><code># test_stock.py\n\nimport unittest\nimport stock\n\nclass TestStock(unittest.TestCase):\n    def test_create(self):\n        s = stock.Stock('GOOG', 100, 490.1)\n        self.assertEqual(s.name, 'GOOG')\n        self.assertEqual(s.shares, 100)\n        self.assertEqual(s.price, 490.1)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre> <p>Ejecuta tus pruebas unitarias. Deber\u00edas obtener un resultado similar a este:</p> <pre><code>.\n----------------------------------------------------------------------\nRan 1 tests in 0.000s\n\nOK\n</code></pre> <p>Una vez que est\u00e9 satisfecho con el funcionamiento, escriba pruebas unitarias adicionales que verifiquen lo siguiente:</p> <ul> <li>Aseg\u00farese de que la propiedad <code>s.cost</code> devuelva el valor correcto (49010.0)</li> <li>Aseg\u00farese de que el m\u00e9todo <code>s.sell()</code> funcione correctamente. Deber\u00eda disminuir el valor de <code>s.shares</code> en consecuencia.</li> <li>Aseg\u00farese de que el atributo <code>s.shares</code> no se pueda configurar en un valor que no sea entero.</li> </ul> <p>Para la \u00faltima parte, deber\u00e1 verificar que se genere una excepci\u00f3n. Una forma sencilla de hacerlo es con un c\u00f3digo como este:</p> <pre><code>class TestStock(unittest.TestCase):\n    ...\n    def test_bad_shares(self):\n        s = stock.Stock('GOOG', 100, 490.1)\n        with self.assertRaises(TypeError):\n            s.shares = '100'\n</code></pre> <p>Contenido | Anterior (7.5 M\u00e9todos est\u00e1ticos y de clase) | Pr\u00f3ximo (8.2 Logging)</p>"},{"location":"08_Testing_debugging/02_Logging/","title":"02_Logging","text":"<p>Contenido | Anterior (8.1 Pruebas) | Pr\u00f3ximo (8.3 Depuraci\u00f3n)</p>"},{"location":"08_Testing_debugging/02_Logging/#82-registro-manejo-de-errores-y-diagnosticos","title":"8.2 Registro, manejo de errores y diagn\u00f3sticos","text":"<p>Esta secci\u00f3n presenta brevemente el m\u00f3dulo de registro.</p>"},{"location":"08_Testing_debugging/02_Logging/#modulo-de-registro","title":"M\u00f3dulo de registro","text":"<p>El m\u00f3dulo <code>logging</code> es un m\u00f3dulo de la biblioteca est\u00e1ndar para registrar informaci\u00f3n de diagn\u00f3stico. Tambi\u00e9n es un m\u00f3dulo muy grande con muchas funciones sofisticadas. Mostraremos un ejemplo simple para ilustrar su utilidad.</p>"},{"location":"08_Testing_debugging/02_Logging/#excepciones-revisitadas","title":"Excepciones revisitadas","text":"<p>En los ejercicios, escribimos una funci\u00f3n <code>parse()</code> que se parec\u00eda a esto:</p> <pre><code># fileparse.py\ndef parse(f, types=None, names=None, delimiter=None):\n    records = []\n    for line in f:\n        line = line.strip()\n        if not line: continue\n        try:\n            records.append(split(line,types,names,delimiter))\n        except ValueError as e:\n            print(\"No se pudo analizar :\", line)\n            print(\"Raz\u00f3n :\", e)\n    return records\n</code></pre> <p>Conc\u00e9ntrese en la declaraci\u00f3n <code>try-except</code>. \u00bfQu\u00e9 deber\u00eda hacer en el bloque <code>except</code>?</p> <p>\u00bfDeber\u00eda imprimir un mensaje de advertencia?</p> <pre><code>try:\n    records.append(split(line,types,names,delimiter))\nexcept ValueError as e:\n    print(\"No se pudo analizar :\", line)\n    print(\"Raz\u00f3n :\", e)\n</code></pre> <p>\u00bfO lo ignoras en silencio?</p> <pre><code>try:\n    records.append(split(line,types,names,delimiter))\nexcept ValueError as e:\n    pass\n</code></pre> <p>Ninguna soluci\u00f3n es satisfactoria porque a menudo se desean ambos comportamientos (seleccionables por el usuario).</p>"},{"location":"08_Testing_debugging/02_Logging/#uso-del-registro","title":"Uso del registro","text":"<p>El m\u00f3dulo <code>logging</code> puede solucionar este problema.</p> <pre><code># fileparse.py\nimport logging\nlog = logging.getLogger(__name__)\n\ndef parse(f,types=None,names=None,delimiter=None):\n    ...\n    try:\n        records.append(split(line,types,names,delimiter))\n    except ValueError as e:\n        log.warning(\"No se pudo analizar: %s\", line)\n        log.debug(\"Raz\u00f3n: %s\", e)\n</code></pre> <p>Se modifica el c\u00f3digo para emitir mensajes de advertencia o un objeto <code>Logger</code> especial. El creado con <code>logging.getLogger(__name__)</code>.</p>"},{"location":"08_Testing_debugging/02_Logging/#conceptos-basicos-de-registro","title":"Conceptos b\u00e1sicos de registro","text":"<p>Crear un objeto de registro.</p> <pre><code>log = logging.getLogger(name) # name es una cadena\n</code></pre> <p>Emisi\u00f3n de mensajes de registro.</p> <pre><code>log.critical(message [, args])\nlog.error(message [, args])\nlog.warning(message [, args])\nlog.info(message [, args])\nlog.debug(message [, args])\n</code></pre> <p>Cada m\u00e9todo representa un nivel de gravedad diferente.</p> <p>Todos ellos crean un mensaje de registro formateado. <code>args</code> se utiliza con el operador <code>%</code> para crear el mensaje.</p> <pre><code>logmsg = message % args # Escrito en el registro\n</code></pre>"},{"location":"08_Testing_debugging/02_Logging/#configuracion-del-registro","title":"Configuraci\u00f3n del registro","text":"<p>El comportamiento del registro se configura por separado.</p> <pre><code># main.py\n\n...\n\nif __name__ == '__main__':\n    import logging\n    logging.basicConfig(\n        filename  = 'app.log',      # Archivo de salida del registro\n        level     = logging.INFO,   # Nivel de salida\n    )\n</code></pre> <p>Normalmente, esta es una configuraci\u00f3n \u00fanica al iniciar el programa. La configuraci\u00f3n es independiente del c\u00f3digo que realiza las llamadas de registro.</p>"},{"location":"08_Testing_debugging/02_Logging/#comentarios","title":"Comentarios","text":"<p>El registro es altamente configurable. Puede ajustar cada aspecto del mismo: archivos de salida, niveles, formatos de mensajes, etc. Sin embargo, el c\u00f3digo que usa el registro no tiene que preocuparse por eso.</p>"},{"location":"08_Testing_debugging/02_Logging/#ejercicios","title":"Ejercicios","text":""},{"location":"08_Testing_debugging/02_Logging/#ejercicio-82-agregar-registro-a-un-modulo","title":"Ejercicio 8.2: Agregar registro a un m\u00f3dulo","text":"<p>En <code>fileparse.py</code>, hay un manejo de errores relacionado con excepciones causadas por una entrada incorrecta. Se parece a esto:</p> <pre><code># fileparse.py\nimport csv\nimport logging\nlog = logging.getLogger(__name__)\n\ndef parse_csv(lines, select=None, types=None, has_headers=True, delimiter=',', silence_errors=False):\n    '''\n    Analiza un archivo CSV en una lista de registros con conversi\u00f3n de tipo.\n    '''\n    if select and not has_headers:\n        raise RuntimeError('select requires column headers')\n\n    rows = csv.reader(lines, delimiter=delimiter)\n\n    # Leer los encabezados de archivo (si los hay)\n    headers = next(rows) if has_headers else []\n\n    # Si se han seleccionado columnas espec\u00edficas, crear \u00edndices para filtrar y establecer columnas de salida\n    if select:\n        indices = [ headers.index(colname) for colname in select ]\n        headers = select\n\n    records = []\n    for rowno, row in enumerate(rows, 1):\n        if not row:     # Omitir filas sin datos\n            continue\n\n        # Si se seleccionan \u00edndices de columnas espec\u00edficos, seleccionarlos\n        if select:\n            row = [ row[index] for index in indices]\n\n        # Aplicar conversi\u00f3n de tipo a la fila\n        if types:\n            try:\n                row = [func(val) for func, val in zip(types, row)]\n            except ValueError as e:\n                if not silence_errors:\n                    log.warning(\"Row %d: No se puede analizar %s\", rowno, row)\n                    log.debug(\"Row %d: Rez\u00f3n %s\", rowno, e)\n                continue\n\n        # Crea un diccionario o una tupla\n        if headers:\n            record = dict(zip(headers, row))\n        else:\n            record = tuple(row)\n        records.append(record)\n\n    return records\n</code></pre> <p>Ahora que has realizado estos cambios, prueba a usar Parte de tu c\u00f3digo contiene datos err\u00f3neos.</p> <pre><code>&gt;&gt;&gt; import report\n&gt;&gt;&gt; a = report.read_portfolio('Data/missing.csv')\nRow 4: Bad row: ['MSFT', '', '51.23']\nRow 7: Bad row: ['IBM', '', '70.44']\n&gt;&gt;&gt;\n</code></pre> <p>Si no hace nada, solo obtendr\u00e1 mensajes de registro para el nivel <code>WARNING</code> y superiores. La salida se ver\u00e1 como simples declaraciones de impresi\u00f3n. Sin embargo, Si configura el m\u00f3dulo de registro, obtendr\u00e1 informaci\u00f3n adicional sobre los niveles de registro, el m\u00f3dulo y m\u00e1s. Escriba estos pasos para comprobarlo:</p> <pre><code>&gt;&gt;&gt; import logging\n&gt;&gt;&gt; logging.basicConfig()\n&gt;&gt;&gt; a = report.read_portfolio('Data/missing.csv')\nWARNING:fileparse:Row 4: Bad row: ['MSFT', '', '51.23']\nWARNING:fileparse:Row 7: Bad row: ['IBM', '', '70.44']\n&gt;&gt;&gt;\n</code></pre> <p>Notar\u00e1s que no ves el resultado de la operaci\u00f3n <code>log.debug()</code>. Escriba esto para cambiar el nivel.</p> <pre><code>&gt;&gt;&gt; logging.getLogger('fileparse').setLevel(logging.DEBUG)\n&gt;&gt;&gt; a = report.read_portfolio('Data/missing.csv')\nWARNING:fileparse:Row 4: Bad row: ['MSFT', '', '51.23']\nDEBUG:fileparse:Row 4: Reason: invalid literal for int() with base 10: ''\nWARNING:fileparse:Row 7: Bad row: ['IBM', '', '70.44']\nDEBUG:fileparse:Row 7: Reason: invalid literal for int() with base 10: ''\n&gt;&gt;&gt;\n</code></pre> <p>Desactive todos los mensajes de registro, excepto los m\u00e1s cr\u00edticos:</p> <pre><code>&gt;&gt;&gt; logging.getLogger ('fileparse').setLevel(logging.CRITICAL)\n&gt;&gt;&gt; a = report.read_portfolio('Datos/missing.csv')\n&gt;&gt;&gt;\n</code></pre>"},{"location":"08_Testing_debugging/02_Logging/#ejercicio-83-agregar-registros-a-un-programa","title":"Ejercicio 8.3: Agregar registros a un programa","text":"<p>Para agregar registro a una aplicaci\u00f3n, necesita tener alg\u00fan mecanismo para inicializar el m\u00f3dulo de registro en el m\u00f3dulo principal. Una forma de hacerlo es incluir un c\u00f3digo de configuraci\u00f3n similar a este:</p> <pre><code># Este archivo establece la configuraci\u00f3n b\u00e1sica del m\u00f3dulo de registro.\n# Cambie la configuraci\u00f3n aqu\u00ed para ajustar la salida del registro seg\u00fan sea necesario.\nimport logging\nlogging.basicConfig(\n    filename = 'app.log',            # Nombre del archivo de registro (omitir para usar stderr)\n    filemode = 'w',                  # Modo de archivo (use 'a' para agregar)\n    level    = logging.WARNING,      # Nivel de registro DEBUG, INFO, WARNING, ERROR, or CRITICAL \n)\n</code></pre> <p>Nuevamente, deber\u00e1 colocar esto en alg\u00fan lugar de los pasos de inicio de su programa. Por ejemplo, \u00bfd\u00f3nde colocar\u00eda esto en su programa <code>report.py</code>?</p> <p>Contenido | Anterior (8.1 Pruebas) | Pr\u00f3ximo (8.3 Depuraci\u00f3n)</p>"},{"location":"08_Testing_debugging/03_Debugging/","title":"03_Debugging","text":"<p>Contenido | Anterior (8.2 Registro, manejo de errores y diagn\u00f3sticos) | Pr\u00f3ximo (9 Paquetes)</p>"},{"location":"08_Testing_debugging/03_Debugging/#83-depuracion","title":"8.3 Depuraci\u00f3n","text":""},{"location":"08_Testing_debugging/03_Debugging/#consejos-de-depuracion","title":"Consejos de depuraci\u00f3n","text":"<p>Entonces, su programa se ha bloqueado...</p> <pre><code>bash % python3 blah.py\nTraceback (\u00faltima llamada m\u00e1s reciente):\nArchivo \"blah.py\", l\u00ednea 13, en ?\nfoo()\nArchivo \"blah.py\", l\u00ednea 10, en foo\nbar()\nArchivo \"blah.py\", l\u00ednea 7, en bar\nspam()\nArchivo \"blah.py\", 4, en spam\nl\u00ednea x.append(3)\nAttributeError: el objeto 'int' no tiene el atributo 'append'\n</code></pre> <p>\u00bfY ahora qu\u00e9?!</p>"},{"location":"08_Testing_debugging/03_Debugging/#lectura-de-los-tracebacks","title":"Lectura de los tracebacks","text":"<p>La \u00faltima l\u00ednea es la causa espec\u00edfica del fallo.</p> <pre><code>bash % python3 blah.py\nTraceback (most recent call last):\nArchivo \"blah.py\", l\u00ednea 13, en ?\nfoo()\nArchivo \"blah.py\", l\u00ednea 10, en foo\nbar()\nArchivo \"blah.py\", l\u00ednea 7, en bar\nspam()\nArchivo \"blah.py\", 4, en spam\nl\u00ednea x.append(3)\n# Causa del fallo\nAttributeError: el objeto 'int' no tiene el atributo 'append'\n</code></pre> <p>Sin embargo, no siempre es f\u00e1cil de leer o comprender.</p> <p>CONSEJO PROFESIONAL: Pegue el traceback completo en Google.</p>"},{"location":"08_Testing_debugging/03_Debugging/#uso-del-repl","title":"Uso del REPL","text":"<p>Use la opci\u00f3n <code>-i</code> para mantener Python activo al ejecutar un script.</p> <pre><code>bash % python3 -i blah.py\nTraceback (most recent call last):\nArchivo \"blah.py\", l\u00ednea 13, en ?\nfoo()\nArchivo \"blah.py\", l\u00ednea 10, en foo\nbar()\nArchivo \"blah.py\", l\u00ednea 7, en bar\nspam()\nArchivo \"blah.py\", 4, en spam\nl\u00ednea x.append(3)\nAttributeError: el objeto 'int' no tiene el atributo 'append'\n&gt;&gt;&gt;\n</code></pre> <p>Conserva el estado del int\u00e9rprete. Eso significa que puede seguir investigando despu\u00e9s de la falla. Verificando los valores de las variables y otros estados.</p>"},{"location":"08_Testing_debugging/03_Debugging/#depuracion-con-print","title":"Depuraci\u00f3n con Print","text":"<p>La depuraci\u00f3n con <code>print()</code> es bastante com\u00fan.</p> <p>Consejo: aseg\u00farate de usar <code>repr()</code></p> <pre><code>def spam(x):\n    print('DEBUG:', repr(x))\n    ...\n</code></pre> <p><code>repr()</code> te muestra una representaci\u00f3n precisa de un valor. No la buena salida impresa.</p> <pre><code>&gt;&gt;&gt; from decimal import Decimal\n&gt;&gt;&gt; x = Decimal('3.4')\n# SIN `repr`\n&gt;&gt;&gt; print(x)\n3.4\n# CON `repr`\n&gt;&gt;&gt; print(repr(x))\nDecimal('3.4')\n&gt;&gt;&gt;\n</code></pre>"},{"location":"08_Testing_debugging/03_Debugging/#el-depurador-de-python","title":"El depurador de Python","text":"<p>Puedes iniciar manualmente el depurador dentro de un programa.</p> <pre><code>def some_function():\n    ...\n    breakpoint() # Ingresa al depurador (Python 3.7+)\n    ...\n</code></pre> <p>Esto inicia el depurador en la llamada <code>breakpoint()</code>.</p> <p>En versiones anteriores de Python, esto se hac\u00eda. A veces ver\u00e1s que se menciona esto en otras gu\u00edas de depuraci\u00f3n.</p> <pre><code>import pdb\n...\npdb.set_trace() # En lugar de `breakpoint()`\n...\n</code></pre>"},{"location":"08_Testing_debugging/03_Debugging/#ejecutar-bajo-el-depurador","title":"Ejecutar bajo el depurador","text":"<p>Tambi\u00e9n puedes ejecutar un programa completo bajo el depurador.</p> <pre><code>bash % python3 -m pdb someprogram.py\n</code></pre> <p>Ingresar\u00e1 autom\u00e1ticamente al depurador antes de la primera declaraci\u00f3n, lo que te permitir\u00e1 establecer puntos de interrupci\u00f3n y cambiar la configuraci\u00f3n.</p> <p>Comandos comunes del depurador:</p> <pre><code>(Pdb) help # Obtener ayuda\n(Pdb) w(here) # Imprimir seguimiento de la pila\n(Pdb) d(own) # Bajar un nivel de pila\n(Pdb) u(p) # Subir un nivel de pila\n(Pdb) b(reak) loc # Establecer un punto de interrupci\u00f3n\n(Pdb) s(tep) # Ejecutar una instrucci\u00f3n\n(Pdb) c(ontinue) # Continuar la ejecuci\u00f3n\n(Pdb) l(ist) # Listar el c\u00f3digo fuente\n(Pdb) a(rgs) # Imprimir los argumentos de la funci\u00f3n actual\n(Pdb) !statement # Ejecutar la instrucci\u00f3n\n</code></pre> <p>Para los puntos de interrupci\u00f3n, la ubicaci\u00f3n es una de las siguientes:</p> <pre><code>(Pdb) b 45 # L\u00ednea 45 en el archivo actual\n(Pdb) b file.py:45 # L\u00ednea 45 en file.py\n(Pdb) b foo # Funci\u00f3n foo() en el archivo actual\n(Pdb) b module.foo # Funci\u00f3n foo() en un m\u00f3dulo\n</code></pre>"},{"location":"08_Testing_debugging/03_Debugging/#ejercicios","title":"Ejercicios","text":""},{"location":"08_Testing_debugging/03_Debugging/#ejercicio-84-errores-que-errores","title":"Ejercicio 8.4: \u00bfErrores? \u00bfQu\u00e9 errores?","text":"<p>Funciona. \u00a1Env\u00edalo!</p> <p>Contenido | Anterior (8.2 Registro, manejo de errores y diagn\u00f3sticos) | Pr\u00f3ximo (9 Paquetes)</p>"},{"location":"09_Packages/00_Overview/","title":"00_Overview","text":"<p>Contenido | Anterior (8. Pruebas, registro y depuraci\u00f3n)</p>"},{"location":"09_Packages/00_Overview/#9-paquetes","title":"9 Paquetes","text":"<p>Concluimos el curso con algunos detalles sobre c\u00f3mo organizar su c\u00f3digo en una estructura de paquete. Tambi\u00e9n analizaremos la instalaci\u00f3n de paquetes de terceros y la preparaci\u00f3n para entregar su propio c\u00f3digo a otros.</p> <p>El tema del empaquetado es una parte en constante evoluci\u00f3n y excesivamente compleja del desarrollo de Python. En lugar de centrarse en herramientas espec\u00edficas, el enfoque principal de esta secci\u00f3n est\u00e1 en algunos principios generales de organizaci\u00f3n de c\u00f3digo que resultar\u00e1n \u00fatiles sin importar qu\u00e9 herramientas utilice m\u00e1s adelante para entregar c\u00f3digo o administrar dependencias.</p> <ul> <li>9.1 Paquetes</li> <li>9.2 M\u00f3dulos de terceros</li> <li>9.3 Entrega tu c\u00f3digo a terceross</li> </ul> <p>Contenido | Anterior (8. Pruebas, registro y depuraci\u00f3n)</p>"},{"location":"09_Packages/01_Packages/","title":"01_Packages","text":"<p>Contenido | Anterior (8.3 Depuraci\u00f3n) | Pr\u00f3ximo (9.2 M\u00f3dulos de terceros)</p>"},{"location":"09_Packages/01_Packages/#91-paquetes","title":"9.1 Paquetes","text":"<p>Si escribe un programa m\u00e1s grande, no querr\u00e1 organizarlo como una gran colecci\u00f3n de archivos independientes en el nivel superior. Esta secci\u00f3n presenta el concepto de paquete.</p>"},{"location":"09_Packages/01_Packages/#modulos","title":"M\u00f3dulos","text":"<p>Cualquier archivo fuente de Python es un m\u00f3dulo.</p> <pre><code># foo.py\n    def grok(a):\n        ...\n    def spam(b):\n        ...\n</code></pre> <p>Una declaraci\u00f3n <code>import</code> carga y ejecuta un m\u00f3dulo.</p> <pre><code># program.py\nimport foo\n\na = foo.grok(2)\nb = foo.spam('Hola')\n...\n</code></pre>"},{"location":"09_Packages/01_Packages/#paquetes-vs-modulos","title":"Paquetes vs. m\u00f3dulos","text":"<p>Para colecciones de c\u00f3digo m\u00e1s grandes, es com\u00fan organizar los m\u00f3dulos en un paquete.</p> <pre><code># Desde esto\npcost.py\nreport.py\nfileparse.py\n\n# a esto\nporty/\n    __init__.py\n    pcost.py\n    report.py\n    fileparse.py\n</code></pre> <p>Eliges un nombre y creas un directorio de nivel superior. <code>porty</code> en el ejemplo anterior (claramente elegir este nombre es el primer paso m\u00e1s importante).</p> <p>Agrega un archivo <code>__init__.py</code> al directorio. Puede estar vac\u00edo.</p> <p>Coloca tus archivos fuente en el directorio.</p>"},{"location":"09_Packages/01_Packages/#uso-de-un-paquete","title":"Uso de un paquete","text":"<p>Un paquete sirve como un espacio de nombres para las importaciones.</p> <p>Esto significa que ahora hay importaciones de varios niveles.</p> <pre><code>import porty.report\nport = porty.report.read_portfolio('Data/portfolio.csv')\n</code></pre> <p>Existen otras variaciones de las declaraciones de importaci\u00f3n.</p> <pre><code>from porty import report\nport = report.read_portfolio('Data/portfolio.csv')\n\nfrom porty.report import read_portfolio\nport = read_portfolio('Data/portfolio.csv')\n</code></pre>"},{"location":"09_Packages/01_Packages/#dos-problemas","title":"Dos problemas","text":"<p>Hay dos problemas principales con este enfoque.</p> <ul> <li>Las importaciones entre archivos del mismo paquete se interrumpen.</li> <li>Los scripts principales ubicados dentro del paquete se interrumpen.</li> </ul> <p>B\u00e1sicamente, todo se interrumpe. Pero, aparte de eso, funciona.</p>"},{"location":"09_Packages/01_Packages/#problema-importaciones","title":"Problema: Importaciones","text":"<p>Las importaciones entre archivos del mismo paquete ahora deben incluir el nombre del paquete en la importaci\u00f3n. Recuerde la estructura.</p> <pre><code>porty/\n    __init__.py\n    pcost.py\n    report.py\n    fileparse.py\n</code></pre> <p>Ejemplo de importaci\u00f3n modificado.</p> <pre><code># report.py\nfrom porty import fileparse\n\ndef read_portfolio(filename):\n    return fileparse.parse_csv(...)\n</code></pre> <p>Todas las importaciones son absolutas, no relativas.</p> <pre><code># report.py\nimport fileparse # FALLA. fileparse not found\n\n...\n</code></pre>"},{"location":"09_Packages/01_Packages/#importaciones-relativas","title":"Importaciones relativas","text":"<p>En lugar de usar directamente el nombre del paquete, puede usar <code>.</code> para hacer referencia al paquete actual.</p> <pre><code># report.py\nfrom . import fileparse\n\ndef read_portfolio(filename):\n    return fileparse.parse_csv(...)\n</code></pre> <p>Sintaxis:</p> <pre><code>from . import modname\n</code></pre> <p>Esto facilita cambiar el nombre del paquete.</p>"},{"location":"09_Packages/01_Packages/#problema-scripts-principales","title":"Problema: Scripts principales","text":"<p>Ejecutar un subm\u00f3dulo de paquete como un script principal falla.</p> <pre><code>bash % python3 porty/pcost.py # FALLA\n...\n</code></pre> <p>Raz\u00f3n: est\u00e1s ejecutando Python en un solo archivo y Python no ve el resto de la estructura del paquete correctamente (<code>sys.path</code> es incorrecto).</p> <p>Todas las importaciones fallan. Para solucionar esto, debes ejecutar tu programa de una manera diferente, usando la opci\u00f3n <code>-m</code>.</p> <pre><code>bash % python3 -m porty.pcost # FUNCIONA\n...\n</code></pre>"},{"location":"09_Packages/01_Packages/#archivos-__init__py","title":"Archivos <code>__init__.py</code>","text":"<p>El prop\u00f3sito principal de estos archivos es unir m\u00f3dulos.</p> <p>Ejemplo: consolidaci\u00f3n de funciones</p> <pre><code># porty/__init__.py\nfrom .pcost import portfolio_cost\nfrom .report import portfolio_report\n</code></pre> <p>Esto hace que los nombres aparezcan en el nivel superior al importar.</p> <pre><code>from porty import portfolio_cost\nportfolio_cost('portfolio.csv')\n</code></pre> <p>En lugar de usar las importaciones multinivel.</p> <pre><code>from porty import pcost\npcost.portfolio_cost('portfolio.csv')\n</code></pre>"},{"location":"09_Packages/01_Packages/#otra-solucion-para-los-scripts","title":"Otra soluci\u00f3n para los scripts","text":"<p>Como se indic\u00f3, ahora debe usar <code>-m package.module</code> para ejecutar scripts dentro de su paquete.</p> <pre><code>bash % python3 -m porty.pcost portfolio.csv\n</code></pre> <p>Existe otra alternativa: escriba un nuevo script de nivel superior.</p> <pre><code>#!/usr/bin/env python\n# pcost.py\nimport porty.pcost\nimport sys\nporty.pcost.main(sys.argv)\n</code></pre> <p>Este script se encuentra fuera del paquete. Por ejemplo, si observamos la estructura del directorio:</p> <pre><code>pcost.py # script de nivel superior\nporty/ # directorio de paquetes\n    __init__.py\n    pcost.py\n    ...\n</code></pre>"},{"location":"09_Packages/01_Packages/#estructura-de-la-aplicacion","title":"Estructura de la aplicaci\u00f3n","text":"<p>La organizaci\u00f3n del c\u00f3digo y la estructura de archivos son clave para la capacidad de mantenimiento de una aplicaci\u00f3n.</p> <p>No existe un enfoque \"universal\" para Python. Sin embargo, una estructura que funciona para muchos problemas es algo como esto.</p> <pre><code>porty-app/\n    README.txt\n    script.py # SCRIPT\n    porty/\n        # C\u00d3DIGO DE LA BIBLIOTECA\n        __init__.py\n        pcost.py\n        report.py\n        fileparse.py\n</code></pre> <p>El <code>porty-app</code> de nivel superior es un contenedor para todo lo dem\u00e1s: documentaci\u00f3n, scripts de nivel superior, ejemplos, etc.</p> <p>Nuevamente, los scripts de nivel superior (si los hay) deben existir fuera del paquete de c\u00f3digo. Un nivel por encima.</p> <pre><code>#!/usr/bin/env python\n# porty-app/script.py\nimport sys\nimport porty\n\nporty.report.main(sys.argv)\n</code></pre>"},{"location":"09_Packages/01_Packages/#ejercicios","title":"Ejercicios","text":"<p>En este punto, tienes un directorio con varios programas:</p> <pre><code>pcost.py            # calcula el costo de la cartera\nreport.py           # crea un informe\nticker.py           # produce un ticker de acciones en tiempo real\n</code></pre> <p>Hay una variedad de m\u00f3dulos de soporte con otras funciones:</p> <pre><code>stock.py            # Clase Stock\nportfolio.py        # Clase Portfolio\nfileparse.py        # An\u00e1lisis CSV\ntableformat.py      # Tablas formateadas\nfollow.py           # Seguimiento de un archivo de registro\ntypedproperty.py    # Propiedades de clase tipificadas\n</code></pre> <p>En este ejercicio, vamos a limpiar el c\u00f3digo y ponerlo en un paquete com\u00fan.</p>"},{"location":"09_Packages/01_Packages/#ejercicio-91-crear-un-paquete-simple","title":"Ejercicio 9.1: Crear un paquete simple","text":"<p>Cree un directorio llamado <code>porty/</code> y coloque todos los archivos de Python anteriores en \u00e9l. Adem\u00e1s, cree un archivo <code>__init__.py</code> vac\u00edo y col\u00f3quelo en el directorio. Deber\u00eda tener un directorio de archivos como este:</p> <pre><code>porty/\n    __init__.py\n    fileparse.py\n    follow.py\n    pcost.py\n    portfolio.py\n    report.py\n    stock.py\n    tableformat.py\n    ticker.py\n    typedproperty.py\n</code></pre> <p>Elimine el archivo <code>__pycache__</code> que se encuentra en su directorio. Este contiene m\u00f3dulos de Python precompilados de antes. Queremos comenzar de nuevo.</p> <p>Intente importar algunos de los m\u00f3dulos del paquete:</p> <pre><code>&gt;&gt;&gt; import porty.report\n&gt;&gt;&gt; import porty.pcost\n&gt;&gt;&gt; import porty.ticker\n</code></pre> <p>Si estas importaciones fallan, vaya al archivo apropiado y corrija las importaciones del m\u00f3dulo para incluir una importaci\u00f3n relativa al paquete. Por ejemplo, una declaraci\u00f3n como <code>import fileparse</code> podr\u00eda cambiar a lo siguiente:</p> <pre><code># report.py\nfrom . import fileparse\n...\n</code></pre> <p>Si tiene una declaraci\u00f3n como <code>from fileparse import parse_csv</code>, cambie el c\u00f3digo a lo siguiente:</p> <pre><code># report.py\nfrom .fileparse import parse_csv\n...\n</code></pre>"},{"location":"09_Packages/01_Packages/#ejercicio-92-crear-un-directorio-de-aplicacion","title":"Ejercicio 9.2: Crear un directorio de aplicaci\u00f3n","text":"<p>Poner todo el c\u00f3digo en un \"paquete\" no suele ser suficiente para una aplicaci\u00f3n. A veces hay archivos de soporte, documentaci\u00f3n, scripts y otras cosas. Estos archivos deben existir FUERA del directorio <code>porty/</code> que cre\u00f3 anteriormente.</p> <p>Cree un nuevo directorio llamado <code>porty-app</code>. Mueva el directorio <code>porty</code> que cre\u00f3 en el Ejercicio 9.1 a ese directorio. Copie los archivos de prueba <code>Data/portfolio.csv</code> y <code>Data/prices.csv</code> en este directorio. Adem\u00e1s, cree un archivo <code>README.txt</code> con informaci\u00f3n sobre usted. Ahora, su c\u00f3digo deber\u00eda estar organizado de la siguiente manera:</p> <pre><code>porty-app/\n    portfolio.csv\n    prices.csv\n    README.txt\n    porty/\n        __init__.py\n        fileparse.py\n        follow.py\n        pcost.py\n        portfolio.py\n        report.py\n        stock.py\n        tableformat.py\n        ticker.py\n        typedproperty.py\n</code></pre> <p>Para ejecutar su c\u00f3digo, debe asegurarse de estar trabajando en el directorio de nivel superior <code>porty-app/</code>. Por ejemplo, desde la terminal:</p> <pre><code>bash % cd porty-app\nbash % python3\n&gt;&gt;&gt; import porty.report\n&gt;&gt;&gt;\n</code></pre> <p>Intente ejecutar algunos de sus scripts anteriores como un programa principal:</p> <pre><code>bash % cd porty-app\nbash % python3 -m porty.report portfolio.csv prices.csv txt\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n\nbash %\n</code></pre>"},{"location":"09_Packages/01_Packages/#ejercicio-93-scripts-de-nivel-superior","title":"Ejercicio 9.3: Scripts de nivel superior","text":"<p>Usar el comando <code>python -m</code> suele ser un poco extra\u00f1o. Es posible que desee escribir un script de nivel superior que simplemente se ocupe de las rarezas de los paquetes. Cree un script <code>print-report.py</code> que produzca el informe anterior:</p> <pre><code>#!/usr/bin/env python3\n# print-report.py\nimport sys\nfrom porty.report import main\nmain(sys.argv)\n</code></pre> <p>Coloque este script en el directorio de nivel superior <code>porty-app/</code>. Aseg\u00farate de que puedes ejecutarlo en esa ubicaci\u00f3n:</p> <pre><code>bash % cd porty-app\nbash % python3 print-report.py portfolio.csv prices.csv txt\n     Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n\nbash %\n</code></pre> <p>Tu c\u00f3digo final ahora deber\u00eda estar estructurado de manera similar a esto:</p> <pre><code>porty-app/\n    portfolio.csv\n    prices.csv\n    print-report.py\n    README.txt\n    porty/\n        __init__.py\n        fileparse.py\n        follow.py\n        pcost.py\n        portfolio.py\n        report.py\n        stock.py\n        tableformat.py\n        ticker.py\n        typedproperty.py\n</code></pre> <p>Contenido | Anterior (8.3 Depuraci\u00f3n) | Pr\u00f3ximo (9.2 M\u00f3dulos de terceros)</p>"},{"location":"09_Packages/02_Third_party/","title":"02_Third_party","text":"<p>Contenido | Anterior (9.1 Paquetes) | Pr\u00f3ximo (9.3 Entrega tu c\u00f3digo a terceros)</p>"},{"location":"09_Packages/02_Third_party/#92-modulos-de-terceros","title":"9.2 M\u00f3dulos de terceros","text":"<p>Python tiene una gran biblioteca de m\u00f3dulos integrados (bater\u00edas incluidas).</p> <p>Hay incluso m\u00e1s m\u00f3dulos de terceros. Cons\u00faltelos en el \u00cdndice de paquetes de Python o PyPi. O simplemente haga una b\u00fasqueda en Google de un tema espec\u00edfico.</p> <p>C\u00f3mo manejar dependencias de terceros es un tema en constante evoluci\u00f3n con Python. Esta secci\u00f3n simplemente cubre los conceptos b\u00e1sicos para ayudarlo a comprender c\u00f3mo funciona.</p>"},{"location":"09_Packages/02_Third_party/#la-ruta-de-busqueda-de-modulos","title":"La ruta de b\u00fasqueda de m\u00f3dulos","text":"<p><code>sys.path</code> es un directorio que contiene la lista de todos los directorios revisados \u200b\u200bpor la declaraci\u00f3n <code>import</code>. M\u00edralo:</p> <pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.path\n... mira el resultado...\n&gt;&gt;&gt;\n</code></pre> <p>Si importas algo y no est\u00e1 ubicado en uno de esos directorios, obtendr\u00e1s una excepci\u00f3n <code>ImportError</code>.</p>"},{"location":"09_Packages/02_Third_party/#modulos-de-la-biblioteca-estandar","title":"M\u00f3dulos de la biblioteca est\u00e1ndar","text":"<p>Los m\u00f3dulos de la biblioteca est\u00e1ndar de Python generalmente provienen de una ubicaci\u00f3n como <code>/usr/local/lib/python3.6</code>. Puedes averiguarlo con certeza haciendo una prueba corta:</p> <pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; re\n&lt;module 're' from '/usr/local/lib/python3.6/re.py'&gt;\n&gt;&gt;&gt;\n</code></pre> <p>Simplemente mirar un m\u00f3dulo en el REPL es un buen consejo de depuraci\u00f3n que debes conocer. Te mostrar\u00e1 la ubicaci\u00f3n del archivo.</p>"},{"location":"09_Packages/02_Third_party/#modulos-de-terceros","title":"M\u00f3dulos de terceros","text":"<p>Los m\u00f3dulos de terceros suelen estar ubicados en un directorio <code>site-packages</code> dedicado. Lo ver\u00e1s si realizas los mismos pasos que los anteriores:</p> <pre><code>&gt;&gt;&gt; import numpy\n&gt;&gt;&gt; numpy\n&lt;module 'numpy' from '/usr/local/lib/python3.6/site-packages/numpy/__init__.py'&gt;\n&gt;&gt;&gt;\n</code></pre> <p>Nuevamente, mirar un m\u00f3dulo es un buen consejo de depuraci\u00f3n si est\u00e1s tratando de averiguar por qu\u00e9 algo relacionado con <code>import</code> no est\u00e1 funcionando como se esperaba.</p>"},{"location":"09_Packages/02_Third_party/#instalacion-de-modulos","title":"Instalaci\u00f3n de m\u00f3dulos","text":"<p>La t\u00e9cnica m\u00e1s com\u00fan para instalar un m\u00f3dulo de terceros es usar <code>pip</code>. Por ejemplo:</p> <pre><code>bash % python3 -m pip install packagename\n</code></pre> <p>Este comando descargar\u00e1 el paquete y lo instalar\u00e1 en el directorio <code>site-packages</code>.</p>"},{"location":"09_Packages/02_Third_party/#problemas","title":"Problemas","text":"<ul> <li>Es posible que est\u00e9s usando una instalaci\u00f3n de Python que no controlas directamente.</li> <li>Una instalaci\u00f3n aprobada por la empresa</li> <li>Est\u00e1s usando la versi\u00f3n de Python que viene con el sistema operativo.</li> <li>Es posible que no tengas permiso para instalar paquetes globales en la computadora.</li> <li>Es posible que existan otras dependencias.</li> </ul>"},{"location":"09_Packages/02_Third_party/#entornos-virtuales","title":"Entornos virtuales","text":"<p>Una soluci\u00f3n com\u00fan para los problemas de instalaci\u00f3n de paquetes es crear un denominado \"entorno virtual\" para ti mismo. Naturalmente, no existe una \"\u00fanica forma\" de hacerlo; de hecho, existen varias herramientas y t\u00e9cnicas que compiten entre s\u00ed. Sin embargo, si est\u00e1s usando una instalaci\u00f3n est\u00e1ndar de Python, puedes intentar escribir lo siguiente:</p> <pre><code>bash % python3 -m venv mypython\nbash %\n</code></pre> <p>Despu\u00e9s de unos minutos de espera, tendr\u00e1s un nuevo directorio <code>mypython</code> que es tu propia peque\u00f1a instalaci\u00f3n de Python. Dentro de ese directorio encontrar\u00e1s un directorio <code>bin/</code> (Unix) o un directorio <code>Scripts/</code> (Windows). Si ejecuta el script <code>activate</code> que se encuentra all\u00ed, \"activar\u00e1\" esta versi\u00f3n de Python, convirti\u00e9ndolo en el comando <code>python</code> predeterminado para el shell. Por ejemplo:</p> <pre><code># UNIX\nbash % source mypython/bin/activate \n(mypython) bash % # UNIX\n\n# Windows\nC:\\Users\\tu_nombre\\practical-python\\Work&gt;cd porty-app\nC:\\Users\\tu_nombre\\practical-python\\Work\\porty-app&gt; mypython\\Scripts\\activate\n(mypython) C:\\Users\\tu_nombre\\practical-python\\Work\\porty-app&gt;  \n</code></pre> <p>Desde aqu\u00ed, ahora puede comenzar a instalar paquetes de Python por su cuenta. Por ejemplo:</p> <pre><code>(mypython) bash % python3 -m pip install pandas\n...\n</code></pre> <p>Para experimentar y probar diferentes paquetes, un entorno virtual generalmente funcionar\u00e1 bien. Si, por otro lado, est\u00e1 creando una aplicaci\u00f3n y tiene dependencias de paquetes espec\u00edficas, ese es un problema ligeramente diferente.</p>"},{"location":"09_Packages/02_Third_party/#manejo-de-dependencias-de-terceros-en-su-aplicacion","title":"Manejo de dependencias de terceros en su aplicaci\u00f3n","text":"<p>Si ha escrito una aplicaci\u00f3n y tiene dependencias de terceros espec\u00edficas, un desaf\u00edo se relaciona con la creaci\u00f3n y preservaci\u00f3n del entorno que incluye su c\u00f3digo y las dependencias. Lamentablemente, esta ha sido un \u00e1rea de gran confusi\u00f3n y cambios frecuentes durante la existencia de Python. Sigue evolucionando incluso ahora.</p> <p>En lugar de proporcionar informaci\u00f3n que seguramente quedar\u00e1 desactualizada pronto, le recomiendo que consulte la Gu\u00eda del usuario de empaquetado de Python.</p>"},{"location":"09_Packages/02_Third_party/#ejercicios","title":"Ejercicios","text":""},{"location":"09_Packages/02_Third_party/#ejercicio-94-creacion-de-un-entorno-virtual","title":"Ejercicio 9.4: Creaci\u00f3n de un entorno virtual","text":"<p>Vea si puede recrear los pasos para crear un entorno virtual e instalar pandas en \u00e9l como se muestra arriba.</p> <p>Contenido | Anterior (9.1 Paquetes) | Pr\u00f3ximo (9.3 Entrega tu c\u00f3digo a terceros)</p>"},{"location":"09_Packages/03_Distribution/","title":"03_Distribution","text":"<p>Contenido | Anterior (9.2 M\u00f3dulos de terceros) | Pr\u00f3ximo (Fin)</p>"},{"location":"09_Packages/03_Distribution/#93-entrega-tu-codigo-a-terceros","title":"9.3 Entrega tu c\u00f3digo a terceros","text":"<p>En alg\u00fan momento, es posible que desee entregar su c\u00f3digo a otra persona, posiblemente solo a un compa\u00f1ero de trabajo. Esta secci\u00f3n proporciona la t\u00e9cnica m\u00e1s b\u00e1sica para hacerlo. Para obtener informaci\u00f3n m\u00e1s detallada, deber\u00e1 consultar la Gu\u00eda del usuario de empaquetado de Python.</p>"},{"location":"09_Packages/03_Distribution/#creacion-de-un-archivo-setuppy","title":"Creaci\u00f3n de un archivo setup.py","text":"<p>Agregue un archivo <code>setup.py</code> al nivel superior del directorio de su proyecto.</p> <pre><code># setup.py\nimport setuptools\n\nsetuptools.setup(\n    name=\"porty\",\n    version=\"0.0.1\",\n    author=\"Your Name\",\n    author_email=\"you@example.com\",\n    description=\"Practical Python Code\",\n    packages=setuptools.find_packages(),\n)\n</code></pre>"},{"location":"09_Packages/03_Distribution/#creacion-de-manifestin","title":"Creaci\u00f3n de MANIFEST.in","text":"<p>Si hay archivos adicionales asociados con su proyecto, especif\u00edquelos con un archivo <code>MANIFEST.in</code>. Por ejemplo:</p> <pre><code># MANIFEST.in\ninclude *.csv\n</code></pre> <p>Coloque el archivo <code>MANIFEST.in</code> en el mismo directorio que <code>setup.py</code>.</p>"},{"location":"09_Packages/03_Distribution/#creacion-de-una-distribucion-de-codigo-fuente","title":"Creaci\u00f3n de una distribuci\u00f3n de c\u00f3digo fuente","text":"<p>Para crear una distribuci\u00f3n de su c\u00f3digo, utilice el archivo <code>setup.py</code>. Por ejemplo:</p> <pre><code>bash % python3 setup.py sdist\n</code></pre> <p>Esto crear\u00e1 un archivo <code>.tar.gz</code> o <code>.zip</code> en el directorio <code>dist/</code>. Ese archivo es algo que ahora puedes regalar a otros.</p>"},{"location":"09_Packages/03_Distribution/#instalacion-de-tu-codigo","title":"Instalaci\u00f3n de tu c\u00f3digo","text":"<p>Otros pueden instalar tu c\u00f3digo Python usando <code>pip</code> de la misma manera que lo hacen con otros paquetes. Simplemente necesitan proporcionar el archivo creado en el paso anterior. Por ejemplo:</p> <pre><code>bash % python3 -m pip install porty-0.0.1.tar.gz\n</code></pre>"},{"location":"09_Packages/03_Distribution/#comentario","title":"Comentario","text":"<p>Los pasos anteriores describen los conceptos b\u00e1sicos m\u00e1s m\u00ednimos para crear un paquete de c\u00f3digo Python que puedes regalar a otra persona. En realidad, puede ser mucho m\u00e1s complicado dependiendo de las dependencias de terceros, si tu aplicaci\u00f3n incluye o no c\u00f3digo externo (es decir, C/C++), etc. Cubrir eso est\u00e1 fuera del alcance de este curso. Solo hemos dado un peque\u00f1o primer paso.</p>"},{"location":"09_Packages/03_Distribution/#ejercicios","title":"Ejercicios","text":""},{"location":"09_Packages/03_Distribution/#ejercicio-95-crea-un-paquete","title":"Ejercicio 9.5: Crea un paquete","text":"<p>Toma el c\u00f3digo <code>porty-app/</code> que creaste para el Ejercicio 9.3 y ve si puedes recrear los pasos que se describen aqu\u00ed. Espec\u00edficamente, agrega un archivo <code>setup.py</code> y un archivo <code>MANIFEST.in</code> al directorio de nivel superior. Crea un archivo de distribuci\u00f3n de origen ejecutando <code>python setup.py sdist</code>.</p> <p>Como paso final, ve si puedes instalar tu paquete en un entorno virtual de Python.</p> <p>Contenido | Anterior (9.2 M\u00f3dulos de terceros) | Pr\u00f3ximo (Fin)</p>"},{"location":"09_Packages/TheEnd/","title":"\u00a1Fin!","text":"<p>Has llegado al final del curso. Gracias por tu tiempo y tu atenci\u00f3n. \u00a1Que tu futuro hackeo de Python sea divertido y productivo!</p> <p>Siempre me alegra recibir comentarios. Puedes encontrarme en https://dabeaz.com o en Twitter en @dabeaz. - David Beazley.</p> <p>Por errores en la traducci\u00f3n Mario.Melchiori\\@gmail.com</p> <p>Contenido | Inicio</p>"}]}