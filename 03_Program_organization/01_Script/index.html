
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Mario R. Melchiori">
      
      
        <link rel="canonical" href="https://mrmelchi.github.io/Python_Practico/03_Program_organization/01_Script/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>00_Overview - Python Practico</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#31-creacion-de-scripts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Python Practico" class="md-header__button md-logo" aria-label="Python Practico" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python Practico
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              00_Overview
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Python Practico" class="md-nav__button md-logo" aria-label="Python Practico" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Python Practico
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#que-es-un-script" class="md-nav__link">
    <span class="md-ellipsis">
      ¿Qué es un script?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#un-problema" class="md-nav__link">
    <span class="md-ellipsis">
      Un problema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definicion-de-cosas" class="md-nav__link">
    <span class="md-ellipsis">
      Definición de cosas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definicion-de-funciones" class="md-nav__link">
    <span class="md-ellipsis">
      Definición de funciones
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#que-es-una-funcion" class="md-nav__link">
    <span class="md-ellipsis">
      ¿Qué es una función?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definicion-de-funcion" class="md-nav__link">
    <span class="md-ellipsis">
      Definición de función
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estilo-de-abajo-hacia-arriba" class="md-nav__link">
    <span class="md-ellipsis">
      Estilo de abajo hacia arriba
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diseno-de-funciones" class="md-nav__link">
    <span class="md-ellipsis">
      Diseño de funciones
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cadenas-de-documentacion" class="md-nav__link">
    <span class="md-ellipsis">
      Cadenas de documentación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anotaciones-de-tipo" class="md-nav__link">
    <span class="md-ellipsis">
      Anotaciones de tipo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicios
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ejercicios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejercicio-31-estructurar-un-programa-como-una-coleccion-de-funciones" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 3.1: Estructurar un programa como una colección de funciones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-32-creacion-de-una-funcion-de-nivel-superior-para-la-ejecucion-del-programa" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 3.2: Creación de una función de nivel superior para la ejecución del programa
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comentario" class="md-nav__link">
    <span class="md-ellipsis">
      Comentario
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<p><a href="../../Contents/">Contenido</a> | <a href="../../02_Working_with_data/07_Objects/">Anterior (2.7 Objetos)</a> | <a href="../02_More_functions/">Próximo (3.2 Más detalles sobre las funciones)</a></p>
<h1 id="31-creacion-de-scripts">3.1 Creación de scripts</h1>
<p>En esta parte, analizamos más de cerca la práctica de escribir scripts de Python.</p>
<h2 id="que-es-un-script">¿Qué es un script?</h2>
<p>Un <em>script</em> es un programa que ejecuta una serie de instrucciones y se detiene.</p>
<pre><code class="language-python"># program.py

declaración1
declaración2
declaración3
...
</code></pre>
<p>Hasta este punto, hemos estado escribiendo principalmente scripts.</p>
<h2 id="un-problema">Un problema</h2>
<p>Si escribe un script útil, crecerá en características y funcionalidades. Es posible que desee aplicarlo a otros problemas relacionados. Con el tiempo, podría convertirse en una aplicación crítica. Y si no tienes cuidado, puede convertirse en un gran lío. Así que, organicémonos.</p>
<h2 id="definicion-de-cosas">Definición de cosas</h2>
<p>Los nombres siempre deben definirse antes de que se utilicen más adelante.</p>
<pre><code class="language-python">def square(x):
    return x*x

a = 42
b = a + 2 # Requiere que `a` esté definido

z = square(b) # Requiere que `square` y `b` estén definidos
</code></pre>
<p><strong>El orden es importante.</strong> Casi siempre colocas las definiciones de variables y funciones cerca de la parte superior.</p>
<h2 id="definicion-de-funciones">Definición de funciones</h2>
<p>Es una buena idea poner todo el código relacionado con una sola <em>tarea</em> en un solo lugar. Usa una función.</p>
<pre><code class="language-python">def read_prices(filename):
    prices = {}
    with open(filename) as f:
        f_csv = csv.reader(f)
        for row in f_csv:
            prices[row[0]] = float(row[1])
    return prices
</code></pre>
<p>Una función también simplifica las operaciones repetidas.</p>
<pre><code class="language-python">oldprices = read_prices('oldprices.csv')
newprices = read_prices('newprices.csv')
</code></pre>
<h2 id="que-es-una-funcion">¿Qué es una función?</h2>
<p>Una función es una secuencia de instrucciones con nombre.</p>
<pre><code class="language-python">def funcname(args):
    statement
    statement
    ...
    return result
</code></pre>
<p><em>Cualquier</em> instrucción de Python se puede utilizar dentro de ella.</p>
<pre><code class="language-python">def foo():
    import math
    print(math.sqrt(2))
    help(math)
</code></pre>
<p>No hay instrucciones <em>especiales</em> en Python (lo que hace que sea fácil de recordar).</p>
<h2 id="definicion-de-funcion">Definición de función</h2>
<p>Las funciones se pueden <em>definir</em> en cualquier orden.</p>
<pre><code class="language-python">def foo(x):
    bar(x)

def bar(x):
    statements

# O
def bar(x):
    statements

def foo(x):
    bar(x)
</code></pre>
<p>Las funciones solo se deben definir antes de <em>utilizarse</em> (o llamarse) durante la ejecución del programa.</p>
<pre><code class="language-python">foo(3) # foo ya debe estar definido
</code></pre>
<p>Estilísticamente, es probablemente más común ver funciones definidas de manera <em>de abajo hacia arriba</em>.</p>
<h2 id="estilo-de-abajo-hacia-arriba">Estilo de abajo hacia arriba</h2>
<p>Las funciones se tratan como bloques de construcción. Los bloques más pequeños/simples van primero.</p>
<pre><code class="language-python"># myprogram.py
def foo(x):
    ...

def bar(x):
    ...
    foo(x) # Definido arriba
    ...

def spam(x):
    ...
    bar(x) # Definido arriba
    ...

spam(42) # El código que usa las funciones aparece al final
</code></pre>
<p>Las funciones posteriores se basan en funciones anteriores. Nuevamente, esto es solo una cuestión de estilo. Lo único que importa en el programa anterior es que la llamada a <code>spam(42)</code> va al final.</p>
<h2 id="diseno-de-funciones">Diseño de funciones</h2>
<p>Idealmente, las funciones deberían ser una <em>caja negra</em>. Solo deberían operar en entradas pasadas y evitar variables globales y efectos secundarios misteriosos. Sus principales objetivos: <em>Modularidad</em> y <em>Predictibilidad</em>.</p>
<h2 id="cadenas-de-documentacion">Cadenas de documentación</h2>
<p>Es una buena práctica incluir la documentación en forma de cadena de documentación. Las cadenas de documentación son cadenas que se escriben inmediatamente después del nombre de la función. Alimentan <code>help()</code>, IDEs y otras herramientas.</p>
<pre><code class="language-python">def read_prices(filename):
    '''
    Leer precios de un archivo CSV de nombre y datos de precios
    '''
    prices = {}
    with open(filename) as f:
      f_csv = csv.reader(f)
      for row in f_csv:
          prices[row[0]] = float(row[1])
    return prices
</code></pre>
<p>Una buena práctica para las cadenas de documentación es escribir un resumen breve de una oración de lo que hace la función. Si se necesita más información, incluya un breve ejemplo de uso junto con una descripción más detallada de los argumentos.</p>
<h2 id="anotaciones-de-tipo">Anotaciones de tipo</h2>
<p>También puede agregar sugerencias de tipo opcionales a las definiciones de funciones.</p>
<pre><code class="language-python">def read_prices(filename: str) -&gt; dict:
    '''
    Leer precios de un archivo CSV de nombre y datos de precios
    '''
    prices = {}
    with open(filename) as f:
      f_csv = csv.reader(f)
      for row in f_csv:
          prices[row[0]] = float(row[1])
    return prices
</code></pre>
<p>Las sugerencias no hacen nada operativamente. Son puramente informativas. Sin embargo, pueden ser utilizadas por IDE, verificadores de código y otras herramientas para hacer más.</p>
<h2 id="ejercicios">Ejercicios</h2>
<p>En la sección 2, escribió un programa llamado <code>report.py</code> que imprimía un informe que mostraba el rendimiento de una cartera de acciones. Este programa constaba de algunas funciones. Por ejemplo:</p>
<pre><code class="language-python"># report.py
import csv

def read_portfolio(filename):
    '''
    Leer un archivo de cartera de acciones en una lista de diccionarios con claves
    nombre, acciones y precio.
    '''
    portfolio = []
    with open(filename) as f:
        rows = csv.reader(f)
        headers = next(rows)

        for row in rows:
            record = dict(zip(headers, row))
            stock = {
                'name' : record['name'],
                'shares' : int(record['shares']),
                'price' : float(record['price'])
            }
            portfolio.append(stock)
    return portfolio
...
</code></pre>
<p>Sin embargo, también había partes del programa que solo realizaban una serie de cálculos programados. Este código apareció cerca del final del programa. Por ejemplo:</p>
<pre><code class="language-python">...

# Generar el informe

headers = ('Name', 'Shares', 'Price', 'Change')
print('%10s %10s %10s %10s'  % headers)
print(('-' * 10 + ' ') * len(headers))
for row in report:
    print('%10s %10d %10.2f %10.2f' % row)
...
</code></pre>
<p>En este ejercicio, tomaremos este programa y lo organizaremos un poco más en torno al uso de funciones.</p>
<h3 id="ejercicio-31-estructurar-un-programa-como-una-coleccion-de-funciones">Ejercicio 3.1: Estructurar un programa como una colección de funciones</h3>
<p>Modifique su programa <code>report.py</code> para que todas las operaciones principales, incluidos los cálculos y la salida, se realicen mediante una colección de funciones. Específicamente:</p>
<ul>
<li>Cree una función <code>print_report(report)</code> que imprima el informe. * Cambie la última parte del programa para que no sea más que una serie de llamadas de función y ningún otro cálculo.</li>
</ul>
<h3 id="ejercicio-32-creacion-de-una-funcion-de-nivel-superior-para-la-ejecucion-del-programa">Ejercicio 3.2: Creación de una función de nivel superior para la ejecución del programa</h3>
<p>Tome la última parte de su programa y empaquetela en una sola función <code>portfolio_report(portfolio_filename, prices_filename)</code>. Haga que la función funcione de modo que la siguiente llamada de función cree el informe como antes:</p>
<pre><code class="language-python">portfolio_report('Data/portfolio.csv', 'Data/prices.csv')
</code></pre>
<p>En esta versión final, su programa no será más que una serie de definiciones de funciones seguidas de una única llamada de función a <code>portfolio_report()</code> al final (que ejecuta todos los pasos involucrados en el programa).</p>
<p>Al convertir su programa en una única función, se vuelve fácil ejecutarlo en diferentes entradas. Por ejemplo, prueba estas declaraciones de forma interactiva después de ejecutar tu programa:</p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio_report('Data/portfolio2.csv', 'Data/prices.csv')
... Observa la salida ...
&gt;&gt;&gt; files = ['Data/portfolio.csv', 'Data/portfolio2.csv']
&gt;&gt;&gt; for name in files:
        print(f'{name:-^43s}')
        portfolio_report(name, 'Data/prices.csv')
        print()

... Observa la salida ...
&gt;&gt;&gt;
</code></pre>
<h2 id="comentario">Comentario</h2>
<p>Python hace que sea muy fácil escribir código de script relativamente desestructurado, en el que solo tienes un archivo con una secuencia de declaraciones. En el panorama general, casi siempre es mejor utilizar funciones siempre que puedas. En algún momento, ese script crecerá y desearás tener un poco más de organización. Además, un hecho poco conocido es que Python se ejecuta un poco más rápido si se utilizan funciones.</p>
<p><a href="../../Contents/">Contenido</a> | <a href="../../02_Working_with_data/07_Objects/">Anterior (2.7 Objetos)</a> | <a href="../02_More_functions/">Próximo (3.2 Más detalles sobre las funciones)</a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>